00:00:13 <shapr> riddleb0x: Neat nick
00:00:23 <shapr> goedemorgen itkovian
00:01:59 <Itkovian> god morning shapr
00:02:10 <Itkovian> (if it ain't correct blame translation software)
00:07:35 <kolmodin> god morgon in swedish, or just morrn
00:07:42 <kolmodin> morning!
00:08:10 <boegel> shapr: goeiemorgen ! :)
00:08:23 <kolmodin> right, I'm oof
00:08:28 <kolmodin> -o+f
00:08:58 <boegel> fof ?
00:10:05 <shapr> Speaking of which, does anyone here use FOAF?
00:11:01 <Itkovian> heh, the powerbooks just received an upgrade.
00:30:05 <C-Keen> moin.
00:35:11 <shapr> jiihaa
00:37:16 <basti_> shapr: ...sometimes... ;)
00:38:35 * shapr boings cheerfully
00:38:45 <shapr> Megzl: So, you gonna learn Haskell or continue complaining that it's not C++?
00:39:16 <shapr> Megzl: The second option won't help you much, ya know.
00:41:13 <ProfTeggy> Morning
00:41:32 <shapr> good morning ProfTeggy! What's today's query?
00:42:13 <ProfTeggy> :-)
00:42:25 <ProfTeggy> Actually I am in slide hacking mode, the semester started this week
00:42:50 <ProfTeggy> I'm designing an all new slide set about database-supported XML processing
00:42:58 <ProfTeggy> Lots of work, will go for 600+ slides
00:43:17 <ProfTeggy> And I'm on page 58 only ... :-)
00:43:33 <shapr> yow
00:46:32 <pesco> C-Keen: Moin Moin. Are you from Hamburg?
00:46:34 <pejo> ProfT: designing a new course?
00:46:49 <pesco> .ui coi la shapr
00:46:52 <ProfTeggy> pejo, yes
00:47:04 <pesco> capr :)
00:47:08 <C-Keen> pesco: no I am not. rather down south: Nuremberg
00:47:10 <ProfTeggy> pejo, thanks for the SQL query by the way.  It's interesting in several ways
00:47:30 <pesco> C-Keen: Okay, worth a guess, I guess. ;)
00:47:36 <ProfTeggy> pejo, it contains some unusual idioms which should not pose any difficulty to any moderately decent optimizer
00:47:42 <pejo> ProfT: oi. How many hours of lecturing do you plan 600 slides to work for?
00:48:00 <ProfTeggy> pejo, the over structure of the query is not as complicated as it seems, but there is correlation in it
00:48:07 <ProfTeggy> s/over/overall/
00:48:31 <ProfTeggy> pejo, good question.  It's 15 slides a day approx.
00:48:53 <pejo> ProfT: the query choked some Oracle version atleast (8.x?), on a dual Sparc UIII 750Mhz with 8G ram or so.
00:48:55 <ProfTeggy> Slowly at the beginning, gaining speed as I go
00:49:35 <pejo> ProfT, apparently they rewrote the query in some later version of the software, no 30 sec delays when logging in now.
00:50:00 <ProfTeggy> pejo, there are strange idioms in it like    0 < (SELECT COUNT(..) ... )
00:50:15 <ProfTeggy> which should rewrite into an EXISTS clause, obviously
00:50:43 <ProfTeggy> If you're unlucky, the optimizer might mis that and miss the early bailout inherent in existential quantification
00:50:49 <ProfTeggy> s/mis/miss/
00:51:51 <ProfTeggy> pejo, to fully assess the complexity of this thing, one would also need information on the physical design of the DB, indexes and their clustering mode, for example.
00:52:01 <ProfTeggy> Also, knowledge about keys would be essential
00:53:34 <ProfTeggy> Otherwise, this query is quite "well-behaved"
00:53:43 <ProfTeggy> Only conunctive selections: very good
00:54:22 <ProfTeggy> Non-correlated subqueries (in the HAVING clause, for example): good, can unfold these
00:54:50 <ProfTeggy> So it's conceivable that your colleagues could do something about this query.
00:57:37 <pejo> ProfT, oh, it's purchased software. We usually don't mess with that since the vendors get really upset about it.
00:59:11 <ProfTeggy> Woops
00:59:13 <ProfTeggy> I see.
00:59:21 <ProfTeggy> Claim your money back then ;-)
01:00:53 <pejo> ProfT, heh, you know how universities (not) work. :-)
01:16:39 <glguy> anyone awake to give me some quick haskell help?
01:17:22 <pesco> glguy: shoot
01:17:35 <glguy> loadMatrix h dim = do
01:17:35 <glguy>                     initValues <- makeMatrix h 1 dim
01:17:35 <glguy>                     matrix <- array ((1,1),(dim,dim)) initValues
01:17:35 <glguy>                     return matrix
01:17:42 <glguy> What am I doing wrong here
01:17:52 <glguy> initValues is a [((Int, Int), Double)]
01:18:11 <Cale> makeMatrix returns an IO [((Int, Int), Double)]?
01:18:24 <glguy> an Array, not a list
01:18:28 <glguy> oh
01:18:28 <glguy> yeah
01:18:35 <glguy> yeah, what you said
01:18:59 <kmg> is there a way to handle rrd (round robin databases - rrdtool) from within haskell ?
01:19:14 <glguy> is this a matter of needing to lift something
01:19:21 <Cale> oh
01:19:23 <Cale> heh
01:19:32 <Cale> array doesn't return an IO something
01:19:35 <pesco> Hah. :)
01:19:47 <Cale> return $ array ((1,1),(dim,dim)) initValues
01:19:56 <Cale> rather than return matrix
01:19:59 <Cale> or:
01:20:05 <Cale> let matrix = array ((1,1),(dim,dim)) initValues
01:20:09 <glguy> done
01:20:09 <glguy> works
01:20:10 <Cale> return matrix
01:20:40 <glguy> because, array doesn't return an IO monad...
01:20:45 <glguy> damn tht was simple
01:21:59 <pesco> Herer's the show-off version: loadMatrix h n = liftM (array ((1,1),(n,n))) (makeMatrix h 1 dim)
01:22:50 <pesco> (What does makeMatrix do, read the values from a handle? Maybe readMatrix would be a better name?)
01:23:02 <Cale> dim -> n ?
01:23:09 <pesco> Oh, right.
01:23:12 <pesco> Missed one.
01:23:32 <pesco> (dim,dim) looks so big.
01:26:40 <pesco> hGetMatrix and hGetMatrixelems would be perfectly in sync with System.IO, I guess. ;-)
01:27:42 <pesco> Okay, I'll stop. I'm such a nit-pick about code, sorry.
01:27:49 <pesco> I have to leave anyway. See you all later.
01:36:03 <paolino> morning , how do I import the Observe module ?
01:36:14 <dons> where does Observe live?
01:36:26 <dons> Cale, still not sleepy?
01:36:49 <paolino> I wish it was in the ghc modules
01:38:26 <paolino> I was reading this http://www.cs.chalmers.se/Cs/Grundutb/Kurser/d1pt/d1pta/Testing%20and%20Debugging/index.htm
01:38:53 <adept> paolino: it is
01:38:53 <adept> `--> locate Obser | grep ghc
01:38:53 <adept> /usr/lib/ghc-6.4/hslibs-imports/util/Observe.hi
01:38:53 <adept> /usr/share/doc/ghc6-libsrc/util/Observe.lhs.gz
01:39:22 <adept> paolino: probably you need '-package util' for ghc invocation
01:40:35 <paolino> got it loaded thanks
01:44:41 <paolino> shame it doesn't work
01:45:40 <paolino> Is there  a more popular debugging tool than Observe module ?
01:46:58 <adept> paolino: last time i checked it worked just fine
01:47:14 <adept> paolino: try to use 'trace' as well
01:47:24 <paolino> It doesn't print anything
01:47:38 <paolino> sum [observe "n*n" (n*n) | n <- [(1::Int)..4]]
01:47:48 <paolino> it prints 30
01:47:54 <paolino> and nothing else
01:48:43 <adept> paolino: try run0 $ sum [observe "n*n" (n*n) | n <- [(1::Int)..4]]
01:49:26 <paolino> run0 not in scope
01:50:10 <adept> paolino: it is in Observe
01:50:46 <adept> paolino: and it is runO, not run0 (zero) :)
01:51:03 <paolino> :/
01:52:03 <paolino> mmh types wrong
01:52:41 <paolino> runO :: IO a -> IO ()
01:52:52 <malcolm> Is there a printO?
01:53:14 <malcolm> printO = runO . print
01:53:15 <paolino> yes
01:53:42 <paolino> and it works
01:53:58 <adept> @eval sum [observe "n*n" (n*n) | n <- [(1::Int)..4]]
01:54:05 <lambdabot>  Not in scope: `observe'
01:55:40 <shapr> jiihaa
01:57:31 <JohnMeacham> yo.
01:58:13 <shapr> hiya John, how's code?
01:58:17 <shapr> Do you use QC in JHC?
01:58:30 * paolino thinks Observe is powerful
01:59:29 * boegel just confused JohnMeacham with JohnGoerzen (=CosmicRay)
01:59:51 <shapr> Soon we'll have The Simons, The Johns, The Kenneths...
02:00:14 <shapr> Man, I want a new emacs font.
02:01:47 <beelsebob_> http://www.cs.kent.ac.uk/people/rpg/tatd2/yhchat.pdf <-- does it look more like Hat now?
02:03:21 <boegel> shapr: there are more Kenneths ?
02:04:10 * shapr grins evilly
02:04:27 * beelsebob_ pokes shapr in the grin
02:04:33 <Lemmih> Yak. 5trees spam on the mailing list /-:
02:04:42 <beelsebob_> http://www.cs.kent.ac.uk/people/rpg/tatd2/yhchat.pdf <-- what does the thing in the top left say?
02:05:10 <malcolm> beelsebob_: yes it look\s more like a hat now
02:05:14 <beelsebob_> :)
02:05:20 <beelsebob_> malcolm: are you Malcolm?
02:05:32 <beelsebob_> (yes I know that's a dumb question)
02:05:40 <malcolm> err...
02:05:49 <beelsebob_> as in... Malcolm Wallace
02:06:07 <malcolm> try /whois malcolm
02:06:30 <boegel> malcolm: hehe :)
02:06:35 <malcolm> oops, hold on, that doesn't tell you :-)
02:06:50 <beelsebob_> yeh... I noticed
02:06:56 <malcolm> cos I'm not at work
02:07:06 <beelsebob_> ah, okay
02:07:13 <beelsebob_> I take it you are Malcolm then :)
02:07:17 <beelsebob_> *g*
02:07:30 <malcolm> how many malcolms are there in the haskell world?
02:07:35 <shapr> At least one?
02:07:40 <shapr> Only one that I know of.
02:07:55 <beelsebob_> I've not heard of another
02:07:55 <kosmikus> there's one with a capital 'M' (the one beelsebob_ seems to look for), and a lot of others ...
02:08:23 <beelsebob_> but the absence of evidence is not evidence of absence
02:09:04 * beelsebob_ wonders what the hell he's done to break pretty-hat
02:09:27 <malcolm> try debugging it with... er...
02:09:38 <beelsebob_> hehe
02:09:40 <beelsebob_> *g*
02:10:01 <beelsebob_> I was going to re-write the make scripts with a debug target
02:10:44 <beelsebob_> but I want to do it properly (stopping it compiling too much, and adding documentation targets too), and I'm not up for that much work at the mo
02:11:38 <malcolm> I seem to remember that hat-trans is slightly broken on translating FFI code at the mo, which is used rather heavily in the hat-tools themselves
02:11:52 <beelsebob_> ah, okay
02:12:01 <beelsebob_> I won't bother for a long while then
02:12:08 <malcolm> less is more.  just do what you need right now
02:12:23 <beelsebob_> do colour escape codes come out as [34m [0m [0m like things when printed?
02:12:39 <malcolm> depends how you print them
02:12:58 <beelsebob_> is that one possible way they can appear?
02:13:14 <beelsebob_> because that's my current guess for the crap that is appearing in pretty-hat
02:13:16 <malcolm> escape codes are for direct terminal control - they don't work inside e.g. curses
02:13:46 <beelsebob_> ah, okay
02:13:50 <malcolm> so if you pipe the output containing ctrl codes into e.g. less or more or something, you'll get rusbbish
02:14:14 <beelsebob_> yep... or directly into a .dot file
02:15:56 <malcolm> If you want to get colours in the dot file, work out the syntax required, and then it should be easy to interpret the Highlight datatype differently to print out what you need
02:16:45 <malcolm> e.g. in hscolour, the highlight type goes to either terminal codes or HTML
02:16:55 <beelsebob_> I don't want colours... I'm triying to figure out what the crap that's appearing is
02:17:07 <shapr> I want the GHC Hacker's Introduction.
02:17:09 <beelsebob_> I'm guessing that it's adding colour codes somewhere where I don't want them to appear
02:17:24 <beelsebob_> if you run the current cvs pretty-hat you'll see what I mean
02:17:26 <shapr> @seen JaffaCake
02:17:27 <lambdabot> I saw JaffaCake leaving #haskell 12 days, 17 hours and 7 minutes ago,
02:17:27 <lambdabot> and I have missed 8 days, 21 hours, 58 minutes and 44 seconds since
02:17:27 <lambdabot> then.
02:18:00 <malcolm> beelsebob_: no time to play with code right now.  I have to create an exam paper before tomorrow.
02:18:15 <beelsebob_> hehe, have fun
02:26:30 <JohnMeacham> shapr: QC?
02:26:44 <dons> beelsebob_ quakes with fear at that terrible name!
02:26:53 <dons> oh, /me should scroll down :/
02:27:05 <beelsebob_> eh?
02:27:19 <dons> don't worry. far far too sleepy :S
02:27:21 <shapr> JohnMeacham: QuickCheck
02:27:44 <JohnMeacham> code is dandy. lots of improvements. my thunk updates are killing tail calls though. I can't adapt ghcs algorithms since in ghc thunks are responsible for updating themselves while in jhc the evaluators updates the thunk.. I will have to come up with something.
02:27:53 <dons> shapr, how do you QC a compiler?
02:28:04 <dons> write an Arbitrary instance that generates programs?
02:28:10 <JohnMeacham> shapr: yeah, I am trying to as much as I can. see SelfTest.hs in the repo.
02:28:14 <dons> and then what model do you test against?
02:28:19 <beelsebob_> dons: read the paper from IFL on testing higher order code
02:28:38 <dons> ah, interesting... i will
02:29:37 <JohnMeacham> shapr: but more tests are always welcome :)
02:30:10 <shapr> Any idea how to QC optimizations?
02:30:39 <beelsebob_> make sure the output does the same as the input for lots of cases?
02:30:59 <beelsebob_> and in fact... make sure that it's at least as fast
02:31:30 <neologism> :set +s in hugs is nice benchmark ;)
02:32:22 <JohnMeacham> shapr: no.. I have still not come up with good solutions to the problems I mentioned in my email to the list.. but I have the -flint mode which does supercrazy type checking which is pretty good at finding errors. but I would prefer quickcheck tests.
02:32:44 <JohnMeacham> in practice I have found quickcheck to be best at finding bugs in my quickcheck properties :)
02:33:01 <dons> hehe
02:34:49 <beelsebob_> haha, that's true
02:35:11 <beelsebob_> give me a while, and I'll have a version of hat-delta that automagically locates the bug when tests fail
02:35:34 <beelsebob_> it'll go... 5 of 100 tests failed - do you want to debug?  Likely ask you one question, and then show you the bug
02:36:55 <{Arias}> emmm
02:37:02 <{Arias}> if i have a bool value
02:37:10 <{Arias}> how can i negate it ?
02:37:14 <beelsebob_> not
02:37:20 <{Arias}> thanks
02:37:21 <beelsebob_> @hoogle Bool -> Bool
02:37:23 <lambdabot> Prelude.not :: Bool -> Bool
02:37:23 <lambdabot> Prelude.log :: Floating a => a -> a
02:37:23 <lambdabot> Prelude.atan :: Floating a => a -> a
02:37:28 <{Arias}> :)
02:37:28 <beelsebob_> :)
02:37:59 <araujo> Hello!
02:38:07 <beelsebob_> lo
02:39:03 <Cale> instance Floating Bool where ...
02:39:07 <{Arias}> hello araujo
02:39:38 <beelsebob_> cale: hoogle doesn't pay attention to classes at the mo
02:39:52 <Cale> yeah, it seems that way
02:40:02 * beelsebob_ prods neil some more
02:51:47 <neologism> how do I define all primes by one-liner?
02:51:52 <neologism> someone wrote it here
02:57:21 <beelsebob_> @todo-add @tell command - relays a message to someone when they next speak
02:57:22 <lambdabot> Entry added to the todo list
02:59:41 <lomeX> @eval take 10 $ filter (\x -> all (\y -> x /= y && x `mod` y /= 0) [2..x-1]) [1..]
02:59:59 <lambdabot> [1,2,3,5,7,11,13,17,19,23]
03:00:05 <neologism> thnx
03:00:17 <lomeX> u'r welcome
03:00:43 <lomeX> @pl (\x -> all (\y -> x /= y && x `mod` y /= 0)
03:00:44 <lambdabot> (line 1, column 44):
03:00:44 <lambdabot> unexpected end of input
03:00:44 <lambdabot> expecting variable, "(", operator or ")"
03:00:46 <Cale> um, 1 isn't prime
03:00:51 <neologism> there was version with set generator
03:00:54 <lomeX> so [2..
03:00:58 <Cale> yeah
03:01:06 <lomeX> @pl (\x -> all (\y -> x /= y && x `mod` y /= 0))
03:01:07 <lambdabot> all . ap (ap . ((&&) .) . (/=)) (flip flip 0 . ((/=) .) . mod)
03:01:51 <neologism> dont you know the ersion with set generator?
03:01:53 <neologism> it was very neic
03:01:56 <Cale> @eval let primes = sieve [2..] where sieve (x:xs) = x : sieve [y | y <- xs, y `mod` x /= 0] in take 30 primes
03:01:59 <lambdabot> [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,
03:01:59 <lambdabot> 97,101,103,107,109,113]
03:02:09 <neologism> Cale: thats it!
03:02:21 <lomeX> cool!
03:02:31 <neologism> I did this
03:02:32 <neologism> y f = f (y f)
03:02:32 <neologism> primes = y (\f (x:l) -> [x] ++ f (filter ((/= 0).(`mod` x)) l)) [2..]
03:02:36 <neologism> but its very ugly ;(
03:02:41 <kmg> in linux/x86, how can tell ghc to avoid linking to certain libraries like libgmp, the reason being i just compiled a "hello world" program (module Main where main = putStrLn "Hello World!") and it links to libgmp ?
03:02:58 <Cale> neologism: well, it's easy to just rewrite that y out
03:03:03 <neologism> Cale: how?
03:03:07 <lomeX> every time i forget to use list comprehension when i see filter
03:03:09 <kzm> kmg, Licence reasons, or practical
03:03:26 <kmg> practical
03:03:35 <Cale> neologism: well, give that recursive function a name :)
03:03:42 <lomeX> this is y-combinator?
03:03:45 <kzm> If the latter, do -optl-static
03:03:51 <Cale> lomeX: yeah
03:04:07 <neologism> Cale: uhm? can you show me?
03:04:09 <kzm> Which links with the library, but statically.
03:04:24 <Cale> neologism: I sort of did :)
03:04:29 <kmg> if i want to give a bin to someone who doesnt have haskell compiler...
03:04:33 <kmg> yeah okie !
03:04:52 <Cale> sieve (x:l) = [x] ++ sieve (filter ((/= 0).(`mod` x)) l))
03:04:52 <neologism> uhm?
03:04:55 <neologism> I dontit
03:05:02 <neologism> ah!
03:05:08 <Cale>  = x : sieve (filter ((/= 0).(`mod` x)) l))
03:05:38 <Cale>  = x : sieve [y | y <- l, y `mod` x /= 0]
03:06:12 <lomeX> heh
03:06:32 <neologism> ERROR "tmp.hs":10 - Cannot infer instance
03:06:33 <neologism> *** Instance   : Integral ((a -> a) -> a)
03:06:33 <neologism> *** Expression : primes1
03:06:34 <neologism> what is this?
03:06:52 <Cale> It means that you're using a function like it's a number somewhere
03:07:08 <Cale> most likely that you haven't passed enough parameters to something
03:07:52 <neologism> a typo
03:07:57 <kmg> kzm: but the resulting bin is 620K after stripping ?
03:08:16 <kmg> is there a way to dynamic compile and avoid certain libs ?
03:09:20 <Cale> kmg: gmp is needed for the Integer type
03:09:34 <Cale> kmg: which most programs are likely to use
03:09:54 <lomeX> is there a function to grouping a list by some criteria?
03:09:54 <lomeX> e.g.: grouping (`mod` 3) [1..10] --> [[1,4,7,10],[2,5,8],[3,6,9]]
03:09:54 <lomeX> ?
03:10:22 <arjanb> @type Data.List.groupBy
03:10:24 <lambdabot> forall a. (a -> a -> Bool) -> [a] -> [[a]]
03:10:46 <lomeX> no, unfortunately
03:10:49 <Cale> ah, I don't think that will do it here :)
03:11:24 <lomeX> i used groupBy and sortBy, by this is ugly
03:12:26 <kmg> cale: ah ok !
03:13:20 <lomeX> @eval let grouping f = groupBy (\x y -> f x == f y) . sortBy (\x y -> compare (f x) (f y)) in grouping (`mod` 3) [1..10]
03:13:22 <lambdabot> [[3,6,9],[1,4,7,10],[2,5,8]]
03:13:45 <Itkovian> erm, can one print out Int as hex?
03:13:55 <Cale> yes, see Numeric
03:14:35 <Itkovian> ok, thx
03:15:28 <Cale> @index showHex
03:15:30 <lambdabot> Numeric
03:15:40 <Cale> @docs Numeric
03:15:41 <lambdabot> http://haskell.org/ghc/docs/latest/html/libraries/base/Numeric.html
03:51:45 <{Arias}> hi
03:51:53 <{Arias}> how can i convert a float to a integer?
03:53:55 <Cale> @index round
03:53:57 <lambdabot> Prelude
03:54:01 <Cale> @index trunc
03:54:06 <Cale> @index truncate
03:54:08 <lambdabot> System.Posix.IO, System.Posix
03:54:08 <lambdabot> Prelude
03:54:30 <Cale> Or floor or ceiling
03:54:37 <Cale> not trunc
03:54:42 <ProfTeggy> re
03:54:54 <Cale> ProfTeggy: wb
03:55:03 <{Arias}> ok floor :)
03:56:48 <araujo> Good morning!
03:57:28 <ValarQ> g'day araujo
04:01:57 <araujo> Hello ValarQ !
04:02:25 <araujo> It works it works!!!
04:02:48 * araujo goes screaming around the apartment
04:02:58 <lomeX> how i can get 1 from (1,2,3)? 2? 3?
04:03:11 <Wi> fst3 ?
04:03:17 <tromp> \(a,_,_) -> a
04:03:22 <lomeX> dunno
04:03:36 <Cale> lomeX: usually just by pattern matching when you define your functions
04:03:45 <lomeX> tromp, i search for a solution for variable length tuples
04:03:49 <Cale> triples are uncommon in Haskell
04:04:01 <lomeX> pity
04:04:03 <ProfTeggy> lomeX, there is nothing like that in Haskell
04:04:05 <araujo> let (_,_,c) = (1,2,3) ?
04:04:07 <Cale> You can do something with template Haskell
04:04:18 <lomeX> Cale, how?
04:04:24 <tromp> you're asking for an infinite family of functions
04:04:48 <tromp> that will take infinitely many definitions...
04:05:08 <lomeX> tromp, but we have such functions for a list
04:05:25 <lomeX> e.g. cadddddr :-)
04:05:48 <Cale> lomeX: (2,3) and (1,2,3) are in different types
04:05:56 <tromp> you want a function fst that works both on pairs and triples?
04:05:59 <Cale> [2,3] and [1,2,3] are in the same type
04:06:12 <lomeX> Cale: thx, now i get why it is impossible
04:06:25 <Cale> You can see http://www.haskell.org/hawiki/TemplateHaskell -- about halfway down there's an implementation of select for tuples
04:06:31 <lomeX> tromp: no, on tuples only...
04:06:41 <Cale> (but that's compile time metaprogramming :)
04:07:15 <Cale> now you might check out HList
04:07:22 <Cale> that's a cooler solution to that problem
04:07:24 <lomeX> Cale: thx.. i didnt read about TemplateHaskell yet
04:07:46 <Cale> http://homepages.cwi.nl/~ralf/HList/
04:08:15 <Cale> well, actually, you might want to save that for when you're more familiar with Haskell, I'm not sure
04:08:32 <Cale> but it's a rather cool paper
04:08:56 <Cale> with lots of good examples of programming at the type level
04:11:14 <Cale> HLists are essentially nested pairs.
04:12:11 <Cale> Note that if you wrote your triple like (1,(2,3)) or (1,(2,(3,()))), there would be functions to extract each of the components
04:14:58 <Cale> I wonder if triples, etc should be treated as syntax sugar for pairs in some fashion.
04:16:06 <lomeX> Cale, yes, but this is similar like list
04:18:05 <lomeX> HList changes or wrap type system in Haskell, so I have to use HBool, HNat ect... Anyway I dont understand why it works... these are different types! Why HCons works?
04:18:16 <lomeX> s/wrap/wraps/
04:19:54 <lomeX> oh.. I grok it now..
04:20:02 <lomeX> i think so
04:37:13 * boegel swears loudly
04:37:58 * ProfTeggy plugs his virgin and inncoent ears
04:58:45 <araujo> Is it possible to create a local declaration for something like, (v1,v2) <- IOfunc ?
05:02:13 <mrchebas> araujo: do you mean declaraing IOfunc in a let or where clause?
05:08:28 <shapr> hiya NiHM, DumbyTryCoding, learning Haskell?
05:08:46 <shapr> Well, I guess NiHM isn't...
05:10:59 <DumbyTryCoding> shapr : not yet, just curious :)
05:12:48 <shapr> Do you have any questions?
05:12:56 <DumbyTryCoding> no
05:13:09 <shapr> Ok, if you want an introduction or you have some questions, feel free to ask.
05:13:15 <DumbyTryCoding> oki, thx
05:16:33 <lomeX> dont understand...
05:16:34 <lomeX> liftM2  :: (Monad m) => (a1 -> a2 -> r) -> m a1 -> m a2 -> m r
05:16:34 <lomeX> id :: a -> a
05:16:34 <lomeX> and in Hugs "ap" defined like this:
05:16:34 <lomeX> ap =  liftM2 id
05:16:34 <lomeX> but first parameter of liftM2 must have type (a->b->c)... why this is compiled?
05:16:34 <aleator> Fun fun fun. I just came back from our consortium partner. I'm doing image analysis and they thought preprocessing image with blurring could help. Then they gave me CD full of blurred images to test with!
05:17:15 <DumbyTryCoding> nice :>
05:17:16 <aleator> Candidate for "Best use of cd" so far.
05:20:04 <aleator> lomeX: Check the type of liftM2 id.
05:21:22 <lomeX> aleator: it's the same like ap.. well?
05:21:35 <autrijus> http://pugscode.org/euroscon/haskell.xul
05:21:49 <neologism> anyone with a clue about pumping lemma?
05:21:56 <autrijus> (Talk just delivered, very well received, at Euro OSCON)
05:23:53 <malcolm> woo, 195 members on #haskell
05:24:13 <shapr> We got da distraction!
05:24:25 <aleator> lomeX: Now if you replace a of id::a -> a with something else?
05:24:39 <dcoutts_> @seen JaffaCake
05:24:40 <lambdabot> I saw JaffaCake leaving #haskell 12 days, 20 hours, 14 minutes and
05:24:40 <lambdabot> 13 seconds ago, and I have missed 8 days, 21 hours, 58 minutes and
05:24:40 <lambdabot> 44 seconds since then.
05:25:24 <lomeX> aleator: oh, i see what you wanna say... now m b come to m (a -> b)..  thx!
05:25:53 <autrijus> feedback welcome on the slides -- I'll present them in another week in NPW and then at OSDC
05:26:40 <mrchebas> autrijus: Good looking slides. Do you edit XUL by hand?
05:26:55 <autrijus> mrchebas: try "view source".
05:27:14 <lomeX> so if i have function fun :: (a -> a -> a) -> a -> a and i define "fun id" i will get (a -> a) -> a?
05:27:56 <basti_> back
05:28:28 <basti_> lomeX: no why?
05:28:34 <basti_> fun is unary
05:28:36 <basti_> errm id
05:28:36 <mrchebas> autrijus: :)
05:29:42 <lomeX> basti_: no, i wrong, 'cause it is not the same types.
05:29:55 <Itkovian> does anyone here succeed in following the cafe posts? I'm like 300 posts behind
05:30:10 <basti_> lomeX: thats what i wanted to say. id is unary. it takes exactly one parameter. thats not the same as taking two
05:30:49 <lomeX> basti: so why liftM2 id works? :-/
05:31:43 * basti_ ponders that a bit
05:32:13 <basti_> ah hmm... currying
05:32:37 <lomeX> but this is similar situation
05:32:56 <basti_> yes i didnt think about that
05:33:14 <lomeX> i can not grok it :(
05:33:41 <basti_> the point is, -> is right associative. That is a->b->c = a->(b->c), not (a->b)->c
05:34:14 <basti_> that means, you can unify id with (b->c)->(b->c)
05:34:18 <basti_> (its type)
05:34:24 <basti_> thats an id instance
05:34:36 <basti_> that might or might not work, depending on additional constraints
05:35:32 <araujo> mrchebas, yeah, i meant.. never mind, i think it doesn't make sense
05:36:28 <lomeX> basti_: thx! i understand (a->b->c) must be different to make possible a conversation a = b->c,  am i right?
05:36:43 <basti_> ehm
05:36:50 <basti_> yes, kinda
05:39:13 <lomeX> yes! it's work:
05:39:13 <lomeX> fun f x y = f x y
05:39:13 <lomeX> idFun = fun id
05:40:15 <shapr> Itkovian: I pick a thread and follow the whole thing.
05:40:40 <Itkovian> yeah, but the topics are not always clear
05:40:58 <Itkovian> and it seems i read a lot of stuff that's either over my head or too easy
05:41:07 <Itkovian> and has already been andwered in the latter case
05:41:13 <shapr> In that case, read and summarize some of the easy threads and put them into HWN
05:41:26 <Itkovian> uhu
05:41:29 <shapr> And I'll do the same. Then we can have collaborative filtering.
05:41:43 <Itkovian> i would. if time would be on my side. which sadly, it isn't
05:42:01 <shapr> You could read one or two threads.
05:42:47 <basti_> does anyone use debian too and is annoyed by the fact that every update of ghc drops all cumstom packages?
05:44:14 <cm> yeehaw
05:44:40 <basti_> yehaw?
05:45:24 * cm enthusiastically greets basti_
05:45:49 <basti_> :)
05:47:31 <cm> dons, hello?
05:47:41 <JaffaCake> wossup #haskell?
05:47:50 <Itkovian> basti_: since I've seen ubuntu, no, I refuse to use debian
05:48:24 <basti_> Itkovian: mmmk.
05:48:33 <cm> JaffaCake, are you the real/famous Simon Marlow? :)
05:48:59 <JaffaCake> maybe I'm an impostor :)
05:49:09 <Itkovian> so much for irc anonimity
05:51:26 <cm> JaffaCake, how is work on Visual Haskell going?
05:51:47 <JaffaCake> not much progress recently, I've been hacking on multiprocessor stuff
05:51:55 <basti_> JaffaCake: related to STM?
05:52:06 <JaffaCake> basti_: well yes, sort of
05:52:21 <shapr> heya JaffaCake, any rough outline of the GHC Hacker's intro?
05:52:41 <basti_> JaffaCake: because that would rule.
05:52:58 <JaffaCake> shapr: haven't put much thought into it, but there's a bunch of stuff that comes up again and again
05:53:14 <JaffaCake> like "how to turn off optimisation", "how to turn off splitting", etc.
05:53:31 <JaffaCake> stuff that pretty much everyone needs to do if they're hacking rather than just building GHC
05:53:55 * shapr creates a wiki page 
05:55:10 <JaffaCake> funny, everyone wants it to be somewhere different - autrijus wanted a HACKING file in the source tree, shapr wants a wiki page, simon PJ wants a section in the Building Guide
05:56:11 * Igloo wants it hand printed on scrolls, kept in a cave guarded by lions
05:56:31 <basti_> lions? templar knights!
05:56:41 <Itkovian> are those still around?
05:56:46 <JaffaCake> maybe the knowledge should be embodied in an interactive software agent posing as a #haskell regular
05:56:48 <shapr> JaffaCake: Why not all three?
05:56:58 <Igloo> JaffaCake: :-)
05:57:34 <JaffaCake> shapr: indeed, or at least links between the various places
05:57:49 <shapr> Yeah
05:58:10 <shapr> Anything else should go on that wiki page?
05:58:34 <Itkovian> shapr: url?
05:58:54 <shapr> @wiki GhcHackersIntro
05:58:55 <lambdabot> http://www.haskell.org/hawiki/GhcHackersIntro
05:59:01 * xerox chews
05:59:13 <CosmicRay> morning everyone
05:59:26 <CosmicRay> well, my segfault was not due to sqlite3, since it does the same thing with postgresql ;-)
05:59:30 <CosmicRay> I am suspicious of ghc 6.4.1
05:59:36 <CosmicRay> this just started after upgrading from 6.4
05:59:50 <JaffaCake> lemme see.. how to change which ways the libraries get built
06:00:00 <JaffaCake> and similarly for the RTS
06:00:16 <CosmicRay> JaffaCake: you haven't heard of any mysterious segfaults on x86 with 6.4.1, have you?
06:00:19 <JaffaCake> how to just build the libraries you need for bootstrapping GHC
06:00:28 <JaffaCake> CosmicRay: no
06:00:31 <Itkovian> shapr: maybe the answers to those questions?
06:00:38 <CosmicRay> didn't think so.  I'll try and see what I can find.
06:00:40 <JaffaCake> CosmicRay: apart from the Windows one
06:00:42 <malcolm> isn't there already a hackers guide in the "commentary" direcctory?
06:00:45 * cm fails configure'ing hs-plugins on win32
06:00:45 <shapr> Itkovian: too easy
06:01:04 <CosmicRay> JaffaCake: yeah, that sounds different.  that was from ghc itself, right?  This is from the generated executable.
06:01:05 <JaffaCake> malcolm: is there?  i'll go look..
06:02:54 <CosmicRay> hmm.  the only other thing I can think of is this function:
06:02:57 <JaffaCake> malcolm: don't see anything
06:02:59 <CosmicRay> msg :: String -> IO ()
06:02:59 <CosmicRay> msg l =
06:02:59 <CosmicRay>     do t <- myThreadId
06:02:59 <CosmicRay>        let disp = (show t) ++ ": " ++ l ++ "\n"
06:02:59 <CosmicRay>        withCStringLen disp (\(c, len) -> hPutBuf stdout c len >> hFlush stdout)
06:03:11 <CosmicRay> anything suspicious about that?
06:03:14 <malcolm> JaffaCake: ah, not stored in the CVS tree, just on the web.  "GHC commentary" on the documentation page. Links to chilli's webpages
06:03:59 <shapr> yeah
06:04:02 <basti_> what do i do if a cabal package is obviously cabalized with a different cabal version?
06:04:07 <JaffaCake> malcolm: yes, that's a kind of guide to the sources, what I'm after with a hackers guide is "how to set up your build tree" kind of stuff
06:04:10 <basti_> Setup.lhs:     Couldn't match `LocalBuildInfo'
06:05:05 <malcolm> JaffaCake: yes, the famously undocumented build.mk stuff
06:05:15 <JaffaCake> CosmicRay: looks ok... can you shorten the code that fails?
06:06:16 <JaffaCake> malcolm: yes, well there are some comments in config.mk, but the problem is there are too many options and most people just need to know about 3-4 important ones
06:07:18 <basti_> nothing? ^^
06:07:32 <araujo> Somebody who has ever works with readLine here?
06:07:49 <JaffaCake> basti_: fix it to work with  the version you have?
06:07:50 <Lemmih> basti_: What are you building?
06:07:55 <CosmicRay> JaffaCake: I'm not sure.  It's program that uses forkIO liberally, talks to the network, uses mvars, and has a heavy database component
06:08:02 <CosmicRay> JaffaCake: I don't even know where it's failing yet.
06:08:16 <JaffaCake> CosmicRay: right
06:08:17 <shapr> JaffaCake: Which 3-4 options?
06:08:19 <CosmicRay> my suspiciou might be in the network code, since I just got this from strace:
06:08:26 <CosmicRay> connect(10, {sa_family=AF_INET, sin_port=htons(70), sin_addr=inet_addr("140.117.
06:08:26 <CosmicRay> 11.2")}, 16) = -1 EINPROGRESS (Operation now in progress)
06:08:26 <CosmicRay> gettimeofday({1129813370, 90867}, NULL) = 0
06:08:26 <CosmicRay> select(11, [8], [4 5 9 10], NULL, {0, 0}) = 0 (Timeout)
06:08:26 <CosmicRay> --- SIGSEGV (Segmentation fault) @ 0 (0) ---
06:08:34 <basti_> Lemmih: ghc-src from your repo
06:08:50 <CosmicRay> it's a suspicion, though not necessarily a good one.
06:08:54 <JaffaCake> shapr: SRC_HC_OPTS, GhcHcOpts, GhcLibHcOpts, SplitObjs, off the top of my head
06:09:00 <shapr> ok
06:09:37 <JaffaCake> CosmicRay: turn on -debug, see if you get any assertion failures
06:09:53 <shapr> Chilli's page claims the GHC commentary is in CVS.
06:09:59 <Lemmih> basti_: It should work with Cabal-1.1.2rc
06:10:08 <JaffaCake> it is in CVS, ghc/docs/comm
06:10:29 <CosmicRay> JaffaCake: that's for GHC, not the RTS, right?
06:11:28 <JaffaCake> there are bits on the RTS in there too
06:11:43 <CosmicRay> well, I should clarify.  the fds in that select are all fds that threads that have been forkIO'd should be expecting communication on.
06:12:09 <CosmicRay> I guess -Dnum?
06:12:25 <CosmicRay> the meaning of num doesn't seem to be documented here...
06:12:30 <basti_> Lemmih: cabal darcs pull gives Cabal-1.1.4 though, thats the problem.
06:12:38 <xerox> Lemmih: howdy!  Any news from the -api side?
06:13:08 <JaffaCake> CosmicRay: you don't need -D right away, just run the program after compiling with -debug
06:13:13 <CosmicRay> ok.
06:13:30 <JaffaCake> -D<somthing> turns on various debugging output
06:13:39 <JaffaCake> use +RTS -? for a list
06:14:01 <CosmicRay> interestingly, -D doesn't show up in that output
06:14:14 <JaffaCake> you definitely added -debug?
06:14:15 <CosmicRay> the user's guide mentioned a DEBUG option
06:14:20 <CosmicRay> yeah
06:14:32 <CosmicRay> is there a -debug and then a DEBUG?
06:14:51 <JaffaCake>   -Ds  DEBUG: scheduler
06:15:02 <CosmicRay> err oops, I ran the +RTS -? in the wrong terminal window
06:15:03 <Igloo> JaffaCake: That reminds me, is there a way to find out what version of ghc was used to compile something with +RTS <something>? If not, could one be added please?
06:15:04 <JaffaCake> You should ses a bunch of lines like that in the +RTS -? output
06:15:06 <CosmicRay> I see it now
06:15:20 <JaffaCake> Igloo: good idea
06:15:22 <Igloo> (and maybe a build date, at least for CVS versions)
06:15:57 <CosmicRay> speaking of which, where do we stand on the darcs project?
06:16:13 <JaffaCake> Igloo: the version includes the build date, at least if it was built with the nightly scripts
06:16:50 <JaffaCake> CosmicRay: I need to send another email about darcs, I have a clearer idea how it should be done now
06:17:14 <JaffaCake> CosmicRay: I've converted alex, happy, and haddock using tailor
06:17:18 <CosmicRay> JaffaCake: sweet!
06:17:31 <JaffaCake> tailor doesn't like converting subdirectories of the CVS repo
06:17:33 <Igloo> Well, my CVS builds at least don't  :-)   But most(all?) of the time I want to know the answer it'll be a release anyway, so that's not too important
06:17:54 <CosmicRay> JaffaCake: I've usually been able to specify them with (I think) -m (the module option) and it seems to do KO
06:17:56 <CosmicRay> s/KO/OK/
06:18:09 <CosmicRay> -m fptools/happy/doc/foo or whatever
06:18:12 <Lemmih> xerox: Well, I've managed to run hIDE with GHC 6.5 so ghc-api will hopefully go away Real Soon now. (:
06:18:13 <JaffaCake> Igloo: we should have a better way to inject the date somehow
06:18:33 <JaffaCake> CosmicRay: ah, didn't try that
06:18:35 <CosmicRay> JaffaCake: have configure set a variable in a .h somewhere?
06:18:36 <Lemmih> basti_: 1.1.4 should also be OK.
06:18:37 <xerox> Lemmih: Woooot!
06:19:02 <basti_>     Couldn't match `LocalBuildInfo'
06:19:02 <basti_>            against `Distribution.PackageDescription.PackageDescription'
06:19:05 <basti_> Lemmih: this is what i get
06:19:23 <JaffaCake> CosmicRay: what's more important is what version of the sources you have, not when it was built
06:19:41 <JaffaCake> but I suppose the latter is an approximation, maybe the best we can do
06:19:42 <CosmicRay> JaffaCake: David Roundy has some trick for embedding that in his darcs builds
06:19:43 <basti_> i do not know how to create a "PackageDescription" that seems to be missing
06:19:46 <CosmicRay> JaffaCake: might be appropriate for ghc
06:20:53 <JaffaCake> basti_: your hook now gets passed a PackageDescription as an extra parameter
06:21:57 <basti_> thats what i figured.
06:21:58 <malcolm> ( echo "module BuildDate where builddate = \""; date; echo "\""; ) > BuildDate.hs
06:22:26 <dcoutts_> JaffaCake!
06:22:35 <JaffaCake> dcoutts_: !
06:23:05 <dcoutts_> JaffaCake, mind if I ask you about the "ghc packages as shared libs" idea
06:23:15 <JaffaCake> fire away
06:23:18 <dcoutts_> specifically on win32...
06:24:03 <dcoutts_> suppose I make a package A into A.dll and install it using cabal to C:\program files\A-1.0\ghc-x.y\
06:24:15 <JaffaCake> yup
06:24:23 <dcoutts_> now I write a program that uses package A
06:24:35 <dcoutts_> so it is linked agsinst A.lib
06:24:51 <dcoutts_> which means it get's dynamically linked against A.dll when the program starts
06:24:51 <JaffaCake> ok
06:25:03 <dcoutts_> so now I run Main.exe
06:25:10 <dcoutts_> how does it find A.dll ?
06:25:28 <JaffaCake> good question... I'm not sure exactly
06:25:35 * JaffaCake pulls up MSDN
06:25:47 <dcoutts_> on unix one can use -R<path>
06:25:56 <dcoutts_> whihc is like -L<path>
06:26:18 <dcoutts_> -L<path> says to look for A.a on the given path
06:26:36 <dcoutts_> -R<path> says to look for A.so on the given path when the program is run
06:26:39 <CosmicRay> JaffaCake: ok, this is annoying.  this program compiled with -debug isn't crashing.
06:26:44 * CosmicRay hates heisenbugs.
06:26:56 <dcoutts_> JaffaCake, it "bakes" an extra linker seasrch path into the executable
06:27:05 <JaffaCake> CosmicRay: try it a few times, and try adding +RTS -C0
06:27:13 <dcoutts_> JaffaCake, so far from looking through MSDN I can't find anything similar.
06:27:42 <JaffaCake> dcoutts_: looking under LoadLibrary(), there doesn't appear to be anything similar on Win
06:27:59 <dcoutts_> JaffaCake, my alteriour motive here is trying to get Gtk2Hs to work on Windows without having to have all the Gtk+ dlls on the users %PATH%
06:28:25 <JaffaCake> right, i see
06:28:31 <dcoutts_> because having the Gtk+ dlls on the path is very fragile.
06:28:33 <malcolm> an equivalent of LD_LIBRARY_PATH then
06:28:47 <dcoutts_> malcolm, on win32 LD_LIBRARY_PATH=PATH
06:28:51 <JaffaCake> PATH is the equivalent of LD_LIBRARY_PATH on windows
06:29:24 <dcoutts_> which is worse since most of the time people do not fiddle with LD_LIBRARY_PATH, but they do fiddle with the PATH
06:29:44 <JaffaCake> that's kind of annoying
06:30:02 <JaffaCake> I guess we have to install all our DLLs into C:\Windows\System32 :)
06:30:07 <dcoutts_> with Gtk2Hs and having Gtk+ on the PATH, we'd get problems if say zlib.dll was eariler on the PATH or in the windows or system directories.
06:30:27 <JaffaCake> dcoutts_: this is a common problem
06:30:36 <dcoutts_> JaffaCake, gaim for win32 has a very cunning hack....
06:30:49 <JaffaCake> ah yes I vaguelly remember, what do they do?
06:30:58 <dcoutts_> they use a copy of Gtk+ installed into a different folder to where gaim itself is installed
06:31:08 <dcoutts_> they have a gaim.exe and a gaim.dll
06:31:15 <dcoutts_> the .exe is just a lodaer program
06:31:23 <dcoutts_> the .dll is the nomrally linked version
06:31:33 <dcoutts_> the gaim.exe is not linked against gtk or gaim.dll
06:31:50 <JaffaCake> and it loads the .dll with a call to LoadLibrary()?
06:31:52 <dcoutts_> the gaim.exe starts up, looks up in the registry to find where gtk+ is installed
06:32:15 <dcoutts_> it then *changes directory* to the gtk+ directory and then loads the *gaim.dll*
06:32:15 <JaffaCake> first setting SetDllDirectiory() or something
06:32:31 <JaffaCake> right
06:32:37 <dcoutts_> yes is uses SetDllDirectiory if the version of windows supports it, or changed directory if it doesn't
06:33:09 <dcoutts_> so then it means that the dependency of gaim.dll on the gtk+ dlls can be found in the current directory which takes precenence over the PATH
06:33:10 <tony2> does anyone know if HDirect is works with GHC 6.4.1?
06:33:26 <dcoutts_> JaffaCake, so yeah, it's horrible :-)
06:33:38 <JaffaCake> can't you link against the full path to a DLL?
06:33:47 <dcoutts_> JaffaCake, possible. I'm not sure.
06:34:44 <dcoutts_> JaffaCake, if we can then that's great. I can arrange for the Gtk2Hs installer to put the right info into the ghc package files, given the location where Gtk2Hs and Gtk get installed.
06:35:27 <shapr> I tried to configure win32 networking last night for the first time in years. I failed.
06:35:53 <dcoutts_> JaffaCake, yesterday eivuokko said it was possible to use full paths. He used a hex editor on the .exe to set the full path.
06:36:01 <shapr> I sort of want to run all my Haskell apps on Windows also, but I'm not sure I'll be able to handle it.
06:36:04 <JaffaCake> heh, nice
06:36:23 <dcoutts_> shapr, it's been a steep learning curve for me :-)
06:36:33 <shapr> I guess I sound a C++ programming joining #haskell.
06:36:36 <shapr> programmer*
06:38:01 <dcoutts_> shapr, step 1. downaload a dodgy msi unpacker from a dodgy russian wares site. step 2. unpack and install the ghc msi. :-)
06:38:09 <CosmicRay> shapr: I built one haskell app for windows.  it worked a bit better than python apps.
06:38:28 <CosmicRay> dcoutts: I thought there was a nice ghc installer on haskell.org/ghc?
06:38:30 <xerox> dcoutts_: why do you need to unpack the msi?
06:38:47 <dcoutts_> xerox, because the system administrator has blocked all .msi installations
06:39:01 <xerox> ...
06:39:05 <CosmicRay> smart sysadmin.  how do we do that? ;-)
06:39:07 <CosmicRay> (seriously)
06:39:13 <dcoutts_> xerox, they've even stoped all .exe files names "install.exe" or "setup.exe" from running.
06:39:28 * dcoutts_ renames "setup.exe" to "foo.exe"
06:39:28 <JaffaCake> dcoutts_: we have a .zip now
06:39:38 <dcoutts_> JaffaCake, oh great. I'll use that in future.
06:39:42 <CosmicRay> dcoutts:  ;-)
06:40:25 <dcoutts_> Gtk2Hs works fine on Windows (except for the PATH issues)
06:40:26 <CosmicRay> dcoutts: of course you know this is because about 80% of the users out there are installing stupid taskbar weather bugs and whatnot that go insane, often are spyware, and load down the system and the network, right? ;-)
06:40:38 <CosmicRay> I figure, give them an apple II.  the network will be healthier. ;-)
06:40:47 <dcoutts_> (wxHaskell cheats by putting its dlls in the windows directory)
06:41:04 <dcoutts_> CosmicRay, right.
06:41:32 <CosmicRay> not that I am jaded from the times when I've had to fill in for our desktop support guy or anything.
06:41:33 <CosmicRay> oh no.
06:42:09 <JaffaCake> back in a bit
06:42:10 <dcoutts_> JaffaCake, so there are a number of other possibilities, use a stub that calls LoadLibrary explicitly. Use "delay loaded" dlls.
06:42:17 <CosmicRay> JaffaCake: it's still not crashing under -debug, even with -C0.
06:42:19 <CosmicRay> bah
06:42:24 <Cale> heh, the guy who posted that spam to the libraries mailing list seems to be real. He sent me an email asking "Who's Haskell?", so I replied with an ~80 line message describing Haskell and giving an intro to what it's about.
06:42:32 <CosmicRay> hah
06:43:23 <malcolm> CosmicRay: I had a crashing program that worked perfectly once I tried to use Hat on it.
06:43:32 <CosmicRay> heh
06:43:33 <xerox> Cale: you'll receive more spam!  :-D
06:43:45 <CosmicRay> I suppose I could just always build this program with -debug ;-)
06:43:54 <Cale> xerox: It looked targeted enough -- it was specifically for Adrian Hey
06:44:13 <Cale> (but posted to the libraries mailing list for some reason)
06:44:17 <xerox> ;-)
06:44:29 <malcolm> CosmicRay: so the insight is that what you are doing for debugging purposes must be changing the behaviour of the program
06:44:35 <shapr> Still, unsolicited commercial email isn't nice.
06:44:38 <Cale> It was a guy trying to sell his AVL tree library to Adrian
06:44:53 <CosmicRay> malcolm: yes.  though what I'm doing for debugging purposes is adding -debug to the ghc command line.
06:45:02 <Cale> (Recall that Adrian maintains Data.Tree.AVL)
06:45:02 <CosmicRay> hah
06:45:11 <CosmicRay> so this is not bulk uce
06:45:12 <malcolm> CosmicRay: In the Hat case, hat-trans was converting numeric patterns to explicit guards, which made a difference
06:45:18 <Cale> CosmicRay: right
06:45:34 <CosmicRay> and, it's someone that may actually have an interest in haskell
06:45:46 <CosmicRay> and some slight re-education perhaps? ;-)
06:45:50 <Cale> :)
06:45:56 <Cale> He seems to be a C++ programmer
06:46:04 <CosmicRay> Cale: oh, beyond hope then... ;-)
06:46:05 <malcolm> CosmicRay: So I suggest that the -debug flag is probably stopping some optimisation/inlining or something from happening, and thereby avoiding the bug
06:46:31 <CosmicRay> malcolm: yeah.  I was thinking that.  So the good news is that it's not a bug in my code.  But that's also the bad news, because it means I probably can't fix it.
06:46:43 <Cale> CosmicRay: I'm not sure -- he has a smart enough looking library, though I'm not sure why someone would pay for just an AVL tree library.
06:46:50 <CosmicRay> heh
06:47:02 <malcolm> CosmicRay: have you tried e.g. -O0 to turn off all optimisations?
06:47:19 <CosmicRay> no, I haven't
06:47:25 <CosmicRay> I was just thinking I should play with -O next
06:47:31 <CosmicRay> perhaps also -fvia-C
06:48:08 <malcolm> CosmicRay: yeah, see if you can narrow the bug to a definite part of ghc, and then it becomes Si^2's problem.
06:48:16 <CosmicRay> heh
06:49:23 <basti_> @where greencard
06:49:24 <lambdabot> I know nothing about greencard.
06:50:00 * Cale considers the category of people, and conversations between them.
06:51:27 * Cale wonders what the projection maps from Si^2 to each of the individual Simons look like.
06:52:28 <Cale> Apparently, one can talk him into being either one.
06:52:36 <Itkovian> hi Philippa
06:55:17 * araujo got a doubt thought he doesn't know how to explain it very for asking help
06:55:28 * araujo got a doubt thought he doesn't know how to explain it very *well* for asking help
06:57:36 <araujo> Ok, i will xplain what i got and what i want in that case.... i got a piece of monadic code (some IO) and one function uses it several times in different parts of the equation, i would like to avoid re-writing all the code every time is used, isn't there a way to specify a kind of macro or something?
06:58:27 <malcolm> araujo; so you want to parameterise a piece of code...
06:58:48 <araujo> Yes, sort of...
06:59:50 <malcolm> let someaction x = do {...} in do { a <- readfile; someaction a; b <- readfile; someaction b }
07:00:38 <malcolm> a function is really very similar to a syntax macro
07:01:42 * araujo grasping at that line of code
07:03:02 <Cale> araujo: it's just the same as defining a procedure in some imperative language
07:16:40 <xerox> FORTUNE PROVIDES QUESTIONS FOR THE GREAT ANSWERS: #21
07:16:40 <xerox> A:      Dr. Livingston I. Presume.
07:16:40 <xerox> Q:      What's Dr. Presume's full name?
07:19:57 <Cale> xerox: hahaha
07:20:25 * xerox rotfl-ed
07:20:37 <araujo> Ok.. let's see..
07:20:50 <xerox> Putting 'fortune -a' in .bashrc was one of the best decisions in my life.
07:21:52 <araujo> Can i do something like this:   a1 <- f1; a2 <- f2; return (a1, a2)
07:22:03 <basti_> yes you can
07:22:14 <araujo> mm..
07:22:40 <araujo> I am receiving the values with: (b1,b2) <- f
07:22:52 <araujo> But ti gives me parsing error
07:22:59 <xerox> Is it inside a do?
07:23:32 <araujo> Stupid me.
07:23:35 <xerox> I do not exactly recall if it possible to do that, but mmh.
07:23:41 <xerox> Ah, okay :-)
07:23:51 <araujo> Yes, it seems that you can :-]
07:23:54 <araujo> Thanks
07:24:06 * araujo forgot to uncomment the do ....
07:24:28 <araujo> I usually go un/commenting the code for testing things....
07:25:09 <Cale> araujo: you'll be happy to know that Haskell {- supports {- nested -} block comments -}
07:25:20 <xerox> :-}
07:25:42 <basti_> Lemmih? your haspr thingie tells me to report a bug to you!
07:25:59 <beelsebob_> cale: it does????
07:26:23 <Cale> beelsebob_: yes
07:26:55 <Lemmih> basti_: Yeah, I should probably change that (:
07:27:06 <beelsebob_> excellent... now I have to make reg-exps do something that it's imposible to make them do
07:27:19 <ValarQ> xerox: are you the author of nymphaea?
07:27:45 <xerox> ValarQ: Yeah, with the great Cale!
07:27:47 <basti_> Lemmih: :P it's local though.
07:27:53 <Cale> hehe
07:27:57 <ValarQ> xerox: ok :)
07:28:07 <ValarQ> xerox: i'm having some problems compiling it
07:28:07 <xerox> :D
07:28:13 <xerox> Oh, what's up?
07:28:14 <Cale> xerox: We really should get the menus to work :)
07:28:16 <araujo> Cale, yeah :-P
07:28:26 <xerox> Cale: yeah.  I want a 'save shot' too.
07:28:31 <Cale> yeah
07:28:40 <Cale> that should actually be trivial :)
07:28:44 <xerox> Indeed.
07:28:47 <ValarQ> xerox: Nymphaea.hs:84:19: Not in scope: `x'
07:28:53 <ValarQ> xerox: what could that mean?
07:28:53 <Cale> uh oh
07:28:58 <xerox> Who wants an 'x' in scope, anyway.
07:29:14 <ValarQ> xerox: yeah, thats probably a bad thing
07:29:26 <Cale> ummm
07:29:27 <xerox> Cale: ah, are 'x' and 'y' fields of that 'e' ?
07:29:31 <Cale> yes
07:29:38 <Cale> I think they may have changed names
07:29:38 <xerox> I couldn't find the doc.
07:29:40 <xerox> aaah
07:29:42 <Cale> recently
07:29:43 <xerox> eventX
07:29:47 <xerox> eventY
07:29:47 <Cale> yes
07:29:48 <xerox> Right!
07:29:51 * xerox patches
07:30:07 <ValarQ> do i got a to recent version of gtk2hs?
07:30:09 <xerox> Any other possible occurrence?
07:30:09 <Cale> also, I'm getting: Nymphaea.hs:138:8: Not in scope: `cairoRegion'
07:30:14 <xerox> ValarQ: it's ok.
07:30:23 <Cale> there are 3 occurrences each of x and y
07:30:25 <ValarQ> xerox: if you say so :)
07:30:31 <xerox> Ah, it is called 'region' now.
07:30:36 <dcoutts_> ValarQ, xerox, yes we changed the names of the event record fields the other day
07:30:37 <xerox> I think.
07:30:51 <xerox> dcoutts_: yes, I recall.  So did you change 'area' and 'region' too, in Cairo?
07:30:52 <dcoutts_> and cairoRegion is now just region
07:30:53 <basti_> Lemmih: it complains about .../ghc-6.4/package.conf missing, which is no wonder, since it's now ghc-6.4.1. I do not find any reference to either in the source of haspr though
07:30:56 <xerox> Right.
07:30:59 <ValarQ> dcoutts_: ok, i guessed it was something like that
07:31:01 <dcoutts_> and area is gone
07:31:14 <Cale> augh
07:31:15 <Cale> hehe
07:31:16 <ValarQ> dcoutts_: couldn't figure out how those "fields" works thought
07:31:25 <Cale> I had a variable named region :)
07:31:27 <xerox> \(Expose {region = region})
07:31:30 <dcoutts_> xerox, once you've changed that make sure you depend on gtk >= 0.9.9.6
07:31:33 <xerox> \(Expose {r = region})
07:31:33 <xerox> ?
07:31:42 <xerox> dcoutts_: it is not cabalized or anything.
07:31:44 <dcoutts_> \(Expose { eventRegion = r})
07:31:45 <Cale> region = r
07:31:49 <Cale> er yeah
07:31:49 <xerox> But, mumble...
07:31:56 <dcoutts_> \(Expose { eventRegion = foobar})
07:31:58 <dcoutts_> whatever
07:32:04 <xerox> Do you suggest using the preprocessor?
07:32:05 <Cale> r is good
07:32:25 <Cale> okay, my copy compiles now :)
07:32:25 <dcoutts_> xerox, onece 0.9.10 is out, just depend on it
07:32:44 <Cale> We already depend on the darcs version
07:32:50 <dcoutts_> xerox, that's true
07:32:56 <xerox> Okay.
07:33:02 <Lemmih> basti_: hs-plugins should take care of the path. What's in your System.Plugins.Consts.ghcLibraryPath?
07:33:12 <dcoutts_> xerox, ust specify the dependency in the cairo file and then people will get a sensible message rather than the build failing
07:33:21 <basti_> Lemmih: lets see
07:33:24 <dcoutts_> xerox, oh and use a .cabal file!
07:34:05 <xerox> Phone, let me push the changes and maybe explain to me how to use Cabal :-D
07:34:20 <xerox> Pushed.
07:35:00 <dcoutts_> @where nymphea
07:35:01 <lambdabot> I know nothing about nymphea.
07:35:05 <dcoutts_> spelling?
07:35:23 <Cale> ae
07:35:31 <dcoutts_> @where nymphae
07:35:31 <Cale> @where nymphaea
07:35:32 <lambdabot> I know nothing about nymphae.
07:35:32 <lambdabot> http://haskell.galois.com/~paolo/nymphaea
07:35:37 <dcoutts_> ta
07:35:56 <Cale> hehe, Nympha
07:36:12 <basti_> System.Plugins.Consts this is hidden :(
07:36:40 <bourbaki> moin
07:36:55 * basti_ shakes hs-plugins a little
07:38:15 <Lemmih> basti_: What version of hs-plugins are you using?
07:38:24 <basti_> 0.9.10
07:38:36 <cm> my recurring problem: hs-plugins can't find "sh" while Setup.hs configure'ing.. any ideas?
07:38:42 <cm> (win32, latest darcs)
07:39:43 <bourbaki> anyone of you fit in coloured petri nets?
07:41:09 <beelsebob_> cm: win32 is your problem ;)
07:41:16 <xerox> ValarQ: works now?
07:41:36 <cm> beelsebob_: absolutely no chance to make it work without cygwin? :|
07:41:43 <beelsebob_> no idea
07:41:55 <beelsebob_> there's a good chance it'll work on OS X though :>
07:42:03 <xerox> Tue Oct 18 00:52:50 CEST 2005  as49
07:42:03 <xerox>   * [gtk2hs @ 2005-10-17 22:52:49 by as49]
07:42:03 <xerox>   /tmp/cvswg8NOK
07:42:10 <xerox> What a patch :-D
07:43:15 <Cale> heh
07:43:18 <Cale> I saw that too
07:43:28 <ValarQ> xerox: nope
07:43:35 <Cale> I just hit 'a' at that point.
07:43:58 <xerox> ValarQ: what error do you get?
07:44:02 <ValarQ> xerox: same error at line 97 and 107
07:44:13 <ValarQ> xerox: works when i change them thought
07:44:13 <Cale> xerox: :)
07:44:24 <xerox> ah :D
07:44:26 <xerox> Right.
07:44:44 <Cale> xerox: compile before record :)
07:45:13 * xerox notes so
07:45:34 <xerox> But I do not have the new Gtk2Hs installed now
07:45:41 <Cale> oh
07:45:46 <Cale> okay then :)
07:45:55 <xerox> It's building, okay :-D
07:46:02 <xerox> (ValarQ: pushed)
07:46:20 <xerox> Any idea from the cabal front?
07:46:44 <xerox> Uuh..
07:46:46 <xerox> cairo/Graphics/Rendering/Cairo/Internal/Drawing/Cairo.chs:35:28:
07:46:46 <xerox>     Not in scope: `withArrayLen'
07:46:52 <ValarQ> xerox: works perfect :)
07:47:20 <xerox> It needs an import, I thought it was there.
07:48:50 <shapr> @wiki GhcHackersIntro --  Anybody want to dump some info or pointers into this page?
07:48:50 <lambdabot> http://www.haskell.org/hawiki/GhcHackersIntro --  Anybody want to dump some info or pointers into this page?
07:49:28 * xerox spotted shapr talking about pointers! Woot.
07:51:23 <Itkovian> heh
07:51:27 <Itkovian> caught in the act
07:55:03 <basti_> tsss i just don't find it
07:55:04 * basti_ shakes head
07:55:12 * xerox dereferences basti_
08:05:34 * Cale dereferences the value of dereferenced basti_ 
08:06:23 * dcoutts_ discoveres that **basti_ == *basti
08:06:57 * xerox stares blankly
08:07:07 <cm> a fixpoint!
08:07:14 <xerox> !
08:07:22 <basti_> argghhh
08:07:28 <xerox> The Gateless Gate!
08:07:37 <Cale> heh Y*
08:07:51 <xerox> Subtle :D
08:07:55 <xerox> @get-definition Y
08:07:56 <lambdabot> Y = \f.U(\g.f(U g))
08:08:22 <Cale> y f = f (y f)
08:08:55 * basti_ still has the problem of hs-plugins looking for the package-conf of ghc-6.4 when he really is running ghc-6.4.1
08:09:11 <Cale> Haskell must have been constructed just to be able to write that :)
08:09:24 <xerox> Agreed :-)
08:10:50 <dcoutts_> so does anyone know what version(s) of ghc people are typcially running on windows?
08:11:16 <dcoutts_> I'm building Gtk2Hs bianrys which are of course only compatible with one version of ghc
08:11:30 <dcoutts_> so I can afford to do 2 versions
08:11:38 <dcoutts_> last time we did ghc-6.2.2 and ghc-6.4
08:11:41 <xerox> I will run 6.4.1
08:11:53 <dcoutts_> I'll definately do 6.4.1
08:12:10 <dcoutts_> should I do a build for any other ghc version?
08:12:26 <Cale> Maybe 6.2.2 again?
08:12:33 <xerox> I don't know, maybe ndm knows better about the Windows situation?
08:12:33 <dcoutts_> it'll double the size of the download of course, from 2.5Mb to 5Mb
08:12:39 <Cale> oh
08:12:41 <dcoutts_> ndm, ping
08:12:55 <Cale> (you couldn't do separate downloads?)
08:13:11 <dcoutts_> it turns out that a minimal version of gtk is only 3.5Mb compressed
08:13:38 <dcoutts_> Cale, well to minimise confusion for poor windows users (read students) I thought a single download would be better
08:13:46 <Cale> ah, okay
08:14:26 <xerox> If they're going to do Haskell... they shouldn't have problems with knowing which version of the compiler they're going to use, should they?
08:14:43 <xerox> But in the end, you're the teacher :-)
08:14:55 <Cale> They are using windows... ;)
08:15:04 <Cale> (sorry ndm :)
08:15:34 <dcoutts_> so I could just specify that they must use 6.4.1 but we thought last time that it'd be better to allow 6.2.2 as well since 6.4 had only just come out then
08:16:38 <dcoutts_> so I could do 6.4.1 with 6.4 or 6.4.1 with 6.2.2 or only do 6.4.1
08:51:54 <CosmicRay> does anyone know if hsql is thread-safe?  (with forkOS)
08:53:49 <Cale> speaking of which, dcoutts: it would be nice if gtk2hs could be made thread safe in some automatic way
08:54:25 <Cale> afaict, this would require an MVar which would represent the ability to make X calls.
08:56:25 <Cale> the only trick is in how to pass it around so that everything is safe
08:56:37 <Cale> (and autowrap)
08:56:51 <dcoutts_> Cale, it's threadsafe so long as you do not use the threaded ghc rts
08:57:05 <Cale> ah, so forkOS?
08:57:36 <dcoutts_> forkOS does not work in the single threaded rts
08:58:03 <Cale> oh
08:58:05 <Cale> I see
08:58:09 <dcoutts_> the problem is exacly as you say, we'd need to lock every single gtk call
08:58:12 <Cale> right
08:58:16 <dcoutts_> that'd be very expensive
08:58:25 <dcoutts_> many calls are very small/short
08:58:34 <Cale> hmm
08:59:02 <Cale> It's annoying that X is so picky about things coming in asynchronously.
08:59:06 <dcoutts_> using many haskell lightweight threads in a single OS thread accessing gtk is fine
08:59:16 <dcoutts_> Cale, actually it's just just X
08:59:32 <dcoutts_> xlib is not particualrly thread safe, but xcb is
08:59:53 <dcoutts_> but even if the lowe level X bits were ok therewould still be other problems
09:00:28 <dcoutts_> for example simply accessing one widget from two threads could cause corruption unless each gtk widget is locked against concurrent access
09:01:14 <dcoutts_> and anyway, using multople OS threads for a GUI buys you nothing
09:01:29 <dcoutts_> lightweight threading however is very convenient for GUIs
09:01:36 <dcoutts_> and I use it quite a bit
09:01:43 <Cale> yeah
09:01:57 <dcoutts_> but we need more support from the ghc rts to be able to use the multi-threaded rts
09:02:14 <Cale> what would be needed?
09:02:27 <xerox> locks?
09:02:31 <dcoutts_> the ability to bind many Hakskell threads to one OS thread
09:02:54 <Cale> ah
09:03:17 <dcoutts_> and even then I wonder how safe/convenient it'd be
09:03:25 <Cale> right, so you could ensure that all the GUI stuff ended up going on in one particular thread
09:03:32 <dcoutts_> Cale, right
09:03:58 <dcoutts_> eg we'd need a forkGUI which would be a wrapper sround forkIO which bound the resultent thread to the GUI OS thread
09:04:17 <dcoutts_> but it means that you then cannot make GUI calls unless you know you're in a gui thread
09:04:38 <dcoutts_> and that kind of thing is hard to know sometimes, especially in reusable/modular code
09:04:46 <xerox> withGUI $ do ..
09:04:50 <dcoutts_> it's a dynamic rather than a static property
09:05:11 <dcoutts_> xerox, yeah you'd need to do that if you didn't already know that you were in a GUI thread
09:05:13 <Cale> all the gui calls could pass messages to the GUI thread
09:05:19 <xerox> Or even at type level, like stm?
09:05:24 <Cale> but I suppose that's heavy
09:05:32 <dcoutts_> Cale, yes that's another high overhead solution
09:05:59 <dcoutts_> Cale, it's either high overhead if it's done transparently or low oferhead if it has to be done by the programmer manually
09:05:59 <esap> Would it be a solution to support all GUI calls in all threads, and implement it by using message passing?
09:06:35 <dcoutts_> esap, there is quite a bit of overhead to move the call from on thread to another, and many GUI calls are very short lived
09:07:29 <dcoutts_> it's not like hsql where you're just makeing one expensive call to the db server
09:07:34 <dcoutts_> it's lots of little calls
09:07:51 <esap> dcoutts: Well concurrency and messaging are very closely related. It's hard to take one but not the other.
09:08:21 <Cale> I wonder if another monad (like a writer) could be used to pick out the calls headed for the GUI and execute them in another thread.
09:08:34 <dcoutts_> esap, we're looking for a tranparent solution like we have now when using only one OS thread for the whole Haskell runtime
09:08:37 <Cale> Or whether that just amounts to the same thing as message massing
09:08:41 <Cale> passing*
09:08:46 <dcoutts_> Cale, yes it does
09:09:15 <dcoutts_> the only way to avoid message passing overhead is to make sure the thread you are in is actually running on the right OS thread
09:10:06 <SamB> dcoutts: so provide something that you can use to encapsulate blocks of GUI stuff to send them all over at once, unless they are already running in the GUI thread?
09:10:12 <dcoutts_> so if withGUI could migrate the Haskell thread to the right OS thread then it might be better since that'd only happen the first time that a gui call needs to be made rather than every time
09:10:27 <esap> Maybe coroutines would help. Hard to implement though :-)
09:10:39 <Cale> coroutines are implemented :)
09:10:44 <esap> they are?
09:10:57 <Cale> that's basically what laziness is, isn't it?
09:11:16 <esap> well almost.
09:11:20 <dcoutts_> SamB, yes that'd work. But all these sort of things make the threading problems visible to the programmer which means they will get it wrong at some point and the thing will segfault.
09:11:23 <xerox> Delimited continuations too!
09:11:59 <esap> Cale: There is one property of coroutines that I'd want that is not easy to implement with laziness: Performance localization.
09:12:40 <esap> Cale: I'd like to have coroutines to be able to control and measure who uses CPU time.
09:12:43 <CosmicRay> I am confused about -threaded.  The ghc user's guide says "The threaded RTS does not  support using multiple CPUs to speed up execution of a multi-threaded Haskell program."  but yet forkOS says that it creates a new OS thread, which would support exactly that
09:12:47 <CosmicRay> what exactly is going on here?
09:12:50 * SamB thinks they do something like that with STM in Pugs
09:12:50 * SamB is not sure what he is remembering, though...
09:12:52 <musasabi> The simple thing would be to provide a global Chan where GUI requests are sent.
09:13:19 <dcoutts_> CosmicRay, it means FFI calls can happen concurrently with Haskell code continuing to run
09:13:25 <musasabi> CosmicRay: -threaded supports multiple OS threads, out of which one at a time can execute haskell code.
09:13:41 <musasabi> CosmicRay: -smp is like threaded but multiple OS threads can execute haskell code.
09:13:46 <CosmicRay> musasabi: ouch.  so if my program is compute-intensive on the haskell side, -threaded wouldn't even help at all?
09:13:47 <dcoutts_> CosmicRay, and indeed FFI calls can happen concurrently too (which is the problem for GUI toolkits)
09:14:17 <dcoutts_> CosmicRay, the new parallel  rts the JaffaCake is developing can run Haskell code in parallel on an SMP machine.
09:14:35 <CosmicRay> hmm, I can't find docs on -smp.
09:14:45 <dcoutts_> CosmicRay, the -threaded one is just to deal with the problem that making foreign calls blocks all other Haskell threads.
09:14:47 <CosmicRay> it's in the users' guide index, but the page it links do doesn't  discuss it.
09:14:50 <musasabi> CosmicRay: yes, if the compute-intensive part is in Haskell. With GHC 6.5 and the SMP stuff (-smp) you will be able to benefit from multiple CPUs.
09:14:54 <CosmicRay> dcoutts: that *would* help me some.
09:15:02 <CosmicRay> dcoutts: what happens if I use forkOS without -threaded?
09:15:05 <CosmicRay> or vice-versa?
09:15:12 <dcoutts_> CosmicRay, it's not out yet. See JaffaCake's paper on the issue. I'll be in ghc 6.6.
09:15:25 <CosmicRay> my 6.4.1 manpage mantions it, oddly enough.
09:15:27 <dcoutts_> CosmicRay, forkOS without -threaded fails
09:15:32 <CosmicRay> ah
09:15:59 <dcoutts_> the other way around is fine
09:16:01 <musasabi> "*** Exception: user error (RTS doesn't support multiple OS threads (use ghc -threaded when linking))"
09:16:22 <musasabi> (from forkOS without -threaded)
09:16:39 * musasabi ponders writing a GhcConcurrency page to hawiki
09:16:43 <CosmicRay> so, forkOS and -threaded are primarily only of use when making calls to foreign items not already in fptools?  (since most of the fptools IO is async and works well with forkIO already)
09:16:52 <SamB> hmm, there is something wrong here!
09:16:56 <dcoutts_> CosmicRay, right
09:17:00 <SamB> % ghci -threaded
09:17:00 <SamB> ghc-6.4: --interactive can't be used with -prof, -ticky, -unreg or -smp.
09:17:00 <SamB> Usage: For basic information, try the `--help' option.
09:17:13 <CosmicRay> in my particular case, this would help with my database interactions, I think.
09:17:24 <dcoutts_> CosmicRay, probably, yes.
09:17:58 <CosmicRay> so, in a nutshell, this saves writers of haskell "glue" libraries from having to use the async interface to a C library (or also if the C library doesn't have one)
09:18:07 <dcoutts_> CosmicRay, yes
09:18:13 <CosmicRay> ok.  got it.  thanks.
09:28:32 <musasabi> Added http://haskell.org/hawiki/GhcConcurrency
09:29:56 <Cale> musasabi: thanks for the nice summary :)
09:30:17 <Cale> meow`: meow!
09:34:19 <ndm> dcoutts_: pong
09:35:58 <SyntaxNinja> hi ndm
09:36:18 <ndm> hi SyntaxNinja
09:39:34 <ProfTeggy> Bye all
09:41:31 <meow`> Cale: \o/
09:42:47 <dcoutts_> ndm, oh we were wondering about windows and ghc
09:43:03 <thedward> Is there a way to make a data type based on a list, but be constrained to a certain length? (I would use tuples, but I'd like to be able to use the list functions on it)
09:43:08 <dcoutts_> ndm, we were wondering which ghc version(s) windows users will probably have
09:43:32 <dcoutts_> ndm, since when we build packages for windows its specific to one ghc version of course
09:43:35 <ndm> dcoutts_, i have 6.2, 6.4 and 6.41
09:43:40 <ndm> * 6.4.1
09:43:41 <dcoutts_> ndm, but we can make multiple builds
09:43:47 <ndm> demand the latest
09:43:56 <ndm> its easy enough to install a newer version on windows
09:44:06 <Cale> thedward: unfortunately, not one which you can use the standard list functions on
09:44:10 <dcoutts_> eg last time the gtk2hs installer had versions for 6.2.2 and 6.4
09:44:15 <ndm> i keep upgrading every time i hack cabal and brake GHC entirely....
09:44:26 <dcoutts_> ndm, so you think just 6.4.1 is ok
09:44:52 <ndm> as long as you document that, and provide a link to the newer version, yeah
09:45:11 <dcoutts_> ndm, and if we were to have it work with 2 ghc version which ones you you pick?
09:45:42 <ndm> 6.4.1 and 6.4
09:45:43 <malcolm> some people may be stuck with older versions of ghc because they need a package which hasn't been updated to work with 6.4 yet
09:46:11 <dcoutts_> I guess the reasonalbe ones are: 6.2.2+6.4.1 or 6.4+6.4.1
09:49:23 <ndm> i suppose no one would choose 6.4 in preference to 6.4.1
09:49:38 <ndm> so 6.2.2 and 6.4.1 are probably the best
09:52:04 <conal> i have a cpp question (for use with ghc): how do i get quotes wrapped around a macro arg.  For instance, Foo(a+b) becomes fiddle "a+b" (a+b).
09:53:22 <Maddas> Hm. What does it mean if my program (compiled with GHC) outputs "a.out: <<loop>>" when run from a shell (the binary is named a.out)?
09:53:37 <meow`> hy lambdawar
09:53:39 <Cale> Maddas: it means that your program had an infinite loop
09:53:45 <Maddas> Oh. Bah :-)
09:53:48 <Maddas> Thanks!
09:53:49 <musasabi> conal: #define STRING(x) "x"
09:54:03 <xerox> Maybe it would win the chess game... but it's undecidable :-D
09:54:08 <lambdawar> 'lo
09:54:37 <meow`> lambdawar, fr no ?
09:54:43 <Maddas> xerox: Heh, surely it would sooner or later notice that playing the game is pointless and just explode.
09:54:52 <malcolm> musasabi: doesn't work with ANSI cpp
09:54:54 <musasabi> in particular #define Foo(x) fiddle "x" (x)
09:54:58 <musasabi> malcolm: of course not.
09:54:59 <xerox> Maddas: it depends on how dum is it :-)
09:55:01 <meow`> t un amis de kryshaam il me semble
09:55:02 <xerox> s/dum/dumb/
09:55:03 <Maddas> xerox: :-)
09:55:17 <lambdawar> meow`, on se connait ?
09:55:18 <musasabi> with ansi CPP one would use #define STRING(x) #x
09:55:22 <eivuokko> Wouldn't that preprocessor trick "##x##" rather
09:55:29 <malcolm> conal: #define Foo x  fiddle #x (x)
09:55:29 <meow`> lambdawar, tu pass sur fret
09:55:31 <musasabi> but Haskell uses traditional cpp.
09:55:34 <meow`> passais*
09:55:40 <musasabi> malcolm: that won't work.
09:55:44 <Maddas> Cale: I think GHC is too smart for me ;-) Is there any particularly suited way of finding the error there or does one just debug as usual?
09:56:00 <musasabi> as GHC passes -traditional to cpp which means it will have non-ansi semantics.
09:56:03 <lambdawar> meow`, oki
09:56:07 <meow`> :)
09:56:36 <xerox> ...and cpphs is -traditional too?
09:57:01 <Cale> Maddas: well, use ghci to evaluate things that you've defined, and you should end up with the loop. It's possible that it only occurs with particular user input, but most cases of <<loop>> are fairly direct and will always occur.
09:57:03 <conal> musasabi: thanks!  that does the trick.  i was writing for GHC and testing with "cpp" without -traditional.
09:57:04 <musasabi> cpphs at least supports that.
09:57:06 <dcoutts_> ndm, ok, thanks
09:57:12 <malcolm> cpphs is liek -traditional, except you can add ANSI-like hashes with --hashes
09:57:32 <Cale> Maddas: you're looking for a recursive function which calls itself with the same input arguments
09:57:46 <Maddas> Ok, thanks.
09:57:50 <xerox> let a () = a () in a ()
09:58:01 <Maddas> (I already ruled out the most obvious candidate, I wonder where the problem lies)
09:58:02 <Cale> loop = loop
09:58:13 <xerox> Cale: True
09:58:16 <xerox> <grin>
09:58:24 <Cale> heh
09:59:00 <Maddas> Can't I ask GHC to run it anyway?
09:59:06 <Maddas> I could easily find the loop by profiling, I assume
09:59:12 <Cale> Maddas: if it helps, use Debug.Trace.trace
09:59:16 <Maddas> Ok.
09:59:16 <xerox> I think so too.
09:59:19 <Maddas> Thanks again :-)
09:59:32 <meow`> cya ppl
10:00:25 <Cale> Maddas: then you'd get a freeze rather than that message
10:00:36 <Cale> (if GHC actually ran it)
10:01:24 <Cale> infinite loops will run if they're actually doing anything
10:01:37 <Maddas> Cale: Sure, but C-cing the program will still have it output profiling information if I ask it to, no?
10:01:46 <Maddas> It seemed to work for a different program that got stuck
10:02:12 <Cale> are you compiling with -O ?
10:02:16 <Maddas> Not now, no
10:02:19 <Cale> okay
10:02:46 <Cale> -O can cause more loops to get caught with <<loop>> than not having optimisations
10:03:13 <Maddas> Ah, ok
10:09:24 <Maddas> oh, duh, it was something like what xerox posted. I forgot about the scope of let :-)
10:09:45 <Maddas> Now to find out why it doesn't seem to terminate :-P
10:09:58 <xerox> Woot! :-)
10:12:57 <eivuokko> Are there Visual Haskell users/devels here?  Is it possible to get it working so that when I have other stuff open and haskell file open, it won't automatically fail preprocessing and compiling.  Rather annoying extra errors on task list.
10:14:06 <Cale> Maddas: I recommend as much as possible to test functions in ghci as you write them. Occasionally it gets to the point where constructing input data is difficult, and that's when debugging gets tricky, and you have to start breaking up the function into smaller pieces and lifting them out, but this is usually good, as functions which are easy to test are usually easy to get right. :)
10:15:39 <Cale> sometimes it's really hard to break the function up too, and that's when there's no choice but Debug.Trace and hoping that you have Show instances for everything :)
10:16:07 <Cale> (or I suppose a declarative debugger, but those never play well with extensions)
10:17:46 <Maddas> I'm afraid that many of my functions are rather large
10:18:06 <Maddas> But I already know which one must be the culprit, since I tested the program before using that one and it works fine
10:18:25 <Cale> :)
10:18:32 <Maddas> I just wanted to be sure, since I always seem to be wrong anyway :)
10:18:52 <SamB> Maddas: break it into tiny pieces, each too small to be wrong!
10:19:03 <SamB> then write tests to be sure anyway ;-)
10:19:12 <Cale> The bugs which are left after compiling Haskell code are usually subtle.
10:19:13 <Maddas> SamB: I'll never find the bug if I just make it work!
10:20:13 <SamB> don't find them -- eradicate them!
10:20:22 <Maddas> (:
10:20:34 <SamB> unless finding is easier, of course
10:22:51 <eivuokko> Hmh, what is typical way to present opaque/void pointer types from C in Haskell?
10:23:15 <SamB> Ptr a
10:23:31 <xerox> eivuokko: newtype Pointer = Pointer (), or even Pointer (Pointer ())
10:23:39 <eivuokko> Hmm.
10:23:56 <eivuokko> What is () in that?
10:24:02 <Maddas> Cale: Eh, indeed, it was.
10:24:05 <xerox> The Unit (nothing).
10:24:15 <eivuokko> Ah, ok.  Thanks!
10:24:15 <SamB> @type ()
10:24:20 <lambdabot> ()
10:24:22 <Cale> data Opaque
10:24:26 <Cale> (no constructors)
10:24:36 <Cale> (that's an extension though)
10:24:47 <eivuokko> I don't care if it works with ghc.
10:24:52 <xerox> Cale: which you can emulate with modules, right?
10:24:59 <Cale> xerox: yes
10:26:46 <musasabi> data Opaque = Opaque.
10:27:05 <musasabi> Is there actually a reason to omit the constructor?
10:27:23 <SamB> whats wrong with Ptr ()?
10:27:51 <SamB> well, I suppose it is only good for the void case...
10:27:52 <xerox> Not being able to unpack it - a-la IO ?
10:28:15 <eivuokko> Obviously void* is never untyped from intention point of view, just technically.
10:29:20 <SamB> anyhow, Ptr a when a isn't Storable is opaque...
10:29:21 <dcoutts_> xerox, I've got a .cabal file for nymphaea
10:29:43 <dcoutts_> xerox, btw, I hadn't run it for a while. It's really pretty now! wow
10:29:57 <dcoutts_> xerox, I'll darcs send it to you
10:30:09 <musasabi> Personally I never understood the point of using "data Foobar" and "foobar = undefined :: Foobar" instead of "data Foobar = Foobar" (ok, in the second case the type has two values)
10:30:18 <eivuokko> Yeah, now I see that I misread ffi spec, I somehow read that a *must* be instance of Storable.
10:30:48 <eivuokko> Sorry I was lazy, and thanks for help all :)
10:30:50 <xerox> dcoutts_: It does look great, doesn't it?
10:31:02 <xerox> dcoutts_: thanks much for the cabal, I'm going to apply it later this night.
10:32:06 <SyntaxNinja> cabal!
10:32:27 <dcoutts_> xerox, you've not set a default email address for the darcs repo :-(
10:32:37 <xerox> Hmm, how to do that?
10:33:35 * dcoutts_ checks
10:34:47 <dcoutts_> xerox, cat "foo@bar.com" > _darcs/prefs/email
10:35:10 <xerox> echo :-)
10:35:11 <dcoutts_> in the nymphaea repo on the server side
10:35:12 <xerox> Thanks much.
10:35:18 <dcoutts_> err yeah, echo
10:35:52 * dcoutts_ waits for the signal before darcs sending
10:36:02 <xerox> Done.
10:36:03 <wonea> hello, if I was to recursively calculate a number what kind of output should I expect?
10:36:33 <Cale> um, a number?
10:36:36 <tromp> 42
10:36:43 <xerox> haha.
10:36:50 <wonea> :-)
10:37:12 <work_metaperl> :)
10:38:03 <glguy> is there something obviously wrong with this line..... norm m = sqrt $ sum $ map (^2) [ m!a | a <- range $ bounds m ]
10:38:17 <xerox> @type (!)
10:38:18 <lambdabot> bzzt
10:38:35 <glguy> @type Data.Array.(!)
10:38:36 <lambdabot> bzzt
10:38:39 <glguy> @type Data.Array.!
10:38:41 <lambdabot> bzzt
10:38:47 <glguy> well, it's a realthing
10:38:53 <Cale> @type Data.Array.IArray.(!)
10:38:55 <lambdabot> bzzt
10:38:58 <xerox> AH.
10:39:10 <Cale> array index operator
10:39:45 <xerox> Thanks.
10:39:54 <Cale> glguy: isn't that list comprehension the same as elems m?
10:40:05 <glguy> Cale: could be
10:40:23 <Cale> is m a 1-D array?
10:40:26 <glguy> no
10:40:32 <Cale> oh
10:40:47 <glguy> I'm getting an indenting error...
10:40:47 <dcoutts_> xerox, sent
10:40:48 <Cale> @eval range (1,1) (10,10)
10:40:50 <lambdabot>   The function `range' is applied to two arguments,
10:40:50 <lambdabot>   but its type `(a, a) -> [a]' has only one
10:40:50 <lambdabot>   In the definition of `xxxx': xxxx = range (1, 1) (10, 10)
10:41:01 <Cale> @eval range ((1,1), (3,3))
10:41:02 <glguy> found it
10:41:03 <lambdabot> [(1,1),(1,2),(1,3),(2,1),(2,2),(2,3),(3,1),(3,2),(3,3)]
10:41:07 <glguy> missing parenthesis
10:41:09 <Cale> okay, that's sane
10:41:11 <Cale> ah
10:41:20 <eivuokko> Meh, I should have done this ffi-interfacing before.  Even with my limited haskell skills it's pretty much dead easy.
10:41:38 <work_metaperl> eivuokko: what FFI interface did you use?
10:41:41 <dcoutts_> eivuokko, glad you think so. :-)
10:41:41 <work_metaperl> greencard?
10:41:42 <Cale> The Haskell FFI is really nice
10:41:43 <xerox> eivuokko: are you using C->Haskell ?
10:41:49 <work_metaperl> gtk2hs?
10:41:55 <xerox> @google c2hs
10:41:56 <lambdabot> http://www.cse.unsw.edu.au/~chak/haskell/c2hs/
10:41:58 <xerox> ^- that one
10:42:09 <work_metaperl> how do you know what eivuokko did xerox?
10:42:10 * dcoutts_ reccomends "c2hs" C->Haskell
10:42:12 <xerox> It simplifies the work *very* much.  It's very, very nice.
10:42:14 <eivuokko> I am doing a haskell interface to a c+ library at work, I have c-wrapper dll.
10:42:39 <Cale> For small interfaces, the direct approach with the FFI is easy enough.
10:42:41 <xerox> eivuokko: check it out the c2hs paper, if you have time.. or just the docs, they give a good idea of what is it about.
10:42:48 <dcoutts_> eivuokko, yeah C++ is harder to use with the FFI since you need to go via a C version of the C++ thing
10:43:19 <dcoutts_> eivuokko, sounds like you're taking the right approach
10:44:01 <Cale> How do C++ libraries interface with each other? Is there a standard for name mangling?
10:44:13 <eivuokko> xerox, it is rathe small interface, and I want to polish up my haskell, so I'll do this by hand, I think.  Thanks for tip, I will look when I next time get stomped.
10:44:17 <eivuokko> CAle, no.
10:44:19 <xerox> They do HAPH
10:44:30 <xerox> Hope and pray hard (?!)
10:44:32 * xerox giggles
10:44:50 <eivuokko> Cale, via very specific interface restrictions, usually.  And very protected memory handling.
10:45:30 <xerox> eivuokko: c2hs doesn't produce crap, usually - it's quite the opposite, in my experience.
10:45:44 <eivuokko> Stuff like functions pointers, c-types and often virtual tables for classes work with little planning.  Anything else is worthless when doing msvc <-> gcc interoperability for example.
10:46:16 <eivuokko> xerox, I am not afraid of that :)  I just want to go through this because I want to know I can can/know how to do it :)
10:47:09 <xerox> eivuokko: c2hs makes it higher level - which is kinda the reason (above others, maybe) because you're using haskell ;-)
10:47:52 <Cale> xerox: the direct FFI isn't so bad either
10:48:09 <xerox> Cale: agreed - the c2hs annotation language is cool, though.
10:48:29 <xerox> Cale: it saved me from much, much writing :-)
10:48:32 <Cale> :)
10:49:40 <xerox> Though I'd like some other extensions, like the possibility to define marshallers for arbitrary types (but it would require to hack the c2hs internal representation of it to a dynamic structure, or something)
10:50:54 <glguy> what am I doing wrong on the line 11... this monad stuff is killing me http://rafb.net/paste/results/2whrgl89.html
10:51:25 <glguy> (no the algorithm isn't done... still getting over not understanding a part of the language)
10:53:00 <dcoutts_> eivuokko, Cale, there is a standard multi-vendor C++ ABI which includes things like V-table layout and name mangline etc. recent versions of gcc-3.x follows this ABI. Many other comercial C++ compliers do too. However I doubt the MS C++ complier follows it. (Probably because they want to remain compatible with easlier versions of MSVC++)
10:53:31 <eivuokko> dcoutts, the spec happens to be almost fully compatible from those parts I described with msvc
10:53:40 <eivuokko> "happens"
10:53:44 <dcoutts_> oh, that's better than I thought
10:53:51 <dcoutts_> but not enough?
10:53:53 <eivuokko> Well
10:54:20 <eivuokko> There are a lot of things that are not just ABI issues
10:54:37 <Cale> glguy: outerloop returns an IO action
10:54:44 <eivuokko> Like template code generated.  Standard template library presentation.
10:54:47 <Cale> glguy: so gaussseidel does too
10:55:15 <glguy> okay, and when i make it res <- gau...
10:55:22 <glguy> couldn't match IO against Array
10:56:10 <Cale> glguy: things seem to be a bit schizophrenic wrt types here -- perhaps try adding type signatures that you think the functions should have
10:56:18 <glguy> okay..
10:56:19 <Cale> the error reporting will get better as you do that
10:57:32 <Cale> I somehow think that the "do" in outerloop is intended to be a let.
10:58:23 <Cale> g // [...] doesn't actually modify g -- it evaluates to a modified version of g.
10:58:34 <glguy> og it
10:58:34 <glguy> got it
10:58:39 <glguy> i changed that to a let in
10:59:27 <dcoutts_> eivuokko, right but at least you'd be able to link two C++ libs generated by different complilers. Even if they couldn't use each other's template header files etc.
10:59:57 <dcoutts_> eivuokko, and so it should be possible to make a C++ FFI for Haskell that did all the name mangling etc.
10:59:58 <eivuokko> dcoutts, yes, and most importantly on Windows, you can implement COM/some other plugin interfaces with gcc.
11:00:33 <xerox> DiffArrays, three times in a row? :-)
11:02:25 <Cale> xerox: Even with diff arrays, the change is purely internal, and g will still refer to something which "looks the same as" the original.
11:02:35 <Cale> it will just get slower :)
11:02:59 <xerox> Cale: err, I knew the former part - but why the latter?
11:04:49 <Maddas> Parsec question: Will try ( do { foo <- bar ; char '-' ; foo2 <- baz ; return (foo, foo2) } ) do what I mean in terms of backing up in case of failure?
11:04:55 <Cale> well, the updated version of g is happening in the same array, and the old version is updated to record the old values along with a pointer to the more recent array
11:05:20 <Maddas> I can't get parsing right in those cases where the first try ( .. ) fails, but I don't know why.
11:05:21 <xerox> Maddas: try does consume the input in either cases, if it's what you are thinking about.
11:05:39 <Maddas> xerox: Oh. How would I get it to back up the way I'd like it to?
11:06:05 <Cale> Maddas: just what do you mean?
11:06:12 <Cale> :)
11:06:33 <xerox> <|>  IIRC.
11:06:56 <Maddas> xerox: I'm using that in my case, but the second argument to (<|>) seems to get called with the input already consumed
11:06:57 <xerox> Cale surely knows.
11:07:27 <Cale> Maddas: try p does the same thing as p, except that if p fails, then it will not have consumed any input
11:08:06 <xerox> Cale: didn't 'try' consume the input anyway, while <|> did not?
11:08:07 <Maddas> Right. So try (do {char '='; char 'x'}) <|> try ( do {char '='; char 'a'} ) for example should do the right thing?
11:08:13 <musasabi> An array performance test would be nice to see.
11:08:15 <Cale> which means that the next parser will be gracefully tried
11:08:23 <Cale> musasabi: I agree
11:09:03 <Cale> musasabi: I suspect that for most applications of arrays, Diff arrays would be nicer. There are cases where you really do want Arrays though (or specialised unboxed arrays, of course)
11:09:38 <Cale> Maddas: yes, I think so
11:09:51 <Cale> Maddas: try it
11:10:02 <Maddas> That's what I did, and that's why I'm asking. I'll put together a simpler test case.
11:10:31 <Maddas> Thanks :-)
11:11:01 <araujo> Has anyone ever used readLine here?
11:12:25 <musasabi> Cale: true, but e.g. GHC.PArr vs Diff arrays would be quite interesting.
11:13:27 <SyntaxNinja> can I log into the haskell wiki if I lost my cookie?
11:13:33 <Cale> musasabi: ah, I haven't looked closely at PArr
11:14:06 <Cale> SyntaxNinja: sure, click on the link in the top right
11:14:23 <Cale> "UserPreferences"
11:14:50 <SyntaxNinja> and creat ea new profile?
11:15:04 <Cale> SyntaxNinja: no, just enter your username and password
11:15:37 <Cale> (the login/create new profile forms are merged)
11:15:44 <Cale> you don't have to type your password twice
11:16:58 <Cale> SyntaxNinja: failing that, ask shapr :)
11:17:33 <SyntaxNinja> actually, I have the cookie number; it's not accepting my password
11:17:48 <xerox> ATTENTION PLEASE - vote now: should I invest 41 in a calculus book?
11:18:01 <Cale> xerox: which one? :)
11:18:05 <xerox> Cale: that one
11:18:14 <Cale> Spivak's "Calculus"?
11:18:16 <Cale> yes
11:18:16 <xerox> Yep.
11:18:40 <Maddas> Yup
11:18:48 <astrolabe> I dislike big books
11:18:56 <xerox> A no! :-D
11:19:33 <astrolabe> His 'calculus on manifolds' is very nice though.
11:19:52 <SyntaxNinja> bugger
11:19:56 <SyntaxNinja> @paste
11:19:57 <lambdabot> http://www.haskell.org/hawiki/HaskellIrcPastePage
11:20:41 <Cale> SyntaxNinja: you might be able to install something to let you edit the cookies in Firefox
11:21:13 <Cale> (I believe there are some extensions
11:21:14 <Cale> )
11:21:25 <Cale> anyway, I'm going to grab 2 hours of sleep :)
11:21:28 <SyntaxNinja> I can edit my cookies, but I'd need to like, create a bogus one first
11:22:07 <Cale> SyntaxNinja: in that case, perhaps a fake user account would do the trick?
11:23:20 <SyntaxNinja> meh. I'll wait for shapr
11:23:25 <SyntaxNinja> thanks, though
11:24:01 <Cale> I wonder what happens if you edit cookies.txt by hand (though it tells you not to)
11:28:15 <conal> i have another question about cpp under ghc.  is there a way to get cpp not to treat prime (single-quote) lexically special?  For instance, in FOO(q'), the macro parameter is "q')..." up to the next single quote. i guess that makes sense from a C perspective.
11:29:25 <Cale> maybe \' ?
11:29:37 <Cale> I'm not sure
11:30:26 <musasabi> It might make sense not to use single quote with cpp.
11:33:18 <conal> Cale: The backslash doesn't seem to make a difference.  probably would *between* quotes.  and i want the uses to be simple & pretty.  oh well.
11:33:35 <conal> musasabi: i think that's probably the answer.  oh well.
11:36:43 <Maddas> Cale: Oh, sorry -- that was indeed not the failure, it only triggered it.
11:36:57 <Maddas> So much for looking at the wrong problem :-)
12:02:00 <xerox> Urgh, amazon wants to call you back on the phone to recover the password...
12:03:31 <dcoutts_> xerox, http://haskell.org/~duncan/gtk2hs/gtk2hs-0.9.9.6.exe
12:03:33 <ulfdoz_> hm, stupid question in short: Where is an intro to literate haskell (no tex, literate haskell in plain text)
12:04:10 <dcoutts_> xerox, it should work with ghc-6.2.2 or ghc-6.4.1, and with gtk-2.6.x or gtk-2.8.x
12:04:16 <dcoutts_> xerox, report any bugs to me
12:04:21 * xerox runs in circle around dcoutts
12:04:33 <xerox> Will do!  I'll try that tomorrow at school, hopefully.
12:04:38 <dcoutts_> ok ta
12:04:48 * dcoutts_ tries nymphea on win32
12:05:16 <xerox> Getting nymphaea.exe would be fun too :-)  Should it need anything apart gtk and cairo dlls?
12:05:19 <ulfdoz_> What I remember from my times with haskell long ago: Lines with code are introduced by ">", the remaining text as usual.
12:05:38 <ulfdoz_> Unfortunately ghci doesn't parse it as I'd expect.
12:05:56 <xerox> ulfdoz_: that is literate haskell!
12:06:05 <xerox> If you want to do that save as .lhs
12:06:06 <dcoutts_> xerox, I'm just trying now
12:07:23 <ulfdoz_> xerox: But what does this mean? fp-blatt01.lhs line 7: unlit: Program line next to comment
12:08:16 <astrolabe> Nooooo.  I've accidentally bought DARK chocolate biscuits :(
12:08:40 <dcoutts_> xerox, woot! it works fine
12:08:42 <xerox> ulfdoz_: you should put a whiteline before and after a > code line/block
12:08:46 <xerox> dcoutts_: WHOAAA
12:10:27 <dcoutts_> xerox, screenshot....
12:10:35 * xerox is very, very excited
12:10:36 <xerox> Please do!
12:10:46 <dcoutts_> http://haskell.org/~duncan/cairo/Nymphaea-Win32.png
12:11:04 <dcoutts_> you can see I'm using gnome + rdesktop to a win32 box :-)
12:11:55 <ulfdoz_> xerox: Ah! Now I can fight with indentation of oneliners. :)
12:11:56 <xerox> Yeah :D
12:12:12 <xerox> Woot.
12:12:15 <dcoutts_> xerox, it just worked, no problems. I'm using mingw+msys so I just did a darcs get and then make
12:12:40 <xerox> dcoutts_: that's just great.
12:12:44 <dcoutts_> :-)
12:12:47 * dcoutts_ is pleased
12:13:09 <xerox> So a supposed .exe download should come with cairo and gtk?
12:13:22 <xerox> (or even suggest to install gtk, but bundle cairo?)
12:13:44 <xerox> And as side note, Cale's lil shiny thing does work too?
12:13:52 <ulfdoz_> .oO( Note to me: Use stuff you know for homework )
12:14:29 <dcoutts_> xerox, the .exe should work with the gtk runtime installer from gladewin32.sf.net
12:14:49 <xerox> ulfdoz_: I'd say, use an .hs file, you could simply write the code without '> ' and put comments as "-- comment" and "{- multiline {- and even nested -} comments -}"
12:14:58 <dcoutts_> xerox, you could make your own win32 installer by sticking the gtk .dlls in the same dir as the .exe
12:15:02 <xerox> dcoutts_: that installer does install cairo too?
12:15:15 <dcoutts_> xerox, you need the 2.8.x one obviously
12:15:27 <dcoutts_> and yes that comes with cairo, since gtk 2.8 depends on it
12:15:30 <xerox> Great!
12:15:41 <xerox> Could you share the .exe online, so that I could get it from school?
12:15:52 <dcoutts_> xerox, you can't build it?
12:16:07 * dcoutts_ thinks xerox should build it
12:16:18 <xerox> Hmm, why?
12:16:22 <dcoutts_> yes I can share it if you like
12:16:41 <xerox> Installing the developement tools is kinda painful at school, they're never happy about it
12:16:59 <ulfdoz_> xerox: Yes, that was my first thought, which I thought would be too easy. :)
12:17:28 <xerox> ulfdoz_: hack it the simple way, then you can read about .lhs somewhere, don't you?
12:17:59 <eivuokko> That reminds me, what are .hsc files?
12:18:14 <ulfdoz_> xerox: Yes, I'll do that, the translation is fast.
12:18:20 <dcoutts_> xerox, http://haskell.org/~duncan/cairo/nymphaea.exe
12:18:23 <xerox> eivuokko: hsc2hs annotated files.
12:18:42 <xerox> dcoutts_: thanks again.  I'll try to build it on windows sometime too.
12:18:43 <dcoutts_> eivuokko, hsc2hs is one of the FFI pre-processor available
12:19:30 <eivuokko> Ah, cool.  Thanks xerox and dcoutts. :)
12:20:30 <dcoutts_> xerox, it will popup a console window. Don't worry about that. We can fix that later.
12:20:43 * dcoutts_ goes home
12:20:43 <xerox> Okay :D
12:20:49 * xerox hugs dcoutts_ 
12:20:57 <dcoutts_> :-)
12:21:02 * dcoutts_ really goes home
12:21:19 * xerox gets some friends to try it
12:21:27 <xerox> They were eager to come do it :D
12:22:01 <ptolomy> I imagine everyone here is pretty comfortable with learning new programming languages, so I ask: what is the core information you look for if you have to learn a new language?
12:22:45 <xerox> ptolomy: it's not a very systematic approach for me, at least it wasn't until now.  I usually go searching for a good tutorial, not the standard or the report.
12:24:09 <m3ga> ptolomy: I usually have a something I want to achieve in the new language and than look for example code to get me started.
12:24:34 <pesco> I usually learn from beginning to end. I avoid tutorials because I deal bad with partial information. I prefer a teaching text-book. For instancte, I learned C++ from "The C++ Programming Language" and Haskell from "The Craft of Functional Programming". At some point I naturally drift into programming and soon find myself knowing half the reference docs.
12:25:13 <ptolomy> Yeah, I tend to try to find a reference that has dirty details available quick, then use that to dissect a standing program that I believe to be in good style, so I get a reasonable sense of the idioms.
12:25:21 <m3ga> I quite like pleac.sf.net for my approach
12:26:01 <xerox> dcoutts_: still here?
12:26:57 <pesco> For judging a new language I have personally relied on gut-feeling from poking around the web (peek into docs, tutorials, example code).
12:27:08 <eivuokko> I have learnt most programming languages by starting to hack some exiting program into useable state.  Those programs usually are in bad style vs ptolomy's approach, tho.
12:27:35 <eivuokko> *existing
12:31:34 <ptolomy> actually, on the subject, what is good haskell code for reading purposes? Ideally, it'd be not too large, actually do something, and not rely to heavily on external libraries.
12:33:18 <eivuokko> I found darcs to be practical enough and interesting enough.  If you don't go reading actual patch/conflict system.  ymmv.
12:36:55 <pesco> ptolomy: Well, I have to point you to my literate programs... ;-) It's a plug, but you asked for it...
12:38:12 <pesco> ptolomy: Most finished is pesco-cmdline, from http://www.scannedinavian.org/~pesco/ , second in line is the KHJK fingerd from http://www.khjk.org/ , and then the rest at the former site.
12:38:52 <yaarg> somebody mentioned a page earlier with tips for hacking ghc? where is that?
12:43:55 <eivuokko> How is ForeignPtr implemented in ghc - is the finaliser called as soon as possible or only at garbage collect, and if latter, how big problem can that be?
12:47:04 <m3ga> is the source to lambdabot available?
12:47:22 <m3ga> i'd google, but this is irc :-)
12:47:45 <xerox> @version
12:47:46 <lambdabot> lambdabot 3p107, GHC 6.5 (OpenBSD i386)
12:47:46 <lambdabot> darcs get http://www.cse.unsw.edu.au/~dons/lambdabot
12:47:49 <xerox> There you go.
12:49:54 <m3ga> :-)
12:49:59 <astrolabe> Is there a user guide?
12:50:19 <xerox> It's quite simple, maybe there is something on the wiki.
12:51:13 <astrolabe> LOL what kind of a comment is 'Let's go Lambdabot !'  ?
12:51:42 <xerox> D-:
12:53:06 <dcoutts> xerox, pong
12:53:11 <xerox> dcoutts!
12:53:20 <xerox> A friend of mine succeeded in running it!
12:53:29 <dcoutts> the nymphaea.exe ?
12:53:30 <xerox> Another one is having some trouble...
12:53:38 <xerox> Yeah
12:54:16 <xerox> He's screenshoting the error I think
12:55:06 <dcoutts> ok
12:55:43 <xerox> Just a sec...
12:55:49 <xerox> Cannot find entry point in XML something
12:55:59 <xerox> http://img131.imageshack.us/my.php?image=clipboard5zg.jpg
12:57:05 <xerox> Under XP.
12:57:18 <dcoutts> xerox, he's got xmlparse.dll on his path somewhere else
12:57:50 <xerox> He has _not_ got it?
12:59:08 <dcoutts> no, he does have it but he's got two versions on his path
12:59:17 <dcoutts> and it's picking up the wrong version
12:59:20 <dcoutts> try this...
12:59:45 * ptolomy likes it when other people use LHS. 
13:00:03 <dcoutts> xerox, move the nymphaea.exe into the gtk bin dir
13:00:18 <xerox> Which is?
13:00:27 <dcoutts> xerox, wich is probably "C:\program files\gtk2hs\bin"
13:00:36 <dcoutts> xerox, and then run it from there
13:00:39 <SamB> hmm, I'm having trouble building the latest hIDE yi...
13:00:48 <xerox> "2hs" ?
13:01:59 <SamB> /usr/bin/ghc -odir dist/build/yi-static/yi-static-tmp -hidir dist/build/yi-static/yi-static-tmp -o dist/build/yi-static/yi-static --make -i -iboot -isrc -O -funbox-strict-fields -threaded -fglasgow-exts -package base-1.0 -package mtl-1.0 -package plugins-0.9.10 -package gtk-0.9.9.5 -package sourceview-0.9.9.5 boot/Static.hs
13:01:59 <SamB> Chasing modules from: boot/Static.hs
13:01:59 <SamB> src/Yi/UTF8.hs:117:1: lexical error
13:02:52 <xerox> dcoutts_: I'll make him uninstall the previous gtk
13:03:04 <xerox> dcoutts_: he has \gtk\2.0\
13:04:57 <dcoutts> xerox, that might also do it (but the installer should have detected if a full previous version of gtk was installed)
13:05:16 <xerox> It didn't :-\
13:05:25 <dcoutts> xerox, oh yeah, sorry
13:05:27 <xerox> He can't find 2.8.6 installation
13:05:43 <dcoutts> it should be copied to the gtk bin dir (not the gtk2hs one)
13:05:58 <dcoutts> you can look in the registry to find the gtk installation
13:06:20 <dcoutts> HK{LM|CU}\SOFTWARE\Gtk\2.0\path
13:06:53 <xerox> I think he's not a power user, heh.
13:07:17 <xerox> OK, let's try anyway
13:08:13 <SamB> hmm, I added an "extensions:          CPP, ForeignFunctionInterface" line to the "Executable:          yi-static" group, and its building, but it insists on building Yi.* again...
13:12:08 <xerox> OK, 2 got it working!
13:12:11 <xerox> (1 still not)
13:12:23 <SyntaxNinja> woot
13:12:47 <dcoutts> xerox, so that was by doing what?
13:13:01 <dcoutts> xerox, but putting the nymphaea.exe in the gtk bin dir?
13:13:01 <xerox> No, that guy can't still run it
13:13:16 <dcoutts> xerox, did he try putting the nymphaea.exe in the gtk bin dir?
13:13:32 * dcoutts blames windows dll search order problems
13:14:02 <xerox> He's trying
13:15:52 <ValarQ> what does the error message "panic! (the `impossible' happened, GHC version 6.4)" mean?
13:16:47 <xerox> Woot :-)
13:17:00 <SyntaxNinja> ndm: your windows path bug is fixed in cvs, i'll push it to darcs asap
13:17:00 <ValarQ> :(
13:21:37 <ValarQ> i'd better report this...
13:22:18 <xerox> dcoutts_: success!
13:22:25 <xerox> Four out of four ran it!
13:24:21 <dcoutts> xerox, excelent. So what was necessary?
13:24:52 <dcoutts> ValarQ, it means try ghc 6.4.1 and try again :-)
13:24:53 <ValarQ> can anyone tell me whats wrong with: http://arda.no-ip.org/ctest.hs
13:25:13 <xerox> dcoutts: put it in the bin\
13:25:26 <ValarQ> dcoutts: ok
13:26:37 <xerox> http://img128.imageshack.us/full.php?image=clipboard8sz.jpg
13:26:52 <beelsebob_> beautiful
13:27:08 <beelsebob_> that one should be added to the rorch test
13:27:19 <xerox> beelsebob_: special note, it's windows!
13:27:41 <beelsebob_> xerox: no... I meant the actual thing it's drawn
13:27:45 <beelsebob_> not the OS
13:27:56 <beelsebob_> that's still ugly as sin
13:28:31 <SyntaxNinja> is there a fromIntegral that checks for overflow?
13:31:46 <CosmicRay> SyntaxNinja: what does the current one do on overflow?
13:31:50 <CosmicRay> wouldn't it raise an exception?
13:32:16 <CosmicRay> oh, humm!
13:32:18 <CosmicRay> truncates bits?
13:32:23 <CosmicRay> Data.Word> (fromIntegral 1000)::Word8
13:32:24 <CosmicRay> 232
13:32:30 <CosmicRay> that's nasty.
13:32:31 <dcoutts> xerox, so I be that if he searches his hard drive for the xmlparse.dll he'll find one that is either in the windows system dir or in another directory that is on his PATH.
13:32:36 <dcoutts> be/bet
13:33:07 <xerox> It's possible.
13:33:48 <dcoutts> xerox, this is the problem with the PATH stuff on windows and installing a shared copy of gtk
13:34:00 <dcoutts> it's not clear how to resolve it
13:34:27 <dcoutts> I can make the gtk2hs installer better at detecting the situation and reporting it but that doesn't fix it
13:34:37 <SyntaxNinja> CosmicRay: :)
13:35:13 <xerox> dcoutts, but gtk2hs isn't needed to just use the program (thinking of end users)
13:35:38 <SyntaxNinja> I wrote something that stops you from casting something unsafely; but I think I also want to check for overflow from integer to int, for instance
13:35:58 <SyntaxNinja> and if I could post on the wiki, I'd show you the code and ask for ideas
13:36:07 * SyntaxNinja glares at shapr
13:36:52 <SamB> hmm, so what might I be able to do for hIDE?
13:37:39 <goron> SamB: Can you already compile it?
13:38:16 <SamB> goron: only with haskellSense taken out of the package list in build.sh...
13:38:34 <dcoutts> xerox, right but you'd get the same problem unless you distribute your .exe in the same dir as the gtk .dll files
13:39:13 <xerox> What a pain.
13:39:16 <dcoutts> SamB, what aspect of hIDE are you interested in? the GUI? the cabal integration?
13:39:20 <dcoutts> xerox, yeah
13:39:39 <SamB> dcoutts: probably the GUI more than the cabal integration...
13:39:49 <dcoutts> SamB, excelent! :-)
13:39:51 <Igloo> SyntaxNinja: You could write a function that either compares with {min,max}Bound or that casts back and check it's the same value
13:39:54 * dcoutts works on the hIDE gui
13:40:00 <SamB> there seem to be a lot of things that don't actually do anything
13:40:03 <dcoutts> xerox, windows expects you to distribute "applications" which come bundled with all their .dlls
13:40:14 <dcoutts> SamB, yes.
13:40:20 <xerox> Hmpf, will do so :-\
13:40:23 <SyntaxNinja> Igloo: right
13:40:41 <dcoutts> SamB, the gui was built with glade which makes it easy to add stuff. Not much of it is connected yet.
13:40:43 <SyntaxNinja> Igloo: the code for checking min, max bounds is uglier than I would think
13:40:43 <xerox> dcoutts, what about an hackish .bat ?
13:40:53 <dcoutts> xerox, that would do what?
13:41:08 <xerox> Find gtk, fix %PATH, run
13:41:35 <dcoutts> xerox, well if you want to distribute it as an app then you should just bundle the gtk dlls with it
13:41:56 <Igloo> Yeah, casting back is probably much simpler, and more efficient to boot
13:41:58 <xerox> :-|
13:42:14 <SamB> okay, so why is the yi repo at http://scannedinavian.com/repos/yi aimed at "Don Stewart <dons@cse.unsw.edu.au>"? by accident or on purpose?
13:42:22 <dcoutts> xerox, or make your .bat cd to the gtk dir and then run the .exe
13:42:25 <dcoutts> that'd work
13:42:32 <dcoutts> xerox, so yeah, you could use a .bat
13:42:33 <xerox> Oh!
13:43:01 <dcoutts> xerox, if the nymphaea is run with the current dir beign the gtk bin dir then it will pick up all the .dlls ok
13:43:06 <dcoutts> (probably)
13:43:12 <xerox> I see what you mean
13:43:23 <dcoutts> (unless any gtk dlls are installed in the windows system dir)
13:44:05 <xerox> Hmm...
13:45:06 <xerox> There are no symlinks, are there?
13:46:17 <SamB> should I send a patch for hIDE's yi to dons, or what?
13:46:41 * SamB sends to dons...
13:46:58 <goron> SamB: I guess not.
13:47:14 <SamB> goron: not?
13:47:29 <goron> SamB: hIde repo uses a special yi.
13:47:49 <goron> SamB: otherwise there wouldn't be any reason for another repo.
13:48:28 <goron> SamB: Not very convincing, but dcoutts should know it for sure.
13:49:09 <SamB> I think dons will figure out what to do with it... anyway, I've already sent it.
13:50:48 <goron> SamB: What does the patch?
13:52:26 <eivuokko> Gtk-programs could hardlink dlls in Windows, I guess.
13:52:32 <eivuokko> (on setup)
13:52:45 <araujo> @index fileExist
13:52:45 <goron> English to Dutch translations can be so awful.
13:52:46 <lambdabot> System.Posix.Files, System.Posix
13:52:54 <dcoutts> eivuokko, if the user is using ntfs and it happens to be on the same partition
13:53:06 <eivuokko> Yeah
13:53:37 <dcoutts> SamB, send GUI patches to me
13:54:03 <dcoutts> SamB, yi patches to dons and commonsense/haksellsense patches to Lemmih
13:54:10 <SamB> I just added a line to the cabal file...
13:54:21 <SamB> (for yi)
13:54:33 <dcoutts> SamB, hmm we should really set up a default email address for darcs send in the hIDE and yi repos
13:54:45 <SamB> well, the yi one has dons already...
13:55:05 <dcoutts> dons, Lemmih, what should the default darcs send address be for the hIDE repo?
13:55:56 <ulfdoz_> Are type signatures right associative? I think, they are, but I'm not sure.
13:56:46 <SamB> so, how would I go about implementing, say, the print toolbar button?
13:58:56 <dcoutts> SamB, well actualyl connecting up the button is easy. The actual printing is rather harder.
13:59:14 <dcoutts> SamB, eg take at a look at the quit menu item.
13:59:20 <kosmikus> ulfdoz_: I don't really understand the question ... the :: operator is non-associative
13:59:29 <SamB> dcoutts: so, like, what plugin would I want to be changing?
13:59:32 <SamB> yiBase?
13:59:45 <dcoutts> SamB, you want to be reading the code for the ideShell
14:00:08 <dcoutts> SamB, there are not that many hooks into the iseShell yet, but we'll add them as they become necessary.
14:00:30 <SamB> I notice that EditorPage looks a bit overgrown for a positional constructor...
14:01:09 <Julian> @version
14:01:09 <lambdabot> lambdabot 3p107, GHC 6.5 (OpenBSD i386)
14:01:09 <lambdabot> darcs get http://www.cse.unsw.edu.au/~dons/lambdabot
14:01:10 <dcoutts> SamB, however what we really want to do is not have a fixed set of menus / toolbar buttons, but to have them be created by other plguns
14:01:15 <ulfdoz_> kosmikus: I meant the arrow. But I found the section in haskell report: a -> a -> a is equivalent to a -> (a -> a). So it is right associative.
14:01:40 <dcoutts> SamB, yes that is true. However record style does not work for forall's
14:01:47 <SamB> dcoutts: ouch!
14:01:52 <dcoutts> SamB, I'm going to change it to use a function instead.
14:02:14 <dcoutts> SamB, that way we can have simpler or more complex variants.
14:02:27 <kosmikus> ulfdoz_: ah, the arrow ... yes, that's right-associative, of course
14:02:46 <dcoutts> SamB, eg something simple like just a config editor page, or something complex like Yi.
14:03:13 * xerox started playing again with nymphaea, haha
14:04:29 <psi> @where nymphea
14:04:30 <lambdabot> I know nothing about nymphea.
14:04:37 <dcoutts> @where nymphaea
14:04:38 <lambdabot> http://haskell.galois.com/~paolo/nymphaea
14:04:44 <psi> ah :)
14:04:50 <Julian> In a curryfieg function, arrow is right associative decrease number of parentesis. Iguess
14:04:54 <sieni> wanha!
14:05:41 <Julian> In a curryfied function (right associative) decrease number of parentesis. Iguess
14:05:47 <Julian> sorry
14:06:01 <beelsebob_> how's this everyone? http://www.cs.kent.ac.uk/people/rpg/tatd2/yhchat2.pdf
14:07:19 <ulfdoz_> kosmikus: Of course? Is there some inherent logic behind, that it must be right-associative? I'm not very well in remembering those properties of operators.
14:07:46 <SamB> what are these "views" for?
14:07:53 <araujo> What is a good way to test for an IO Bool value?
14:08:17 <basti_> right associativity is good for intuition
14:08:45 <basti_> a->b->c is a function that takes an a and returns a function that maps a b to a c: a->(b->c)
14:08:47 <kosmikus> ulfdoz_: it's not a must, but extremely convenient, because otherwise every curried function would need parentheses in the type
14:08:47 <araujo> I mean, i am trying to do: (f1 && f2 :: IO Bool) , but that isn't working of couorse
14:08:49 <xerox> psi: now it runs on windows too! (duncan++)
14:09:01 <Julian> kolmodin: exactly
14:09:11 <basti_> left-associatively, a->b->c would read: a function that takes a function from a to b and returns a c
14:09:27 <SamB> dcoutts: ?
14:09:41 <basti_> thats not exactly what people want a lot
14:09:44 <kosmikus> araujo: liftM2 (&&) ?
14:09:59 <araujo> kosmikus, ok, i check (Hi!)
14:10:07 <ulfdoz_> kosmikus: Ah, that's a usable way to get this fact from experience.
14:10:24 <araujo> @index liftM2
14:10:25 <lambdabot> Control.Monad, Control.Monad.Reader, Control.Monad.Writer, Control.
14:10:25 <lambdabot> Monad.State, Control.Monad.RWS, Control.Monad.Identity, Control.
14:10:25 <lambdabot> Monad.Cont, Control.Monad.Error, Control.Monad.List
14:11:29 <psi> xerox: cool. i haven't even tried it anywhere :-) iirc, i had problems compiling the cairo release of gtk2hs
14:11:56 <basti_> if people made -> left-associative the debate would be "why of all things did you make it that way and not the other?" ;9
14:12:04 <xerox> psi: now you'd need the darcs version, hehe :-)
14:12:17 <psi> ok :)
14:12:17 <xerox> (of gtk2hs)
14:18:22 <araujo> kosmikus, the thing is.. that one of the operands isn't monadic....
14:21:01 <Maddas> araujo: maybe liftM (f1 &&) f2 ?
14:21:38 <kosmikus> araujo: fmap (f1 &&) f2
14:22:06 <dcoutts> SamB, the BrowserViews are the things like te file browser widgets
14:22:07 <kosmikus> well, or what Maddas said
14:22:28 <dcoutts> SamB, the things you get on the left hand side of the main window.
14:22:58 <dcoutts> SamB, so I imagine there being file views, module view, module graphs, recent pages list, etc
14:22:58 <SamB> dcoutts: the ones in EditorPage
14:23:06 <dcoutts> SamB, oh right
14:23:18 <dcoutts> SamB, that's because we do MVC for the EditorPages
14:23:32 <dcoutts> each page can be open in multiple top level windows at once
14:23:39 <SamB> oh
14:24:08 * araujo test
14:24:09 <dcoutts> so for example an editor page can have two views of it open at once and both share the same buffer
14:24:28 <dcoutts> so both reflect changes made in either
14:25:52 <eivuokko> k, I wonder if it was easier to use cabal first from commandline then figuring how to use it with Visual Haskell...
14:26:48 <dcoutts> eivuokko, probably
14:29:00 <shapr> hm, some particular reason that haskell.org's clock is six hours and twenty one minutes slow?
14:29:20 <shapr> Ok, who do I ask about switching to Debian?
14:29:31 <basti_> its trying to adapt to india time?
14:29:37 <basti_> I'm on debian.
14:29:49 <Maddas> xerox: Yay, first game replayed successfully ^_^
14:30:02 <SamB> shapr: switching what to debian?
14:30:03 <shapr> No I mean, who do I ask about switching haskell.org to debian...
14:30:07 <eivuokko> Before I go on trying futile stuff, is it possible to direct ghc to put and use temporary/result files (like .hi) fomr other directories than next to source?
14:30:19 <basti_> ah
14:30:20 <shapr> I'm willing to do sysadmin stuff on haskell.org if they'll use debian/unstable.
14:30:52 <gzl> shapr: it says at the bottom it's maintained by some two guys
14:30:55 <gzl> probably just ask them
14:32:21 <mcnster> help
14:32:24 <dcoutts> shapr, maybe the server wants to be in europe
14:32:46 <shapr> heh
14:32:49 <dcoutts> eivuokko, yes it is possible. Cabal does that.
14:33:01 <eivuokko> Hmh, thanks.
14:33:03 <mcnster> could a kind soul show how to print 1..10 using C.M.State?
14:33:11 <eivuokko> And that sounds good.
14:33:16 <dcoutts> eivuokko, you can use -v with cabal's build to see exactly what options it's calling ghc with
14:33:41 <kosmikus> mcnster: print, using State?
14:33:57 <mcnster> kosmikus, yeah
14:34:13 <eivuokko> Now, can I build and install cabalised package into a temporary directory (vs installing next to compiler) and is it possible to use it from there (without huge complications)?
14:34:43 <eivuokko> Is it cabalised?  What's the word?  "Package with Cabal" seems rather long to use :)
14:34:43 <kosmikus> mcnster: I don't understand the question
14:35:21 * SamB can't figure out how to do this.
14:35:32 <eivuokko> dcoutts, thanks, I am still trying to do this from safety of visual studio, but I am starting to give up ;)
14:35:50 <xerox> @karma+ Maddas -- keep up the good work!
14:35:50 <lambdabot> Maddas's karma raised to 1.
14:36:11 <mcnster> main = evalState count 1
14:36:31 <xerox> A friend of mine got stunned by nymphaea, and he's blogging about it (in italian, though)
14:36:43 <mcnster> kosmikus, am i off to the right start?
14:37:25 <dcoutts> xerox, make sure he says how great Haskell & gtk2hs & cairo are :-)
14:37:44 <Dibrom> mcnster: what does count look like?
14:37:50 <kosmikus> mcnster: I don't know what you really want to do.
14:38:03 <kosmikus> mcnster: to "print" something using a State monad doesn't make sense
14:38:03 <Dibrom> you want to use an Integer as the state, right?
14:38:12 <xerox> dcoutts: heh, okay.
14:38:23 <mcnster> ok, lets say count looked like
14:39:12 <Igloo> mcnster: You might want be in the StateT Int IO monad
14:39:14 <mcnster> count i = do { putStrLn $ show; }      (for now ignoring the counting feature
14:39:32 <SamB> dcoutts: so how would I have clicking on the print button run a function from an EditorPage?
14:39:34 <mcnster> whups show i
14:39:35 <Igloo> mcnster: where you can do liftIO $ print 5
14:40:20 <Dibrom> mcnster: are you sure that IO is what you actually want to be doing in the state monad?
14:40:48 <SamB> or maybe I should ask: how can I do something whenever the user switches between editors?
14:40:50 <Dibrom> or are you just trying to get the result of calculations in the state monad?
14:40:59 <mcnster> no, i think IO in the state monad is probably a bad idea
14:41:29 <Dibrom> what exactly are you wanting to do?
14:41:54 <mcnster> but i don't even understand what a fn of 'evalState' would look like, if say i wanted to sequence 10 numbers in a list
14:42:15 <Dibrom> well maybe the state monad isn't even what you want.. describe what you are trying to do a little bit more
14:42:27 <xerox> http://haskell.galois.com/~paolo/steo-2340-201005.png
14:42:28 <Dibrom> why do you want to sequence 10 numbers that way?
14:42:45 * SamB wanders off to do something less headache-inducing
14:42:50 <Dibrom> are you trying to update a number in the state monad, like a counter?
14:43:04 <mcnster> i know this is a silly example, but i'm trying to grok C.M.State as a first footstep into the monad stuff
14:43:18 <mcnster> dibrom, yes.  i'd do that
14:43:37 <Dibrom> ok, here is an example that might help.. do something like "count = modify $ \counter -> counter + 1"
14:43:43 <Dibrom> then "evalState count 0"
14:44:01 <Dibrom> it will update the counter in the state monad by 1, and evaluate that
14:44:34 <Dibrom> if you want to do it more times go "count = do { modify $ \cnt -> cnt + 1; modify $ \cnt -> cnt + 1 }"
14:44:38 <Dibrom> something like that
14:44:58 <kosmikus> or just "count >> count"
14:45:19 <Dibrom> or y ou can even go "count = do { modify $ \cnt -> cnt + 1; n <- get; modify $ \cnt -> n + 42 }"
14:45:33 <mcnster> main = do
14:45:33 <mcnster>    evalState count 1
14:45:33 <mcnster>    return ()
14:45:33 <mcnster> count = modify $ \counter -> counter + 1
14:45:41 <mcnster> gives me a compile error
14:45:46 <dcoutts> SamB, the EditorPage get's notified whenever it is shown or hidden.
14:45:49 <Dibrom> don't do evalState count 1 in a monad
14:45:50 <kosmikus> main has to be of IO type
14:46:05 <shapr> argh, I missed poetix!
14:46:26 <Dibrom> evalState :: State s a -> s -> a
14:46:31 <Dibrom> it will return the number, not a monad
14:46:34 <dcoutts> SamB, what we will want is that the EditorPage changes the available toolbuttons / menuitems when it becomes active.
14:47:29 <Dibrom> mcnster: let count = modify $ \cnt -> cnt + 1 in evalState count 0
14:47:31 <Dibrom> try that I think
14:47:32 <dcoutts> SamB, so I imagine there will be global and per-page menu items and toolbar buttons
14:48:11 <Dibrom> or execState actually, sorry.. if you want the counter number
14:48:20 <dcoutts> SamB, but the first step is simple to translate from a simple Haskell representation of a toolbar/menu to some actual Gtk widgets.
14:49:14 <Dibrom> mcnster: execState returns the state and evalState returns whatever the value of the computation was
14:49:19 <Dibrom> basically
14:49:53 <ulfdoz_> xerox: Hey, I even got it in literate Haskell. I just searched for a moment to denote this. :)
14:50:14 <mcnster> main = do
14:50:14 <mcnster>      let count = modify $ \cnt -> cnt + 1 in evalState count 0
14:50:18 <mcnster> gives a type error too
14:50:48 <xerox> @karma+ ulfdoz_ -- yeah!
14:50:48 <lambdabot> ulfdoz_'s karma raised to 1.
14:50:56 <mcnster> sorry i'm so clueless
14:51:03 <kosmikus> mcnster: why do you insist on doing it in main?
14:51:04 <Dibrom> mcnster: remove the do
14:51:12 <Dibrom> then it will work
14:51:34 <kosmikus> no, I don't think so
14:51:58 <Dibrom> well if he doesn't use main
14:52:03 <kosmikus> yes
14:52:17 <Dibrom> just put it in the repl
14:52:20 <kosmikus> just type this in in ghci
14:52:20 <mcnster> main =
14:52:20 <mcnster>    let count = modify $ \cnt -> cnt + 1 in evalState count 0
14:52:20 <mcnster>    return ()
14:52:24 <mcnster> no joy
14:52:28 <Dibrom> mcnster: if you want to understand monads, you should try reading this: http://www.nomaware.com/monads/html/index.html
14:52:32 <Dibrom> that's how I learned
14:52:48 <mcnster> noted, thanks
14:52:52 <Dibrom> ok... if you want to use main, do it this way
14:53:06 <Dibrom> main = putStr $ show $ let count = modify $ \cnt -> cnt + 1 in evalState count 0
14:53:21 <kosmikus> putStr $ show == print
14:53:31 <Dibrom> ok
14:53:31 <kosmikus> well, .
14:53:33 <Dibrom> well you could do it that way
14:53:36 <xerox> print = putStrLn . show
14:53:38 <Dibrom> putStrLn is probably more what you wan
14:54:03 <Dibrom> main = print $ let count = modify $ \cnt -> cnt + 1 in evalState count 0
14:54:07 <Dibrom> try that
14:54:07 <mcnster> right, old habiit
14:54:10 <mcnster> it works!
14:54:34 <Dibrom> now go read that tutorial ;)
14:54:40 <Dibrom> it will make a lot more sense if you do
14:55:07 <mcnster> i'm actually reading a tutorial :)  but i'm just not having much luck
14:55:17 <Dibrom> which one?
14:56:03 <mcnster> i've lost the cover sheet.  its Chapter 9 called Monads starting on page 119-155.  can't remember which report i printed it from
14:56:22 <dcoutts> SamB, heh, sorry it made your head hurt. :-)
14:57:20 <Dibrom> mcnster: I'd suggest looking at the one I linked.. it starts off by just using Maybe, and no do notation, which makes it a lot easier
14:57:36 <Dibrom> then it eventually explains the state monad
14:58:02 <mcnster> yep.  i've skimmed over that one before...  i'll check it out.  thanks dibrom :)
14:58:08 <Dibrom> np
14:58:22 <mcnster> bbl
15:12:30 <machack666> quick question: is there a way to rebind an existing function as a different name and redefine the old name to be a totally different function while retaining the original behavior in the new name?  (ie, no func' = func trivia)
15:13:14 <Dibrom> you can't redefine things once they're bound like that
15:13:31 <eivuokko> Are submodules tied to their path?  Ie can I have file Foo.hs with module Foo and somehow say it should be used as Bar.Foo?
15:13:34 <machack666> or alternately, is there a way to force the "deriving Show" clause of a data type to define a different function name, say show', in order to have a "simple" view and a "complex" view of the data structure
15:13:35 <Dibrom> have you make new functions and pass them back in somehow
15:14:10 <xerox> Goodnight!
15:14:15 <xerox> dcoutts http://chibaslash.blogspot.com/ lol ;)
15:14:20 <Dibrom> when you make a type class instance, you have to use the same functions that are in the type class to begin with.. so for show, you'd have to use show
15:14:29 <Dibrom> you can make a show' function but it won't be part of the Show type class
15:14:48 <Dibrom> but you could make a new type class that inherits from Show (has show) and also show'
15:15:14 <Dibrom> maybe like "class Show a => SimpleComplexShow a where"
15:15:24 <Dibrom> make sense?
15:15:43 <machack666> I want a function show' that would be the result of deriving Show on the structure, while I want to define the show function manually just to return one of the fields in the structure.
15:16:06 <machack666> is the deriving functionality available in a GHC.* library?
15:16:18 <Dibrom> it doesn't really work like that, if I understand you correctly
15:16:45 <Dibrom> a type class is just a collection of functions that can be overloaded per type.. you can't add new function names to an existing type class AFAIK, you have to make a new one and inherit from the old
15:17:38 <Dibrom> so you'd have to do like I said above, and then call the appropriate show function depending on the context your in
15:17:55 <machack666> ok, I think this makes sense
15:17:59 <Dibrom> another way you could do it is to make a sort of wrapper type that would show the contained type differently
15:18:07 <machack666> exactly what I was just going to say
15:18:14 <Dibrom> like ComplexShow a or SimpleShow a, and define show to be different for ComplexShow and SimpleShow
15:18:36 <machack666> great, thanks for the answer
15:18:40 <Dibrom> np
15:18:42 <SyntaxNinja> @paste
15:18:42 <lambdabot> http://www.haskell.org/hawiki/HaskellIrcPastePage
15:18:53 <SyntaxNinja> advice on making my safe fromIntegral functions better?
15:18:57 <SyntaxNinja> it's more verbose than I expected
15:21:52 <malcolm> let foo' = foo in let foo = something else in ...
15:23:07 <SyntaxNinja> malcolm: are you talking to me?
15:24:03 <malcolm> SyntaxNinja: no, vaguely addressing machack666's question a few minutes ago
15:28:41 <Dibrom> anyone have any idea why "ghc -ignore-package lang -package cabal" causes a panic with ghc 6.4.1 and cabal 1.1.3?
15:32:00 <Igloo> SyntaxNinja: fI x = let i = fromIntegral x in assert (fromIntegral i == x) i ?
15:32:58 <dcoutts> xerox, well it has all the keywords, though otherwise I don't understand it :-)
15:33:40 <glguy> Does anyone know if the Graphics module from hugs is available in GHC?
15:34:16 <Dibrom> glguy: not sure but you could check here: http://www.haskell.org/ghc/docs/latest/html/libraries/index.html
15:34:20 <dcoutts> glguy, you mean the Graphics.HGL ?
15:34:32 <glguy> dcoutts: I might... (I'm reading the SOE book)
15:34:34 <dcoutts> ir you mean the Graphics.SOE ?
15:34:40 <dcoutts> ah SOE :-)
15:34:42 <glguy> sounds about right
15:34:58 <dcoutts> glguy, yes Graphics.SOE comes with ghc
15:35:35 <dcoutts> or you can use my new implementation Graphics.SOE.Gtk that will come with Gtk2Hs 0.9.10 (out in a week or so)
15:35:53 * dcoutts is pleased with his new SOE implementation
15:36:17 <dcoutts> glguy, comapre: http://haskell.org/~duncan/gtk2hs/SOE-cairo.png
15:36:42 <dcoutts> that's the existign implementaton vs my new one at 2x zoom
15:36:55 <Dibrom> that's nice looking
15:37:12 <dcoutts> yeah, welcome to the 90's :-)
15:37:44 <Dibrom> is this in the darcs repos already?
15:38:04 <dcoutts> it's currently at: http://haskell.org/~duncan/soe/
15:38:10 <Dibrom> ah
15:38:22 <dcoutts> I'm goint to add it to gtk2hs soonish
15:38:37 <dcoutts> the Region api is not fully implemented yet btw.
15:38:43 <Dibrom> I just checked out gtk2hs.. trying to build hIDE but ghc-api is giving me problems..
15:39:17 <dcoutts> Dibrom, actually give me a sec and I'll push my latest soe changes
15:39:25 <Dibrom> ok
15:40:04 <glguy> anyone here use ghc on OS X with graphics...?
15:40:13 <glguy> (only works in hugs for me)
15:40:15 <Dibrom> glguy: I use os x and have done it before
15:40:27 <Dibrom> what problem are you having?
15:40:33 <glguy> Loading package X11-1.1 ... can't load .so/.DLL for: X11 (dlopen(libX11.dylib, 10): image not found)
15:40:47 <Dibrom> how did you install ghc?
15:40:53 <glguy> darwinports
15:40:56 <glguy> port install ghc
15:41:07 <dcoutts> Dibrom, ok I've pushed the soe changes
15:41:21 <Dibrom> and you installed all the X11 stuff beforehand? (Apple X11 Server and X11 sdk)?
15:41:28 <Dibrom> dcoutts: thanks
15:41:33 <dcoutts> glguy, on OSX the Graphics.SOE uses X11
15:41:42 <glguy> dcoutts: yeah, and it works great
15:41:45 <glguy> in hugs
15:41:51 <dcoutts> oh, hmm
15:41:54 <Dibrom> libX11.dylib should be in /usr/X11R6/lib/libX11.dylib
15:42:13 <glguy> yeah, it is
15:42:29 <Dibrom> oh hrmm.. yeah I see what you mean, I get the same message.. just a sec and I'll see if I can figure it out
15:43:59 <Dibrom> hrmm.. weird, I have done it before
15:44:24 <Dibrom> if you do "sudo ln -s /usr/X11R6/lib/libX11.dylib /usr/local/lib/libX11.dylib" it will try to load now but give a different error
15:44:30 <Dibrom> unknown symbol
15:44:39 <glguy> /opt/local/lib/ghc-6.4.1/HSX11_cbits.o: unknown symbol `_printf$LDBLStub'
15:44:39 <glguy> ghc-6.4.1: unable to load package `X11-1.1'
15:44:44 <Dibrom> yep
15:44:56 <Dibrom> strange
15:44:56 <machack666> another quick question: is there a way to define a datatype which is the union of existing types, say Int and Char?  I'm not sure data IntChar = Int | Char does what I need, inthat I don't know how to get at the underlying value for a particular datum
15:44:59 <glguy> if you: cd /usr/X11R6/lib && ghci xxx.hs
15:45:02 <glguy> same thing
15:45:22 <Dibrom> machack666: you use constructors
15:45:37 <Dibrom> data UnionThing = IntTy Int | CharTy Char
15:45:43 <Dibrom> pattern match with IntTy
15:45:43 <franka> data IntChar = Int Int | Char Char, but you probably don't want to do that.
15:46:14 * shapr swears cheerfully in Dutch
15:46:35 <franka> Hi, shapr.
15:46:37 <machack666> ok
15:46:39 <shapr> gezeik!
15:46:41 <Dibrom> so you can go "case foo of IntTy i -> bar ..."
15:46:44 <shapr> er, I mean, hi franka!
15:46:51 <machack666> that's what I was missing
15:46:52 <franka> I'm not Dutch, though. :)
15:47:02 <shapr> Oh, too bad. What nationality are you?
15:47:04 <machack666> weird that it lets you define data constructors that are the same name as existing types
15:47:11 <Dibrom> glguy: yeah I don't know what the prob is unfortunately
15:47:14 <franka> I was born in Germany and raised in America.
15:47:18 <Dibrom> I've done opengl stuff with glut with ghc, not x11 stuff
15:47:21 <Dibrom> so I've never seen that
15:47:22 <glguy> Dibrom: that's okay, i just wanted to make sure it wasn't a quick fix
15:47:26 <shapr> What part of America?
15:47:31 <shapr> North? South?
15:47:34 <franka> Mostly Los Angeles.
15:47:42 <Dibrom> glguy: if you try using glut with ghc you have to do "getArgsAndInitialize" first
15:47:47 <Dibrom> otherwise you'll get an obscure error
15:47:47 <shapr> Oh neat. I was raised in Alabama mostly.
15:47:54 <glguy> alrighty :) noted
15:47:57 <Dibrom> some glut code I've seen doesn't include this, but for OS X it's mandatory
15:47:58 <franka> You have my condolences.
15:48:02 <Dibrom> took me awhile to track that down :)
15:48:09 <shapr> It was nice for the most part. I lived in Mountain Brook.
15:48:11 <franka> :)
15:48:45 <franka> Hm, I'm not very comfortable making smiley faces.
15:48:49 <Dibrom> machack666: that's mostly cause default types aren't special for the most part
15:49:05 <franka> I used to make frownies instead of smileys and smileys instead of frownies on IRC, as an intelligence test.
15:49:18 <franka> It's pretty amazing how few people get it.
15:49:59 <glguy> what, (: and ):
15:50:07 <shapr> There are a few people who frown and smile in the other direction.
15:50:11 <shapr> (-:
15:50:21 <glguy> I hate right to left emoticons
15:50:22 <franka> No, not direction-wise.  I mean literally.
15:50:49 <shapr> franka: You could use lojban attitudinals. They're more exact, though they mark you a serious geek.
15:51:08 <Dibrom> he's already in a haskell channel... :)
15:51:18 <franka> I looked at Lojban once.  What is an "attitudinal", though?
15:51:36 <shapr> um, explicit emoticons, sort of.
15:51:41 <eivuokko> Looks like cool word :o
15:51:50 <franka> Hm.
15:51:59 <glguy> ^_^
15:52:10 <shapr> franka: http://ptolemy.tlg.uci.edu/~opoudjis/lojbanbrochure/lessons/less1attitude.html
15:52:59 <franka> .a'u
15:53:44 <shapr> Lojban has  modifiers like strong, weak, and opposite. .a'ucai is intense interest for example.
15:53:57 <Dibrom> wow
15:54:06 <eivuokko> lol
15:54:11 <franka> Wow.
15:54:13 <glguy> it's just a language someone made up?
15:54:41 <shapr> glguy: Sort of, James Cooke Brown started Loglan in 1956. It's even mentioned in "The Moon is a Harsh Mistress" by Heinlein.
15:55:03 <glguy> it's a shame I can't easily download it to read offline in clas
15:55:25 <shapr> The big idea is twofold, both to examine the Sapir-Whorf hypothesis 'from the outside' and to see whether a language based on predicates could be truly un-ambiguous.
15:55:45 <Dibrom> wget --recursive
15:56:27 <glguy> and we're off
15:56:48 <shapr> Lojban proved to me that the Sapir-Whorf hypothesis has some truth. I decided that some people probably are limited by language, but they're also better at communicating with other humans...
15:56:58 <franka> To change the subject completely, I am searching for bisexual women on OKCupid.
15:57:19 <shapr> I don't think in words, but I often use adjnouns like "gimme that scoopy"
15:57:20 <Muad_Dib> isn't that what #haskell-blah is for franka? :p
15:57:33 <franka> Is it? Oh, maybe I should go there.
15:57:58 <shapr> Sure, it's the seriously off-topic channel.
16:00:00 <machack666> is there a defined function along the lines of a splitEvery :: Int -> [a] -> [[a]] ? i.e., splitEvery 2 "abcdefg" = ["ab","cd","ef",g"]
16:00:12 <machack666> nothing in Data.List is standing out to me
16:01:35 <machack666> you could define it as the recursive concatenation of take n, but if a function already exists, I'd like to use that
16:01:57 <Dibrom> I don't know if one, maybe there is though
16:02:02 <Dibrom> but if it's not in List, probably not
16:06:38 <SyntaxNinja> maybe we should rename fromInteger to unsafeFromInteger or something, to make it clear that it can overflow
16:11:35 <Dibrom> hrmm.. I don't think it's unsafe in the sense of most of the other "unsafe" type functions though, personally
16:11:52 <Dibrom> should be pretty clear when converting number types that you can get stuff like that if you aren't careful
16:11:56 <Dibrom> but maybe that's just me
16:13:13 <SyntaxNinja> eh, types are good for that, though :)
16:13:26 <Dibrom> what do you mean?
16:14:00 <SyntaxNinja> I mean, you should probably use a function like IntToInt64 or something, so you only do safe conversions.
16:14:53 <Dibrom> hrmm.. I suppose that's one way.. but the whole point of having something like fromInteger is so it can be put in a type class and provide a uniform interface
16:15:46 <SyntaxNinja> right, so if you want a uniform interface, and you don't mind being sloppy, then use fromIntegerMightOverflow or something :)
16:15:58 <Dibrom> but that's kind of ugly :)
16:16:10 <SyntaxNinja> not as ugly as
16:16:30 <Dibrom> you'd get people with "unsafe" all through their code
16:16:38 <SyntaxNinja> @eval (fromInteger(-1))::GHC.Word.Word32
16:16:41 <lambdabot>  Not in scope: type constructor or class `GHC.Word.Word32'
16:17:09 <SyntaxNinja> @eval (fromInteger(-1))::Word32
16:17:10 <Cale> Data.Word
16:17:11 <lambdabot> 4294967295
16:17:13 <syntaxfree> @eval let a = "everyone" in "Hello "++a
16:17:15 <lambdabot> "Hello everyone"
16:17:39 <SyntaxNinja> hi syntaxfree
16:17:43 <Dibrom> SyntaxNinja: don't you think someone using Word should already know that?
16:17:59 <shapr> Gee word autoconverts from almost any format!
16:18:00 <Dibrom> presumably they picked a type for some reason beforehand
16:18:15 <SyntaxNinja> Dibrom: yeah, they should definitely know that the constant -1 would overflow.
16:18:17 <SyntaxNinja> underflow
16:18:18 <syntaxfree> Word32 = MsWord?
16:18:38 <Dibrom> heh
16:18:40 <SyntaxNinja> Dibrom: but there's a lot of stuff we "should" know that we mess up on, that's why a type system is nice :)
16:19:40 <Dibrom> I just think people that wouldn't be expecting that kind of thing would never use that particular type in the first place
16:21:12 <Dibrom> it would be nice I agree to have some sort of indication that things might go wrong, but I don't know if you should rename the function because of that
16:21:19 <Dibrom> I'd prefer maybe a compiler warning, if it's possible
16:21:22 <SyntaxNinja> Dibrom: well, a less obvious is:
16:21:26 <SyntaxNinja> @eval (fromIntegral 2147483648)::Int
16:21:29 <lambdabot> -2147483648
16:22:03 <SyntaxNinja> sure, you should know.
16:22:13 * SyntaxNinja shrugs
16:22:16 <Dibrom> well that is sort of true, yeah.  Some newbies won't understand the difference between fixed precision and arbitrary precision integers
16:22:27 <Dibrom> but most tutorials I've seen mention it.. all the ones I've read anyway
16:22:33 <SyntaxNinja> I just think if a function might do something that's definitely not what you want, it should warn you, at least in Haskell.
16:22:39 <SyntaxNinja> that's why the unsafe functions are called unsafe.
16:23:17 <Dibrom> but aren't most unsafe functions called that because they do really bad stuff like break type inference or don't perform bounds checking on element access or something that could potentially crash things?
16:23:31 <Dibrom> fromIntegral doesn't quite seem in the same class to me
16:23:55 <SyntaxNinja> I think all the unsafe* functions are unsafe wrt referrential transparency
16:24:21 <SyntaxNinja> I hate fromJust for the same reason, but it's not called unsafeFromjust
16:24:33 <Dibrom> hrmm
16:24:33 <SyntaxNinja> maybe we should have a module for these functions "import LoosyGoosy"
16:25:57 <Dibrom> I've not used fromJust much, but I suppose it could be an issue
16:26:02 <Dibrom> I'd have to see how it's defined
16:26:06 <tony2> does anyone have hdirect working with ghc 6.4? It builds ok, bu the .pkg file that gets streame to ghc-pkg seems to be in the wrong format?
16:26:24 <SyntaxNinja> fromJust fails for Nothing
16:26:31 <SyntaxNinja> @eval fromJust Nothing
16:26:33 <lambdabot>  add a type signature that fixes these type variable(s)
16:26:47 <SyntaxNinja> Oo
16:26:53 <Dibrom> ok, well you got me on that one, that is pretty ugly
16:27:04 <Dibrom> guess there's a reason I've never used it :)
16:27:49 <Dibrom> is there some particular reason that fromJust was put into the libs?
16:28:06 <syntaxfree> what do you see here?  ------> 
16:28:14 <SyntaxNinja> not sure. I guess because its convinient, and sometimes, well, you just know that it's a Just
16:28:25 <SyntaxNinja> syntaxfree: looks like a butterfly
16:29:00 <Dibrom> looks like Beta to me followed by [incompatible encoding]
16:29:22 <Dibrom> what's it supposed to be?
16:29:39 <SyntaxNinja> actually it looks likea a question mark to me
16:29:51 <Dibrom> SyntaxNinja: well I agree with you there.. doesn't seem convenient enough to cause an exception in some cases
16:29:52 <syntaxfree> a german double ss. it's like a beta, but.
16:29:57 <syntaxfree> and here? ----------> ?
16:30:15 <Dibrom> ah, I was wondering if maybe it was the German character
16:30:18 <Dibrom> it does kind of look like that here
16:30:26 <Dibrom> since the tail on the B doesn't extend down really
16:30:45 <Dibrom> I can send you a screenshot if you have some place to upload
16:30:52 <syntaxfree> oh, and here? -------> ?
16:30:56 <syntaxfree> ah, use www.yousendit.com
16:30:58 <Dibrom> nothing on either of those
16:31:00 <syntaxfree> it's perfect.
16:31:32 <syntaxfree> alt-keys on mac yield extended characters. ? is the \partial character.
16:32:44 <Dibrom> syntaxfree: what address do you want me to send it to?
16:35:49 <resiak> syntaxfree: What charset is this meant to be?
16:38:42 <izigo> do anyone know if there is a swedish haskell site?
16:39:40 <syntaxfree> @google haskell site:.se
16:39:41 <lambdabot> http://www.cs.chalmers.se/~nordland/ohaskell/
16:40:02 <syntaxfree> @more
16:40:03 <lambdabot> more: empty buffer
16:40:06 <izigo> already googling but..
16:40:13 <syntaxfree> @google haskell sweden
16:40:14 <lambdabot> http://www.idiom.com/free-compilers/LANG/Haskell-1.html
16:40:16 <izigo> better ask coders that know what sites is good for a newb :D
16:41:21 <syntaxfree> @google haskell svenska
16:41:22 <lambdabot> http://www.scannedinavian.org/output/sv/haskell.html
16:41:54 <izigo> well i will google threw some sites or just simply learn it in english
16:42:18 <izigo> but it requires a higher grade of peacefullness for me then i got to read it in english :D
16:43:12 <syntaxfree> don't do the Gentle Introduction, do the Yet Another Haskell Tutorial.
16:43:21 <syntaxfree> @google htut
16:43:23 <lambdabot> http://www.isi.edu/~hdaume/htut/
16:43:23 <izigo> ok.
16:43:29 <syntaxfree> that's the one.
17:02:40 <int80_h> can I use guards within guards?
17:02:43 <int80_h> like
17:02:55 <int80_h> | some test
17:03:02 <int80_h>    | subtest 1
17:03:07 <int80_h>      | subtest 2
17:03:15 <int80_h> like that?
17:03:26 <int80_h> or do I need to use if/then
17:03:28 <Dibrom> I don't think you can, but you probably don't want to even if you can :)
17:03:44 <int80_h> oh is it poor form?
17:03:46 <Dibrom> yeah
17:03:51 <int80_h> thanks :)
17:03:56 <int80_h> so instead I would use if/then
17:04:00 <Dibrom> or case
17:04:11 <int80_h> ah, haven't gotten to case yet
17:04:11 <Dibrom> depends on your problem
17:04:30 <int80_h> I'm returning the number of roots in a quadratic
17:04:38 <int80_h> and the sub tests are in the event a == 0
17:07:07 <int80_h> looks like I can't use if/then with a guard
17:07:10 <int80_h> is this true?
17:07:17 <int80_h> I'm doing this
17:07:20 <int80_h> | test
17:07:29 <int80_h>     if foo then bar
17:07:38 <int80_h> and it gives me "unexpected if" error
17:08:33 <int80_h> am I just doing it wrongly?
17:08:39 <int80_h> dibrom?
17:08:53 <Dibrom> hrmm?
17:08:57 <Dibrom> oh
17:09:26 <Dibrom> you need to put an = after the test
17:09:50 <int80_h> ah yes
17:09:56 <Dibrom> f x | isFoo x = bar | isBaz x = ...
17:09:59 <Dibrom> something like that
17:11:41 <Dibrom> it's kind of strange to use a pattern guard and then an if than else statement though I think
17:11:55 <Dibrom> maybe you should break things up with let or where
17:12:10 <Dibrom> or use case with guards
17:21:17 <tony2> My compilation is falling over at the asmbley stage with the following error:
17:21:24 <tony2> "Warning: retaining unknown function `__i686.get_pc_thunk.bx' in output from C compiler"
17:21:40 <tony2> and then some asm
17:21:50 <tony2> haven't a clue what to do about that.
17:22:33 <tony2> any ideas?
17:22:41 <Dibrom> not me
17:23:39 <tony2> well no probs. think I'm gonna have to put my project in the fridge.
17:24:02 <Dibrom> what project is it?
17:24:16 <tony2> binding for apache modules.
17:24:34 <Dibrom> ah
17:24:50 <Dibrom> I'm just now trying to figure out how to do foreign binding stuff myself
17:24:51 <stefanw> does someone know a type class that has a type variable with kind (*->*)->* (or similar) in its class head?
17:24:56 <Dibrom> playing with c2hs
17:25:13 <tony2> ah any good? I've been using hdirect.
17:25:30 <dons> @seen Cale
17:25:30 <Dibrom> supposed to be.. gtk2hs uses it
17:25:31 <lambdabot> Cale is in #haskell-overflow and #haskell. Last spoke 1 hour, 8
17:25:31 <lambdabot> minutes and 21 seconds ago.
17:25:41 <Cale> hello
17:25:47 <Dibrom> there's another newer lib that does something similar with ghc I guess, but I don't know much about it
17:25:56 <dons> i was just wondering about stefanw's question
17:26:14 <Cale> well, one could be constructed, I'm fairly sure
17:26:25 <Cale> I don't know of one that's in use off-hand
17:26:52 <dons> stefanw, you want one from some common library?
17:27:08 <dons> hmm. i wonder if some oleg/lammel code contains such a kidn
17:27:39 <tony2> I've used greencard before but ended up seding the  output quite a lot.
17:27:54 <stefanw> yes, I want to argue that *most* classes have variables with "linear kinds" of the form * -> ... -> * (because you can translate such classes to ML)
17:28:06 <Cale> Yeah, something like HList might have such a kind in it.
17:28:15 <tony2> is there a reconmended ffi-preprocessor? hdirect or c2hs?
17:28:43 <lisppaste2> int80_h pasted "guards" at http://paste.lisp.org/display/12713
17:28:52 <Dibrom> tony2: when I was googling I saw this: http://www.haskell.org/pipermail/haskell/2001-March/006864.html
17:28:57 <Dibrom> lists a few different ones at the bottom
17:29:00 <Dibrom> old message though
17:29:06 <dons> stefanw, perhaps ask on haskell-cafe@. then Oleg et al (and any epigram hackers) will see and ponder
17:29:22 <Cale> int80_h: um
17:29:49 <lisppaste2> int80_h pasted "guards" at http://paste.lisp.org/display/12714
17:30:48 <Cale> int80_h: indentation problem?
17:31:03 <tony2> very good, good to see I've graduated from 3 to 4 :) now if only it would build.
17:41:45 <lisppaste2> int80_h pasted "guards and if/then" at http://paste.lisp.org/display/12715
17:42:52 <Cale> int80_h: the last if is missing its else
17:43:28 <Cale> and that's a really unusual layout for if/then/else expressions
17:43:52 <Cale> I'm not sure if it will be happy with that
17:44:41 <int80_h> Cale what's the righjt layout?
17:45:21 <Igloo> That's fine
17:45:37 <int80_h> Cale, I wanted to have sub-conditions within a guard. Someone said that using guards in a guard was bad form
17:45:39 <Igloo> err, except the lack of an else in the deepest conditional
17:46:06 <Igloo> It's more normal to have the else's at the beginnong of the line, I think
17:46:14 <int80_h> hmm now it says "unexpected else"
17:46:15 <tony2> (for the logs & someone with the same problem as I had above in the future) solution was to sed intermediate .raw_s file with s/i686.get_pc_thunk.bx/get_pc_thunk_bx/g
17:46:50 <Cale> The "normal" way to layout ifs is to have the then and the corresponding else lined up, either on their own lines, or with the then occurring right after the condition
17:46:52 <int80_h> it's the exact same code as I posted but I added an else for the last if conditional
17:47:58 <int80_h> I'll post it
17:48:36 <lisppaste2> int80_h annotated #12715 with "unexpected else" at http://paste.lisp.org/display/12715#1
17:49:39 <int80_h> any ideas?
17:50:47 <int80_h> well I have no idea how to fix this
17:50:54 <int80_h> says "unexpected else"
17:51:01 <Cale> int80_h: one sec :)
17:51:06 <int80_h> no worries :)
17:51:08 <int80_h> and thanks
17:51:26 <int80_h> and let me know if the style is right
17:51:33 <int80_h> I changed it based on what I thought you said
17:53:01 <lisppaste2> Cale annotated #12715 with "layout" at http://paste.lisp.org/display/12715#2
17:54:32 <Cale> it might be nicer to do the case () of _ | ... trick
17:56:39 <int80_h> crap for some reason I can't see your changes
17:56:46 <int80_h> you used your own name right?
17:58:25 <int80_h> annotation #2 not showing up for me
17:58:31 <int80_h> can you make a new paste?
17:59:01 <int80_h> right, I just did a search for layout and got nothing
17:59:11 <int80_h> same for Cale
17:59:20 <lisppaste2> Cale pasted "layout" at http://paste.lisp.org/display/12717
18:02:36 <syntaxfree> @eval zip [1..3] [1..3]
18:02:42 <lambdabot> [(1,1),(2,2),(3,3)]
18:02:48 <int80_h> Cale what if the "something else" for the last else is "go to the next guard for what to do next"
18:02:55 <syntaxfree> @eval [(x,y) | x<-[1..3], y<-[1..3]]
18:02:57 <lambdabot> [(1,1),(1,2),(1,3),(2,1),(2,2),(2,3),(3,1),(3,2),(3,3)]
18:03:16 <int80_h> do I really need an else for the last if then. Can't else be optional?
18:03:18 <syntaxfree> @eval [(x,y) | x<-[1..3], y<-[1..3], x=y]
18:03:19 <lambdabot>  parse error on input `='
18:03:26 <syntaxfree> @eval [(x,y) | x<-[1..3], y<-[1..3], x==y]
18:03:27 <lambdabot> [(1,1),(2,2),(3,3)]
18:03:44 <Dibrom> @eval [(x,y) | x<-[1..3] | y<-[1..3]]
18:03:45 <dons> int80_h: when!
18:03:45 <lambdabot>  Illegal parallel list comprehension: use -fglasgow-exts
18:03:52 <Dibrom> doh
18:03:52 <syntaxfree> I wonder if parallell list comprehensions are ever getting into Haskell.
18:03:57 <syntaxfree> @eval :set +r
18:03:58 <lambdabot>  parse error on input `:'
18:04:00 <dons> @type Control.Monad.when
18:04:02 <lambdabot> forall (m :: * -> *). (Monad m) => Bool -> m () -> m ()
18:04:14 <dons> syntaxfree, we do have parallel list comprehensions, see the msg
18:04:17 <Dibrom> syntaxfree: if you use glasgow exts you can do it
18:04:18 <int80_h> can't use when yet
18:04:28 <syntaxfree> well, I mean Haskell, not GHC.
18:04:32 <Dibrom> yeah
18:04:35 <dons> ah, i c.
18:05:13 <syntaxfree> I like how "oic" morphs seamlessly into an "ok"
18:05:18 <int80_h> so what if I don't want to use an else in an "if/then ' statement. Do I have that choice?
18:05:40 <syntaxfree> I never use if/thens. I use, uh, how do you call the | constructs?
18:05:51 <Dibrom> guard?
18:05:54 <syntaxfree> yes.
18:05:58 <int80_h> syntaxfree, I was told using guards inside of guards was bad form
18:06:07 <syntaxfree> ah.
18:06:11 <syntaxfree> the need never arose.
18:06:16 <int80_h> that was my first thought, to use guards like you do
18:06:20 <Dibrom> I don't know if you can even do nested guards, but I do think it'd be bad form.
18:06:36 <dons> who says it's bad form?
18:06:44 <int80_h> I don't know, Dibrom maybe
18:06:53 <syntaxfree> @eval [[x+y | x<-[1..3]] | y<-[1..3]]
18:06:55 <lambdabot> [[2,3,4],[3,4,5],[4,5,6]]
18:06:56 <int80_h> so back to my problem
18:06:57 <Dibrom> dons: I think it implies you're solving the problem the wrong way
18:07:02 <Dibrom> but admittedly that's a personal preference
18:07:11 <Dibrom> it's harder to reader, kind of ugly, again ymmv
18:07:14 <syntaxfree> the only list comprehension I like more than those nested ones are the ones that generate a list of functions.
18:07:19 <int80_h> I think if I use Cale's answer I am still stuck with the last else
18:07:24 <dons> yeah, i've not heard of a general rule. but I agree, probably you shouuld think about the problem another way
18:07:36 <syntaxfree> this is my very own factorial.
18:07:41 <syntaxfree> @eval let fact n =  (foldl (.) id [\x -> x*k | k <- [1..n]]) 1 in fact 5
18:07:43 <lambdabot> 120
18:07:46 <Dibrom> I kind of frown on guards in general.. they are very good for certain things, but can be way overused
18:08:03 <syntaxfree> I think of guards as the Haskell equivalent to Scheme's "cond".
18:08:04 <int80_h> well I am learning from the very begining, and chapter three is about guards
18:08:06 <dons> syntaxfree, you're burning my cpu cycles with all these @evals. i hope you pay for this ;)
18:08:18 <syntaxfree> haha. I'm a cpu cycle freeloader.
18:08:24 <syntaxfree> I'm not at home,  no Haskell here :~
18:08:27 <int80_h> so can anyone help me with this problem?
18:08:32 <dons> guards are just sugar for case anyway, as with if/then/else
18:08:43 <dons> it's all sugar for `case' or `let' in the end
18:08:48 <int80_h> please?
18:08:55 <syntaxfree> A guy on IRC once gave me a limited access to his box.
18:09:01 <syntaxfree> I run the worst numerics on it :-P
18:09:19 <syntaxfree> dons: is @plugs hosted on the same machine?
18:10:22 <lisppaste2> int80_h annotated #12717 with "the last else" at http://paste.lisp.org/display/12717#1
18:10:30 <dons>  @plugs is a syntactic alias for @eval
18:10:36 <dons> and all of lambdabot runs on the one machine
18:10:38 <syntaxfree> hmm. why?
18:10:54 <dons> historical reasons.
18:11:04 <syntaxfree> @lambda (\x->x+1) 1
18:11:05 <lambdabot> 2
18:11:09 <syntaxfree> that also runs on your machine
18:11:11 <syntaxfree> ?
18:11:21 <dons> of course. *all*8 lambdabot runs on the one box
18:11:33 <syntaxfree> I didn't remember if @lambda was in lambdabot.
18:11:39 <syntaxfree> That's why I said it.
18:11:49 <araujo> Hello.
18:11:56 <syntaxfree> the fact database needs some work.
18:12:00 <syntaxfree> @fact Haskell
18:12:01 <lambdabot> I know nothing about haskell.
18:12:05 <dons> use @wikipedia
18:12:07 <dons> :)
18:12:21 <syntaxfree> @wikipedia Functor
18:12:23 <lambdabot> http://en.wikipedia.org/wiki/Functor
18:12:30 <syntaxfree> hahaha. not a good idea :-P
18:12:41 <syntaxfree> I love @world02.
18:12:50 <syntaxfree> I mean, I love that someone bothered to write it.
18:12:54 <int80_h> okay weel gents, out of time here
18:13:00 <int80_h> I'll figure this out eventually
18:13:06 <int80_h> thanks for your help :)
18:13:32 <syntaxfree> dons: do you know some reference for tricks involving lists/sequences of functions in Haskell?
18:13:37 <syntaxfree> I'm infatuated with the concept.
18:13:46 <dons> tricks involving lists?
18:13:54 <syntaxfree> lists of functions.
18:13:55 <dons> isn't that just a description of haskell in general :)
18:14:04 <dons> ah, list of functions. hmm.
18:14:12 <dons> no, i don't know a reference for it.
18:14:18 <dons> but have a look at 'sequence'
18:14:20 <syntaxfree> I said (lists/sequences)  of functions.
18:14:27 <dons> that's sort  of related, lists of IO actions
18:14:29 <syntaxfree> because "sequence of functions" is the usual analysis term for it.
18:14:44 <Dibrom> sequences of functions like monadic computations?
18:14:55 <dons> @type sequence
18:14:57 <lambdabot> forall a (m :: * -> *). (Monad m) => [m a] -> m [a]
18:14:57 <syntaxfree> I have an intuition that lists of functions can be very useful.
18:15:15 <Dibrom> sure, that's how monads work kinda
18:15:20 <syntaxfree> I don't know anything about monads yet.
18:15:29 <syntaxfree> I'm thinking of things like
18:15:35 <araujo> Anyone worked with readLine here?
18:15:42 <Dibrom> syntaxfree: http://www.nomaware.com/monads/html/index.html
18:15:55 <syntaxfree> @eval (foldl (.) id [k*x+1 | k<-[1..3]]) 4
18:15:55 <Dibrom> try reading that, I think you'll find something similar
18:15:56 <lambdabot>  Not in scope: `x'
18:15:59 <dross> is there a way to "merge" two same-type datatypes together ? lets say i have compute :: A -> B ... and in one of my compute I have compute(A) compute(A)... ?
18:16:20 <syntaxfree> @eval (foldl (.) id [\x->k*x+1 | k<-[1..3]]) 4
18:16:22 <lambdabot> 28
18:16:30 <dons> @pl (foldl (.) id [\x->k*x+1 | k<-[1..3]]) 4
18:16:31 <lambdabot> k * 4 + 1 | k <- [1..3]
18:16:39 <dons> hmm.
18:16:40 <Dibrom> dross: not sure I follow you
18:16:47 <syntaxfree> what IS pl?
18:16:52 <dons> @help pl
18:16:53 <lambdabot>  @pointless <expr> - play with pointfree code
18:17:02 <syntaxfree> last time I tried, functions had no "show" method.
18:17:04 <syntaxfree> hmm.
18:17:14 <syntaxfree> cool!
18:17:22 <dons> there's a specific show for functions these days
18:17:35 <dons> Text/Show/Functions
18:17:39 <dross> Okay ill put it straight
18:17:53 <syntaxfree> @pl (foldl (.) id [\x->x*k | k<-[1..3]]) 1
18:17:54 <lambdabot> k | k <- [1..3]
18:18:25 <dons> @pl (\f x y -> x + y * f)
18:18:25 <lambdabot> flip ((.) . (+)) . (*)
18:18:59 <syntaxfree> wait wait wait. explain that last one.
18:19:18 <Dibrom> lambda
18:19:42 <syntaxfree> I know what the function means, I just don't know what @pl did there.
18:19:46 <dons> @eval (\f x y -> x + y * f) 2 3 4
18:19:48 <lambdabot> 11
18:19:59 <dons> @eval (flip ((.) . (+)) . (*)) 2 3 4
18:20:00 <lambdabot> 11
18:20:07 <dons> @type (.)
18:20:09 <lambdabot> forall c a b. (b -> c) -> (a -> b) -> a -> c
18:20:14 <syntaxfree> @type flip
18:20:15 <lambdabot> forall c a b. (a -> b -> c) -> b -> a -> c
18:20:18 <dross> data Sexp = Snil | Scons Sexp Sexp | Ssym String | Snum Int          data Lexp = Lnum Int | Lvar Var | Llambda Var Lexp | Lapp Lexp Lexp | Llet Var Lexp Lexp | LFix [(Var, Lexp)]  .... now I have compile :: Sexp -> Lexp ... If lets say I have compute(Scons head tail)=compute(head) + compute(tail) ... im trying to find a way to "concatenate" these to compute() so they give only a Lexp as a result and not Lexp->Lexp
18:20:28 <syntaxfree> jesus, that's cool.
18:20:56 <syntaxfree> @pl (\f x y-> x + y + f)
18:20:57 <lambdabot> flip (flip . ((+) .) . (+))
18:21:08 <syntaxfree> @flip (2/3)
18:21:08 <lambdabot> Unknown command, try @listcommands.
18:21:15 <syntaxfree> @plugs flip (2/3)
18:21:16 <lambdabot>  add an instance declaration for (Show (b -> a -> c))
18:21:25 <syntaxfree> @flip 2 3 4
18:21:25 <lambdabot> Unknown command, try @listcommands.
18:21:35 <syntaxfree> sheesh. /me moves it to private window.
18:21:46 <dons> @eval (flip 3 (+)) 2
18:21:47 <lambdabot>  add an instance declaration for (Num (a1 -> (a -> a -> a) -> c))
18:22:03 <dons> @eval flip 3 id
18:22:04 <lambdabot>  add an instance declaration for (Show (a -> c))
18:22:10 <dons> silly me
18:22:17 <Lemmih> Hi dons.
18:22:22 <dross> anyone has an idea ^
18:22:24 <dons> hey Lemmih
18:22:36 <Dibrom> dross: you'd probably have better luck pasting more of the code.. I'm not really sure what's going on from that.. need more context
18:22:41 <Dibrom> @paste
18:22:42 <lambdabot> http://www.haskell.org/hawiki/HaskellIrcPastePage
18:22:43 <syntaxfree> @pl + . id
18:22:44 <lambdabot> (line 1, column 1):
18:22:44 <lambdabot> unexpected "+"
18:22:44 <lambdabot> expecting white space, natural, identifier, lambda abstraction or
18:22:44 <lambdabot> expression
18:22:52 <syntaxfree> @pl (+). id
18:22:52 <lambdabot> (+)
18:22:56 <dross> didbrom can i private msg you
18:23:04 <Dibrom> just paste it on that link
18:23:06 <syntaxfree> @pl (+).(+).(+)
18:23:07 <lambdabot> (+) . (+) . (+)
18:23:12 <Dibrom> irc isn't very good for reading code :)
18:23:18 <dross> okay lol
18:24:06 <tony2> Lemmih: dons informed my last yesterday that he was under the impression you may have written a binding for writing apache modules at some point, is that the case?
18:24:41 <dons> um... not quite. but sort of.
18:25:31 <dross> Dibrom it says I can't edit the page
18:25:48 <dons> log in dross, click UserPreferences
18:26:09 <dross> oups okay
18:27:39 <Lemmih> tony2: Yeah.
18:28:10 <tony2> Lemmih: Is it publicly available?
18:28:24 <Lemmih> You most likely don't want to use it.
18:28:29 <Lemmih> FastCGI is much better.
18:28:42 <tony2> Lemmih: If so I'd be most interested to have a look? I'm writting one at present.
18:29:26 <Lemmih> tony2: http://www.scannedinavian.com/~lemmih/modhaskell/
18:31:55 <tony2> Lemmih: thanks.
18:32:37 <dross> Dibrom it's there
18:35:06 <Dibrom> umm.. you are wanting to make a single Lnum with the sum of the 2 Snums?
18:35:08 <Lemmih> tony2: Why are you writing a binding to the Apache API?
18:35:10 <Dibrom> not sure what you want exactly
18:35:42 <tony2> Lemmih: Mostly for learning, but also becuase I thought it would be fast.
18:35:53 <Dibrom> dross: I don't know what you mean by concatenate in this case really
18:36:03 <tony2> Lemmih: why do you say fastCGI is much better?
18:36:25 <Dibrom> dross: are you sure you don't want " compile (Scons head tail) = compile(head + tail)"?
18:36:38 <tony2> Lemmih: Surely it is faster to compile the module in?
18:36:40 <Lemmih> tony2: It's a lot cleaner and works with other servers than just Apache.
18:36:53 <Dibrom> or I mean compile( Scons (head+tail)) or something like that
18:37:06 <tony2> Lemmih: I appricate that. But what of speed?
18:37:18 <Dibrom> or snum even
18:37:20 <Dibrom> heh
18:37:34 <dross> Dibrom: Well I want to evaluate head, evaluate tail and put them together
18:37:45 <Dibrom> what do you mean "put them together"?
18:37:49 <Dibrom> add the two results?
18:38:10 <Lemmih> tony2: You want your website as an Apache module?
18:38:28 <dross> I have to return a Lexp , but what I need to evaluate to Lexp...
18:38:33 <dross> 2
18:38:36 <dross> = to
18:38:37 <dross> sorry
18:38:55 <Lemmih> tony2: modhaskell compiles and loads Haskell at runtime via hs-plugins.
18:39:12 <tony2> Lemmih: yeah, prototype with cgi and then compile in.
18:39:28 <tony2> Lemmih: ah, thats not the solution I was going for.
18:39:45 <dross> it's like i would like to merge my Lexps so they give me a single Lexp..
18:40:20 <Lemmih> tony2: I doubt it'll be much faster than FastCGI.
18:40:24 <Dibrom> yeah, I just don't understand what you mean by "merge", "put them together", or "concatenate".. sorry
18:40:32 <syntaxfree> @pl (*).((+).(+))
18:40:33 <lambdabot> (*) . (+) . (+)
18:40:35 <tony2> Lemmih: I like the idea of having compiled modules, as Haskell has no buffer overflows.
18:40:57 <tony2> Lemmih: your probably right.
18:41:29 <tony2> Lemmih: it is nice to have access to the other handlers though.
18:41:44 <Lemmih> tony2: FastCGI keeps your program in memory and transfers control to it when a page is requested.
18:41:44 <dross> Dibrom : Okay, what I mean is ... givin a compute(Scons head tail), I would like to evaluate this Sexp so it gives me a Lexp, do you have any idea
18:42:47 <tony2> Lemmih: yes, load balanced and over sockets. FastCGI is nice, but you can't access the other handlers afaik?
18:42:49 <Dibrom> well with the code you have up there, you can do "compile (Scons head tail) = compile $ Snum (head + tail)"
18:42:57 <Dibrom> but I have no idea if that's what you're wanting
18:43:30 <syntaxfree> @pl (\x y-> x*(x+y))
18:43:31 <lambdabot> liftM2 (.) (*) (+)
18:43:38 <syntaxfree> what is liftM2?
18:43:47 <Dibrom> lifts a function of arity2 into a monad
18:43:59 <dross> Dibrom : wait i'll write an exemple of what exactly i would like as a result in the paste link
18:44:01 <dons> @type Control.Monad.liftM2
18:44:02 <lambdabot> forall r (m :: * -> *) a2 a1.
18:44:02 <lambdabot> (Monad m) =>
18:44:02 <lambdabot> (a1 -> a2 -> r) -> m a1 -> m a2 -> m r
18:44:08 <syntaxfree> I don't get it. I think I have to study monads :~
18:44:22 <syntaxfree> @pl (\x y-> (x+y)/(x-y))
18:44:23 <lambdabot> ap (ap . ((/) .) . (+)) (-)
18:44:55 <syntaxfree> I wish I had a @pl at my local machine.
18:45:04 <syntaxfree> what IS "ap"? More monadic stuff?
18:45:17 <Lemmih> @type Monad.ap
18:45:18 <lambdabot> forall b (m :: * -> *) a. (Monad m) => m (a -> b) -> m a -> m
18:45:18 <lambdabot> b
18:45:50 <tony2> Lemmih: did you have anyproblems with generating position independant code? I'm passing -fpic to the c stage and hope that'll be fine as -fPIC doesn't work on linux yet.
18:45:56 <dons> syntaxfree, a cmd line interface to lambdabot has often been requested.
18:46:03 <dons> if you feel like a little bit of hacking
18:46:10 <Dibrom> liftM2 is like "liftM2 f (return a) (return b) = do a' <- a; b' <- b; return $ f a' b'"
18:46:13 <Dibrom> I think
18:46:15 <araujo> Anyone worked with readLine here?
18:46:25 <syntaxfree> dons: I don't want a command-line interface to your machine, I want an implementation of it on my own machine :~
18:46:44 <Lemmih> tony2: I didn't even use -fpic. I just worked /-:
18:46:44 <dross> Ok Dibrom I wrote an example in the link
18:46:50 <dons> no no. a cmd line interface to lambdabot, not my box
18:46:54 <dons> @version
18:46:54 <lambdabot> lambdabot 3p107, GHC 6.5 (OpenBSD i386)
18:46:54 <lambdabot> darcs get http://www.cse.unsw.edu.au/~dons/lambdabot
18:47:02 <dons> you can run lambdabot on your own machine *right now*
18:47:10 <dons> but the top-level interface uses irc
18:47:16 <syntaxfree> ah, you opensourced it :)
18:47:19 <dons> (though indivdual plugins can easily be run in ghci)
18:47:24 <dons> it's always been open source
18:47:35 <syntaxfree> can I change the commands so I can have something like @anothereval running here?
18:47:37 <tony2> Lemmih: wow, well I won't worry about that to much just now then :)
18:47:37 <Lemmih> tony2: But good luck. A nice binding to Apache would be cool.
18:47:48 <dons> yes, syntaxfree. hack away!
18:47:59 <dons> and use `darcs send' to contribute back any interesting plugins you write
18:48:16 <tony2> Lemmih: thanks, I think I'll need it (think I might have bitten off a little more than I can chew)
18:48:24 <Dibrom> dross: eh.. you'd have to fill out a good bit of the pattern matching to make that work
18:48:36 <syntaxfree> I tried to use darcs for my thesis.
18:48:43 <syntaxfree> I eventually gave up on formal version keeping.
18:49:13 <dons> that's a bit silly
18:49:23 <dons> `formal' == darcs record?
18:49:44 <dross> Dibrom : yeah i know, but do you get my idea of wanting to do something like compile(Scons head tail)=compute(head) AND compute(tail) so they give me one Lexp ? .. if i get to do that i think ill be okay with the rest
18:50:48 <Dibrom> dross: yes, I understand what you are trying to do.  But it will take a good bit of fleshing out of the pattern matching to make that work.
18:51:10 <dross> Okay...
18:51:26 <Dibrom> you need to determine what each Sexp is
18:51:36 <Dibrom> if it's a symbol, you want to return Lapp ... ...
18:51:37 <Dibrom> etc
18:51:55 <Dibrom> so you need to apply a recursive function to head and tail that will do all of this
18:52:30 <Dibrom> you could maybe say
18:53:06 <Dibrom> "compile (Scons (Ssym sym) ...) = Lapp ..." just to give you an idea
18:53:11 <Dibrom> though you wouldn't really write it that way
18:53:54 <syntaxfree> sexp sounds like Lisp.
18:53:59 <Dibrom> yep
18:54:20 <dross> the one thing really bugging me is that i dont know how to handle the head and the tail in the same function compile so it returns just ONE Lexp at the end..
18:54:31 <syntaxfree> (if (sexp today) (buy-condoms))
18:55:26 <Dibrom> dross: well it's not going to be the same every time
18:55:29 <Dibrom> it depends on what the types are
18:57:05 <Philippa> you don't keep some handy?
18:57:25 <Dibrom> dross: if you know the head is type Ssym, then you do like "Lapp (compile head) (compile tail)"
18:57:31 <Dibrom> which is what you want in your case
18:59:09 <Dibrom> I'll see if I can make a simple example
18:59:54 <dross> Mmmm...maybe its the only way(using Lapp), but the problem is that it its normaly used for function application, like in my exemple where I do (+ 2 2)
19:00:14 <dross> so i would have to reparse it to check if its really a function :\
19:00:48 <Dibrom> the only way you can combine things is either to apply a function to the head and tail and return an atom, or to apply a function symbol to them
19:03:51 <tony2> Lemmih: I've given it some thught and I think your right. It's pointless. I should use FastCGI and work on something more useful instead.
19:05:06 <dons> tony2, :)
19:05:07 <syntaxfree> why not include car and cdr in the standard prelude?
19:05:39 <dons> are they (:) and (++) ?
19:05:47 <dons> it's been ages since i programmed any lisp
19:06:11 <sebell> dons: head and tail
19:06:18 <dons> ah, right.
19:06:38 <dons> which sound so much more intuitive :)
19:07:12 <Dibrom> dross:  you want to do something a little like what I just edited
19:07:29 <sebell> Most lispers would use first and rest, except for the 2 and 1 extra characters, respectively
19:07:59 <dross> Dibrom : Well okay, I'll try some stuff and I stay here if I still have questions... !!
19:09:05 <syntaxfree> @pl (\x->x+1)
19:09:06 <lambdabot> (1 +)
19:10:12 <syntaxfree> I should write "lispkell" collection with "cons", "car", "cdr", "cond", etc.
19:10:27 <syntaxfree> @let cons = (:) in cons 2 [3,4]
19:10:28 <lambdabot> Unknown command, try @listcommands.
19:10:42 <dons> yeah, write a Data.Lisp instead of Data.Listt ;)
19:10:44 <syntaxfree> @eval let cons = (:) in cons 2 [3,4]
19:10:56 <lambdabot> [2,3,4]
19:11:14 <syntaxfree> @pl (\a b->a:b)
19:11:15 <lambdabot> (:)
19:12:06 <int80_h> hello again
19:13:12 <syntaxfree> I don't understand this notation:
19:13:19 <syntaxfree> @pl (\a b->a + 2*b)
19:13:20 <lambdabot> (. (2 *)) . (+)
19:13:26 <syntaxfree> what is the (.  doing there?
19:13:26 <tony2> Does anyone know what the situation is with database(mysql) connectivity?
19:14:18 <Cale> acting as a partially applied infix operator
19:14:22 <Cale> like (+2)
19:14:36 <int80_h> hi Cale, would you help me with the problem I had earlier?
19:14:43 * int80_h forgot the paste id
19:14:46 <syntaxfree> I understand that (\x->x+2) is (+2)
19:14:53 <Cale> int80_h: I'd take a look, let me find it
19:15:02 <syntaxfree> but I don't understand the dot next to the parens.
19:15:04 <syntaxfree> "(." ?
19:15:08 <dons> syntaxfree, do you understand: f . g
19:15:18 <syntaxfree> yes.
19:15:23 <dons> or partially applied: (. g) f
19:15:36 <syntaxfree> (\x->2*(x+1)) = (*2) . (+1)
19:15:44 <syntaxfree> @pl (\x->2*(x+1))
19:15:45 <lambdabot> (2 *) . (1 +)
19:15:50 <Igloo> That's not what I'd call partial application
19:15:51 <Cale> int80_h: else is never optional
19:16:01 <dons> not when fully applied, I guess, Igloo :)
19:16:02 <Igloo> (.) f   is
19:16:06 <syntaxfree> hmm. f. g is the same as (.g) f?
19:16:16 <Igloo> No, I mean I wouldn't say sections are partial application
19:16:17 <dons> well, (. g) is surely partial
19:16:17 <int80_h> I want to say this "else, go to the next guard"
19:16:21 <Cale> int80_h: you're defining a value based on whether a condition is true or false
19:16:23 <dons> ah. hmm.
19:16:31 <Cale> so you need to take care of both cases
19:16:32 <int80_h> Case, how do I do that, or am I thinking about the problem incorrectly?
19:16:34 <dons> @type (.)
19:16:36 <lambdabot> forall c a b. (b -> c) -> (a -> b) -> a -> c
19:16:52 <Cale> int80_h: Well, what are you trying to do?
19:17:03 <Igloo> I wouldn't say \x -> x . g was a partial application, and sections are just syntactic sugar for that
19:17:13 <syntaxfree> @eval (.(+1)) . (2*))  2
19:17:15 <lambdabot>  parse error on input `)'
19:17:29 <syntaxfree> @eval ((.(+1)) . (2*))  2
19:17:31 <lambdabot>  add an instance declaration for (Num (a -> c))
19:17:36 <dons> hmm, what does the report have to say for sections, let's see..
19:17:50 <int80_h> Case: I'm trying to find the number of roots. in the case of a=0 I am conductiing several subtests
19:18:08 <dons> "Sections are a convenient syntax for partial application of binary operators"
19:19:01 <int80_h> wait a minute
19:19:13 <int80_h> I think the third case is inplied and I don't need to state it
19:19:19 <Igloo> Fair enough
19:19:28 <Cale> int80_h: shouldn't you be using the discriminant?
19:20:07 <int80_h> I am, the inputs a b and c are in the discriminant
19:20:20 <int80_h> Cale: here's an idea
19:20:28 <Cale> right, so just compute the discriminant and compare that with 0
19:20:37 <int80_h> if b /= 0 is not true and
19:20:51 <Cale> case compare (disc a b c) 0 of
19:20:55 <Cale>   LT -> ...
19:20:59 <Cale>   EQ -> ...
19:21:02 <int80_h> if (b == 0.0 && c /= 0.0) is not true
19:21:03 <Cale>   GT -> ...
19:21:18 <int80_h> then b == 0.0 && c == 0.0 has to be true
19:21:21 <int80_h> am I right?
19:21:23 <Cale> right
19:21:31 <int80_h> yippie
19:21:40 <int80_h> this was a problem of logic then
19:22:14 <Cale> but really, all you have to do is compute sqrt (b**2 - 4*a*c), and compare that to 0
19:22:23 <int80_h> well this is an exercise
19:22:43 <Cale> er
19:22:45 <int80_h> and, as an exercise, the issue is not so much "learn how to compute the discriminant" but "learn different features of haskell
19:22:48 <Cale> not even the sqrt
19:22:54 <Cale> yeah, I suppose :)
19:23:14 <Cale> just b**2 - 4*a*c, actually :)
19:23:14 <int80_h> so I must stay within the parameters given, even if it means not doing things the right way
19:23:45 <int80_h> that would be outside of the intent
19:24:14 <int80_h> right before the exercise he lists the conditions to test to tell how many roots you would get in a given situation
19:24:31 <int80_h> so when he gives this exercise, it seems to me he wants you to code the logic
19:25:12 <syntaxfree> @pl (\a b c->b**2-4*a*c)
19:25:13 <lambdabot> flip ((.) . (-) . (** 2)) . (*) . (4 *)
19:25:24 <syntaxfree> I need to learn that :~
19:25:35 <syntaxfree> it's getting to my nerves now.
19:27:03 <Dibrom> dross: there's the code to do what you originally wanted, but it's not exhaustive at all for the patterns
19:28:10 <dross> ok i take a look
19:33:24 <int80_h> thanks for helping me out Cale, all is well
19:33:42 <int80_h> soon I'll be done with the begining chapters and be able to do things better
19:34:29 <dross> Dibrom : wow it's working thats a good start !
19:34:37 <Dibrom> :)
19:34:52 <dross> it gives me a good idea of how to work things around
19:35:07 <Dibrom> good
19:35:08 <int80_h> does lambdabot come with a manual, I want to know what @pl means
19:35:21 <int80_h> or just how to use lambdabot in general
19:36:39 <Dibrom> pl seems to convert a function to points free style
19:36:55 <Dibrom> which is function application without named variables
19:37:12 <int80_h> ah, well more for me to learn then
19:37:22 * int80_h wuvs #haskell
19:37:49 <syntaxfree> metoo..
19:38:42 <dons> check the wiki
19:38:47 <dons> @hawiki Lambdabot
19:38:48 <lambdabot> http://www.haskell.org/hawiki/Lambdabot
19:38:55 <int80_h> thanks dons
19:39:16 <dons> @where lambdabot
19:39:17 <lambdabot> http://www.cse.unsw.edu.au/~dons/lambdabot.html
19:39:53 <dons> @hawiki LambdaBot
19:39:54 <lambdabot> http://www.haskell.org/hawiki/LambdaBot
19:40:28 <dons> @localtime dcoutts
19:40:30 <lambdabot> Local time for dcoutts is Fri Oct 21 03:41:28
19:41:27 <syntaxfree> why is it called a "points-free" style if it's full of points?  :~
19:41:38 <syntaxfree> points-free form:
19:41:42 <int80_h> to understand that you must contemplate the gateless gate
19:41:49 * int80_h ducks
19:41:54 <dross> Dibrom : hey theres one syntax detail i dont get : let Scons head' tail' = tail  ...  head' and tail' are set to tail both ?
19:41:56 <Dibrom> points refer to named variables IIRC
19:41:57 <syntaxfree> (\x y z -> (x**y)-(y**z))
19:41:58 <Dibrom> in that context
19:42:02 <dons> points refer to vars
19:42:07 <syntaxfree> pointfull form:
19:42:07 * int80_h dies of smart-ass itis
19:42:15 <Cale> It doesn't mention the point which the function acts on.
19:42:18 <syntaxfree> @pl  (\x y z -> (x**y)-(y**z))
19:42:18 <lambdabot> (`ap` (**)) . (((.) . (-)) .) . (**)
19:42:24 <dons> it's usually known as 'pointless' form though
19:42:29 <syntaxfree> look at the SHEER ammount of points there.
19:42:40 <Cale> These terms come from mathematics where functions usually act on spaces of points
19:42:43 <Dibrom> dross: What's happening in that code is "tail" is being expanded to "Scons head' tail'"
19:42:56 <dons> oh, good call Cale.
19:42:57 <Cale> and . isn't really supposed to look like that :)
19:43:01 <syntaxfree> you mean from topology?
19:43:04 <Cale> yes
19:43:13 <Dibrom> dross: since it's assumed that "tail" is another Scons, you can expand that out and bind it's head and tail to head' and tail' at the same time
19:43:17 <Cale> in fact, it was algebraic topology where that trend started
19:43:47 <Dibrom> @eval let (x,y) = (1,2) in x
19:43:47 * syntaxfree is revising his real analysis these days.
19:43:55 <lambdabot> 1
19:44:18 <dross> Dibrom : niiiiice, ive been looking to do such a thing this afternoon but didnt get how to do such a thing
19:44:20 <syntaxfree> yes, but since that is a pair, didn't you do a "fst" instead of a "head"?
19:44:26 <syntaxfree> @eval head (2,3)
19:44:28 <lambdabot> Couldn't match `[a]' against `(a1, b)'
19:44:33 <syntaxfree> @eval fst (2,3)
19:44:35 <lambdabot> 2
19:44:48 <Dibrom> dross: yeah, it's very handy
19:45:47 <dons> hmm, managed to get ghc-6.5 to ghc-6.5: ghc-6.5: panic! (the `impossible' happened, GHC version 6.5):
19:45:50 <dons>         unknown exception
19:45:54 <dons> on hIDE, finally!
19:46:03 <Dibrom> I was getting that for 2 days :)
19:46:05 <Dibrom> with 6.4.1
19:46:22 <Dibrom> dons: which part was compiling when you get the panic?
19:46:46 <dons> not sure, I think it is happening in the cabal code though.
19:46:48 <dons> let me see..
19:46:54 <Dibrom> same
19:47:12 <Dibrom> for 6.4.1, when I would go "ghc -ignore-package lang -package Cabal" I would get that panic
19:47:20 <Dibrom> and ghc-api uses those flags
19:47:25 <Dibrom> so it always died on ghc-api for me
19:47:58 <Dibrom> this is with Cabal 1.1.3
19:48:50 <dons> bah, did it again. this sucks
19:49:09 <syntaxfree> @pl (\a b c-> abs(a-c) < abs(b-c))
19:49:10 <lambdabot> (. ((abs .) . (-))) . ap . (((<) . abs) .) . (-)
19:49:19 * syntaxfree thinks thinks thinks.
19:49:26 <Dibrom> I never figured out a way to fix it.. just gave up trying for now.. *shrug*
19:50:38 <dons> well, at that point you report a bug to ghc bugs
19:50:56 <Dibrom> yeah, guess I should
19:51:19 <dons> don't worry about it for now, i'm investigating
19:52:08 * dons execs: newbug `pushOnto` large_bug_stack :: [Bugs]
19:56:05 <dons> Cale, for what it's worth, since squashing a few buffer bugs on the weekend, i haven't been able to crash yi yet
19:56:18 <Cale> dons: cool :)
19:56:20 <dons> whereas i could previously by typing too fast and such
19:56:38 <dons> i've updated yi to use gtk2hs 0.9.9.6 names as you pointed out
19:57:17 <Cale> all the new patches are from Thursday
19:58:26 <dons> ? yi (on scannedinavian) is now synced against today's gtk2hs
19:58:54 <dons> Fri Oct 21 12:32:19 EST 2005  Don Stewart <dons@cse.unsw.edu.au>
19:58:54 <dons>   * Add Plugin.hs, a nice lib interface to yi. Update gtk keyChar to 0.9.9.6 names
19:59:45 <Cale> oh, hehe, that's Thursday in my timezone :)
19:59:53 <Cale> (EDT)
20:00:11 <dons> yi's always ahead of its time
20:00:13 <sethk> for another hour and one minute
20:00:58 <dons> anyone who is looking for something to do, feel free to download yi:
20:01:01 <dons> @where yi+gtk
20:01:01 <lambdabot> darcs get http://www.scannedinavian.org/repos/yi/
20:01:04 <dons> and try to crash it please
20:03:55 <sethk> dons, is that the entire download?
20:04:08 <dons> ah ha! I stopped it crashing by removing the duplicate yi in both --user and --global package namespaces
20:04:12 <sethk> dons, after doing that, and runhaskell Setup.lhs configure
20:04:17 <dons> sethk, unfortunately not. you also need hs-plugins, and gtk2hs
20:04:32 <sethk> in the same directory tree?
20:04:51 <dons> gtk2hs is non-trivial. it lives at: darcs get http://haskell.org/gtk2hs/darcs/gtk2hs
20:04:55 <dons> @where hs-plugins
20:04:56 <lambdabot> http://www.cse.unsw.edu.au/~dons/hs-plugins/
20:05:05 <dons> I like it when sethk wants to crash things :)
20:05:08 <sethk> dons, right, but do they need to be in the same tree.
20:05:20 <dons> no, just build gtk2hs and hs-plugins, and install them.
20:05:27 <dons> they're cabalised, so they should do that themselves
20:05:32 <sethk> dons, then there may be a problem
20:05:42 <dons> no global install privs?
20:05:51 <sethk> dons, no, they are installed
20:06:04 <sethk> dons, I did runhaskell Setup.lhs configure and got
20:06:12 <sethk> *** Exception: Line 12: Unknown field 'hs-source-dirs'
20:06:25 <Dibrom> sethk: need to upgrade your cabal
20:06:39 <Dibrom> I had that same error before
20:06:49 <sethk> Dibrom, and then reinstall gtk2hs and hs-plugins?
20:06:57 <dons> Dibrom, so I fixed this 'unknown exception' panic
20:07:01 <Dibrom> shouldn't need to I don't think, just upgrade cabal
20:07:05 <sethk> @where cabal
20:07:06 <Dibrom> dons: how?
20:07:06 <lambdabot> http://www.haskell.org/cabal
20:07:26 <dons> there were 2 copies of yi-0.2 installed, one in the --global , and one in the --user package space
20:07:33 <dons> removing --user allowed it to build
20:07:38 <dons> this is clearly an ugly bug
20:07:43 <dons> which i'll report
20:07:44 <Dibrom> oh.. hrmm, not the same panic I had then, because I never even got yi installed yet
20:07:47 <sethk> Dibrom, I need the 1.2 release candidate?
20:07:53 <dons> no, but maybe you had 2 ghc-api's installed?
20:07:58 <Dibrom> for me ghc panics just from "ghc -ignore-package lang -package Cabal"
20:08:06 <sethk> Dibrom, the tarball says caba-1.1.3?
20:08:12 <Dibrom> dons: couldn't be cause I was trying to compile it to install the first time
20:08:16 <Dibrom> sethk: yeah
20:08:18 <dons> ok.
20:08:36 <dons> could be related though. both things seem cabal/package-space related
20:09:03 <Dibrom> I can actually get ghc-api to compile by removing "-ignore-package lang", but then I get conflicts when ghc-pkg tries to install, because some modules are in ghc-api and util and lang also
20:09:13 <Dibrom> yeah, it's probably something to do with cabal
20:09:16 <sethk> Dibrom, am I supposed to do runhaskell Setup.lhs configure   for cabal?
20:09:27 <Dibrom> sethk: naa, just make;make install
20:09:39 <Dibrom> edit GNUMakefile to setup paths
20:10:09 <Dibrom> sethk: you probably want to run "ghc-pkg unregister Cabal" first though
20:10:16 <Dibrom> so it doesn't try to install the new over the old
20:12:29 <Lemmih> Isn't the makefile only for bootstrapping with < GHC 6.4?
20:13:56 <sethk> Dibrom, Lemmih, which?  Should I be editing the makefile?  It looks like a non-trivial thing to do.
20:14:11 <Lemmih> sethk: I would say what you should install Cabal as any other Cabal package.
20:14:15 <Dibrom> the README says to edit the makefile
20:14:32 <Dibrom> I don't think Cabal has a Setup file does it?
20:14:35 <Dibrom> if it does I suppose use that
20:14:35 <sethk> Lemmih, doing that doesn't work very well.  I get a syntax error
20:14:44 <sethk> Dibrom, yes it has a setup file
20:14:46 <Lemmih> Dibrom: Cabal is a valid Cabal package.
20:15:06 <Dibrom> will Cabal 1.1.3 let you install itself with 1.0 though?
20:15:15 <Lemmih> sethk: try: runhaskell -i Setup.lhs configure
20:15:27 <sethk> Dibrom, but I already did the ghc-pkg thing to remove the old one
20:15:28 <Dibrom> I installed mine with the makefile and it worked fine.. unregistered Cabal just as it said to
20:15:42 <sethk> Dibrom, is it a problem that I already unregistered cabal?
20:15:45 <Dibrom> well make;make install will reinstall it
20:15:48 <Dibrom> the new one
20:15:52 <Dibrom> it will put it in /usr/local by default
20:16:00 <Dibrom> if you want it somewhere else, it should be trivial to edit the makefile
20:16:23 <Lemmih> sethk: Yeah, that's a problem. You probably have to use the Makefile now.
20:16:27 <sethk> Dibrom, well, I edit the makefile to reflect that ghc is in /usr/local/bin instead of /usr/bin
20:16:39 <sethk> Lemmih, or I can reinstall my older version of cabal, if that's easier
20:17:09 <Dibrom> sethk: PREF will set where it will install to
20:17:15 <sethk> Dibrom, after that change (for ghc binary in /usr/local/bin) I get Could not find module `Distribution.Compat.Directory':
20:17:23 <sethk>   it is hidden (in package Cabal-1.0)
20:17:30 <sethk>   (imported from tests/ModuleTest.hs)
20:17:44 <sethk> sounds like reinstalling the earlier cabal might be the quickest
20:17:48 <Dibrom> hrmm.. did you try to run configure first?
20:17:55 <Dibrom> you probably need to do a make clean if you did
20:18:17 <sethk> Dibrom, you mean the runhaskell Setup.lhs configure?  yes.  let me try make clean
20:18:26 <Dibrom> yeah if you tried that, you need to clean first
20:18:31 <Dibrom> make clean;make;make install
20:18:37 <sethk> Dibrom, make clean completed but I still get the same error
20:18:48 <dons> ok Lemmih, hIDE with Yi is back in business
20:18:49 <sethk> let me try installing the released cabal, then building 1.2
20:19:04 <dons> hIDE now launches yi using the editorPage api quite nicely.
20:19:21 <Lemmih> dons: I still can't run hIDE /-:
20:19:32 <dons> oh, hs-plugins?
20:19:44 <sethk> hmm., both tarballs extract to a directory named "cabal".  A bit sloppy there.  :)
20:20:17 <dons> Lemmih, due to hs-plugins? in which case that will be my next task..
20:21:03 <Lemmih> dons: I'm not sure why it segfaults. It manages to load the plugins just fine but then crashes semi-randomly.
20:21:19 <sethk> ok, what am I doing wrong here?  I'm getting the same error from make trying to install Cabal 1.0
20:21:34 <sethk> Could not find module `Distribution.Compat.Directory':
20:21:35 <dons> Lemmih. :/
20:21:40 <sethk> must be a path for that
20:22:05 <dons> Lemmih, can you give me the exact date of your ghc-6.5? (it is 6.5 isn't it?)
20:22:16 <Lemmih> sethk: You don't have any Cabal currently installed?
20:22:25 <sethk> Lemmih, I did until a few minutes ago  :)
20:22:36 <sethk> Lemmih, I did ghc-pkg whatever    to remove it
20:22:45 <sethk> ghc-pkg unregister
20:23:01 <sethk> so how do I get out of this?  :)
20:23:09 <Lemmih> sethk: does 'ghc-pkg list' show any Cabals?
20:23:31 <Lemmih> dons: I think it's from Oct 16.
20:23:33 <sethk> no
20:23:53 <sethk> Lemmih, the modules appear to be in /usr/local/lib/whatever
20:24:28 <Lemmih> sethk: And 'make && make install' fails?
20:24:43 <sethk> make fails with the message I pasted.  Should I paste it again?
20:25:11 <sethk> Chasing modules from: tests/ModuleTest.hs
20:25:17 <sethk> Could not find module `Distribution.Compat.Directory':
20:25:17 <sethk>   it is hidden (in package Cabal-1.0)
20:25:17 <sethk>   (imported from tests/ModuleTest.hs)
20:25:44 <Dibrom> so you have Cabal still installed but hidden?
20:26:03 <sethk> ok.  how do I fix that?
20:26:08 <sethk> Dibrom, apparently yes
20:26:08 <Dibrom> ghc-pkg expose Cabal ?
20:26:14 <sethk> Dibrom, trying ...
20:26:47 <sethk> ghc-pkg: cannot find package Cabal
20:27:01 <Dibrom> what does ghc-pkg list show?
20:27:04 <sethk> looks like my cabal database is in an inconsistent state
20:27:13 <sethk> Dibrom, you want all of it, or just anything related to cabal?
20:27:16 <Lemmih> sethk: Get the new Cabal. Compile Setup.lhs with 'ghc -cpp --make Setup.lhs -o setup'. Run ./setup {configure|build|install}
20:27:35 <sethk> Lemmih, ok.  trying that
20:27:44 <Dibrom> make sure you do that in a clean dir
20:27:57 <sethk> Dibrom, ok, I'll extract from the tarball again
20:28:10 <sethk> Dibrom, Lemmih, this is with the new one, not 1.0, correct?
20:28:12 <Lemmih> It's a bit clumsy but it'll definitely work.
20:28:18 <Dibrom> new one
20:28:28 <Lemmih> sethk: It'll work with any Cabal version.
20:28:49 <sethk> Lemmih, right, but since I have a choice here, I'll the new one, right?
20:29:10 <Lemmih> Yes, you want the new one.
20:29:24 <sethk> the compile is printing a lot of messages, which is a good sign, I guess.  :)
20:30:13 <sethk> ok, the compile/link finished for setup, so I'm trying ./setup configure
20:30:46 <sethk> ./setup configure is happy, doing ./setup build
20:30:56 <sethk> is that method good for any Cabalized package?
20:31:05 <sethk> making a binary of setup, I mean?
20:31:20 <Lemmih> Yes.
20:31:38 <sethk> ok, ./setup install is also happy.  Back to yi.
20:32:01 <Cale> dons: when doing a ./Setup.lhs build of yi, I get an error building the static version
20:32:15 <Cale> Chasing modules from: boot/Static.hs
20:32:15 <Cale> Could not find module `Yi'
20:32:30 <Cale> the dynamic version builds fine
20:32:59 <sethk> Lemmih, Dibrom, dons, runhaskell Setup.lhs configure fails with Setup.lhs: cannot satisfy dependency gtk>=0.9.9.6
20:33:12 <Dibrom> sethk: now you need gtk2hs
20:33:14 <sethk> do I have to extract from darcs again?  I had done a failed configure in this directory
20:33:23 <sethk> Dibrom, that's weird, because I already have it.
20:33:29 <Dibrom> hrmm
20:33:32 <sethk> Dibrom, ok, maybe it got messed up with cabal also
20:33:35 <Dibrom> it shows up in "ghc-pkg list" ?
20:33:39 <Lemmih> sethk: What version of gtk do you have installed?
20:34:03 <Dibrom> sethk: shouldn't have been affected by removing cabal
20:34:05 <Dibrom> AFAIK
20:34:07 <sethk> Lemmih, I'll have to check, but it is no more than a week old
20:34:21 <Lemmih> That may be too old (:
20:34:28 <sethk> besides, why would that give me a message about not finding the correct version of ghc?
20:34:38 <Dibrom> oh.. .9.9.6 is the darcs one
20:34:41 <Dibrom> did you download stable?
20:34:53 <Lemmih> sethk: 'ghc-pkg field gtk version' will show the version of your gtk.
20:35:14 <sethk> ok.  my gtk2hs is from october 18
20:35:19 <sethk> which isn't terribly old  :)
20:35:26 <Cale> dons: also, I'm still getting crashes on holding down a key :(
20:35:39 <sethk> version: 0.9.9
20:35:39 <sethk> version: 0.9.9.5
20:35:39 <sethk> [
20:35:45 <sethk> forget the [  :)
20:36:13 <Cale> sethk: the version's been bumped since then
20:36:26 <sethk> Dibrom, stable of which?  gtk2hs?
20:36:38 <sethk> Cale, ok, I'll download again
20:36:41 <Dibrom> yeah
20:36:43 <Cale> darcs pull
20:37:19 <sethk> Cale, why not darcs get?
20:37:43 <Cale> sethk: because darcs get will re-get everything, and darcs pull will just get the 4 or so patches you need
20:38:02 <sethk> Cale, ok.  I already did the get, so I might as well keep it.
20:38:02 <Cale> just "darcs pull" from the gtk2hs directory
20:38:12 <Cale> ah, okay
20:38:59 <sethk> so pull is like cvs update
20:39:26 <Cale> yep
20:39:31 <sethk> so now I do autoreconf, the configure, etc.
20:39:53 <Cale> yep
20:40:03 <sethk> I might as well get hs-plugins again, since I seemed to have been in some sort of funky state
20:40:34 <dons> Cale, how to repeat the crash?
20:40:45 <dons> i'll fix the static version issue.
20:40:47 <Cale> dons: hold down "a" on your keyboard
20:40:58 <Cale> well, might be repeat rate dependent
20:41:08 <dons> no crash here.
20:41:11 <Cale> hmm
20:41:16 <dons> which gtk version, what keyrate?
20:41:20 <Cale> after 2 or 3 chars, I get a crash
20:41:34 <dons> oh, i can insert thousands no worries
20:42:00 <dons> what's the output of ldd `which yi` ?
20:42:07 <dons> (/msg me .. it's rather long..)
20:43:16 <sethk> gtk2hs takes forever to build.
20:43:32 <Cale> sethk: it would have been faster if you'd pull'd
20:43:38 <sethk> Cale, :)
20:43:57 <sethk> Cale, in this case, since I'm not sure exacty what state everything was in, probably worth the wait.
20:44:03 <Cale> yeah
20:44:42 <Dibrom> sethk: did you have gtksourceview installed before building gtk2hs?
20:44:45 <Cale> If there's one thing which seems constant across build systems, it's the ability to accumulate bad state
20:44:51 <Dibrom> the hIDE stuff needs that
20:45:09 <sethk> Dibrom, I don't think so, no.  Right now I just want to build yi.
20:45:14 <Dibrom> oh, ok
20:45:17 <sethk> Dibrom, after I get that done I'll think about hide
20:45:29 <Cale> um
20:45:36 <Cale> I think it's also needed to build gtk yi
20:45:36 <sethk> Dibrom, will I need to competely rebuild gtk2hs?
20:45:54 <sethk> Cale, we'll find out in a few moments, then, I guess.  :)
20:45:59 <dons> yi needs sourceview atm
20:46:04 <Dibrom> sethk: well technically I don't think so, but you'll have to run configure again
20:46:27 <sethk> dons, If I have an older version of sourceview might that be enough?
20:46:27 <Dibrom> if you install gtksourceview and run configure again in the gtk2hs dir, it should detect it and allow you to only rebuild the gtksourcview package I think
20:46:31 <Dibrom> but I'm not absolutely sure
20:46:35 <dons> quite probably, sethk
20:46:52 <dons> i have an older version, which works nicely.
20:46:56 <Dibrom> sethk: if you look at the output for gtk2hs configure, it will tell you whether it is building that package or not
20:47:38 <sethk> Dibrom, my terminal program is set to keep 5000 lines.  hopefully that's enough for the gtk2hs build.  :)
20:48:07 <Dibrom> oh
20:48:17 <Dibrom> I usually set mine to unlimited cause of stuff like that
20:48:19 <Dibrom> :)
20:48:41 <sethk> Dibrom, if you set it to unlimited and don't clear it occasionally ... well, you know.  :)
20:48:46 <Dibrom> yeah :)
20:48:51 <Dibrom> what platform are you on?
20:49:45 <sethk> x86 linux
20:50:01 <sethk> I have some others, but that's my primary platform
20:54:16 <glguy> output can be captured using the "script" program
20:57:31 <sethk> glguy, is that just a helpful note, or is there more to that statement?
20:57:34 <sethk> :)
20:58:20 <glguy> if you need to save the results of a long configure, setting your terminal scroll back seem like doing it the wrong way
20:58:27 <glguy> just type script first so that it's all saved to file
20:58:33 <glguy> and then you can do whatever you want with it
20:58:48 <sethk> glguy, that's fine if you know you need to save it before you start running it
20:58:54 <sethk> glguy, but, in this case, I did not know.
20:58:58 <glguy> ah
20:59:06 <sethk> glguy, and I don't need script for that, I just pipe the output through tee
21:04:03 <sethk> ok, all, configure reported that gtksourceview was not found.
21:04:09 <sethk> so there is my next task ...
21:04:17 <sethk> @where gtksourceview
21:04:17 <lambdabot> I know nothing about gtksourceview.
21:04:33 <sethk> not a haskell thing, of course, but it wouldn't hurt to add it to lambdabot.  :)
21:07:33 <sethk> damn.  Now I have to start chasing down gnome dependencies.
21:07:52 <sethk> I don't mind a gtk dependency, but gnome dependencies?
21:08:46 <sethk> and a libxml dependency?  ugh
21:10:46 <sethk> hmm., this is looking like I either need an older version of gtksourceview, or I have to install the entire gnome package.
21:14:27 <sethk> building glib ... groan, snore, whine
21:32:00 <Cale> sethk: this is what binary distributions with automatic dependency tracking are for :)
21:32:12 <sethk> Cale, nah, they are even worse
21:32:13 <sethk> :)
21:32:31 <Cale> Honestly, it was trivial to install gtksourceview :)
21:32:45 <sethk> Cale, if everything else was up to date, sure
21:32:51 <Cale> it wasn't
21:32:55 <sethk> Cale, but I need to be able to install things without waiting for packages.
21:33:05 <sethk> Cale, if that means a little extra work, I don't mind
21:33:10 <Cale> but apt went and got the things which needed to be installed first
21:33:27 <sethk> Cale, also, I'm in the #linuxhelp channel a lot and at least 50% of the problems are people having package manager issues
21:33:35 <sethk> Cale, I'm not saying they never work
21:33:39 <sethk> Cale, when they work, they are great
21:57:49 <Dibrom> gtksourceview has a lot of dependencies, yeah
21:58:40 <Dibrom> took me awhile to get everything compiled and installed for that
22:06:15 <xerox> 'morning
22:09:21 <sethk> damn, second X crash in two days
22:11:02 <sethk> machine must be mad at me for building gtk again.
22:22:56 <sethk> dons, at some point it might be a good idea to get rid of some of these dependencies.  It's hard to see why we need ilbgnomeprint and libgnomecups for an editor.  :)
22:28:26 <Lemmih> Getting rid of them would be next to impossible since they aren't direct dependencies of Yi.
22:28:50 <sethk> Lemmih, depends on whether the indirect dependencies are actually needed
22:29:09 <xerox> GtkSourceView is fun
22:29:52 <sethk> Lemmih, if gtksourceview isn't used, then none of the others are pulled in
22:30:00 <sethk> Lemmih, well, most of the others.
22:30:12 <sethk> print, printui, xml, cups
22:31:20 <sethk> I'm (finally) building gtksourceview itself, so it looks like I chased them all down.
22:32:39 <sethk> I think I had been building gtk2hs, and went off the build gtksourceview.  so if I now go back to gtk2hs ...
22:33:19 <sethk> it should just rebuild the part of gtk2hs that uses sourceview.  I hope
22:33:30 <sethk> ugh.  it doesn't
22:33:36 <sethk> it fails.
22:34:47 <sethk> I wonder if I should report that as a bug.  That building, then installing gtksourceview, doing configure again, and make again, fails.
22:34:58 <xerox> I usually do --enable-libglade --enable-gconf --enable-sourceview --enable-cairo --enable-firefox --enable-docs
22:35:02 <sethk> well, first let me make sure the build succeeds if gtksourceview is there in the firstplace
22:35:05 <Lemmih> How does it fail?
22:35:31 <sethk> gtk/Graphics/UI/Gtk/Types.chs:1037: (column 22) [ERROR]
22:35:31 <sethk>   >>> Unknown identifier!
22:35:31 <sethk>   Cannot find a definition for `gtk_about_dialog_get_type' in the header file.
22:35:31 <sethk> gtk/Graphics/UI/Gtk/Types.chs:1117: (column 22) [ERROR]
22:35:31 <sethk>   >>> Unknown identifier!
22:35:32 <sethk>   Cannot find a definition for `gtk_menu_tool_button_get_type' in the header file.
22:35:38 <sethk> and a bunch more similar ones
22:35:50 <sethk> I saved the directory if anyone should need it.
22:36:30 <sethk> I'm doing another build from the darcs source.  Let's see if that actually works.
22:36:31 <Lemmih> Don't report it as a bug if a complete rebuild fixes it.
22:36:33 <xerox> autoreconf, sh configure <blah>, make ?
22:36:38 <sethk> Lemmih, right
22:36:50 <sethk> xerox, I didn't redo autoreconf
22:36:54 <sethk> xerox, normally you would not
22:37:09 <sethk> xerox, now I'm doing it from a clean directory, of course starting with autoreconf
22:37:20 <xerox> As you prefer
22:38:32 <sethk> xerox, I'm not saying it wouldn't work, I'm just saying that ordinarily autoreconf doesn't have anything to do with package dependencies
22:39:30 <machack666> newbie question: in the main routine's do expression, if I want to repeatedly perform an action until a condition is true, how would I structure that?  As a trivial example, say I wanted to repeatedly getLine and check if it was a "quit" string, and otherwise print the line gotten and repeat.
22:39:58 <basti_> machack666: the easiest thing would be to do that recursively
22:41:34 <xerox> sethk: gtk2hs will not have an autoconf&automake buildsystem any longer, hopefully, as soon as Cabal gets enough power to manage the big and multi-package hierarchy.  The current one is _very_, very complex - born from the long work of duncan.
22:42:12 <sethk> xerox, ok, then I won't bother anyone about it.
22:43:07 <machack666> so, say I've got main = do { putStr "input string: "; str <- getLine; ??? ; return ()} as my essential loop -- how do I make this recursive while still being able to use the io actions?
22:43:48 <xerox> sethk: feel free to report the problems you have in order to compile gtk2hs - one side effect is that dcoutts knows every little single detail of the buildsystem, so he's very helpful usually.
22:43:59 <Lemmih> machack666: interact (\s -> unlines (takeWhile (/="quit") (lines s)))
22:44:51 <Lemmih> machack666: main = loop where loop = do str <- getLine; ???; loop
22:45:22 <basti_> machack666: a function of type (IO a) can of course call itself in a do command.
22:46:12 <Lemmih> machack666: You can also just loop forever and throw an exception to get out.
22:46:49 <Lemmih> Hi boegel.
22:47:19 <machack666> ok, thanks Lemmih, basti_
22:47:48 <boegel> hi Lemmih
22:47:59 <boegel> man, I'm up way too early :)
22:48:18 <sethk> hmm, I got the compiler internal error building gtk2hs
22:48:34 <boegel> nobody's here yet :)
22:48:44 * boegel likes being first
22:48:45 <sethk> boegel, thanks a lot  :)
22:48:51 <basti_> nobody but 176 other people.
22:48:55 <boegel> sethk: physically, irl
22:49:06 <basti_> ah
22:49:08 <sethk> I'm discorporated?
22:49:21 <boegel> sethk: no, here, at work :)
22:49:27 <sethk> boegel, I know.  :)
22:49:42 <sethk> should I save this directory where I just got a ghc internal error with 6.4.1?
22:49:58 <musasabi> sethk: Is that on windows?
22:50:09 <sethk> musasabi, no, linux
22:50:54 <sethk> I'll tar up the directory and restart the build.
22:56:12 <sethk> here's a story on ap about a guy why robbed a bank - he took his own pay stuff, crossed out his name and address with a marker, and used it as a note to give to the teller.  :)
22:58:01 <sethk> "It wasn't a huge forensic undertaking," Steven Moran, Bensalem director of public safety, said Wednesday. "We just put it under a light."
23:11:32 <Cale> http://www.cse.unsw.edu.au/~dons/hs-plugins/
23:11:46 <sethk> hs-plugins has a configure script, and also a Setup.hs.  Which should I use?
23:12:16 <sethk> Cale, thanks.
23:12:18 <sethk> Cale, do you know the answer to my question about configure vs. cabal?
23:12:19 <sethk> Cale, probably use the Setup.hs?
23:13:29 <Cale> hmm, I'd probably go with cabal
23:13:29 <sethk> Cale, odd to have a configure when pulled from darcs, rather than needing to do autoconf or autoreconf
23:13:29 <xerox> sethk: doing what the README tells you is usually a good move - which happens to suggest to use cabal.
23:21:02 <sethk> ah, now I get the panic! (the `impossible' happened ....
23:21:02 <sethk> building yi
23:21:02 <xerox> You've chosen the wrong time slice to try to build it ;-)
23:21:15 <sethk> people needed data for this error, is why I mention it
23:21:32 <sethk> I think they are not here though at the moment.
23:21:53 <sethk> anyway, I tar'd this directory too, in case it might be of any help.
23:21:59 <xerox> ...and the network is going *poof*
23:22:19 <sethk> xerox, the internet, you mean?  I've been having problems reaching some sites.
23:22:30 <sethk> xerox, there is also an IRC issue on freenode.
23:23:12 <sethk> this "impossible error" is repeatable.  that should definitely be useful.
23:23:42 <xerox> It can't, being itself impossible :-(
23:24:00 <basti_> I've had this happen at least a few times
23:24:28 <sethk> basti_, yes, earlier tonight someone saw it with hide
23:24:32 <xerox> It involves gurus' brainstorming and/or divine intervention, usually :-\
23:24:47 <sethk> basti_, I got the impression that it is intermittent and hard to track down
23:25:07 <basti_> hmm i think it was always repeatable when i got it.
23:25:13 <basti_> i didnt know it was this sought after
23:25:32 <sethk> so an image where the error is repeatable should be useful.
23:25:49 <basti_> its not only dependant on the source compiled?
23:27:58 <sethk> basti_, I'm not sure.  Perhaps it is repeatable but none of the compiler gurus had a test case.
23:28:06 <basti_> hmm
23:28:08 <basti_> i see
23:28:09 <sethk> basti_, or maybe I just got it wrong
23:28:13 <basti_> I'll scream the next time i get it
23:28:36 <sethk> in any event if you pull the latest yi from darcs it happens.  I just pulled again and started again and got the error again.
23:29:18 <sethk> hmm, the 'net seems to be back, athough a bit sow, here.
23:29:31 <sethk> maybe not.  :)
23:32:45 <sethk> dons, in case you are looking at lines with your NIC:  with the latest yi I get the "impossible" error.  It is repeatable.
23:46:26 <C-Keen> re
23:56:26 <Muad_Dib> morning
