00:00:48 <vincenz> dons:  the problem with that, just ilke !
00:00:57 <vincenz> is that operators are by default parsed infix
00:01:02 <vincenz> while functiosn are parsed prefix
00:01:07 <dons> ah. ok. yeah, like -
00:01:10 <vincenz> yeah
00:01:37 <Cale> catechize,v. 5. To question or interrogate systematically or at length; esp. to question or examine with a view to reproof or condemnation; to take to task.
00:01:55 <Cale> that's pretty obscure :)
00:02:00 <dons> yeah, i like that
00:02:02 <vincenz> :D
00:02:10 <vincenz> but it's an OFTEN used function
00:02:12 <vincenz> hence rr
00:02:29 <dons> rr is pretty obscure though
00:02:39 <vincenz> yeah but my language has exactly one user
00:02:40 <dons> ref x
00:02:44 <vincenz> the birthday boy
00:02:45 <dons> ah, one user. ok.
00:02:53 <vincenz> dons: yeah "ref" was my other option
00:02:54 * gour is still emerging world, so himerge should wait to have gtk2hs installed 1st
00:02:54 <vincenz> x = new 1
00:02:56 <vincenz> ref x
00:03:20 <Cale> auscultate
00:04:32 <vincenz> hmm
00:04:32 <Cale> heh, how about a programming language in which all symbols must start with the letter s, and cannot contain the letter e?
00:04:40 <vincenz> the nice thing of ! was, however, that it binds tighter than function application
00:04:40 <vincenz> so
00:04:42 <vincenz> foo !x
00:04:44 <vincenz> now it's gotta be
00:04:46 <vincenz> foo (ref x)
00:04:48 <Cale> and must be proper english words :)
00:05:16 <vincenz> Cale: soon such shall start
00:06:14 <Cale> I suppose you'd have scrawl and scry for references :)
00:07:11 <vincenz> Cale: today vincenz++
00:25:37 <wilx> Using ref for dereferencing doesn't make much sense.
00:25:57 <wilx> It violates the rule of least surprise.
00:26:22 <vincenz> wilx: yeah but my language has exactly one user
00:26:34 <dons> i think this is a language that explores the rule of most surprise
00:26:40 <wilx> Hehe.
00:26:46 <wilx> Then it is ok :D
00:26:47 <dons> what a fun, surprising language that would be.
00:27:08 <dons> like a birthday present every time your program works.
00:29:39 <dons> 90 minute up, i wonder what will happen?
00:29:50 <dons> wrong channel :/
00:31:53 <vincenz> dons, wilx: Nah, besides it's not part of the syntax, it's just a foreign function definition in the prelude which is read in as a long string.  So it's easily changed
00:32:42 <vincenz> among the haskellers here, if you had to choose a dynamic language, which would it be?
00:36:58 <audreyt> perl6 :)
00:37:28 <vincenz> :P
00:37:30 <audreyt> but, seriously, Haskell :)
00:37:41 <vincenz> I think dynlanguages have their place
00:37:46 <audreyt> "Haskell is the best dynamic language" etc
00:38:18 <vincenz> lol;
00:38:20 <vincenz> import Core.Problem
00:38:22 <audreyt> Haskell as: dynamic containers, runtime compilation, compile-time evaluation
00:38:34 <audreyt> the three hallmarks of dynamic language
00:38:37 <dons> and runtime evaluation, you forgot that ;)
00:38:46 <vincenz> audreyt: how do you represent your perl6 AST?
00:38:48 <audreyt> that's kinda implied :)
00:38:57 <vincenz> audreyt: I'm also workign on a compileri n haskell, albeit for a strongly typed lang
00:39:06 <audreyt> vincenz: using GADT+Records ideally
00:39:08 <vincenz> audreyt: dynamic containers/
00:39:12 <audreyt> but for GHC 6.4 compatibility
00:39:12 <vincenz> runtime compilation?
00:39:21 <vincenz> audreyt: have some sample I could look at?
00:39:25 <audreyt> see this http://svn.openfoundry.org/pugs/misc/pX/audreyt/p6ast.hs for the current AST we use
00:39:32 <vincenz> thx
00:39:37 <audreyt> vincenz: dynamic containers is (IORef Dynamic)
00:39:44 <audreyt> runtime compilation is System.Eval
00:39:51 <vincenz> hmm, how do you annotate?
00:39:51 <audreyt> compile-time evaluation is runIO in TH
00:40:18 <audreyt> annotate?
00:40:24 <vincenz> your AST
00:40:42 <audreyt> data Annotated a = Annotate Annotation a
00:41:04 <vincenz> http://rafb.net/paste/results/QLsVec52.html
00:41:19 <audreyt> well, same idea.
00:41:21 <vincenz> audreyt: yeah but you acn't put that into an Exp for isntance
00:41:26 <vincenz> cause it's already
00:41:32 <vincenz> data Expression = ...blaba Expression
00:41:42 <Itkovian> vincenz: I got it working, but I am facing a memory problem now :-)
00:41:50 <vincenz> Itkovian: what sort?
00:42:06 <vincenz> audreyt: I like indirect composite except for it's spammyness
00:42:16 <audreyt> vincenz: which is why we use SYB liberally
00:42:27 <audreyt> everywhere, gmapT, etc
00:42:38 <vincenz> audreyt: not sure I see how that allows you to annotate
00:42:43 <Itkovian> not enough RAM: (out of memory (requested xxx bytes))
00:43:00 <audreyt> it allows you to perform operations as if the annotations are not there
00:43:10 <audreyt> or is that not what you are talking about?
00:43:13 <vincenz> audreyt: yes
00:43:23 <vincenz> audreyt: however... there is no place for annotations in the ast you showed me in that file
00:43:31 <vincenz> audreyt: could i see the SYB stuff?
00:43:34 <audreyt> no, it's somewhere else
00:43:37 <audreyt> sure
00:43:48 <audreyt> the one I showed you is the draft AST we are switching to
00:43:53 <vincenz> ah
00:43:58 <audreyt> like, tomorrow
00:44:07 <audreyt> the old one is hairier
00:44:12 <vincenz> well yeah, once youk now exactylu what you want, you can make a finalized AST with just the right annotations without requiring indirect composite
00:44:27 <audreyt> yup. the old one is essentially
00:44:35 <audreyt> data Exp = Ann Ann Exp | ...other variants...
00:44:47 <vincenz> ah, you use tagging
00:44:57 <vincenz> I remember someone else using  that as well
00:45:19 <vincenz> ah yes, ndm
00:45:49 <vincenz> it's a pity you can't do a case on TC-methods iso data constructors
00:45:56 <vincenz> or you could make your AST a pure tc
00:46:06 <vincenz> :D
00:46:07 <audreyt> actually we started modeling this time using GADT+Rec
00:46:13 <audreyt> which is surprisingly very sane
00:46:21 <vincenz> audreyt: the sample you showed me isn't gadt tho, is it?
00:46:22 <audreyt> (Rec = Records, not Recursive)
00:46:23 <kzm> audreyt, you do GHC on AIX?
00:46:27 <audreyt> kzm: a bit
00:46:37 <audreyt> vincenz: yeah, because GADT+Records requires 6.5-trunk
00:46:43 <kzm> I was wondering if I could get it to work on an IBM Regatta.
00:46:43 <audreyt> vincenz: and we can't deploy that until 6.6 is out
00:46:48 <vincenz> audreyt: can I see a sample?
00:46:50 <vincenz> just to get an idea
00:46:58 <kzm> (it's soon the only multi-CPU computer here with >2 CPUs)
00:46:59 <audreyt> sure. let me dig an old revision
00:47:11 <audreyt> well actually
00:47:44 <audreyt> http://haskell.org/hawiki/GADT_20with_20record_20syntax
00:47:46 <lambdabot> Title: "GADT with record syntax - The Haskell Wiki"
00:47:57 <audreyt> is a pretty neat example I adapted from the GADT example a while ago
00:48:06 <audreyt> also http://haskell.org/hawiki/Existentially_20quantified_20record_20constructors for OO-style usage
00:48:08 <lambdabot> Title: "Existentially quantified record constructors - The Haskell Wiki"
00:48:13 <gour> araujo: himerge is very nice
00:48:20 <vincenz> audreyt: hmm... I fail to see the need for GADT, regular sumtypes with record syntax would work fine
00:48:41 <audreyt> vincenz: GADT lets you discriminate constructors
00:48:51 <audreyt> i.e. you can have fields in anothertype
00:48:58 <audreyt> that only accept some, not all, of consturctors
00:49:22 <gour> araujo: is it possible to update version column with e.g. 1st package when clicking on some Category?
00:49:33 <vincenz> audreyt: not sure I catch that ... 
00:49:49 <audreyt> vincenz: for example, Perl6 distinguishes between named call and closure apply
00:49:55 <gour> araujo: i'd also add some help tips to the button toolbar
00:50:07 <vincenz> audreyt: right..
00:50:53 <vincenz> audreyt: so you're saying that you could have a sumtype (GADT) that has a lot of data constructors but through the use of GDAT and typing ensure thato nly a subset are applicable in certain cases
00:50:58 <vincenz> which is actually something I could use
00:51:06 <vincenz> cause as you might have noticed I have EBlock
00:51:09 <vincenz> for multiple statments
00:51:23 <vincenz> when I corify I go to a set of nested lets with just let _ = ...
00:51:42 <vincenz> which means that AST can no logner have EBLocks, my current method has been to make a second datatype "Core"
00:51:52 * vincenz has been considering doign this at parse-time
00:51:53 <audreyt> vincenz: 
00:51:53 <audreyt> data Invoke a where Call  { name :: Ident, arguments :: [Exp] } :: Invoke Ident Apply { closure :: Exp, arguments :: [Exp] } :: Invoke Exp
00:51:56 <vincenz> but I'm not sure about the feasibility
00:51:57 <audreyt> er
00:51:59 <audreyt> data Invoke a where
00:52:02 <audreyt>   Call  { name :: Ident, arguments :: [Exp] } :: Invoke Ident
00:52:05 <audreyt>   Apply { closure :: Exp, arguments :: [Exp] } :: Invoke Exp
00:52:09 <audreyt> there. better
00:52:48 <audreyt> uplevel data structure can discriminate against constructors by limiting the type it can take
00:52:50 <vincenz> audreyt: and then you can have functions that only accept one and not the other
00:52:58 <audreyt> or you can have 
00:53:03 <audreyt> giveMeTopic :: Invoke a -> a
00:53:13 <audreyt> giveMeTopic Call{ name = x } = x
00:53:20 <audreyt> giveMeTopic Apply { closure = x } = x
00:53:23 <vincenz> yep
00:53:29 <vincenz> o.O
00:53:31 <audreyt> which is quite flexible really.
00:53:48 <vincenz> funky
00:54:22 <audreyt> this is available in today's GHC (6.4)
00:54:31 <audreyt> we emulate that in our old runcore using positional GADTs alone
00:54:38 <vincenz> can you parameterize it?
00:54:47 <vincenz> data Invoke a b c where
00:54:48 <audreyt> but without records, it becomes kinda hairy to write selectors
00:54:50 <audreyt> sure
00:54:52 <vincenz>   Call :: Invoke b
00:54:56 <vincenz> Apply :: Invoke c
00:55:00 <audreyt> you can even existentially quantify it
00:55:25 <audreyt> data Counter a = forall self. NewCounter
00:55:28 <audreyt>     { _this    :: self
00:55:29 <vincenz> yeah but existential quantification isn't required for me
00:55:31 <audreyt>     , _inc     :: self -> self
00:55:35 <audreyt>     , tag      :: a
00:55:36 <audreyt>     }
00:55:49 <audreyt> it is for us, because we have "vmethods" so to speak
00:56:00 <audreyt> and we can plug in different Haskell types that conforms to a interface
00:56:09 <audreyt> which again allows some kind of dynamism
00:56:12 <vincenz> yep
00:57:04 <vincenz> alright, interesting food for though
00:57:10 <vincenz> tho I fear it's too soon to integrate this into my compiler
00:57:16 <vincenz> I'll have to mull about it a bit more
00:58:00 <lambdabot> Happy birthday, vincenz.
01:00:07 <vincenz> audreyt: want to know something that pisses me off regarding indirect composite?
01:00:19 <vincenz> assume data Foo a b= A a | B b
01:00:35 <vincenz> newtype RecFoo = RF( Foo RecFoo RecFoo)
01:00:43 <vincenz> you need to itnroduce RF as data constructor
01:00:53 <vincenz> even thoguh if you look at the recursive chains, they already go through the data constructors of A and B
01:01:01 <vincenz> hence... GHC should allow
01:01:09 <vincenz> type RecFoo = Foo RecFoo RecFoo
01:01:27 <araujo> gour, nice you liked it
01:01:47 <araujo> gour, well, the thing is that versions belong to specific packages and not categories
01:02:46 <gour> araujo: true, so clicking on category changes pkgs'list, but leaves old - irrelevant version info
01:03:12 <araujo> and yes, i will be adding buttons tips to the toolbar
01:03:36 <araujo> gour, oh, you mean, to clean up the old version, that's a good point.
01:03:45 <gour> araujo: so, eithe it can be updated with e.g. 1st pkg's versions, or simply clear the version list
01:03:58 <kzm> audreyt, apologies for nagging, but are there any AIX/Power GHC binaries available?  Anything likely to work on Power4?
01:04:00 <araujo> i would go clearing better.
01:04:24 * araujo thinks this shouldn't be difficult
01:04:51 <gour> nice. it's more logical
01:04:51 * kzm tried bootstrapping from .hc, but stumbled on some - ahem - environmental issues.
01:06:32 <gour> araujo: anothe issue - what is supposed to be under View tab (help tip is missinf too) ?
01:07:44 <gour> araujo: maybe something can be put in the status bar too (instead of Welcome message) ?
01:08:36 <araujo> gour, the View tab is supposed to show different kind of information, lke for example, third-party tools messages, etc
01:09:06 <araujo> gour, such as?
01:09:59 <audreyt> kzm: tried http://haskell.org/ghc/dist/6.4.2/ghc-6.4.2-powerpc-ibm-aix43-bindist.tar.gz yet?
01:09:59 <gour> araujo: i don't get anything..
01:10:03 <araujo> For example , for updating the eix cache (ctrl+u) will show its stdout there
01:10:09 <audreyt> kzm: sorry, about to sleep now
01:10:23 <kzm> OK.  I was worried about PPC vs POWER, but perhaps it'll work?
01:10:28 <kzm> I'll give it a try.
01:10:34 <kzm> Thanks, and good night :-)
01:10:37 <araujo> gour, it is more a kind of buffer/log window
01:11:06 <gour> araujo: ok, updating eix shows something
01:11:30 <araujo> whenever needed to show extra information to the user, mainly from third-party tools, like in this case eix
01:11:39 <kzm> Ah, I already did try it :-(
01:12:04 <araujo> gour, yeah, also try ctrl+i
01:12:30 <audreyt> oh, POWER.
01:12:31 <audreyt> hm.
01:12:40 <audreyt> I'm not sure even my .hc tree can help you
01:12:41 <audreyt> so no :/
01:13:05 <gour> araujo: however, if i update or ctrl-i, but don't select view, i won't see the show. maybe ctrl-i and/or upadte eix should jump to View tab?
01:13:06 <kzm> Well, I'll try to follow the building guide, apparently the admins have fixed the previous snag.
01:13:13 <audreyt> good luck
01:13:17 * audreyt sleeps :) &
01:13:32 <kzm> The binary snapshot doesn't let me ./configure, and is configured for /usr/local (no write access).
01:14:36 <araujo> gour, yes, but i remenber i couldn't get to work that tab bevahiour with already opened tabs. 
01:15:54 <araujo> gour, gtk2hs still has some slight limitations i suppose 
01:16:09 <gour> araujo: ahh..ok, have you informed dcoutts?
01:16:24 <araujo> gour, not about that one i think
01:16:51 * araujo has not hacked on himerge for around 2 month now
01:16:57 <gour> araujo: but you think it should be done, right?
01:17:25 <araujo> gour, i am still bothering dcoutts for this new gtk2hs version which will bring many improvements :-)
01:17:26 * gour will start advertising himerge to increase its user base and frocing araujo to work more on it
01:17:42 <araujo> gour, of course, i remenber i tried to get it working
01:17:48 <araujo> haha
01:18:11 <gour> araujo: what is on the top of your 'improvements' in 2.10?
01:18:18 <araujo> gour, i will continue developing it for sure , just waiting for free time :-)
01:18:36 <gour> i heard somewhere about 'free time' :-)
01:19:42 <araujo> gour, many changes are coming with this new version of gtk2hs ... i think that most of the improvements will be around that new API
01:19:58 <araujo> many part of the code _still_ can be cleaner for example the treeiters stuff
01:20:03 <araujo> cleaner and safer
01:20:09 <vincenz> anyoen here work on hide?
01:20:15 <gour> araujo: i'm looking for a treeview api in gtk2hs, probably i'll need it
01:20:32 <gour> vincenz: Lemmih does it
01:20:35 <araujo> gour, yeah, the api is already there, it isn't just _that_ friendly
01:20:43 <vincenz> I want to get source-level highlighting of my custom prog lang
01:20:44 <gour> :-)
01:20:50 <vincenz> since I ensure to return an error with a source-code location
01:22:17 <araujo> gour, also, the majo bug concer about the appli so far, it's that it crahses with two browsers open
01:22:26 <araujo> major*
01:22:51 <araujo> gour, and i think it is also related to the gtk2hs api (talked about it with dcoutts too)
01:22:52 <gour> Hmm_|, didn't encounter it so far
01:23:12 <gour> what about regex search for pkg?
01:23:20 <araujo> gour, try this, and help me test it..... open one browser, then close, and reopen
01:23:36 <gour> if i search for e.g. 'sun' i don't get anything, but would like to get a list
01:23:58 <araujo> gour, well, that shouldn't be difficult to add either, eix could take care of it
01:24:31 <araujo> gour, i would appreciate if you could send me an email with all these ideas :-)
01:24:57 <gour> araujo: if i want to close a tab, i get No valid page to remove dialog ?
01:25:49 <araujo> gour, the appli is very extensible, so any script/tool option can be easily accessed through it
01:26:10 <araujo> gour, yes, you can't remove "default" tabs
01:26:14 * gour is looking for araujo's email
01:27:16 <araujo> i think (and i am applying this rule of "i know in this case what it is better for the user") that it keeps to user away of closing accidentally some of the default tabs which are very important
01:27:30 <araujo> that will be the beaviour until i add  away to reopen these tabs too
01:27:39 <gour> ok, re-opening browser segfaults
01:27:44 <araujo> yup
01:27:49 <gour> :-(
01:27:59 <araujo> that's the most annoying bug so far ive encountered
01:28:08 <gour> this is alarm for dcouts!
01:28:18 <araujo> and like i said and commented to dcoutts, i think it is gtk2hs related ....
01:28:22 <gour> err. for dcoutts!
01:28:58 <gour> araujo: haskell apps do not segfault :-)
01:29:03 * araujo loked at some of the gtk2hs code and it looks like some object reference/unreference problem
01:29:36 <araujo> gour, the api still contains "no-haskellized" code
01:30:00 <araujo> i think it is happening in one of those parts
01:30:28 <gour> right
01:31:13 <araujo> gour, but good to know that it also happens to you .... i was wondering if it was only my problem
01:31:32 <araujo> well ... in the sense hat it _is_ a bug i thought :-)
01:35:11 <gour> you're also on amd64?
01:35:29 <araujo> gour, one other thing hat i probably will have to improve also is the editing capabilities for /etc/portage/ files
01:35:33 <araujo> yes
01:35:46 <gour> you have report from x86?
01:36:06 <araujo> what you mean?
01:36:18 <araujo> i actually wrote it on x86 .....
01:36:55 <araujo> oh, you mean, the bug report.. yes same problem.....
01:37:19 <gour> ahh, i though maybe it's amd64-oriented. btw, i found your email, still the same at arjox dot org?
01:37:35 <dcoutts> gour, araujo, what?
01:38:12 <araujo> gour, yeah
01:38:17 <gour> araujo: ok
01:38:32 <gour> dcoutts: we're discussing himerge segfault ;)
01:38:38 <dcoutts> ah
01:38:38 <araujo> dcoutts, gour and i were planning to bother you to release the new gtk2hs api 
01:38:40 <araujo> :-)
01:38:46 <gour> :-))
01:38:47 <dcoutts> usually that means it's my fault :-)
01:39:00 * mux already feels nervous for tonight's france vs portugal match
01:39:04 <dcoutts> araujo, gour, well you know there are new cairo and gtk+ releases
01:39:26 <dcoutts> mux, which team will you be supporting?
01:39:30 <gour> cairo-1.2 & gtk-2.10 ?
01:39:34 <dcoutts> gour, yep
01:39:46 <mux> dcoutts: I'm from france, so :-)
01:40:27 <dcoutts> mux, ah, well good luck! :-)
01:40:39 <mux> hehe, thanks :-)
01:41:20 * dcoutts missed the game where portugal put us out of the competition
01:41:22 <gour> dcoutts: luckily, you can have a peace after penalties :-)
01:42:07 <mux> dcoutts: where are you from?
01:42:40 * gour was not bothering much about it - it is visible in the stars who will win (although i'm not knowing prashna yet)
01:45:32 <dcoutts> mux, ox.ac.uk
01:46:08 <dcoutts> gour, if you did know you could make a lot of money ;-)
01:46:25 <vincenz> > init [1..10]
01:46:28 <lambdabot>  [1,2,3,4,5,6,7,8,9]
01:46:57 <mux> dcoutts: ah. that was a nice match
01:47:01 <gour> dcoutts: but if one would use it for making money, then he would lose the ability to predict. that's the catch
01:47:14 <dcoutts> gour, ah, clever fix
01:48:18 <gour> dcoutts: one of my teacher's teacher's son, was specialized for horse races...
01:51:19 <gour> dcoutts: read about at http://shyamasundaradasa.com/jyotish/what_is_jyotish/what_is_vedic_astrology/what_is_vedic_astrology_5.html
01:51:20 <lambdabot> Title: "What is Vedic Astrology: Birth Chart Prasna Astrocartography - 5"
01:54:41 <gour> araujo: after emerging one pkg, the pkg info was not updated, i.e. it showed that pkg is not installed
01:56:05 <Itkovian> anybody built fps (darcs repo version) on MacOSX - Tiger using ghc 6.4?
01:56:49 <araujo> gour, where it showed that?
01:57:07 <gour> araujo: Package tab
01:57:48 <Itkovian> I get Setup.hs: internal error: stg_ap_v_ret
01:59:07 <araujo> gour, did you click again over the category field?
01:59:42 <gour> araujo: i believe so, but let me try again
02:01:12 <gour> araujo: probably not 'cause i operated only on Version tab 
02:01:39 <araujo> gour, ok do it
02:01:54 <araujo> it should update the buffer view
02:02:28 <gour> now i unmerge the pkg and i got a new Tab - named by the pkg, why not using View tab?
02:02:56 <gour> the problem could be 'cause i selected pkg for merging after finding it via Search, i.e. not by using Category
02:03:53 <araujo> gour, well, the idea of the appli is sort of mapping emerge/unmerge into a different view for each pkg.
02:07:31 <gour> araujo: e.g. clicking on Category after unmerge still shows pkg as installed
02:08:08 <gour> araujo: but, after i click on pkg Tab, then the buffer is updated
02:08:32 <gour> (click on version tab also does not update)
02:09:46 <gour> araujo: however, i'd like that after performing search, the correct Category and Package become selected
02:11:32 <gour> araujo: another thing, pls. add right-menu to tabs so one can close them (e.g. after (un)merge operation is finished)
02:12:17 <araujo> gour, yes, it updates on pkg tab only. After a search a version isn't selected. it is left to the user to choose which one he wants
02:12:31 <gour> cause it is not so intuitive to go to File -> Close Tab (if one is  not aware of Ctrl-W)
02:13:35 <araujo> you can close with ctrl+w
02:14:21 <gour> araujo: oops, sorry. i did not notice that Category and Package are selected :-(
02:15:22 <gour> cause they are not in the view, i.e. scrolled down/up
02:19:26 * boegel invites some people in #haskell-blah, because it's so quiet in there
02:19:32 <boegel> free beer and titties for everyone!
02:20:00 <kzm> boegel, what's the URL?
02:20:15 <gour> araujo: but the issue with buffer update remains, i.e. buffer updates only after user clicks on Package tab again (after the operation is over)
02:21:56 <araujo> gour, yes , so eix can run again
02:22:03 <araujo> that's pretty much handled by eix
02:24:20 <araujo> one way could be to run eix every time of a successful emerge operations probably
02:24:42 <tessier> titties and beer!
02:26:53 <gour> araujo: yep, something that will reflect the new state :-)
02:28:25 <araujo> _that_ was a crash :-P
02:34:05 <boegel> kzm: /join #haskell-blah
02:35:26 <Itkovian> don't make promises you can't keep boegel
02:35:55 <araujo> haha
02:35:57 <vincenz> join #oasis for a bunch of smart people
02:36:14 <vincenz> with haskell affiilation
02:37:02 <gour_> araujo: you saw my last msg?
02:37:56 <araujo> gour_, i don't think so.... i crashed :-P
02:38:03 <mnislaih> Lemmih !
02:38:12 <gour_> araujo: yep, something that will reflect the new state :-)
02:38:22 <mnislaih> what happens when you put a breakpoint in a local binding at a let ?
02:38:46 <mnislaih> ghc crashes in nameModule, but, why ?
02:40:39 <vincenz> roconnor: that was quick
02:45:08 <Itkovian> Perhaps BCoppens is interested?
02:45:24 * BCoppens looks confused
02:45:41 <Lemmih> mnislaih: I haven't been able to compile ghc.
02:45:52 <vincenz> BCoppens works with c++?
02:46:02 <roconnor> vincenz: I'm not prepared for programming contests
02:46:11 <vincenz> roconnor: it's also a generic chat channel
02:46:27 <BCoppens> vincenz: happy birthday? =)
02:46:40 <BCoppens> vincenz: what's about c++
02:46:42 <vincenz> BCoppens: oh thanks, but no, we were discussing research in #oasis
02:47:28 <BCoppens> vincenz: should I join?
02:48:09 <vincenz> BCoppens: sure
02:48:10 <norpan> whassup
02:49:17 <mnislaih> Lemmih: you mean, with my patches ?
02:50:28 <norpan> i'm bored
02:50:30 <norpan> amuse me
02:51:09 * boegel copies sieni and takes his pants off
02:52:18 <norpan> IEEE 1800-2005 really is a piece of semantic mumbo-jumbo
02:52:41 <Lemmih> mnislaih: I don't think your patches are at fault. I'll investigate some more.
02:53:15 <Lemmih> mnislaih: But I won't be able to debug my code for awhile.
02:54:42 <mnislaih> I'll do it no problem. Any breakpoint at a local binding crashes at nameModule, and that's after the renaming pass
02:54:46 <mnislaih> any clue ?
02:55:39 <Lemmih> How does it crash?
02:56:51 <mnislaih> with a panic at Name.nameModule
02:57:13 <mnislaih> I wish I could get a call trace of that
02:59:05 <Lemmih> (:
03:03:18 <mnislaih> Lemmih, extra info: it looks like somewhere ghc does a nameModule on the name bound at the let
03:04:31 <mnislaih> say it's 'a'. The panic message shows: 'nameModule a{v aGZ}'
03:06:38 * JKnecht presumes norpan was not amused.
03:19:43 <boegel> JKnecht: maybe he still is :)
03:19:57 <boegel> I can be quite amusing when naked :p
03:32:39 <norpan> bah
03:36:08 <Lokadin> lol
03:49:08 <JKnecht> :)
04:03:28 <vincenz> audreyt: ping
04:28:27 <vincenz> is the _ specialcased in haskell?
04:28:31 <vincenz> > let foo _ = _ in foo 1
04:28:32 <lambdabot>  Parse error in expression
04:29:36 <int-e> it's a pattern
04:30:08 <vincenz> ah right
04:30:10 <int-e> > let foo x x = 42 in foo 0 0
04:30:11 <lambdabot>    Conflicting definitions for `x'
04:30:11 <vincenz> wasn't thinking
04:30:11 <lambdabot>   In the definition of `foo'
04:30:28 <int-e> > let foo _ _ = 42 in foo 0 0
04:30:29 <lambdabot>  42
04:33:02 <foxy_> dcoutts: ping -- question about gtk2hs compilation
04:33:11 <dcoutts> foxy_, aye?
04:33:43 <foxy_> dcoutts, yeah, I can't run autoreconf (1.9) I get:
04:33:44 <foxy_> configure.ac:117: error: possibly undefined macro: AC_MSG_ERROR
04:33:46 <foxy_>       If this token and others are legitimate, please use m4_pattern_allow.
04:33:47 <foxy_>       See the Autoconf documentation.
04:33:49 <foxy_> autoreconf: /usr/bin/autoconf failed with exit status: 1
04:34:20 <dcoutts> foxy_, which gtk2hs version? a released version or development version?
04:34:38 <foxy_> dcoutts, darcs version from about 5 minutes ago
04:35:04 <dcoutts> foxy_, when you say autoreconf 1.9 do you mean automake 1.9 ?
04:35:22 <dcoutts> autoreconf is probably something like 2.58 or 2.59
04:35:26 <foxy_> yes I do, and autoreconf 2.59
04:36:05 <dcoutts> foxy_, are you using debian?
04:36:17 <foxy_> dcoutts, msys + mingw
04:36:24 <dcoutts> ah ok, hmm
04:37:12 <dcoutts> to be honnest I never got it working on win32, I always generated the configure scripts on linux and then ran them on win32
04:37:24 <dcoutts> foxy_, it's odd though, I'm using the same versions as you
04:37:32 * dcoutts looks up AC_MSG_ERROR
04:38:48 <Itkovian> can one turn a [Word8] into an Integer?
04:39:07 <foxy_> dcoutts: OK, excuse the long line, but it worked this time, here is a verbatim transcript
04:39:08 <foxy_> vivian@BOX:/usr/local/src/gtk2hs
04:39:10 <foxy_> $ autoreconf
04:39:11 <foxy_> configure.ac:117: error: possibly undefined macro: AC_MSG_ERROR
04:39:13 <foxy_>       If this token and others are legitimate, please use m4_pattern_allow.
04:39:14 <foxy_>       See the Autoconf documentation.
04:39:16 <foxy_> autoreconf: /usr/bin/autoconf failed with exit status: 1
04:39:17 <foxy_> vivian@BOX:/usr/local/src/gtk2hs
04:39:19 <foxy_> $ autoreconf --version
04:39:20 <foxy_> autoreconf (GNU Autoconf) 2.59
04:39:22 <foxy_> Written by David J. MacKenzie and Akim Demaille.
04:39:23 <foxy_> Copyright (C) 2003 Free Software Foundation, Inc.
04:39:25 <foxy_> This is free software; see the source for copying conditions.  There is NO
04:39:27 <foxy_> warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
04:39:28 <foxy_> vivian@BOX:/usr/local/src/gtk2hs
04:39:30 <foxy_> $ autoreconf
04:39:31 <foxy_> vivian@BOX:/usr/local/src/gtk2hs
04:39:33 <foxy_> $ 
04:39:38 <dcoutts> hmm, wierdy
04:39:54 <dcoutts> AC_MSG_ERROR is definately a standard macro
04:40:16 <dcoutts> I was going to suggest that it might be other missing macros, like some of the pkg-config ones
04:40:46 <foxy_> ./configure: line 4139: syntax error near unexpected token `PKG_CHECK_MODULES(GLIB,glib-2.0'
04:40:47 <foxy_> ./configure: line 4139: `PKG_CHECK_MODULES(GLIB,glib-2.0 >= 2.0.0 gobject-2.0 >= 2.0.0, , { { echo "$as_me:$LINENO: error:'
04:41:06 <vincenz> foxy_: use a paste site?
04:41:09 <vincenz> @where paste
04:41:09 <lambdabot> http://paste.lisp.org/new/haskell
04:41:29 <foxy_> apologies
04:41:43 <vincenz> ;)
04:42:11 <dcoutts> foxy_, so you probably are missing the pkg-config macros
04:42:52 <dcoutts> foxy_, I assume you've got pkg-config installed, but I'm not sure how you get the autoconf macros that pkg-config provieds included
04:43:09 <foxy_> dcoutts, does pkg-config come with GTK?
04:43:12 <dcoutts> on linux the package manager takes care of that, so I've never known how it works
04:43:18 <dcoutts> foxy_, it's a build time dependency
04:43:43 <dcoutts> so yes, it comes bundled with the gtk dev installer
04:44:02 <dcoutts> foxy_, do you have access to a linux system?
04:44:51 <dcoutts> as I say, I always just generate a tarball under linux and then configure;make on other systems, like win32
04:44:57 <foxy_> dcoutts, yes and no, my linux box is 700kms away behind a firewall and it's not responding.
04:45:05 <juhp> foxy_: you have pkgconfig installed?
04:45:06 <dcoutts> ho hum
04:45:15 <juhp> heh
04:45:45 <juhp> /usr/share/aclocal/pkg.m4
04:47:58 <foxy_> juhp: I'm installing it at the moment
04:48:54 <mux> pkg-config is more of a gnome thing than a gtk thing
04:49:39 <dcoutts> mux, everything seems to be using pkg-config now
04:49:44 <mux> but gtk installs a gtk+-2.0.pc file for pkg-config
04:49:52 <dcoutts> $ pkg-config --list-all | wc -l
04:49:52 <dcoutts> 272
04:49:57 <mux> dcoutts: yeah, more and more things, such as Xorg modules
04:50:00 <juhp> mux: yep
04:50:04 <mux> but it's originally a gnome thing
04:50:16 <dcoutts> it's a freedesktop thing originally
04:50:20 <mux> gtk12 had its own gtk-config stuff
04:50:26 <mux> they switched to pkg-config for 2.0
04:50:34 <mux> dcoutts: really?
04:50:50 <dcoutts> @google pkg-config
04:50:52 <lambdabot> http://pkgconfig.freedesktop.org/
04:50:52 <lambdabot> Title: "A pkg-config Wiki - FrontPage"
04:50:59 <mux> it always looked like a gnome thing to me given how FreeBSD ports that use it work
04:51:16 <mux> ie they have USE_GNOME= gtk+-2.0 etc
04:51:23 <mux> but maybe that's only a FreeBSDism
04:51:32 <mux> or maybe freedesktop took it over at some time
04:51:38 <juhp> hmm, I think it may well have gnome origins, but these days it is much widely used :)
04:51:54 <foxy_> OK, I'm trying to compile pkgconfig and it failed to find a glib.h file.  So I checked the glib site and it requires pkg-config?
04:52:36 <dcoutts> juhp, yeah I want to add a pkg-config thing to cabal to make bindings easier
04:53:25 <isaacd> Itkovian: 
04:53:27 <isaacd> (\words -> (\[(n,"")] -> n) $ readInt (1 + toInteger (maxBound::Word8)) (const True) fromEnum (map (toEnum.fromEnum) words)) [1::Word8,2]
04:53:29 * mux hearts freedesktop.org
04:53:30 <isaacd> > (\words -> (\[(n,"")] -> n) $ readInt (1 + toInteger (maxBound::Word8)) (const True) fromEnum (map (toEnum.fromEnum) words)) [1::Word8,2]
04:53:31 <lambdabot>  258
04:53:45 <isaacd> That could surely be simplified
04:54:03 <norpan> > 258
04:54:04 <lambdabot>  258
04:54:05 <isaacd> But it's possible anyway
04:54:09 <norpan> that's the easiest i found
04:54:10 <juhp> foxy_: I don't think pkgconfig requires glib to build
04:55:13 <lisppaste2> foxy pasted "pkg-config build" at http://paste.lisp.org/display/22105
04:55:17 <juhp> it should just be linked against libc
04:55:27 <mux> yeah
04:55:32 <mux> it shouldn't depend on glib
04:57:14 <isaacd> This is rather better:
04:57:25 <isaacd> > (foldl (\r n -> r * (1 + toInteger (maxBound::Word8)) + n) 0 . map fromIntegral) [2::Word8,3]
04:57:26 <lambdabot>  515
04:57:46 <isaacd> > 2*256 + 3
04:57:47 <lambdabot>  515
04:58:37 <juhp> foxy_: it bundles glib-1.2.8 if you don't have glib installed
04:58:52 <foxy_> juhp: could you paste me "/usr/share/aclocal/pkg.m4"
04:58:53 <juhp> and seems to linked against it statically I guess
04:59:06 * vincenz sighs at his nasty haskell http://rafb.net/paste/results/sX49BG76.html
04:59:48 <isaacd> > let integerify words = foldl (\r n -> r * (1 + toInteger (maxBound `asTypeOf` head words)) + n) 0 . map fromIntegral in [2::Word8,3]
04:59:58 <isaacd> > let integerify words = foldl (\r n -> r * (1 + toInteger (maxBound `asTypeOf` head words)) + n) 0 . map fromIntegral in integerify [2::Word8,3]
05:00:02 <lambdabot>  Add a type signature
05:00:02 <lambdabot>  [2,3]
05:00:17 <isaacd> > let integerify words = foldl (\r n -> r * (1 + toInteger (maxBound `asTypeOf` head words)) + n) 0 . map fromIntegral $ words in integerify [2::Word8,3]
05:00:18 <lambdabot>  515
05:00:36 <isaacd> > let integerify words = foldl (\r n -> r * (1 + toInteger (maxBound `asTypeOf` head words)) + n) 0 . map fromIntegral $ words in integerify []
05:00:37 <lambdabot>  Add a type signature
05:00:49 <isaacd> > let integerify words = foldl (\r n -> r * (1 + toInteger (maxBound `asTypeOf` head words)) + n) 0 . map fromIntegral $ words in integerify ([]::[Word8])
05:00:50 <lambdabot>  0
05:01:04 <isaacd> > let integerify words = foldl (\r n -> r * (1 + toInteger (maxBound `asTypeOf` head words)) + n) 0 . map fromIntegral $ words in integerify ([1,1]::[Word16])
05:01:05 <lambdabot>  65537
05:01:12 <mux> foxy_: tried with --disable-threads ?
05:01:22 <mux> the FreeBSD port of pkg-config uses that, and it sure doesn't depend on glib
05:01:32 <mux> it's only linked to libc
05:01:39 <mux> butane# ldd /usr/local/bin/pkg-config
05:01:39 <mux> /usr/local/bin/pkg-config: libc.so.6 => /lib/libc.so.6 (0x28089000)
05:01:46 <juhp> foxy_: mine is identical to the one in the source though
05:02:05 <foxy_> foxy pasted "pkg-config build" at http://paste.lisp.org/display/22105
05:02:26 <mux> foxy_: try with --disable-threads
05:02:32 <juhp> mine == pkg.m4
05:03:38 <foxy_> I think pkg.m4 is all I need to get gtk2hs compiling, could someone copy it to me?
05:03:51 <juhp> foxy_: you have the source, no?
05:04:06 <foxy_> juhp, not for pkg.m4
05:04:08 <dcoutts> foxy_, email?
05:04:21 <juhp> foxy_: pkg.m4 in the source for pkg-config....
05:04:40 <foxy_> juhp, of course, silly me
05:04:48 <dcoutts> does anyone here have macos/darwin and feel like testing something trivial for me?
05:04:59 <dcoutts> I need to know if it supprots this asm directive
05:05:05 <dcoutts> it's for ghc
05:05:23 <dcoutts> I've got a trivial prog and I want to see if it compiles on osx
05:05:31 <dcoutts> a trivial C prog that is
05:05:59 <dcoutts> foo.c:
05:06:00 <dcoutts> __asm__ (".section .note.GNU-stack,\"\",%progbits");
05:06:10 <dcoutts> then just: gcc -c foo.c
05:06:50 <dcoutts> I want to know if that succedes or fails (I'm assuming it'll fail)
05:07:20 * dcoutts knows there are some mac users around here somewhere
05:07:36 <dcoutts> Beelsebob, you use a mac right?
05:07:49 * dcoutts knows xerox does
05:08:12 <psi> mac / linux :)
05:09:01 <dcoutts> psi, you mean you use a mac but run linux on it?
05:09:40 <psi> yeah
05:09:51 * dcoutts would do the same if he had a mac
05:13:02 <earthy_> I thought I'd do that when I bought a mac
05:13:13 <earthy_> then Mac OS X turned out to be unixy enough not to need to run linux on it
05:13:20 <ValarQ> as long as it can run GNU, any kernel is ok for me
05:13:47 <tic> bash, vim and the standard utilities in /bin :)
05:14:14 <mux> as long as bash is not misspelled as /bin/shj
05:14:16 <mux> -j
05:14:19 <earthy> it isn't
05:14:44 <earthy> it is however present as such. :)
05:15:01 <earthy> but you get /bin/bash as the main shell usually
05:15:13 <mux> s/usually/on Linux/
05:15:24 <earthy> s/usually/on Mac OS X/
05:15:39 <mux> that too
05:15:53 <earthy> I don't know what /bin/sh was on Mac OS X 10.1 or 10.2 though
05:15:57 <earthy> not bash, that's for sure
05:16:02 <tic> ks?
05:16:03 <tic> ksh
05:16:09 <earthy> (10.1 and 10.2 came with tcsh as default shell)
05:16:26 <norpan> tcsh is pure evil
05:16:33 * earthy agrees
05:16:44 <mux> you only think that because you don't know it :)
05:17:13 <norpan> i've used it for several years at university
05:17:20 <norpan> until someone told me i could change it :)
05:17:41 <falconair> haskell's wiki says that GHC 6.6 will be release before May 2006, is there an updated estimate?
05:19:31 <vegai> what, you don't believe that?
05:19:32 <lambdabot> vegai: You have 1 new message. '/msg lambdabot @messages' to read it.
05:19:57 <vegai> @messages
05:19:57 <lambdabot> dons said 7 hours, 21 minutes and 43 seconds ago: did you get the lambdabot built?
05:20:02 <vegai> oh, right. 
05:26:17 <roconnor> @google eta-conversion
05:26:19 <lambdabot> http://foldoc.org/?eta+conversion
05:26:19 <lambdabot> Title: "eta conversion from FOLDOC"
05:26:25 <Itkovian> isaacd: thx
05:30:53 <foxy_> dcoutts, do you know how to configure pkg-config to find libraries?
05:32:13 <dcoutts> PKG_CONFIG_PATH
05:32:46 <dcoutts> A semicolon-separated list of directories to search for .pc files.
05:32:56 <dcoutts> foxy_, is that what you meant?
05:33:13 <foxy_> and where are the .pc files located (yes that's what I meant) (BTW, I'm making progress)
05:33:42 <dcoutts> the .pc files are instaleld by the gtk dev installer and are under share/pkgconfig usually I thinl
05:34:08 <dcoutts> or /usr/lib/pkgconfig
05:34:41 <mux> /usr/local/libdata/pkgconfig
05:34:47 <mux> /usr/X11R6/libdata/pkgconfig
05:34:52 <mux> and a lot of other places :-)
05:37:40 <alar> @google delta-reduction
05:37:43 <lambdabot> http://www.swif.uniba.it/lei/foldop/foldoc.cgi?delta+reduction
05:37:43 <lambdabot> Title: "delta reduction from FOLDOC"
05:38:55 <isaacd> dcoutts: re: asm, running mac-on-linux I got "unknown section type: %progbits"
05:39:11 <dcoutts> isaacd, great, thanks
05:39:27 <dcoutts> oh, running linux?
05:39:33 <dcoutts> hmm
05:39:43 <isaacd> "Mac-on-linus" runs OSX inside Linux
05:39:45 <isaacd> *linux
05:39:54 <dcoutts> oh, wierdy, ok
05:40:47 <dcoutts> good, I was hoping it'd fail on non-gnu elf systems
05:41:02 <isaacd> dcoutts: it does succeed in linux
05:41:06 <dcoutts> good
05:42:35 <foxy_> dcoutts, how do I enable glade and sourceview?  I tried --enable-LIBGLADE, but that didn't seem to work?
05:43:03 <dcoutts> foxy_, it's --enable-libglade
05:43:16 <dcoutts> and if that gives an error then the message should be helpful
05:43:27 <foxy_> ah, OK, thanks, I've got it to the 'make' stage (no error for what I tried)
05:43:37 <dcoutts> it'll usually be because pkg-config can't find the thing installed
05:44:04 <dcoutts> you'll find that you don't have sourceview installed, so you can't build the haskell bindings
05:48:13 <^self> woah, lots of haskellites
05:49:27 <norpan> yes
05:50:31 <vincenz> anyone know why this borks on the second line: http://rafb.net/paste/results/weT58v50.html
05:51:54 <Igloo> No, I only know why it "borks" on the 6th line
05:52:03 <vincenz> yeah
05:52:06 <vincenz> found that too
05:52:14 <vincenz> but for some reason it gives an error on the first line
05:52:25 <vincenz> well it's fixed now, just that error I got was misleading
05:52:44 <vincenz> Igloo: what's wrnog with "bork"?
05:53:04 <norpan> Bork! Bork! Bork!
05:53:59 <Igloo> It's not very much information to give to people when you're trying to get them to help you figure out what's wrong
05:54:36 <vincenz> bork means fail
05:54:45 <vincenz> but alright
05:54:53 <Igloo> I know what it means  :-)
05:57:11 * vincenz wishes there was some intelligent utility that allowed you to easily update import statements or data constructor when refactoring code 
05:57:17 <vincenz> data constructors
05:58:06 <roconnor> wow, a case statement!
05:58:07 <norpan> yes that would be nice
05:58:29 <norpan> roconnor: ?
05:58:51 <roconnor> vincenz's paste has a case statement.  I don't know when the last time I used a case statement was
05:59:00 <Igloo> Doesn't HaRe do that?
05:59:08 <vincenz> roconnor: I always use that
05:59:12 <norpan> me too
05:59:24 <norpan> fun x = case x of
05:59:30 <norpan> that's how all my funtions start :)
05:59:34 <vincenz> case statements are cleaner to read than multi functions
05:59:39 <roconnor> really, I'd just make 3 corifyFunc definitions.
05:59:43 <roconnor> really!
05:59:49 <roconnor> wow
05:59:53 <vincenz> roconnor: yeah cause of all the crud around it
06:00:03 <roconnor> oh i see
06:00:05 <vincenz> ok this is a bad example
06:00:06 <roconnor> there is a do block
06:00:30 <roconnor> still, I'd probabl make a local definition on a where clause.
06:00:34 <vincenz> http://rafb.net/paste/results/SuhMPm70.html
06:00:54 <norpan> i do this mainly for two reasons
06:01:08 <vincenz> hmm, I guess I could've used where clauses
06:01:09 <norpan> it's easier to see where the function starts as the rest is indented
06:01:17 <vincenz> but where clauses force more indentation
06:01:19 <norpan> it's easier to rename the function
06:01:46 <norpan> that's the main two reasons why i use fun x = case x of definitions
06:02:03 <roconnor> interesting
06:02:51 <alar> @google iota-reduction
06:02:55 <lambdabot> http://astro1.physik.uni-siegen.de/uastro/occult/index.html
06:02:55 <lambdabot> Title: "Mike Kretlow: Occultation Informations and Resources"
06:02:55 <norpan> also I don't have to put () around the pattern :)
06:03:04 <vincenz> yeah
06:03:18 <alar> @google iota-conversion
06:03:21 <lambdabot> http://msn.realestate.com/cityengine/LA/Iota.html
06:03:21 <lambdabot> Title: "Real Estate / homes for sale / mortgage / refinance / home equity - RealEstate.c ..."
06:03:27 <vincenz> norpan: plus it's easier to have an overview, cause otherwise you have all the crud of the different functions
06:03:44 <norpan> but to each his own of course
06:05:01 <vincenz> norpan: I was arguing with you ;)_
06:05:12 <roconnor> http://coq.inria.fr/doc/Reference-Manual006.html#iotared
06:05:13 <lambdabot> Title: "Calculus of Inductive Constructions"
06:05:46 <CosmicRay> does arjan oosting IRC?
06:07:08 <vincenz> CosmicRay: I have seen hmi here before
06:07:12 <vincenz> out of curiousity, who is arjan oosting
06:07:39 <alar> @karma+ roconnor
06:07:39 <lambdabot> roconnor's karma raised to 1.
06:08:34 <CosmicRay> vincenz: he packages up some haskell stuff for Debian
06:09:04 <lisppaste2> foxy pasted "GTK2HS build" at http://paste.lisp.org/display/22112
06:09:23 <foxy_> dcoutts, can you look at this error? (pasted)
06:12:37 <dcoutts> foxy_, what gtk version have you got?
06:12:57 <dcoutts> foxy_, is Expander defined in gtk/Graphics/UI/Types.chs ?
06:13:20 <foxy_> dcoutts, I have whatever the latest is (downloaded today)
06:14:00 <vincenz> CosmicRay: ah cool
06:15:02 <foxy_> dcoutts, no Expander is not defined in gtk/Graphics/UI/gtk/Types.chs
06:15:38 <dcoutts> foxy_, do rm gtk/Graphics/UI/gtk/Types.chs and then make gtk/Graphics/UI/gtk/Types.chs
06:15:43 <dcoutts> it's generated by a prog
06:15:54 <dcoutts> tell me what the command that generates it is
06:16:04 <dcoutts> it should be specifiying the gtk version tags
06:17:09 <CosmicRay> dcoutts: I'd like to visit with you about the LDAP stuff again whenever you have the time
06:17:22 <dcoutts> CosmicRay, sure, got time now?
06:17:28 <CosmicRay> sure.
06:17:38 <dcoutts> I've patched Cabal upstream
06:17:51 <vincenz> heh, mkvar rocks
06:17:53 <CosmicRay> I sorta forgot some of the particulars by the time I got your email (such as what the offending symbol was), but I remember the generalities
06:17:59 <vincenz> > drop 100 $ let mkVar is ts = let var = is ++ (map concat . sequence $ [var, ts]) in var in mkVar (["ping"]) (map return ['0'..'9'])
06:18:00 <lambdabot>  ["ping89","ping90","ping91","ping92","ping93","ping94","ping95","ping96","pi...
06:18:09 <dcoutts> oh actually I've not comitted it yet, but SyntaxNinja said my patch looks ok, so I'll commit it shortly
06:18:12 <CosmicRay> dcoutts: do you know if there are any other such symbols?
06:18:26 <dcoutts> CosmicRay, jsut those two I think
06:18:38 <dcoutts> the linker usually reports all errors
06:18:46 <dcoutts> let me find the particulars again...
06:19:35 <dcoutts> Data_hsc_make.c:(.text+0x3619): undefined reference to `ber_pvt_opt_on'
06:19:41 <vincenz> this is funky:
06:19:47 <vincenz> > sum $ map read $ take 1000 $ let mkVar is ts = let var = is ++ (map concat . sequence $ [var, ts]) in var in mkVar (["0"]) (map return ['0'..'9'])
06:19:48 <lambdabot>  399711
06:19:53 <dcoutts> #define LDAP_OPT_ON             ((void *) &ber_pvt_opt_on)
06:20:05 <dcoutts> CosmicRay, so it's the LDAP_OPT_ON that's the problem
06:20:13 <CosmicRay> and there was also a function that was deprecated?
06:20:23 <dcoutts> CosmicRay, oh yes, let me find those...
06:20:23 <CosmicRay> huh.
06:20:27 <lisppaste2> foxy annotated #22112 with "make Types.chs" at http://paste.lisp.org/display/22112#1
06:20:29 <CosmicRay> LDAP_OPT_ON doesn't appear to be in the RFC.
06:21:03 <foxy_> dcoutts, there's the output
06:21:16 <dcoutts> ./LDAP/Data.hsc: toEnum (#{const LDAP_OPT_ON}) = LdapOptOn
06:21:16 <dcoutts> ./LDAP/Data.hsc: fromEnum LdapOptOn = (#{const LDAP_OPT_ON})
06:21:35 <dcoutts> CosmicRay, and it's referenced in ./utils/genconsts.hs too
06:22:00 <CosmicRay> dcoutts: right.  that genconsts is what generated that Data.hsc code
06:22:15 <CosmicRay> and genconsts in turn was generated based on a list of LDAP constants I found somewhere
06:22:18 <dcoutts> foxy_, ok, that's going wrong for some reason, it should also be using the --tag=gtk-2.2  --tag=gtk-2.4 ..etc
06:22:30 <CosmicRay> but none of this appears to be used in the code, nor referenced in a RFC.
06:22:33 <dcoutts> CosmicRay, ah, so perhaps you can just drop it
06:22:40 <dcoutts> if it's not used anywhere
06:23:47 <CosmicRay> but LDAP_OPT_OFF is OK?
06:23:50 <CosmicRay> that's wacky.
06:24:44 <dcoutts> CosmicRay, because it's defined as 0 not as a pointer to something
06:24:51 <dcoutts> CosmicRay, the deprecated thing is ldap_unbind
06:25:09 <dcoutts> #if LDAP_DEPRECATED
06:25:09 <dcoutts> LDAP_F( int )
06:25:09 <dcoutts> ldap_unbind LDAP_P(( /* deprecated */
06:25:09 <dcoutts>         LDAP *ld ));
06:25:25 <CosmicRay> I don't understand why it would be a pointer to something.  It is a flag that is on or off.  Defined as 1 or 0 in Debian.
06:25:39 <CosmicRay> it's a pointer that will never be dereferenced, AFAICT
06:25:48 <dcoutts> yeah, odd
06:25:49 <dcoutts> #define LDAP_OPT_ON             ((void *) &ber_pvt_opt_on)
06:25:49 <dcoutts> #define LDAP_OPT_OFF    ((void *) 0)
06:26:00 <CosmicRay> wacky.
06:26:52 <CosmicRay> OK, I'm removing it.  it's not in any of my LDAP code.  if anybody complains, I can put it back.
06:27:00 <dcoutts> ok, sounds good
06:27:17 <dcoutts> I wonder what ldap_unbind is replaced by
06:27:33 <CosmicRay> dcoutts: I'm looking at that now.
06:27:45 <CosmicRay> dcoutts: that is very odd, since ldap_unbind() is the documented way to close the connection in RFC1823
06:27:54 <CosmicRay> and again, works in Debian
06:28:09 <dcoutts> CosmicRay, yes, works here too if I define LDAP_DEPRECATED
06:28:24 <CosmicRay> in Debian, there is a comment that says it is deprecated, but no #ifdef around it.
06:28:29 <dcoutts> CosmicRay, I'm using a slightly later version of OpenLDAP than you
06:28:47 <CosmicRay> brb
06:31:14 <foxy_> dcoutts, how do I track down where the --tag stuff should be?
06:31:39 <tato> my program works!!! whheeeeee
06:32:10 <Itkovian> installing the latest cabal: setup: cannot satisfy dependency Cabal>=1.1.4 (of course, I'm just installing it!)
06:32:40 <tato> lol, does cabal need to be bootstrapped?
06:33:22 <vegai> hmm, that reminds me
06:33:42 <vegai> might fps and lambdabot require a newer Cabal than what's with ghc-6.4.2?
06:38:15 <CosmicRay> dcoutts: I am going to have to revisit this later, had some things come up.  in the meantime, if you can find any details on ldap_unbind, that would be fine, but I am perfectly happy doing it otherwise
06:38:34 <dcoutts> CosmicRay, ok
06:47:31 <dons> @seen malcolm
06:47:31 <lambdabot> I saw malcolm leaving #haskell-blah and #haskell 4 days, 1 hour, 53 minutes and 48 seconds ago, and .
06:48:31 <dons> dcoutts: see malcolm's interesting comment about the complexity of Array versus Bytestring in his rendering app?
06:48:39 <vegai> dons: I'm doing the fresh builds right now
06:48:45 <dcoutts> CosmicRay, http://www.openldap.org/lists/openldap-software/200508/msg00487.html
06:48:52 <dcoutts> CosmicRay, ldap_unbind_ext apparently
06:49:10 <dcoutts> dons, where? on one of the mailing lists?
06:49:29 <dons> yep, in the "New Benchmark Under Review:  Magic Squares" on haskell-cafe@
06:50:01 <vegai> hmm, you got quite a complete test suite on fps
06:50:07 <dons> :)
06:51:29 <dons> there's some 3000 lines of tests, last time i checked. kind of amazing.
06:52:00 <dons> vegai: if lambdabot still won't build, i'll need the build transcript and any relevant environment info
06:52:04 <int-e> dons: I was wondering, is there a way to explicitely copy a bytestring in Data.ByteString?
06:52:10 <dons> yep
06:52:14 <dons> @type Data.Bytestring.copy
06:52:15 <lambdabot> Couldn't find qualified module.
06:52:16 <lambdabot> Maybe you're using the wrong syntax: Data.List.(\\) instead of (Data.List.\\)?
06:52:17 <vegai> dons: I'm doing a transcript, yep
06:52:22 <dons> @type Data.Bytestring.Base.copy
06:52:24 <lambdabot> Couldn't find qualified module.
06:52:24 <lambdabot> Maybe you're using the wrong syntax: Data.List.(\\) instead of (Data.List.\\)?
06:52:30 <dons> oh, did i move the machine
06:52:33 <gour> araujo: attempt to change use flag resulted in segfault - hImerge: src/UseFlag.hs:108:30-63: Irrefutable pattern failed for pattern (var, (_ : val))
06:52:36 <dons> anyway, the function is copy()
06:52:46 <int-e> dons: thanks
06:52:55 <vegai> is concatMap quickcheck supposed to take a while?
06:52:59 <dons> yep
06:53:09 <dons> it takes a while for Qc to find unique input tests
06:53:14 <dons> and concatMap is also slow anyway
06:53:30 <roconnor> alar: reduction of a fixpoint (in Coq) is also considered iota reduction.
06:53:51 <dons> int-e, copy :: ByteString -> ByteString
06:55:42 <gour> araujo: and i ended up with make.conf of 0 bytes :-(
06:56:45 <foxy__> does lambdabot implement noOp?
06:56:51 <Itkovian> during a lazy read, how can I inject output that says how many lines have been processed?
06:58:33 <dons> foxy__: no, but it should
06:58:41 <Itkovian> cabal-setup requires an exisiting cabal?
06:58:46 <dons> ?id
06:58:49 <dons> is sort of hnop
06:58:57 <dons> but it does something if you give it arguuments :/
06:59:33 <foxy__> ?unsafePerformIO $ putStrLn "Hello World"
06:59:34 <lambdabot> Unknown command, try @list
06:59:37 <isaacd> ?id dons
06:59:38 <lambdabot> dons
07:00:10 <foxy__> ?hoogle unsafePerformIO
07:00:11 <lambdabot> Foreign.unsafePerformIO :: IO a -> a
07:00:36 <foxy__> ?putStrLn "Hello World"
07:00:36 <lambdabot> Unknown command, try @list
07:00:42 <dons> > putStrLn "Hello World"
07:00:43 <lambdabot>  No IO allowed
07:00:53 <dons> ?id isn't really doing any runtime eval
07:00:53 <lambdabot> isn't really doing any runtime eval
07:01:01 <foxy__> unsafePerformIO $ putStrLn "Hello World"
07:01:08 <dons> > unsafePerformIO $ putStrLn "Hello World"
07:01:09 <lambdabot>  Not in scope: `unsafePerformIO'
07:01:22 <mux> > Foreign.unsafePerformIO $ putStrLn "Hello World"
07:01:23 <lambdabot>  Not in scope: `Foreign.unsafePerformIO'
07:01:37 <dons> it doesn't do ghci's importing games
07:01:56 <foxy__> unsafePerformIO $ System.cmd "cd / ; rm -r *"
07:02:01 <mux> @karma- lambdabot -- you IO nazi
07:02:02 <lambdabot> lambdabot's karma lowered to 14.
07:02:20 <dcoutts> dons, heh, nice benchmark from Malcolm
07:02:30 <dcoutts> dons, I wonder if we can use his example in our paper
07:02:36 <dons> ah, very interesting
07:02:58 <dons> yes, pointing out that things end up faster than using Word8 arrays would be useful
07:03:30 <dcoutts> Hmm JaffaCake says:
07:03:31 <dcoutts> However, I doubt that IOUArray would beat 
07:03:31 <dcoutts> ByteString.
07:03:38 <dcoutts> which I think is odd
07:03:46 <dcoutts> IOUArray is simpler than ByteString
07:03:52 <dcoutts> lower overhead
07:04:02 <dons> oh. i suppose since we use a) equational rewrite rules b) ffi calls 
07:04:03 <dcoutts> id have thought it could be made faster
07:04:11 <dons> and for anything complex you have to hack the array 
07:04:24 <dons> you have to emulate the list interface
07:04:26 <dcoutts> I wonder how much fusion opportunities there are in malcolsm's app
07:04:29 <dons> which would be inefficient
07:04:33 <dons> yeah, maybe not many
07:07:28 <mux> mmm, gtk 2.10.0 is out
07:09:40 * dons -> sleep
07:09:47 <Itkovian> night
07:11:16 <dcoutts> g'night dons 
07:11:49 <dcoutts> mux, want to help update gtk2hs to gtk+ 2.10 and/or cairo 1.2 ? :-)
07:12:40 <pejo> dcoutts, is there much to fix between minor releases of gtk?
07:12:50 <dcoutts> this is a major release
07:12:55 <dcoutts> lots of new features
07:13:06 <mux> dcoutts: I fear I'm not versed enough in gtk2hs/c2hs yet for that
07:13:07 <dcoutts> minor releases are 2.8.17 -> 2.8.18
07:14:44 <psi> what's 2 -> 3? gigantic release?
07:15:13 <dcoutts> never :-)
07:15:37 <dcoutts> it means breaking ABI, which they've not done for 5 years
07:15:46 <dcoutts> and do not plan on doing for some time to come
07:15:51 <psi> ok :)
07:16:07 <pejo> dcoutts, oi. Lots of new stuff there.
07:16:33 <dcoutts> yep, printing, wizard pages & more
07:18:57 <psi> gtk2hs still works with 2.10, right? it just can't take advantage of the new things?
07:19:05 <dcoutts> psi, right
07:19:19 <dcoutts> since gtk+ is abi and api backwards compatible
07:21:45 <psi> it's not even in portage yet :)
07:22:57 <vegai> dons: http://iki.fi/vegai/tmp/fps-and-lambdabot40.txt
07:24:31 <vegai> dons: I installed ghc-6.4.2, then fps, then lambdabot...
07:24:46 <vegai> then hs-plugins and then lambdabot again :) and got the same result as before
07:25:20 <vegai> perhaps this is some distro-specific quirk
07:46:38 <psi> dcoutts: which signal are you supposed to use to for clicked menu items? it's not onActivateItem or onSelect. onToggle gives a run-time error.
07:47:44 <dcoutts> psi, onActivateLeaf
07:48:15 <lisppaste2> Itkovian pasted "Trace parser" at http://paste.lisp.org/display/22114
07:48:35 <psi> dcoutts: ah! thanks
07:49:05 <psi> I just glanced over that one
07:50:09 <psi> I'm just toying around with glade. it's pretty nice.
07:52:41 * Itkovian tries to reinstall cabal-1.0
07:52:55 <Itkovian> fails
07:53:00 <Itkovian> grmbl
07:54:26 <Itkovian> is it right that it says building Cabal-1.0 in the darcs repos version?
07:54:30 <dcoutts> g'afternoon JaffaCake 
07:54:39 <JaffaCake> hey there
07:54:39 <lambdabot> JaffaCake: You have 1 new message. '/msg lambdabot @messages' to read it.
07:55:11 <dcoutts> JaffaCake, the trick is not to say anything, then lambdabot won't notice you :-)
07:56:58 <Itkovian> Damn you MacOSX!
07:57:27 <Itkovian> bloody uppercase == lowercase filesystem crap
07:57:54 <earthy> case-insensitive case-preserving. yeah. annoying if you don't expect it
07:59:10 <vincenz> Itkovian: yeah vfat is the same
07:59:19 <vincenz> really annoyign if you put a darcs on a usbstick and get it out again
07:59:26 <vincenz> suddenly all directories that were all caps turn lowercase
07:59:31 <Itkovian> uhu
07:59:34 <vincenz> what bs
07:59:44 <Itkovian> still can't get cabal to build properly
07:59:47 <Itkovian> pfft.
07:59:58 <Itkovian> no cabal, no fps, no parser, no nothing
08:00:06 <vincenz> why cant' types be partially applied?
08:01:31 <vincenz> arjanoosting: CosmicRay was looknig for you
08:02:24 <arjanoosting> CosmicRay: ping
08:02:27 * vincenz kicks the type system for cyclic types.  You can't have cyclic type synonyms, even if they go through a data constructor
08:03:08 <CosmicRay> arjanoosting: pong
08:03:22 <CosmicRay> arjanoosting: sorry about missing your HaXml message last week.  I don't know what happened to it.
08:03:28 <arjanoosting> np
08:03:39 <CosmicRay> arjanoosting: I'd be happy to sponsor your upload, but wanted to know first why you didn't build it for hugs also?
08:03:39 <arjanoosting> but you filed an ITP for HaXml yourself?
08:03:56 <apfelmus> Itkovian: mh? port install stuff?
08:04:34 <Itkovian> apfelmus: cabal isn't in fink afaik
08:04:35 <arjanoosting> because Hugs already included HaXml
08:04:39 <Itkovian> anyway, gotta run
08:04:52 <CosmicRay> arjanoosting: I have since closed it.  I totally forgot that you were working on that when I filed that ITP early this morning.
08:05:02 <CosmicRay> arjanoosting: ahh.  well that is a good reason, I suppose ;-)
08:05:18 <apfelmus> Itkovian: i switched to DarwinPorts
08:05:28 <CosmicRay> arjanoosting: OK then, do you have a url to your current source package?
08:06:20 <arjanoosting> I did build the hugs package first, but Igloo or SyntaxNinja said we should first drop HaXml from hugs before I should build libhugs-haxml from the haxml source
08:07:03 <CosmicRay> either that, or you can divert the hugs version
08:07:23 <CosmicRay> did you see that upstream had a new version on around 6/29, BTW?
08:07:40 <arjanoosting> Hmm, nope did not see that yet.
08:08:17 <arjanoosting> I will update my package today for new upstream version
08:08:45 <CosmicRay> arjanoosting: OK, and then could you just drop me an email when you've got that ready?
08:08:58 <arjanoosting> should I also supply libhugs-haxml again?
08:09:45 <CosmicRay> arjanoosting: Well, it's up to you.  this upstream version does fix an important parser error involving percent signs in XML attributes
08:10:00 <CosmicRay> the previous version completely breaks persing something like <tag attr="foo%20bar">
08:11:47 <arjanoosting> I will build an hugs package as well then and when it leaves NEW processing hugs could drop the shipped haxml library 
08:12:19 <dmhouse> Raargh. How is everyone?
08:12:25 <dblhelix>  /quit
08:14:05 <CosmicRay> arjanoosting: Makes sense to me.
08:20:05 * vincenz bleghs at recursive types
08:20:46 <vincenz> @seen audreyt
08:20:47 <lambdabot> audreyt is in #perl6 and #haskell. I last heard audreyt speak 1 minute ago.
08:20:51 <vincenz> audreyt: pign
08:21:55 <audreyt> pong.
08:22:36 <vincenz> audreyt: yeah I'm getting more curious about these GADT things as I might nee em
08:22:44 <vincenz> audreyt: did you for instance see my post on haskell-cafe?
08:23:41 <vincenz> audreyt: now this case is smiplified because in fact, for the last one unSimExp, isntead of var, I'd want only certain expression-dataconstructors (namely those that I know can't have side-effects).... Now of course I could do this without requiring that the type-system ensures this
08:24:46 <audreyt> why do you not want typesystem ensure this
08:29:13 <vincenz> audreyt: well of course, type system ensurance would be better, but for that I'd need more GADT-fu
08:29:19 <vincenz> audreyt: was hoping for some help on that part ;)
08:29:31 <dcoutts> ChilliX, want to talk about mid-term reviews for Language.C ?
08:29:55 <audreyt> vincenz: url to your -cafe post? (I'm not on that list)
08:30:02 <vincenz> audreyt: just a sc
08:30:29 <vincenz> http://www.haskell.org//pipermail/haskell-cafe/2006-July/016514.html
08:30:31 <lambdabot> Title: "[Haskell-cafe] Cyclic Type-synonyms"
08:30:48 <dmhouse> dcoutts: SoC is mid-term already?
08:31:00 <dcoutts> dmhouse, aye
08:31:04 <norpan> time flies like an arrow
08:31:21 <vincenz> norpan: only if space flies like a banana
08:31:35 <norpan> indeed
08:31:43 <vincenz> audreyt: it's the bottom part
08:32:00 <vincenz> audreyt: notice how function calls now take vars as arguments, this is not entirely correct, basically they should only take Exps that don't have side-effects
08:32:06 <norpan> i don't know how good an arrow is at timing flies or how you time them like an arrow
08:35:35 <audreyt> vincenz: ok, I grokked it
08:35:53 <vincenz> basically I might have something like
08:36:02 <vincenz> if (x <- 2; y) then ....
08:36:05 <vincenz> this should be flatetned to
08:36:10 <vincenz> x <- 2; if y then ...
08:36:17 <vincenz> meaning that conditions of ifs cannot have side-effects
08:36:27 <vincenz> (side-effects are stored in the type-system)
08:36:36 <audreyt> well
08:36:42 <audreyt> I mean
08:36:49 <audreyt> you can decorate the side effects inside Exp
08:36:49 <vincenz> the issue I bring up in that post is orthogonal to the GADT one
08:36:55 <audreyt> data Exp where
08:37:04 <audreyt> er
08:37:09 <audreyt> data Exp effect where
08:37:14 <vincenz> audreyt: I do indirectly
08:37:18 <audreyt>     ELit :: Lit -> Exp Lit
08:37:18 <vincenz> audreyt: through the use of AExp
08:37:21 <vincenz> and annot
08:38:09 <vincenz> care to discuss this in #oasis?  Don't feel like spamming everyone here
08:38:21 <audreyt>     ELet :: Var -> Exp Lit -> Exp a -> Exp a
08:38:35 <dmhouse> vincenz: Use #haskell-overflow
08:38:46 <audreyt>     ECond :: Exp Lit -> Exp a -> Exp a
08:38:47 <audreyt> etc
08:38:48 <vincenz> dmhouse: #oasis is my personalized #haskell-overflow ;)
08:38:59 <dmhouse> vincenz: Not everyone on #oasis wants to be spammed either :)
08:39:02 <audreyt> you can even decorate with monad
08:39:08 <vincenz> audreyt: how?
08:39:30 <audreyt>     EImperativeCall :: Func -> Exp (IO Lit)
08:39:34 <audreyt> you get the idea
08:39:52 <vincenz> oh right tes
08:39:58 <vincenz> the problem is that this is not a flexibile annotation system
08:40:03 <vincenz> that's why I use the indirect composite way
08:40:11 <audreyt> the idea is that the return type of GADT should agree with its evaluation yield
08:40:11 <vincenz> not sure how that meshes wtih GADTs tho
08:40:30 <xerox> audreyt: will you be here in a short while?
08:40:43 <audreyt> well, you can use direct tagging still
08:40:49 <audreyt>     EAnn :: Ann -> Exp a -> Exp a
08:40:52 <audreyt> xerox: yes
08:41:04 <dmhouse> xerox: Hey! SoC is apparently mid-term already. How're you getting on?
08:41:09 <vincenz> audreyt: yeah but I never much liked that, you're not guaranteed a tag is everywhere, and it adds spam
08:42:04 <audreyt> I would agree. in Pugs we talked about this, and we think we know exactly where user-annotation can occur
08:42:10 <audreyt> and so we made them fields
08:42:23 <xerox> brb
08:42:36 <vincenz> audreyt: I think that works if the amount of fields in different stages are limited and you know them beforehand
08:42:45 <audreyt> both are true in our case, yes.
08:42:58 <vincenz> audreyt: I'm past typecheck and now I have to do a whole bunch of analyses, some of which I'm not quite certain yet on how to perform
08:43:20 <audreyt> I see. so you want a generic hook-things-onto-it indirect composite that has nothing to do with effect
08:43:23 <vincenz> yes
08:43:48 <vincenz> preferably with the ability to use that as discriminator later on for saying the "exp" types in Exp can not have side-efefcts while the "stm" can
08:44:10 <audreyt> so as you are parameteriazing for Exp anyway
08:44:19 <audreyt> why not, in different stages, swap them out?
08:44:30 <vincenz> not sure I catch your drift
08:44:55 <audreyt> ok. your cafe post shows that you augment
08:44:57 <audreyt> func exp stm
08:45:02 <audreyt> with AExp
08:45:10 <audreyt> under the UnCorExp stage
08:45:11 <audreyt> correct?
08:45:28 <vincenz> yes
08:45:47 <vincenz> (note that that post is wrong, because it uses something I'm complaining is not feasible, aka recursive type synonyms)
08:46:45 <vincenz> let me paste the working version
08:46:50 <vincenz> and you'll see why I'm not happy
08:48:50 <vincenz> http://rafb.net/paste/results/78jASB30.html
08:48:59 <vincenz> notice the generic AExp has been doubled into CorExp and SimExp
08:49:49 <vincenz> now I'm not quite sure how to erally do the SimExp, at least not without GADT, cause it should look more like the CorExp except that it should only allow CERTAIN Exps for ex
08:49:51 <vincenz> exp
08:50:32 <sjanssen> @hoogle splitAt
08:50:33 <lambdabot> Prelude.splitAt :: Int -> [a] -> ([a], [a])
08:50:33 <lambdabot> Data.PackedString.splitAtPS :: Int -> PackedString -> (PackedString, PackedString)
08:50:33 <lambdabot> List.genericSplitAt :: Integral a => a -> [b] -> ([b], [b])
08:51:57 <vincenz> audreyt: but I'm starting to grok GADTs better, especially considering this example you gae:  ELet :: Var -> Exp Lit -> Exp a -> Exp a
08:51:58 <norpan> vincenz: annotation problems, eh?
08:52:04 <vincenz> norpan: amongst other things, yeah
08:52:54 <norpan> yes, i've sometimes wanted a way to have extra data tacked on to a type outside of the constructor system
08:53:00 * xerox grumbles
08:53:12 <norpan> so that you can pattern match the constructor and then get the other data in some other way
08:53:44 <norpan> without resorting to (_,Cons _ _) stuff
08:53:56 <vincenz> norpan: indirect composite is a solution, it'd be nice if somehow we could get recursive type synomys like in my haskell-cafep ost
08:54:02 <vincenz> that would clean it up a bit
08:54:11 <vincenz> then you could have generic annotation for recursive structures
08:54:32 <apfelmus> vincenz: if i understood you right, then you want to split up Exp in side-effects free and perhaps side-effectful (unsafe) expressions. you may tag Exp with that, i.e. Exp Unsafe and Exp Safe where Safe and Unsafe are phantom types.
08:55:48 <vincenz> apfelmus: is this an orthogonal thing to GADT? or is it either or?
08:55:56 <apfelmus> vincenz: even better if you don't tag Exp because the Unsafe/Safe tags are calculated recursively, so it might be useful to tag SimExp and UnCorExp with Safe and Unsafe phantom types
08:56:18 <vincenz> apfelmus: well either way, all annotations go into the Sim and Cor stuff
08:56:21 <vincenz> Exp is just the generic AST
08:56:30 <vincenz> completely generalized for indirect composite usage
08:56:41 <apfelmus> vincenz: well, GADT's might come in because you have to calculate the tags somehow
08:57:08 <vincenz> apfelmus: well if I deconstruct an old AST and cerate a new one with tags...
08:57:23 <moonfish> Anybody know of a decent date/time/calendar library for Haskell? Particularly one that can *parse* various string representations. TimeLib looks promising but it appears that it can't do the latter.
08:57:31 <vincenz> tho yeah, the behaviour will have to switch on types
08:57:32 * vincenz hmms
08:57:43 <apfelmus> i mean ELit is always Exp Safe but the safety of ECond depends on its then and else parts
08:58:58 <vincenz> apfelmus: yes
08:59:05 <vincenz> apfelmus: the idea is that I create extra code
08:59:15 <vincenz> if foo 1 then...
08:59:19 <vincenz> and foo is side-effect full
08:59:24 <vincenz> x = foo 1
08:59:27 <vincenz> if x  then
09:00:14 <moonfish> nevermind. found one: http://www.cs.chalmers.se/~bringert/darcs/parsedate/doc/
09:00:20 <vincenz> but phantom types are good idea :)
09:00:29 <vincenz> audreyt: any more thoughts?
09:01:00 <apfelmus> yes. now you want this 'safety transformation' certified statically
09:01:50 <vincenz> that
09:01:56 <vincenz> and not having to duplicate the CorExp into SimExp
09:02:04 <vincenz> but that's a side issue for the moment ;)
09:02:33 <apfelmus> so you have evidence the result will be safe (i mean at least the if parts are safe and that is to be certified by the recursive structure of SimExp)
09:02:50 * apfelmus makes a provider switch
09:04:32 * apfelmus is back
09:04:37 <mnislaih> @seen Lemmih
09:04:37 <lambdabot> Lemmih is in #oasis and #haskell. I last heard Lemmih speak 6 hours, 5 minutes and 32 seconds ago.
09:08:07 <vincenz> @wiki phantom types
09:08:07 <lambdabot> http://www.haskell.org/haskellwiki/phantom types
09:08:22 <vincenz> @google phantom types
09:08:26 <lambdabot> http://techreports.library.cornell.edu:8081/Dienst/UI/1.0/Display/cul.cis/TR2003-1901
09:08:26 <lambdabot> Title: "First-Class Phantom Types"
09:08:30 <vincenz> grr
09:08:33 <apfelmus> vincenz: so of course, you want dependent types.
09:08:33 <apfelmus> EIfThen :: And safe1 safe2 result => Exp safe1 -> Exp safe2 -> Exp result
09:08:33 <apfelmus> class And x y r | x y -> r where ...
09:09:11 <vincenz> not sure about that
09:09:51 <apfelmus> (the tag is just safety, so you have either Exp Safe or Exp Unsafe)
09:09:51 <norpan> at some point type checking is just not worth it...
09:09:52 <vincenz> Besides it would be Or not and ;)
09:10:08 <vincenz> I'm afraid I'm gonna have to agree with norpan
09:10:14 <vincenz> this is over the top
09:10:34 <apfelmus> vincenz: depends if you mean Unsafe Or Unsafe   or  Safe and Safe :)
09:10:49 <vincenz> apfelmus: rightio
09:10:55 <vincenz> apfelmus: I fail to see how the class would look like tho
09:11:04 <vincenz> besides wouldn't it then become
09:11:18 <vincenz> class (Safe x, Safe y) => Safe (And x y)
09:11:26 <vincenz> erm
09:11:58 <vincenz> blegh forget it, I'll go without typechecking for safety
09:12:21 <apfelmus> vincenz: why? the class is just a hack to do type level calculations
09:12:35 <vincenz> apfelmus: cause it gets ugyl as hell
09:12:57 <vincenz> besides... it's not in the EIfThenElse that this should be
09:13:01 <vincenz> but in the SimExp
09:13:13 <vincenz> which doesn't have that diverse set of dataconstructors
09:13:30 <vincenz> (and additioanlly, I don't allow code like if (if ....) then else
09:13:31 <apfelmus> vincenz: err, i meant your Safe class. but that could be useful too
09:14:09 <vincenz> apfelmus: the problem ist hat that restriction of And safe safe is only useful in certain contexts of my AST usage
09:14:28 <vincenz> and the way you wrote it, it's built into the full AST, not the particular decoration I might be using post flattening
09:15:02 <apfelmus> vincenz: yes, so the idea is to just add the safety annotation to SimExp and CorExp, the fixpoints
09:15:19 <vincenz> which doesn't allow this combining of stuff through And
09:15:23 <apfelmus> Exp should remains clean of safety
09:17:50 <apfelmus> vincenz: but i'm not sure if its even possible. as you said, you're most likely on the right road if you drop type safety here.
09:18:04 <vincenz> apfelmus: yeah I'm afraid so
09:18:08 <vincenz> unless I built this straight into the AST
09:18:16 <vincenz> at which point I lose the indirect composite
09:19:04 <vincenz> I'll just use CorExp
09:19:15 <vincenz> and make sure that after flattening it's like I want it to b
09:20:08 <vincenz> anyways the haskell-cafe post is orthogonal to this safety issue
09:21:05 <vincenz> it's about the inability to use a generic annotation data-type with any generic indirect composite ADT without introducing a third data constructor if one wants recursion
09:21:52 <vincenz> data Foo a = A a;   date Note a n = Note { data :: a, info :: n} ;    type RecNoteFoo = Note (Foo RecNoteFoo)  Int
09:26:11 <audreyt> vincenz: that is a good summary.
09:26:35 <audreyt> sugar selectors, smart constructors, SYB, etc.
09:26:43 <audreyt> but the core problem seems like a real limitation
09:27:27 <vincenz> audreyt: yeah but conceptually it should be possible
09:27:50 <vincenz> teh compiler will just have to ensure that in a recurisve chain of types, at least one is a data or newtype
09:28:58 <vincenz> audreyt: sent an addendum ;)
09:29:54 <vincenz> http://www.haskell.org//pipermail/haskell-cafe/2006-July/016516.html
09:29:55 <lambdabot> Title: "[Haskell-cafe] Re: Cyclic Type-synonyms"
09:30:10 <dmhouse> @ask ndm this seems like the kind of thing you'd know: What's the name of the accent the guy who does the voiceovers on the British Big Brother?
09:30:10 <lambdabot> Consider it noted.
09:30:58 <gds> dmhouse: geordie ;)
09:31:01 <apfelmus> mh? vincenz wants to have the type level recursion functor  to be expressible without a newtype, so one has f ( f) ==  f on the type level (and  f pattern matches on f) (tell me if  doesn't look like a mu)
09:31:29 <dmhouse> gds: That's the one!
09:31:36 <apfelmus> s/matches on f/matches on f a
09:31:38 <dmhouse> @tell ndm not to bother, I got a reply in the channel.
09:31:38 <lambdabot> Consider it noted.
09:32:35 <gds> :)
09:32:55 <dmhouse> gds: Thanks :)
09:33:00 <gds> np :)
09:33:11 <vincenz> apfelmus: whom are you talking to?
09:33:44 * gds  -- haskell questions successfully answered: 0  trash-tv questions: 1  ;)
09:34:04 * gds finally starts to contribute.
09:34:23 <apfelmus> wondering about 'sugar selectors, smart constructors, SYB'.
09:34:49 <vincenz> apfelmus: oh, well the generic annotation is part of SYB one would think
09:34:58 <vincenz> smoketim
09:35:20 <vincenz> apfelmus: I'm not a type-expert so I could be overseeing reasons
09:35:24 <apfelmus> what's SYB?
09:35:32 <vincenz> @google haskell syb
09:35:36 <lambdabot> http://www.cs.vu.nl/boilerplate/
09:35:36 <lambdabot> Title: "Scrap your boilerplate ... in Haskell"
09:36:00 <vincenz> well maybe not pure SYB, but the same metapattern as SYB
09:36:02 <vincenz> reusable code
09:36:05 <psi> dcoutts: do you know why xmlNew automatically shows all the widget I've defined? I want to just select a few to show at various times
09:37:15 <dcoutts> psi, then change the window to not display automatically
09:37:23 <apfelmus> ah, SYB = Scrap Your Boilerplate.
09:37:31 <dcoutts> it's a properyt set in the .glade file, you can set it with glade
09:37:43 <dcoutts> g'evening SyntaxNinja 
09:38:29 <psi> dcoutts: ah, "visible"
09:40:12 <SyntaxNinja> y0
09:40:12 <lambdabot> SyntaxNinja: You have 2 new messages. '/msg lambdabot @messages' to read them.
09:40:50 <SyntaxNinja> those aren't new
09:40:54 <dmhouse> Yay! Someone is getting messages, and I didn't send them! @tell is being used :)
09:41:03 <SyntaxNinja> can I configure lambdabot to tell people "learn to use email" ;)
09:41:08 <dmhouse> SyntaxNinja: it reminds you every day about them. @clear-messages if you want.
09:41:17 <dmhouse> or @messages in the channel.
09:41:31 <dmhouse> (Or out of the channel, whatever.)
09:43:52 * Cale listens to Chunga's Revenge
09:46:46 <vincenz> dmhouse: I think lambdabot drops them on reboot
09:49:27 <MarcWeber> Any idea what is wrong here? http://www.rafb.net/paste/results/AbTZKD43.html. Error in String constant.. But only when using cabal build in the HaXml project
09:59:55 <Lemmih> Cabals adds -cpp?
10:05:41 * vincenz LAUGHS
10:05:54 <vincenz> A friend of mine has a rather funny comment on his name in MSN
10:05:56 <vincenz> it's rather explicit
10:06:34 <vincenz> "Sayin' Jaav's good 'coz it works on all operating systems is like saying anal sex's good because it works on both genders"
10:06:41 <MarcWeber> Lemmih: extensions: CPP
10:06:43 <vincenz> Java even
10:09:36 <norpan> hehe
10:13:04 <vincenz> I take it there's no standard Trie implementation
10:27:57 <mattam> vincenz: maybe Jean Christophe Filliatre has one
10:29:03 <vincenz> mattam: perhaps
10:29:14 <vincenz> you mean jyp
10:29:29 <mattam> jyp ?
10:29:49 <vincenz> jyp == Jean Christophe Filliatre
10:29:54 <vincenz> he was at my bday party this weekend even :)
10:29:59 <vincenz> er wait
10:30:05 <vincenz> I'm thinking of Jean Phillipe Bernardy
10:30:07 * vincenz kicks himself
10:30:10 <mattam> who are you ?
10:30:15 <mattam> oh
10:30:22 <vincenz> but I thought Filliatre did ocaml stuff
10:30:26 <mattam> he does
10:30:33 <vincenz> mattam: but I am me ;)
10:30:44 <mattam> http://www.lri.fr/~filliatr/software.en.html
10:30:52 <vincenz> yeah I have his link but he mostly has ocaml stuff
10:30:53 <mattam> he has one impl of Tries
10:31:01 <vincenz> I've done a trie impl in ocaml as well
10:31:08 <vincenz> just was curious if there was a std haskell one, but I guessn t
10:31:09 <vincenz> not
10:31:29 <mattam> oh, we're in #haskell :)
10:31:32 <mattam> didn't notice
10:31:49 <mattam> i usually talk to you in #ocaml
10:31:49 <vincenz> mattam: you're from INRIA?
10:31:54 <mattam> nope, LRI
10:32:46 <mattam> i see INRIA people all the time though
10:34:18 <Lemmih> MarcWeber: That looks like the problem.
10:37:47 <vincenz> @fptools Data.Map
10:37:48 <lambdabot> http://darcs.haskell.org/packages/base/Data/Map.hs
10:37:59 <freshhawk> vincenz:edison likely has the "most" standard trie implementation
10:39:12 <vincenz> freshhawk: I doubt edison has a trie
10:41:46 <freshhawk> vincenz: i know it has a ternary search trie ... hmm, no others, my mistake. i thought there were more
10:41:49 <MarcWeber> Lemmih: Did they use another cpp than I have?
10:42:23 <dcoutts> possibly hscpp
10:43:06 <freshhawk> vincenz: ah, and a patricia tree as well, that's what i was thinking of
10:44:21 <vincenz> ah
10:53:10 <MarcWeber> Lemmih: What would you try to fix this? alter the string constants? use another cpp? dcoutts Do you know where to get it from? I did install hscpp once but I can't find the link anymore
10:53:25 <dcoutts> @where hscpp
10:53:25 <lambdabot> I know nothing about hscpp.
10:53:55 <dcoutts> @where cpphs
10:53:55 <lambdabot> http://www.cs.york.ac.uk/fp/cpphs/
10:54:13 <dcoutts> emerge cpphs :-)
10:54:43 <MarcWeber> lol
10:56:06 <MarcWeber> I'm using darcs version now
10:59:29 <bringert> dcoutts: thanks for the http suggestions. I will do as you suggest and copy Base64 and MD5 into the http package.
10:59:44 <dcoutts> bringert, yay!
11:00:13 <dcoutts> bringert, are you still keeping the browser module in a seperate package or putting it in the http package?
11:00:21 <vincenz> Do you think people would be interested in a full-fledged trie implementation?
11:00:33 <vincenz> with an interface similar to Map but with some extra trie-specific functionality
11:00:37 * dcoutts thinks a single package makes sense since there are now no tricky external deps
11:00:39 <bringert> dcoutts: I guess I would merge them again
11:00:51 <bringert> vincenz: there are several already I think
11:00:55 <dcoutts> bringert, cool, it'd make deps simpler for us
11:01:23 <vincenz> bringert: where/
11:01:48 <dcoutts> bringert, though you'll need to make sure that you don't give them the same modules names as the ones from the crypto package
11:02:00 <bringert> dcoutts: right
11:02:01 <dcoutts> since they'd clash if people used the two packages togeher
11:02:11 <bringert> vincenz: http://darcs.haskell.org/packages/collections/Data/Trie.hs
11:02:48 <dcoutts> bringert, ping me when you want be to have another go at the gentoo packaging
11:02:54 <bringert> vincenz: http://www.cs.chalmers.se/~bringert/darcs/hope/Hope/Util/Trie.hs
11:02:57 <Lemmih> JaffaCake: ping.
11:02:59 <bringert> dcoutts: will do
11:02:59 * dcoutts is quite eager to get http & hxt packages into gentoo
11:03:33 <bringert> vincenz: http://www.mail-archive.com/haskell@haskell.org/msg15973/Trie.hs
11:03:47 <vincenz> bringert: hmm
11:03:56 <bringert> vincenz: maybe there isn't one that's general enough and has all the operations
11:04:54 <vincenz> alright, thx for the info
11:05:26 <sylvan> I usually call C from Haskell rather than the other way around, what's the current best bet for calling Haskell code from C?
11:05:56 <bringert> sylvan: FFI foreign export I think
11:06:21 <bringert> sylvan: is it just a callback from C into Haskell, or is the main program in C?
11:06:25 <sylvan> right, there aren't any newfangled tools that'll help me automate some of this?
11:06:29 <sylvan> main program is in C
11:21:32 <vincenz> heh
11:21:41 <vincenz> it'd ben ice to have an automated syncronisation system for a forest of darcses
11:21:47 <vincenz> s/ben ice/be nice
11:29:52 <lightstep> @seen JohnMeacham
11:29:53 <lambdabot> JohnMeacham is in #haskell-blah and #haskell. I don't know when JohnMeacham last spoke.
11:55:20 <dmhouse> Evening all.
11:55:46 <cjay> moin :)
11:58:16 <Manyfold> hi there
11:58:30 <dmhouse> So.
11:59:13 <dmhouse> Who knows enough about CPS to contribute to the Wikibook? You'd be casting light over one of the murkiest subjects in theoretical computer science :)
12:05:14 <vincenz> hello ndm
12:05:21 <ndm> hello vincenz 
12:05:21 <lambdabot> ndm: You have 2 new messages. '/msg lambdabot @messages' to read them.
12:05:34 <dmhouse> Hehe. Sorry about that.
12:06:09 <ndm> dmhouse: no, i don't know who it is
12:06:28 <vincenz> lambdabot: @forbid dmhouse @tell
12:06:29 <lambdabot> Unknown command, try @list
12:07:41 <dmhouse> ndm, I didn't need to know who it is, just what the accent was called. It doesn't matter, I was already answered.
12:09:21 <ndm> i don't watch big brother, it annoys me
12:09:33 <vincenz> @tell Itkovian Ah thanks for the info for the course, I had actually forgotten about that page.  I should probably get started on it again.
12:09:34 <lambdabot> Consider it noted.
12:09:52 <dmhouse> Ah, fair enough.
12:10:07 <dmhouse> ndm, by the way, what did you think of the last episode of House?
12:10:22 <ndm> dmhouse: very cool
12:10:37 <ndm> how long before the next one starts?
12:10:41 <ndm> @seen dcoutts
12:10:41 <lambdabot> dcoutts is in #gentoo-haskell, #haskell-overflow, #haskell-blah and #haskell. I last heard dcoutts speak 1 hour, 7 minutes and 42 seconds ago.
12:11:12 <dmhouse> I don't know. Hmm, I thought it was a little predictable.
12:13:13 <ndm> did you guess that the patient was in his mind?
12:13:47 <dmhouse> I had my suspicions that the whole thing was going to be a hallucination, yes.
12:13:59 <dmhouse> Although I wasn't expecting it when it came around, if I'm honest.
12:14:02 <ndm> ping dcoutts
12:14:38 <ndm> has anyone got Windows Gtk2Hs packages for GHC 6.4.2 ?
12:15:33 <lispy> what is the prefered way to create a Ptr CInt, preferable one that is finalized for me
12:16:09 <lispy> ndm: i went with wxhaskell because i think 1) it will be 'more native' and 2) i get it all working ;)
12:16:36 <eivuokko> You compiled wxhaskell in Windows?
12:16:43 <ndm> lispy, i am still debating which one to pick. Yhc picked Gtk2Hs because of the community support and easier to get help with - and they implemented features if we asked
12:16:51 <dmhouse> What's the German for 'to beat', as in sport?
12:16:54 <ndm> but wxWindows is definately more native
12:17:05 <ndm> I'm trying to pick one as a GUI tool for Hat
12:17:09 <ndm> the Haskell debugger
12:17:22 <lispy> ndm: cool
12:17:24 <lispy> eivuokko: yes
12:17:36 <cjay> dmhouse: schlagen
12:17:40 <ndm> I have now ported it to windows, as console programs, a nice GUI is the next step
12:17:51 <lispy> eivuokko: i used visual haskell + mingw
12:18:10 <eivuokko> lispy, Cool.  I have to try it sometime.
12:18:16 <dmhouse> cjay: Danke.
12:18:39 <lispy> eivuokko: i doubt visual haskell is required, in fact it may have made it harder :)
12:19:03 <lispy> do i create Ptrs via foreign ptr?
12:19:05 <eivuokko> lispy, Yeah, I know.  I don't use visual haskell for ocmpiling, just for editing.
12:19:29 <lispy> eivuokko: yeah, i really wish it did paren matching
12:19:30 <eivuokko> lispy, Ptr is just the same as C pointers, nothing fancy and no finaliser.
12:19:49 <dmhouse> cjay: hmm. I hope I wasn't misunderstood. I don't mean 'to beat' as in 'to hit'. If one team says 'Wir haben gewonnen', the other would say 'Man hat uns X', where X is 'to beat'. Does that make sense?
12:20:01 <lispy> eivuokko: hmm..is there any sort of malloc/free? i'm not finding it in the docs
12:20:05 <eivuokko> lispy, You might want to use ForeingPtr that has finaliser.  But then you have to always use withForeignPtr to have normal Ptr to work with.
12:20:05 <lispy> @hoogle withPtr
12:20:06 <lambdabot> No matches found
12:20:12 <eivuokko> @hoogle malloc
12:20:13 <lambdabot> Foreign.Marshal.Alloc.malloc :: Storable a => IO (Ptr a)
12:20:13 <lambdabot> Foreign.ForeignPtr.mallocForeignPtr :: Storable a => IO (ForeignPtr a)
12:20:13 <lambdabot> Foreign.ForeignPtr.mallocForeignPtrArray :: Storable a => Int -> IO (ForeignPtr a)
12:20:25 <lispy> i see, thanks
12:20:28 <eivuokko> mallocForeignPtr
12:20:38 <lispy> @doc Foreign.Marshal.Alloc.malloc
12:20:38 <lambdabot> Foreign.Marshal.Alloc.malloc not available
12:20:49 <lispy> @doc Foreign.Marshal.Alloc
12:20:49 <lambdabot> http://haskell.org/ghc/docs/latest/html/libraries/base/Foreign-Marshal-Alloc.html
12:21:26 <cjay> dmhouse: yes, makes sense. 'schlagen' is ambiguous
12:21:53 <dmhouse> So it's the right verb? Or not?
12:22:06 <cjay> yes, it's right
12:22:20 <dmhouse> Right, thanks :)
12:22:30 <cjay> :)
12:23:12 <cjay> what are you doing in germany? studying?
12:23:41 <dmhouse> I'm doing a two-week work experience placement, in the form of an exchange.
12:24:25 <dmhouse> So at the moment I'm staying with a German family in Rsselsheim, near Frankfurt, and in October we reciprocate.
12:24:47 <cjay> i see
12:26:03 <ndm> how happy are the german family about the football :)
12:29:27 <dmhouse> ndm: I went into Rsselsheim for the match. It was terrible afterwards :)
12:29:49 <ndm> i have a friend in germany, and half my group are german
12:30:00 <dmhouse> A surprising number of Italians had turned up any they drove around the town, heckling at honking at any dejected-looking Germans (of which there were plenty).
12:30:01 <ndm> but the most upset person was my nigerian housemate
12:31:24 <dmhouse> s/any/, and/
12:39:00 <dcoutts> ndm, no, not yet, still for 6.4.1
12:39:16 <ndm> dcoutts :(, any idea when it might appear
12:39:29 <dcoutts> ndm, how soon do you want it?
12:39:37 <ndm> I am thinking about writing a GUI for Hat using Gtk2Hs, but obviously thats harder if i can't use it
12:39:42 <ndm> dcoutts, sooner the better
12:39:54 <dcoutts> ndm, you can build it from source
12:40:00 <ndm> i knew that was coming :)
12:40:03 <dcoutts> ndm, :-)
12:40:15 <dcoutts> ndm, it's not that hard to build an installer for one version
12:40:25 <ndm> on Windows, building haskell software from source always results in a lot of pain
12:40:39 <dcoutts> the version I built was for 4 versions, gtk 2.6, 2.8 and ghc 6.2.2 & 6.4.2
12:40:50 <dcoutts> ndm, it just needs mingw and msys
12:41:03 <ndm> or pain and suffering as they are also know :)
12:41:04 <dcoutts> building the installer needs innosetup
12:41:15 <ndm> what does the installer do?
12:41:19 <dcoutts> configure; make jsut works :-)
12:41:31 <dcoutts> ndm, the installer is an ordinary win32 installer
12:41:31 <ndm> have you thought of adapting the one Hugs uses? thats small, simple
12:41:42 <ndm> dcoutts, yes, and that usually means "bad"
12:41:42 <dcoutts> what is that one?
12:41:51 <sjanssen> @hoogle split
12:41:52 <lambdabot> Random.split :: RandomGen a => a -> (a, a)
12:41:52 <lambdabot> Data.IntMap.split :: Key -> IntMap a -> (IntMap a, IntMap a)
12:41:52 <lambdabot> Data.IntSet.split :: Int -> IntSet -> (IntSet, IntSet)
12:41:57 <ndm> http://www-users.cs.york.ac.uk/~ndm/projects/winhugs.php
12:41:59 <lambdabot> Title: "Neil Mitchell - WinHugs 2"
12:41:59 <dcoutts> ndm, heh, yeah they're not that easy to do
12:42:01 <ndm> i wrote it mysefl
12:42:17 <dcoutts> innosetup is a simpleish free win32 setup system
12:42:36 <ndm> well, i might give configure; make a whirl tomorrow and see if i can do it
12:42:47 <ndm> ah, i can't actually
12:42:59 <ndm> i don't have enough disk space for mingw on my home machine
12:43:10 <ndm> i don't have enough privilages to get gtk+ working on my uni machine
12:47:26 <isaacd> now Yhc depends on System.FilePath, but make doesn't fetch that (it does fetch/build cpphs)
12:47:54 <ndm> isaacd: it should fetch it, if it doesn't, thats a bug in the scons script
12:48:12 <isaacd> Should I be using scons?
12:48:14 <ndm> isaacd: are you using make or scons?
12:48:19 <ndm> yep, scons is the way forward
12:48:21 <isaacd> I was using make
12:48:30 <isaacd> ok
12:48:32 <isaacd> :)
12:50:11 <dcoutts> ndm, you don't need special priviledges to get gtk working
12:50:41 <dcoutts> ndm, I installed it on my uni machine even though they've got it pretty well locked down
12:50:48 <ndm> dcoutts, gimp (with admin privileges) installed a really old version, that means i need admin privileges to delete it, before i can upgrade
12:51:09 <dcoutts> ndm, no need to delete it is there?
12:51:37 <dcoutts> just install gtk+ in your dir
12:51:46 <dcoutts> and put the bin dir on your path
12:51:50 <ndm> dcoutts, it got upset when i tried to install two different versions of Gtk2hs, i think because it needed to check a reg key during installation that was admin protected
12:51:53 <dcoutts> (which the instalelr does)
12:52:11 <dcoutts> it uses a user reg key
12:52:21 <dcoutts> and only readonly I think
12:52:30 <ndm> well it failed last time i tried, i remember
12:52:34 <ndm> will try tomorrow again though
12:52:43 <ndm> do you not have someone who builds the windows downloads?
12:52:57 <dcoutts> I do :-)
12:53:13 <dcoutts> on a win32 box in the department via rdesktop
12:53:49 <dcoutts> I could do it, it just takes finding the time
12:53:55 <ndm> yeah, i know the feeling
12:54:00 <ndm> is it not automatic in some way?
12:54:09 <dcoutts> I've got scripts to automate it
12:54:32 <ndm> i was contemplating adding a nightly build feature to my Haskell on Windows project
12:54:33 <dcoutts> building gtk2hs image and building the isntaller
12:54:43 <dcoutts> ah, that'd be nice
12:54:50 <dcoutts> shouldn't be too hard
12:54:57 <ndm> yes, since a lot of projects treat win32 like a lepper
12:54:59 <dcoutts> it'd be another script on top of the ones I've got
12:55:16 <dcoutts> I don't think I could do cron on the box I use
12:55:31 <dcoutts> ah, and we'd need autoconf working
12:55:46 <dcoutts> since I usually build a tarball on linux and then build that on win32
12:55:58 <ndm> i was going to start small with cpphs/yhc/hscolour - things where the developers are all in York
12:55:59 <dcoutts> so I don't use darcs + autoreconf on win32
12:56:02 <ndm> then move out from there
12:56:26 <ndm> and probably confined to things that build without mingw, to start with
12:56:29 <dcoutts> ndm, it'd be nice to have a linux nightly build too
12:56:31 <ndm> since on windows, mingw i s horrible
12:56:48 <ndm> dcoutts, we hope to for Yhc at some point soon, and nightly regression tests
12:56:52 <dcoutts> the win32 nightly build could pickup the source tarball generated on linux
12:56:58 <isaacd> ndm: just run "scons" in the yhc directory? Does it need "sh configure" first? I'll update the readme once I build successfully with scons.
12:57:10 <dmhouse> Can i unlock a file from a terminal?
12:57:21 <ndm> isaacd: just scons, it should handle the rest
12:57:37 <dcoutts> ndm, either that or make automake work on win32 which would indeed be pain
12:58:12 <dcoutts> ndm, this will all be sooo much easier when we use cabal for gtk2hs
12:58:23 <ndm> dcoutts, definately!
12:58:31 <dcoutts> I'd also like to bundle gtk+ in the gtk2hs win32 installer
12:58:41 <dcoutts> but I still do not know how to handle the dll issue
12:59:16 <eivuokko> dcoutts, Which dll issue?
12:59:34 <dcoutts> eivuokko, suppose you have a haskell lib that depends on a C dll
12:59:54 <dcoutts> eivuokko, where should that dll go? so that it can be pickedup up by any prog built with that haskell lib
13:00:00 <ndm> dcoutts, that would be wonderful! then it can get to my haskell on Windows project
13:00:07 <eivuokko> dcoutts, Next to exe in installation.
13:00:40 <dcoutts> eivuokko, but when I build a prog: ghc --make Foo.hs -o Foo.exe, I'm building a .exe in any old directory
13:00:53 <dcoutts> eivuokko, remember I'm providing the user with a haskell lib, not a .exe
13:01:02 <dcoutts> the user is building the .exe and expecting it to work
13:01:12 <dcoutts> but that .exe will need to find the C .dll
13:01:16 <eivuokko> dcoutts, That's where gtk goes wrong imo.  It shouldn't have common installation location.
13:01:26 <eivuokko> On devel machine I'd just require dll to be in path
13:01:30 <dcoutts> right
13:01:35 <dcoutts> but on the users box?
13:01:36 <bringert> dcoutts: you've got mail! (http package fixed and released)
13:01:37 <dcoutts> where should it go?
13:01:44 <dcoutts> bringert, yay!
13:01:47 <eivuokko> Which user?
13:01:52 <eivuokko> Programmer or end-user?
13:01:56 <bringert> dcoutts: let me know if I botched something
13:02:01 <dcoutts> eivuokko, end user of haskell lib
13:02:16 <dcoutts> eivuokko, eg student who wants to make haskell guis
13:02:18 <eivuokko> Programmer: path.  End-user: programmer supplies the dlls with exe
13:02:36 <dcoutts> eivuokko, remember I'm not providing an exe, the user is building the .exe
13:02:56 <dcoutts> bringert, I'll try and give it a go this evening
13:03:27 <dcoutts> eivuokko, win32 is brilliantly setup for distributing isolated applications, you just stick all the required dlls in the apps directory.
13:03:38 <jgrimes_> bringert: the extensible markup in hope is pretty sweet
13:03:39 <dcoutts> but it's totally useless for distributing libraries
13:04:11 <eivuokko> dcoutts, Ok, if I wasn't clear enough: Imo gtkhs should either come with DLLs and offer to put them into path or require they are in path.
13:04:20 <bringert> jgrimes_: thanks. did you do anything fun with it?
13:04:45 <dcoutts> eivuokko, that's what it does, but it's really flakey
13:04:58 <jgrimes_> bringert: I haven't yet, mostly just poking around
13:04:58 <bringert> jgrimes_: still no public Hope installation?
13:05:01 <dcoutts> eivuokko, it currently relies on the gtk_ installer to put them on the path
13:05:03 <jgrimes_> bringert: not yet :p
13:05:06 <eivuokko> dcoutts, Yes, because installing gtk stuff is pain.
13:05:33 <dcoutts> eivuokko, it's easy for apps, just bundle all the dllsm just like anything else
13:05:33 <Frederick> hail folks
13:06:37 <dcoutts> eivuokko, in unix you can install a dynamic lib into a private dir and then specify the path to that when you build a program
13:06:41 <isaacd> ooh, I'm compiling jhc and yhc at the same time, no wonder it's a bit slow
13:07:04 <dcoutts> so one installation of that dynamic lib doesn't conflict with any other
13:07:48 <ndm> isaacd: compiling yhc should be a few mins, tops
13:07:54 <ndm> jhc will be taking all the time :)
13:07:58 <dcoutts> eivuokko, so the problem we get is that people have a different version of some dll that gtk needs somehwere else on their path, eg zlib.dll and that messes everything up
13:08:13 <dcoutts> so putting it on the path works but is just a huge source of bugs
13:08:22 <eivuokko> dcoutts, we have discussed this before.  I'm not wanting to go into it again.  Imo gtk just trying to install in common location by users is plain wrong and stupid.
13:08:37 <dcoutts> eivuokko, sure, it's a tired discussion :-)
13:08:53 <eivuokko> dcoutts, They should compile zlib into gtk libs instead of dll imo.  zlib.dll and zlib1.dll are just pure pain.
13:09:06 * dcoutts agrees
13:09:14 <eivuokko> dcoutts, But those are of course my opinions, and as you might notive, they are not shared by other people.
13:09:41 <dcoutts> as I say it's easy for apps, they just bundle dlls, but for a lib ghc we're stuffed
13:09:53 <isaacd> ndm: yep, yhc compiles in an extraordinarily short period of time, for a compiler
13:10:08 <eivuokko> ghc is too conservative in it's installation imo.
13:10:22 <ndm> isaacd: thats while compiling with GHC, once we have compiling with Yhc it will be even faster
13:10:29 <eivuokko> It really needs almost all of mingw to be usable.
13:11:01 <eivuokko> No strip, no resource compiler, hard to install libs into mingw+ghc.
13:11:13 <dcoutts> ndm, how do you deal with the yhc bytecode interpreter? is it a .dll or do you link it into each .exe? or do you not generate .exe's at all?
13:11:23 <ndm> dcoutts, no .exe at all
13:11:42 <ndm> we generate .hbc files, which are just run by yhi
13:11:45 <dcoutts> ndm, so you have to say: yhi.exe thing.bytecode
13:11:49 <ndm> yes
13:12:08 <ndm> alhtough we plan a feature where "cat yhi.exe main.hbc > main.exe"
13:12:18 <ndm> will give you a working main.exe with the interpretter baked in
13:12:32 <dcoutts> you'd have the same problem if you tired to have a shared rts
13:12:39 <ndm> provided you prelink main.hbc, i.e. pull in the prelude etc.
13:12:42 <dcoutts> just like vbrunNNN.dll
13:12:51 <ndm> yes, that was an absolute pain!
13:13:01 <ndm> have you considered for gtk2hs require the dlls to be installed
13:13:12 <dcoutts> which is precisely the problem we have with gtk+ and gtk2hs
13:13:20 <ndm> but in the program you generate for each .hs file, add a check
13:13:20 <dcoutts> ndm, what do you mean?
13:13:30 <ndm> require the end user have gtk2hs installed
13:13:43 <ndm> and have the program give an error message if it isn't, with a link to the binary
13:13:54 <ndm> ideally even offering to install it and download it for you
13:14:05 <ndm> i had that for a vb program i distributed, and it worked really well
13:14:05 <dcoutts> I don'tknow what situation you're imagingin
13:14:25 <ndm> is the problem with gtk2hs that the end user may not have the gtk dll's installed?
13:14:52 <Frederick> folks is there any absolute book to learn haskell from it?
13:15:47 <dcoutts> ndm, the gtk2hs installer checks that gtk+ is installed
13:16:16 <dcoutts> ndm, the problem is that we have to have the gtk+ .dlls installed on the win32 %PATH% which is notoriously flakey
13:16:38 <ndm> why can't you just use a registry key to find where they are?
13:16:48 <dcoutts> how would we use that?
13:17:01 <ndm> at which point do you need them on your path? when the .exe starts?
13:17:01 <dcoutts> ghc --make Foo.hs -o Foo.exe; Foo.exe
13:17:10 <dcoutts> people expect that to work
13:17:20 <dcoutts> when Foo.hs might have been in any directory
13:17:30 <ndm> ah, thats the reason gtk2hs doesn't work at uni :)
13:17:31 <dcoutts> there is no linker directive to specify .dll paths
13:17:55 <ndm> i have an old version of gtk on my path, on my computer path, which takes precedence over my user path
13:17:57 <dcoutts> if you're building a stand alone app with gtk2hs to distribute, then you're ok because you build your .exe and stick all the gtk+ dlls in the same dir as that .exe
13:18:19 <vincenz> re
13:18:27 <dcoutts> but for users of the gtk2hs libs who want to build little demo progs, it can be really flakey
13:19:14 <dcoutts> ndm, eg we could build a perfectly reliable installer for a binary hIDE, or Hat or something, but the building from source gives us these %PATH% issues
13:19:32 <eivuokko> dcoutts, btw, with haskell, you could have LoadLibrary/GetProc-code generated instead of normal ffi-decls.  In that case you could change the path from which to load dll's if needed.
13:19:34 <dcoutts> ndm, one remote possability is late binding of dlls
13:20:02 <dcoutts> eivuokko, that'd be great, I think that's reoughly like msvc's late binding system
13:20:05 <ndm> dcoutts, that would work, and you could do a registry key
13:20:24 <eivuokko> dcoutts, I don't think so.  The delay load dlls are optimisation, not abstraction.
13:20:27 <eivuokko> afaik
13:20:51 <dcoutts> ndm, so what we might be able to do there is start up, check a reg key, call a function to set the dll dir and then force all the delay loded libs to reolve against the ones in that dir.
13:21:05 <vincenz> o.O
13:21:05 <vincenz> arcs: <stdin>: hSetBuffering: unsupported operation (Illegal seek)
13:21:09 <vincenz> +d
13:21:13 <dcoutts> eivuokko, it works internally via LoadLibrary/GetProc
13:21:14 <ndm> dcoutts, no need to do that even, when you LoadLibrary to get the .dll you pass the full path
13:21:18 <ndm> it doesn't need to be on any dll path
13:21:34 <ndm> of course, unless it follows onwards by loading more .dll's, which would require it
13:21:37 <dcoutts> ndm, one can force the delay loaded libs to resolve
13:21:51 <dcoutts> which then fixes up all the delayed entry points
13:22:10 <dcoutts> so it's not quite the same as jsut doing LoadLibrary
13:22:28 <dcoutts> you've got to get the delay loaded lib insfrastructure to do that on your behalf
13:22:30 <vincenz> dcoutts: happen to read my post about cyclic types?
13:22:30 <eivuokko> dcoutts, Well, I just haven't seen docs to change where delay loaded DLLs are loaded from, except the winapi function that changes it for one search location globally in whole program.
13:22:41 <dcoutts> vincenz, nope, sorry
13:22:46 * dcoutts has to go have dinner
13:22:47 <vincenz> dcoutts: no worries
13:23:06 <lisppaste2> isaacd pasted "scons error for yhc" at http://paste.lisp.org/display/22129
13:23:11 <isaacd> ndm: see
13:23:16 <dcoutts> eivuokko, right, do it globally & force the libs to load
13:23:24 * dcoutts gotta go
13:23:32 <vincenz> dons: ping
13:23:37 <dcoutts> eivuokko, it might work, but it sounds tricky
13:24:01 <ndm> isaacd: do you have libffi installed?
13:24:10 <isaacd> ndm: what's that?
13:24:21 <ndm> @google libffi
13:24:23 <lambdabot> http://sourceware.org/libffi/
13:24:24 <lambdabot> Title: "libffi"
13:24:25 <vincenz> ndm: you good at writing haskell code that uses the filesystem?
13:24:39 <eivuokko> dcoutts, Using LoadLibrary and GetProc from haskell isn't that bad.  It's the stupid ffi-wrappers for calling c function pointer that are annoying imo.
13:24:44 <ndm> vincenz: i wrote a filepath module, what do you mean by "uses the filesystem"
13:25:29 <petekaz> What's the easiest way to write a literal multiline string?
13:25:32 <vincenz> ndm: well I've been considering writing a little tool that automatically does a darcs pull on different repositories... See I have a set of repos in my ~/work dir  it's nice to do an update to /mnt/usbstick/work when I go home ..
13:25:35 <jgrimes_> Frederick: from my experience there isn't really a be-all end-all book
13:25:43 <vincenz> ndm: and then at work pull from mnt/usbstick/Work to ~/work
13:25:46 <vincenz> and then back aagain
13:25:57 <ndm> petekaz: unlines ["line 1","line2","line 3"]
13:26:05 <ndm> petekaz: or look up string gaps
13:26:17 <petekaz> ndm: thanks.
13:26:40 <ndm> vincenz: isn't that just a few line shell script?
13:26:53 <vincenz> ndm: well you have to find all the different repos
13:27:04 <vincenz> they're not just straight under  ~/work
13:27:11 <ndm> what, you mean by detecting the _darcs folder?
13:27:15 <vincenz> yeah
13:27:27 <jgrimes_> Frederick: I worked through the "Yet another haskell tutorial" first (to me it was easier at first) and then the "Gentle introduction to Haskell" (which seemed more like a whirlwind tour). After those I looked at "All About Monads" which clarified monads pretty well
13:27:33 <ndm> thats relatively easy with my System.FilePath module
13:27:45 <ndm> just keep calling getDirectoryContents recursively
13:27:52 <vincenz> ndm: and then to invoke darcs?
13:28:01 <ndm> system
13:28:26 <isaacd> ndm: I suppose the makefiles are just so out of date that they didn't require/use libffi?
13:28:28 <vincenz> update-darcs fromforest toforest
13:28:29 <petekaz> ndm: where is this filepath module you speak of?  I was searching for a join() function the other day.
13:28:45 <Cale> jgrimes_: read Monads as Containers?
13:28:50 <vincenz> ndm: and yeah, where can we find this nifty lib
13:29:05 <petekaz> ndm: I wrote a quick util that parses Maildir directories and prints a summary of all emails in there.
13:29:06 <ndm> @where filepath
13:29:07 <lambdabot> http://darcs.haskell.org/~lemmih/FilePath
13:29:15 <ndm> nah, not that one!
13:29:18 <vincenz> :D
13:29:29 <jgrimes_> Cale: no I haven't. 
13:29:31 <ndm> http://www.cs.york.ac.uk/~ndm/projects/libraries.php
13:29:33 <lambdabot> Title: "Neil Mitchell - Haskell Libraries"
13:29:41 <Cale> @wiki Monads as Containers
13:29:42 <lambdabot> http://www.haskell.org/haskellwiki/Monads as Containers
13:29:45 <ndm> petekaz: there as well
13:29:50 <Cale> er, that's wrong :)
13:29:55 <ndm> petekaz: join == </>
13:29:56 <Cale> @wiki Monads_as_Containers
13:29:56 <lambdabot> http://www.haskell.org/haskellwiki/Monads_as_Containers
13:30:08 <mrb_> dcoutts: i saw a post you made about hxt, cryptolib and newbinary...
13:30:27 <vincenz> @hoogle getDirectoryContents
13:31:01 <vincenz> @bot
13:31:08 * vincenz pokes lambdabot 
13:31:16 <vincenz> @restart
13:31:31 <Frederick> k
13:31:34 <lambdabot> Directory.getDirectoryContents :: FilePath -> IO [FilePath]
13:31:36 <lambdabot> :)
13:31:38 <vincenz> woah
13:31:38 <lambdabot> Unknown command, try @list
13:31:51 <ndm> vincenz: getDirectoryList does it from System.FIlePath
13:32:06 <vincenz> ndm: ah right, how do you filter on directories?
13:32:10 <lisppaste2> petekaz pasted "getDirectoryContents example" at http://paste.lisp.org/display/22130
13:32:12 <jgrimes_> Cale: I'll take a look at it. Monads are fun to read and think about. :)
13:32:25 <ndm> vincenz: getDirectoryList does that automatically
13:32:34 <petekaz> vincenz: that's a small program I whipped up the other day using getDirectoryContents.
13:32:34 <vincenz> @hoogle getDirectoryList
13:32:34 <ndm> getDirectoryContents gives files and directories
13:32:35 <lambdabot> No matches found
13:32:41 <vincenz> petekaz: could I take al ook?
13:32:57 <isaacd> ndm: libffi looks big -- it's a dependency?
13:33:07 <ndm> isaacd: yes
13:33:13 <petekaz> vincenz: I just pasted the code.
13:33:18 <ndm> for platform independant ffi calling
13:33:24 <ndm> i don't think its that big though?
13:33:28 <petekaz> vincenz: http://paste.lisp.org/display/22130
13:33:39 <vincenz> petekaz: thx
13:33:52 <isaacd> ndm: well, emerge -p libffi tells me 26,782 kB
13:34:35 <isaacd> i.e. about 26 MB
13:34:39 <ndm> isaacd: the windows version is from ctypes, and that is 74Kb
13:34:52 <isaacd> hmm
13:35:01 <ndm> we are moving to the ctypes version, but that lacks amd64 support yet
13:35:06 <ndm> while libffi lacks windows support
13:36:18 <Cale> jgrimes_: let me know what you think :)
13:36:52 <vincenz> petekaz: why the setCurrentDir
13:36:54 <jgrimes_> Cale: will do :)
13:36:56 <vincenz> before getCurrentDir
13:37:09 <vincenz> petekaz: and I take it you're not a fan of do notation
13:37:25 <petekaz> vincenz: because the result of getCurrentDir is relative, and I didn't have a join function from FilePath.
13:37:48 <vincenz> petekaz: o.O
13:37:56 <petekaz> vincenz: I like do notation, but in that one particular function, I think the bind operator is clearer.
13:38:02 <vincenz> petekaz: setcurdir dir; getdircontents dir
13:38:04 <vincenz> how is that relavtive???
13:38:35 <petekaz> well, when I go to open a file called "test", it works if I'm in the current directory.
13:38:47 <vincenz> petekaz: right...but I mean
13:38:52 <vincenz> you setcur dir
13:38:54 <petekaz> If I am not, then I need to do a join on the basedir + "test" to open it.
13:38:55 <vincenz> and then you do getcur dir
13:38:58 <vincenz> with the same dir
13:39:14 <petekaz> setcur just changes directory.
13:39:18 <ndm> petekaz: System.FilePath will do that for you
13:39:27 <ndm> and in a platform independant way
13:39:28 * vincenz is too lazy
13:39:38 <petekaz> ndm: right, I couldn't find that the other day though.
13:39:50 <ndm> petekaz: its relatively new, not in the base library either
13:39:56 <ndm> i'm trying to get it added, because its so useful
13:40:10 <ndm> petekaz: although FilePath == String, so file ++ "/" ++ file would work
13:40:19 <ndm> although is obviously not great...
13:40:23 <vincenz> ndm: even on windows?
13:40:29 <petekaz> vincenz: I do a setCurrentDirectory, then a getDirectoryContents, not sure what you are talking about.
13:40:30 <ndm> vincenz: yep :)
13:40:42 <ndm> on Windows / and \ are valid
13:40:48 <|Steve|> The only system I know of that doesn't allow / as a path separator is the Xbox.
13:41:31 <int-e> cd / in DOS complains about an invalid option ;)
13:41:34 <ndm> Win CE as well might not let it
13:41:46 <ndm> int-e: thats the command shell, not the filesystem - its a weird combo
13:41:53 <Cale> How about Mac OS 8/9?
13:42:01 <Cale> I think it was : there
13:42:05 <|Steve|> I know it used : as a separator.
13:42:10 <petekaz> Cale: it was.
13:42:14 <|Steve|> But it might accept / as well.
13:42:19 <|Steve|> I never tried.
13:42:39 <vincenz> crap
13:42:43 <vincenz> ubuntu doesn't have vim7 yet
13:43:07 <mauke> emerge gentoo
13:43:16 <vincenz> mauke: sink
13:44:27 <isaacd> |Steve|: Mac OS (classic) treated '/' as an ordinary character in file names (you could have a file called "Junk/stuff/whatever")
13:44:52 <vincenz> ndm: I dislike writing small tools with external libs tho :/ it's annoying
13:45:13 <vincenz> @hoogle getDirectoryList
13:45:14 <lambdabot> No matches found
13:45:23 <sieni> tulitikkuja ei lytynyt
13:45:40 <ndm> vincenz: i couldn't agree more! thats exactly the reason i want this in teh base libs
13:45:45 <vincenz> ndm: yeah!
13:45:51 <vincenz> but until then...
13:46:02 <ndm> and because its always easy to hack round the filesystem issues, ina  non-portable and fragile way
13:46:26 <ndm> which not having this in the base just encourages
13:46:39 <isaacd> leading Haskell programs to be less portable
13:46:54 <ndm> in fact, i can almost guarantee that hte next releases of WinHugs and Yhc will have System.FilePath bundled in the base :)
13:46:56 <int-e> ndm: Funny. Yes, it works even in DOS. Didn't know that.
13:47:22 <ndm> int-e: yep, the System.FilePath module involved lots of experimentation!
13:47:22 <eivuokko> ndm, I haven't tried, but drive-splitting etc maybe should ignore \\?\-start on a path: http://msdn.microsoft.com/library/default.asp?url=/library/en-us/fileio/fs/naming_a_file.asp  Not critical, but if you're interested.
13:47:22 * petekaz wishes there was an easier way to include literal multiline strings in haskell
13:47:24 <int-e> ndm: and you made me write my first pascal program in - how many years?
13:47:27 <|Steve|> isaacd: At the VFS layer, it converts slashes to colons.
13:47:30 <vincenz> how o I filter directory contents that are directories?
13:47:43 <isaacd> |Steve|: That
13:47:46 <isaacd> 's OSX
13:47:52 <|Steve|> Right.
13:48:20 <|Steve|> But there's nothing that says that in OS 9, it couldn't handle slashes and convert them to colons, which I suspect it would do.
13:49:04 <|Steve|> In pre 9, I bet it wouldn't work though.
13:49:12 <vincenz> ndm: how do I check whether something is a dir or a file?
13:49:17 <sieni> vincenz: by looking at your favourite gnu tool's sources (e.g. gnu cp might be a good start)
13:49:18 <ndm> eivuokko: yes, it definately should - i will add that
13:49:24 <ndm> vincenz: doesFileExist, doesDirectoryExist
13:49:28 <vincenz> ah
13:49:35 <vincenz> @hoogle doesFileExist
13:49:36 <lambdabot> Directory.doesFileExist :: FilePath -> IO Bool
13:49:58 <petekaz> vincenz: I did this to give me only files:
13:50:00 <petekaz>                      getDirectoryContents dir >>= 
13:50:00 <petekaz>                      filterM doesFileExist    >>= 
13:50:58 <petekaz> 7hen wi7h 7h47 i jus7 p4rsed 4|_|_ of 7he fi|_es (em4i|_s).
13:50:58 <vincenz> hx
13:51:46 <vincenz> petekaz: I take it that getDirectoriyContents gives relative results?
13:51:57 <petekaz> yes.
13:52:15 <petekaz> that's why I change into the directory before I open any of the files.
13:52:19 <vincenz> and setCurDir is also relative?
13:53:04 <petekaz> vincenz: it works with relative or absolute paths.
13:53:10 <vincenz> neat
13:54:02 <petekaz> I was really quite pleased at how easy it was to do that little program (my first standalone haskell program btw).
13:55:33 <lispy> @hoogle Ptr a -> a
13:55:34 <lambdabot> No matches, try a more general search
13:55:58 <lispy> so how do i access the value which is pointed at?
13:56:05 <lispy> i have a Ptr CInt in htis case
13:57:00 <lispy> ah, peek
13:57:37 <isaacd> @hoogle Ptr a -> IO a
13:57:38 <lambdabot> No matches, try a more general search
13:57:44 <isaacd> @hoogle Storable a => Ptr a -> IO a
13:57:45 <lambdabot> Foreign.Storable.peek :: Storable a => Ptr a -> IO a
13:57:45 <lambdabot> Foreign.Storable.peekElemOff :: Storable a => Ptr a -> Int -> IO a
13:57:45 <lambdabot> Foreign.Storable.peekByteOff :: Storable a => Ptr b -> Int -> IO a
13:58:12 <isaacd> it would be nice if hoogle could guess some of that by itself
13:58:15 <isaacd> @hoogle Storable a => Ptr a -> a
13:58:16 <lambdabot> No matches, try a more general search
13:58:24 <ndm> isaacd: it can, try the web version
13:58:44 <isaacd> Why doesn't lambdabot give them?
13:58:46 <ndm> http://haskell.org/hoogle/?q=Ptr+a+-%3E+IO+a
13:58:47 <lambdabot> Title: "Ptr a -> IO a - Hoogle"
13:58:56 <norpan> @hoogle anyMatchesInTheWorldCup
13:58:57 <lambdabot> No matches found
13:59:16 <ndm> isaacd: i don't know, perhaps an old version, perhaps a different setting - i have to ask dons about that
14:00:43 <isaacd> strange, peek is lower in that list than peekByteOff, although it is clearly less different from the original query
14:01:27 <ndm> isaacd: that is strange, am not sure why...
14:02:35 <ndm> am just adding it to the bug list
14:04:18 <vincenz> alrighty
14:04:20 <vincenz> nearly done
14:04:28 <vincenz> now just the invocation command for darcs from haskell
14:04:53 <vincenz> @hoogle system
14:04:54 <lambdabot> System.system :: String -> IO ExitCode
14:04:54 <lambdabot> System :: module
14:04:54 <lambdabot> System.Win32.Info.SystemColor :: type SystemColor
14:07:49 <bolrod> win 4
14:07:50 <bolrod> oops
14:08:21 <vincenz> @hoogle (/-)
14:08:23 <lambdabot> Did you mean: (/-)
14:08:23 <lambdabot> Prelude.undefined :: a
14:08:23 <lambdabot> Control.Monad.Reader.ask :: MonadReader r m => m r
14:08:24 <vincenz> @hoogle (/=)
14:08:26 <lambdabot> Did you mean: (/=)
14:08:26 <lambdabot> Prelude.undefined :: a
14:08:26 <lambdabot> Control.Monad.Reader.ask :: MonadReader r m => m r
14:08:32 <vincenz> @hoogle (\=)
14:08:34 <lambdabot> Did you mean: (\=)
14:08:34 <lambdabot> Prelude.undefined :: a
14:08:34 <lambdabot> Control.Monad.Reader.ask :: MonadReader r m => m r
14:08:41 <vincenz> @hoogle Bool -> Bool
14:08:42 <lambdabot> Prelude.not :: Bool -> Bool
14:08:44 <lambdabot> Prelude.(&&) :: Bool -> Bool -> Bool
14:08:44 <lambdabot> Prelude.(||) :: Bool -> Bool -> Bool
14:08:59 <ndm> @hoogle /=
14:09:00 <lambdabot> Prelude.(/=) :: Eq a => a -> a -> Bool
14:09:01 <vincenz> heh
14:09:02 <vincenz> odd
14:09:02 <bolrod> =/
14:09:08 <vincenz> I get parse error
14:09:11 <ndm> vincenz: no need for the brackets, in fact they break it
14:09:12 <bolrod> what?
14:09:24 <vincenz> main = do args <- getArgs if length args /= 2
14:09:31 <vincenz> erm that's three lines
14:09:38 <isaacd> Prelude.(/=) isn't really the correct syntax to report it as
14:09:38 <vincenz> parse error on the third line starting with if
14:09:44 <vincenz> illegal pattern
14:09:51 <isaacd> Haskell would require (Prelude./=)
14:10:02 <vincenz> Parse error in pattern thtat is
14:10:35 <ndm> isaacd: i know, but for the web output, I want the module names to line up, so think of it as saying "import Prelude" then do "(/=)"
14:10:53 <isaacd> yes, I agree, it looks much better that way
14:10:54 <vincenz> wtf
14:11:06 <isaacd> Although, are the parentheses needed at all?
14:11:10 <vincenz> http://rafb.net/paste/results/OmXQ4A27.html
14:11:15 <vincenz> Parse error in pattern on the line with the if
14:11:23 <vincenz> O.O
14:11:43 <vincenz> I really don't see it
14:11:56 <isaacd> well, there's no else...
14:12:03 <vincenz> isaacd: that follows after
14:12:03 <bolrod> if parseError then kick yourself 
14:12:18 <isaacd> but it seems odd for it to complain *there*
14:12:23 <vincenz> definitely
14:12:47 <bolrod> damnit.. why does my battery run down so fast ;/ :)
14:12:47 <vincenz> http://rafb.net/paste/results/qOA6Vj39.html
14:12:58 <vincenz> that's the full code
14:13:09 <vincenz> 13:2 is where it complains
14:13:12 <vincenz> parse error in pattern
14:13:13 <sjanssen> vincenz: missing a do
14:13:25 <vincenz> oh yeah inside the else
14:13:27 <sjanssen> line 15 should have a do at the end
14:13:31 <vincenz> nested do's are yicky for parsing
14:13:41 <vincenz> I had something similar before when isaacd noticedi t
14:19:17 <vincenz> LOL
14:23:14 <vincenz> @type replicate
14:23:16 <lambdabot> forall a. Int -> a -> [a]
14:24:10 <vincenz> \o/
14:24:11 <vincenz> done
14:24:53 <lispy> @pl \f x -> f x >>= return
14:24:54 <lambdabot> flip flip return . ((>>=) .)
14:25:04 <lispy> @pl >>= return
14:25:04 <lambdabot> (line 1, column 1):
14:25:04 <lambdabot> unexpected ">"
14:25:04 <lambdabot> expecting white space, natural, identifier, lambda abstraction or expression
14:25:31 <bolrod> @pl [1..100] >>= (+1)
14:25:32 <lambdabot> (1 +) =<< [1..100]
14:25:35 <bolrod> woot!
14:25:43 <bolrod> much better.
14:25:46 <lispy> heh
14:26:08 <mr-onionhead> Hi, I'm trying to use System.Console.Readline in GHCi 6.4.  I get the error "/opt/local/lib/ghc-6.4/HSreadline.o: unknown symbol `_rl_discard_keymap'
14:26:12 <mr-onionhead> ghc-6.4: unable to load package `readline-1.0'"
14:26:24 <mr-onionhead> Any suggestions?
14:26:31 <lispy> that's because you're an onion head! ;)
14:26:44 <lispy> mr-onionhead: what does ghc-pkg list show?
14:26:46 <mr-onionhead> lispy: it's hard being an onion head:P
14:27:13 <vincenz> ndm: think I should post to haskell-cafe?
14:27:20 <ndm> vincenz: post what?
14:27:31 <vincenz> the little tool
14:27:33 <monochrom> Interesting.  Perhaps you need to make sure you have libreadline version 4.
14:27:50 <mr-onionhead> lispy: ghc-pkg lists readline-1.0.  Also I forgot to mentiojn things work fine if if compile with ghc --make
14:28:04 <ndm> vincenz: which little tool? i haven't being paying much attention :>)
14:28:20 <vincenz> grr firefox sucks resources like hell
14:28:26 <vincenz> ndm: the one for pulling multiple darcs repos
14:28:44 <ndm> vincenz: if you shove it on a web page, why not
14:28:50 <ndm> maybe the darcs list would be better though
14:29:28 <mr-onionhead> monochrom: I have readline 5.0 installed (and no other version, as far as I can tell).
14:30:04 <monochrom> Try to install readline 4.0 too.  (No need to remove readline 5.0.)
14:30:04 <vincenz> Xorg: 99% cpu
14:30:07 <vincenz> GRRRRR
14:30:27 <lispy> mr-onionhead: i think we nede more info, like the command line that works compared to the one that is failing
14:31:10 <bolrod> har har
14:31:22 <bolrod> vincenz: kill it.. before it uses 101% Virtual memory ;)
14:31:26 <bolrod> or at least... tries to use it
14:31:28 <bolrod> :D
14:31:45 <vincenz> ok
14:31:47 <vincenz> here is the link
14:32:00 <vincenz> http://www.notvincenz.com/wiki/pmwiki.php/Personal/Software
14:32:03 <lambdabot> Title: "Not Vincenz's Wiki | Personal / Software"
14:32:13 <mr-onionhead> lispy:  To get the failing behavior I run ghci (no flags), then :l seced.hs (one file only) and exectute the main function.
14:32:44 <mr-onionhead> lsipy: To get a successful run I compile using ghc --make and run the resulting a.out file.
14:33:54 <vincenz> ndm: I think the TODOs are the most meaningful
14:34:04 <mr-onionhead> monocrom: I'd prefer not to have to have to install new software, but I'll give it a try, if I can't get it working otherwise.
14:34:40 <ndm> vincenz: looks useful for some
14:35:06 <mr-onionhead> lispy: Sorry that should have been "ghc --make seced.hs".
14:35:07 <vincenz> but even now this tool is great as I bring my stuff with my usbstick back and forth
14:35:28 <vincenz> ndm: I wonder if it's too early to post
14:35:52 <vincenz> ndm: on another note, is it possible to initialise a darcs repo on a server you can only access via ftp?
14:36:03 <bolrod> stupid freenode >_<
14:36:15 <ndm> vincenz: its never too early, and i have no idea - i only ever use darcs with local paths and http
14:37:05 <isaacd> ndm: after emerging libffi(3.4.3), scons still failed -- what exactly does Yhc need?
14:37:06 <sjanssen> vincenz: I believe darcs only works over ssh, http and email
14:37:12 <vincenz> sjanssen: darn
14:37:45 <ndm> isaacd: it needs "ffi.h" to be somewhere - i'm not sure on the details, post it to the Yhc list
14:37:48 <cjay> maybe it works with ftp mounted with that fuse stuff
14:37:57 <ndm> since I Only use Windows, which has a different ffi behaviour
14:38:07 <isaacd> ndm: okay
14:39:29 <vincenz> I wonder how to phrase it... as an anecdote... as a salespitch
14:42:21 <vincenz> se t
14:42:22 <vincenz> sent
14:42:44 <vincenz> comments and feedback are obviously welcome :)
14:42:59 <vincenz> vacuum living leads to poor solutions
14:45:46 <ndm> vincenz: i just saw it on the cafe list
14:47:06 <vincenz> I hope it doesn't get automatically ignored like most of my posts :P
14:47:28 * bolrod ignores vincenz 
14:47:35 <bolrod> automatically
14:47:36 <bolrod> also
14:47:40 <vincenz> apparently I ask the wrong questions on haskell-cafe
14:47:49 <ndm> vincenz: in scavengeDarcs you can do getDirectoryList then filterM doesDirectoryExist contents is not required, and also ".", ".." will not be returned
14:48:10 <vincenz> ndm: the reason I asked before about posting is that sometimes I'm not sure if things are too trivial to be posted
14:48:14 <vincenz> @hoogle getDirectoryList
14:48:15 <lambdabot> No matches found
14:48:25 <ndm> vincenz: its only in System.FilePath
14:48:46 <ndm> hence not in Hoogle (yet, I intend to fix that too)
14:48:49 <vincenz> ah thx
14:49:21 <vincenz> I'll leave the . and .. in for safety
14:49:50 <vincenz> gotta go
14:49:52 <vincenz> my father is here
14:49:55 <vincenz> and my comp makes a shitload of noise
14:50:02 <vincenz> bbye!
14:50:08 <ndm> bye
15:51:30 <dcoutts> mrb_, yes?
15:52:57 <dcoutts> you were asking about http, crypto etc?
15:53:32 * dcoutts starts emerging bringert's new http release of his http lib
15:53:48 * dcoutts starts messing up his sentances
15:55:13 <ndm> dcoutts, have you seen how wxHaskell solves the dll issue?
15:55:21 <dcoutts> ndm, by cheating :-)
15:55:31 <dcoutts> by sticking all the dlls in the windows directory
15:55:33 <ndm> dcoutts, by copying to the system directory - which is not really cheating
15:55:40 <ndm> seems perfectly reasonable to me...
15:55:42 <eivuokko> It is cheating.
15:55:48 <dcoutts> except when they clash with other things
15:55:53 <dcoutts> zlib.dll ...
15:55:57 <ndm> yes, but cheating on a developers machine is just normal :)
15:56:06 <eivuokko> Shouldn't be done unless you are major component vendor with *lots* of users.
15:56:17 <dcoutts> yeah, on a devs machine, but not a student who wants to test a gui for a class
15:56:24 <ndm> true
15:56:50 * dcoutts has 30+ students who might wnat to run their class excerices at home on win32
15:57:57 <dcoutts> ndm, actually wxhaskell can get away with it slightly easier since it's using odd names for the dlls
15:58:05 <dcoutts> not ones that are likely to chahs
15:58:11 <dcoutts> chahs/clash
15:58:27 <dcoutts> though I don't know what it does about the wxWindows dlls themselves
15:58:28 <ndm> dcoutts, if they are doing it at home, they probably don't care that their system32 directory becomes trash
15:58:56 <dcoutts> ndm, it's more the problem that other pre-existing dlls interfear and so it doesn't work in the first place
15:59:01 <ndm> although wxHaskell also dont' support 6.4.2 :(
15:59:11 <dcoutts> unless you build from source :-)
15:59:12 <eivuokko> It might also be matter of privileges.
15:59:32 <dcoutts> ndm, the ghc binary incompatability is rather annoying don't you think?
15:59:45 <dcoutts> ndm, does yhc plan to be any better on that front?
15:59:55 <ndm> dcoutts, yes, a million times better
16:00:04 <dcoutts> one good thing about hugs is that it's fairly compatible between releases
16:00:08 <dcoutts> since it's just source code
16:00:14 <dcoutts> even in its installed form
16:00:16 <ndm> if we do release incompatible byte code versions, we'll write a convertor, and auto-convert them
16:00:24 <dcoutts> cool
16:00:29 <dcoutts> on the fly?
16:00:34 <ndm> maybe, maybe not
16:00:41 <ndm> we'll definately have a tool to do it
16:00:41 <dcoutts> or we'll have to convert on re-install?
16:00:54 <ndm> and probably the interpetter will handle some older versions of the bytecode
16:00:58 <dcoutts> imagine what a distro package manager would have to do
16:01:07 <dcoutts> when it installs yhc-1.1
16:01:16 <ndm> ideally 1.1 will read 1.0 files
16:01:20 <dcoutts> ok 2.0
16:01:22 <ndm> maybe 2.0 will break compatability
16:01:29 <ndm> but hopefully not
16:01:42 <ndm> the current version will change, definately
16:01:58 <ndm> but our change will be pre 1.0, and will be designed to be extensible for the forseable future
16:02:13 <dcoutts> the problem we have with ghc is that whenever you update you've got to run a script to re-compile all your installed libs
16:02:34 <dcoutts> we've got a /usr/sbin/ghc-updater
16:02:48 <dcoutts> which finds all your installed libs and re-emerges them
16:02:49 <ndm> yeah, we won't be that bad, certainly
16:03:45 <ndm> and btw, i'd much rather you overwrite 3 system critical dll's, and inserted swear words throughout my papers, rather than made me install mingw and msys
16:03:58 <dcoutts> bringert, looks great btw the new http release
16:04:07 <dcoutts> hah
16:04:19 <dcoutts> ndm, it's really not that bad :-)
16:04:20 <bringert> dcoutts: excellent
16:04:24 <dcoutts> much better than cygwin
16:04:31 <ndm> no, really, how would you like it if i made your install depend on Microsoft Word? its a similar concept
16:04:49 <ndm> dcoutts, its not windows, its Linux for Windows
16:04:57 <dcoutts> aye, but only packagers have to do it
16:05:05 <monochrom> "overwrite 3 system critical dll's, and inserted swear words throughout my papers"   Sounds like the rightful duty of a virus :)
16:05:07 <dcoutts> ndm, ghc comes bundled with half of mingw
16:05:18 <ndm> dcoutts, i know, but in a transparent way
16:05:30 <dcoutts> so that's ok :-)
16:05:32 <ndm> unfortunately, for most windows things the maintainer is noone
16:05:59 <ndm> out of the 9 haskell projects that have windows binaries, i compiled 7 of them i think
16:06:08 <dcoutts> ndm, I do take your point
16:06:16 <dcoutts> it's a pita to have to use msys etc
16:06:39 <dcoutts> ndm, keep sending cabal patches, that's the way forward for better win32 support
16:06:51 <dcoutts> and tools for building win32 packages from cabal packages
16:07:08 <dcoutts> we've got such a tool for generating gentoo ebuilds from cabal packages
16:07:08 <ndm> dcoutts, i want to write win-cabal - a nice gui for doing cabal building with "clicky clicky"
16:07:16 <dcoutts> right
16:07:26 <dcoutts> our tool even queries the hackage server
16:07:35 <dcoutts> you can steal the source if you like
16:07:45 <dcoutts> it's in the gentoo-haskell repo
16:07:50 <ndm> is the hackage server a serious thing? i mean does it have much on it?
16:07:55 <dcoutts> not atm
16:07:57 <dcoutts> but it will
16:08:13 <dcoutts> xerox is working on improving the cabal/hackage tools so it'll be easier to use
16:08:15 <eivuokko> Hackage server is so badly unusable from Windows.
16:08:19 <ndm> we want Yhc to have --make which downloads required modules at compile time
16:08:35 <dcoutts> ndm, sounds like the job of cabal-get
16:08:40 <ndm> eivuokko: what about the client?
16:08:52 <dcoutts> make sure that works on win32 and you won't need to do anying for yhc
16:08:53 <eivuokko> ndm, I meant using hackage server via client
16:08:56 <ndm> dcoutts, at compile time transparently?
16:09:05 <ndm> eivuokko: :(, how come?
16:09:28 <dcoutts> ndm, you'd make it transparent by making all hackage packages available at all times?
16:09:34 <eivuokko> ndm, No chance to compile source because unixisms? :)  Given, it's half a year since I tried.
16:09:39 <dcoutts> ndm, I don't think that's possible, is it?
16:09:50 <ndm> dcoutts, we will make it possible, in some way...
16:09:56 <dcoutts> you don't know when you need to import a package unless you know all the modules exposed
16:10:18 <dcoutts> ndm, I guess if you've got a complete list of the packages on the server, that includes the exposed modules
16:10:35 <dcoutts> so you can map module imports back to packages
16:10:44 <dcoutts> and then download and compile them
16:10:46 <ndm> yep, that was the plan
16:10:55 <ndm> hopefully hackage should be able to query for that info?
16:10:59 <dcoutts> yes
16:11:11 <dcoutts> it gives you the .cabal file info for each packaeg I think
16:11:24 <dcoutts> well you'll probably be able to colaberate with cabal-get on that
16:11:29 <dcoutts> share code at least
16:11:31 <ndm> probably, yes
16:11:42 <ndm> these are long term future plans, really
16:11:43 <dcoutts> maybe yhc could just import the cabal get lib modules
16:11:52 <ndm> that would be nice
16:12:03 <ndm> too many plans, too little time :)
16:12:06 <dcoutts> aye :-)
16:12:13 <dcoutts> always the problem
16:12:22 <ndm> i have at least 15 active projects, and a lot in the planning stages...
16:12:29 * dcoutts too
16:23:07 <dcoutts> ndm, if I did a gtk2hs-0.9.10 ghc-6.4.2 build now would that swing your decision? :-)
16:23:28 <ndm> dcoutts, yes
16:23:33 <dcoutts> well in that case...
16:23:43 * dcoutts downloads ghc-6.4.2 ...
16:23:47 <dcoutts> for win32
16:24:18 <dcoutts> ndm, as I said before if you're planning on building a binary app (yhc gui) that you will distribute as a .exe then the .dll issue will be no problem
16:24:35 <dcoutts> you can just bundle all the gtk+ dlls and your .exe in one dir
16:24:48 <dcoutts> I can help you work out just which dlls are needed
16:25:01 <dcoutts> I think it comes out at about 3mb compressed
16:25:39 <ndm_> dcoutts, i missed a bit of the conversation - IRC issues
16:25:46 <ndm_> which dlls are needed for what?
16:25:52 <dcoutts> which gtk+ dlls
16:26:04 <dcoutts> even the 'runtime' gtk installer is a bit fat
16:26:09 <ndm_> i can probably work round the Gtk+ issues, with a bit of time
16:26:23 <ndm_> my main need is Gtk2Hs for 6.4.2
16:26:37 <dcoutts> if you're building an app to distribute as a .exe then there are no dll issues to workaround
16:26:48 <ndm_> i meant on my computer at work :)
16:28:56 <ndm_> i also don't care about hte size of the .exe for once
16:29:21 <dcoutts> good, 'coz with current gtk2hs-0.9.10 it's bad
16:29:30 <dcoutts> the fix for the size is in the dev version
16:29:38 <dcoutts> which will be released sometime eventually
16:30:33 <ndm_> the code is replacing 8 haskell .exe's, which are combined about 12Mb, so any single .exe is probably going to be smaller
16:31:11 <dcoutts> 8? what are they?
16:31:28 <ndm_> hat-trail, hat-stack, hat-observe, hat....
16:31:34 <dcoutts> ah
16:31:40 <dcoutts> what gui to they use?
16:31:46 <ndm_> hehe :)
16:31:51 <ndm_> escape codes
16:31:56 <dcoutts> ah :-)
16:32:14 <ndm_> or at least on linux, i ported about 6 of them to use no escape codes, so just pure console stuff
16:32:29 <ndm_> one even spawns xterm in its startup code...
16:33:00 <ndm_> and some of them implement scroll bars etc. in escape codes, and multiple panes
16:33:05 <dcoutts> eek
16:33:31 <ndm_> yes, but a GUI is listed as a "controversial" feature
16:37:46 * dcoutts fires off a build
17:03:32 <dcoutts> ndm, still here?
17:03:49 <dcoutts> I've got something for you to test:
17:03:51 <dcoutts> http://haskell.org/~duncan/gtk2hs/gtk2hs-0.9.10.exe
17:03:53 <ndm> dcoutts, yep
17:04:09 <dcoutts> it's ghc-6.4.2 with gtk+ 2.8.x
17:04:33 <dcoutts> so it's not like the existing released installer which works for more combinations of versions
17:04:39 <dcoutts> it's just those versions
17:04:56 <dcoutts> the current released version does 6.4.1 6.2.2, gtk+ 2.6.x & 2.8.x
17:05:09 <dcoutts> but that also means this one is smaller :-)
17:05:27 <dcoutts> I've tested it briefly on my win32 box and it seems to install and work ok
17:05:32 <dcoutts> I tried a couple demo progs
17:05:52 <ndm> ok, i'll give it a whirl
17:06:08 <ndm> i noticed on the gtk2hs website, your hello world program lacks indentation under firefox
17:06:17 <ndm> and you also don't give a commandline to compile it
17:06:17 <dcoutts> oh
17:06:21 * dcoutts checks
17:06:26 <ndm> unlike wxHaskell, which does both of those things
17:07:14 <dcoutts> hmm, yes
17:08:28 <ndm> linking takes ages on this machine, because its really old
17:08:50 <ndm> but yes, works perfectly - thanks!
17:09:00 <ndm> @karma+ dcoutts
17:09:00 <lambdabot> dcoutts's karma raised to 13.
17:09:12 <dcoutts> yay
17:10:25 <Spark> whats a nice way of expressing a function that takes [a,b,c] and gives you all the prefixes i.e. [[a],[a,b],[a,b,c]]
17:10:39 <ndm> Spark: inits
17:10:47 <ndm> > inits "abc"
17:10:48 <lambdabot>  ["","a","ab","abc"]
17:10:53 <Spark> heh
17:11:15 <Spark> see if i hadn't asked that, then i'd have gone off and written inits for myself, and been none the wiser :)
17:16:20 <ndm__> dcoutts, where will that installer be tomorrow? so I can grab it from work
17:16:30 <dcoutts> same place
17:17:02 <ndm__> cheers, i will start on hat-gui tomorrow then :)
17:17:11 <dcoutts> yay
17:17:48 <AtnNn> What do I need to use [| |] notation in haskell?
17:18:11 <kosmikus> -fth
17:18:29 <AtnNn> Oh, tx
17:24:25 <ozone> kosmikus: hey, you gave a talk at MPC a few days ago eh?
17:24:55 <kosmikus> no
17:25:07 <kosmikus> although I would have liked to
17:25:09 <ozone> ah, ralf gave it?
17:25:18 <kosmikus> but we decided that Ralf goes to MPC and I go to PPDP
17:25:39 <ozone> ah right
17:25:55 <ozone> was about to ask how your talk went :)
17:26:07 <kosmikus> ask me next week :)
17:26:31 <ozone> will do :)
17:27:23 <kosmikus> anyway, I was about to go to bed. good night, ozone ...
17:27:31 <ozone> later dude
17:32:13 <Spark> can you test to see if some value is behind a specific type constructor
17:32:20 <Spark> like x == T _
17:32:30 <Spark> where data Blah = T Char | T' Char
17:32:54 <Spark> basically pattern matching
17:34:22 <dcoutts> ndm__, I've improved the hello world example, thanks for pointing out the formatting cockups
17:34:27 <dcoutts> http://haskell.org/gtk2hs/documentation/
17:34:28 <lambdabot> Title: "Gtk2Hs &raquo; Documentation"
17:35:18 <dcoutts> ndm__, I think something got messed up in a WordPress upgrade, the xhtml markup was a bit screwey
17:35:24 <dcoutts> anyway, fixed now
17:35:34 <dcoutts> and I reordered the code to make it clearer
17:36:44 * dcoutts goes to bed
17:39:39 * lispy gets annoyed at his organizations disorganization
17:40:08 <Spark> is there a predefined version of "case x of (T _) -> true ; _ -> false" basically
17:44:32 <largos> is anyone familiar with the gtk2sh cairo clock demo?
17:45:24 <largos> I'm trying to compile it, but I'm not sure what versions of gtk2hs and cairo are needed
18:15:12 <lispy> largos: you need dcoutts, iirc
18:23:37 <moonlite> are there any sorting functions availible in ghc's libraries? 
18:34:53 <Excedrin> > List.sort [63,5,3,1,84]
18:34:54 <lambdabot>  [1,3,5,63,84]
18:35:12 <Excedrin> @hoogle sort
18:35:13 <lambdabot> List.sort :: Ord a => [a] -> [a]
18:35:13 <lambdabot> List.sortBy :: (a -> a -> Ordering) -> [a] -> [a]
18:35:13 <lambdabot> System.Win32.NLS.sORTIDFROMLCID :: LCID -> SortID
18:39:54 <moonlite> ah neat
18:45:52 <sjanssen> @keal
18:45:52 <lambdabot> with KealDigit quantum crackproof encryption possible
18:46:01 <sjanssen> @. elite quote
18:46:02 <lambdabot> ItKO\/Ian 54Ys: r3a| Pr0gR4mM3Rz0rz DoN'7 \/\/RITe D0(s, If I+ waz0rz HARD +o wRiTe, I+ $hOuld b3 hArd T0 UndeR57anD
18:46:21 <dons> morning
18:46:34 <sjanssen> good morning dons 
18:46:45 <dons> hey sjanssen!
18:47:28 <sjanssen> I see you're talking about me on haskell-cafe ;)
18:47:43 <dons> hehe. motivation!
18:48:41 <dons> how's the code going?
18:49:30 <sjanssen> good, pushed a few patches
18:49:34 <dons> cool.
18:49:38 * dons pulls
18:54:02 <dons> ah, thanks for the progress report
18:54:10 <dons> looks good
19:07:02 <bringert> @seen shapr
19:07:02 <lambdabot> I saw shapr leaving #haskell 6 days, 15 hours, 17 minutes and 46 seconds ago, and .
19:07:13 <bringert> I wonder how his move is going
19:09:34 <dons> can anyone connect to http://iki.fi/vegai/tmp/fps-and-lambdabot40.txt
19:13:31 <joe_k> dons: no
19:13:58 <joe_k> it redirects to http://chat.ravissant.net:5/tmp/fps-and-lambdabot40.txt and times out
19:15:50 <dons> @tell vegai can't get to http://iki.fi/vegai/tmp/fps-and-lambdabot40.txt. can you repost?
19:15:51 <lambdabot> Consider it noted.
19:16:03 <dons> thanks joe_k 
19:25:29 <dons> Lemmih: ChilliX has confirmed to me that he submitted the review on time.
19:57:39 <lispy> what is an example of the IO monad being lazy but sequenced
19:58:13 * lispy is trying to help largos understand the laziness with the IO monad
19:59:55 <lispy> outside of the IO monad I can do things like this to demonstrate laziness
19:59:59 <lispy> > length [[1..]]
20:00:00 <lambdabot>  1
20:00:48 <dons> well, hGetContents?
20:01:23 <lispy> i'm not seeingit :)
20:01:49 <monochrom> The IO monad is fairly eager actually.
20:02:20 <lispy> well, and i sort of told my friend that, that the IO monad is only lazy about some things
20:02:45 <lispy> i know the IO monad is pretty complex internally but it seems like it should be somewhat simple in the interface...
20:03:08 <dons> well, its not that complex is it?
20:03:12 <monochrom> I can't think of one.  getContents is lazy yes, but also out-of-sequence.
20:03:34 <dons> you're just stringing together \world_token -> k world_token >>= \world' -> ... 
20:05:02 <Cale> lispy: basically, the IO monad is strict, but there are a few IO actions which produce lazy IO results, getContents and readFile primarily
20:05:07 <lispy> okay, but how do i know when the IO monad will be strict and when it will be lazy?
20:05:23 <Cale> the monad itself is strict
20:05:29 <lispy> i see
20:05:41 <Cale> getContents returns a list which when evaluated, does the actual IO
20:05:50 <Cale> which is cheating, but often convenient
20:06:10 <lispy> is there a strict version of getContents?
20:06:11 <dons> lispy, you're going to be on the lookout for unsafeInterleaveIO
20:06:25 <dons> lispy: yep, slurpFile, Data.ByteString.getContents, hGetBuf
20:06:29 <dons> a few others
20:06:38 <Cale> yeah, unsafeInterleaveIO is the primitive in GHC which allows for this
20:06:55 <lispy> i see...
20:07:12 <dons> unsafeInterleaveIO (IO m)
20:07:12 <dons>   = IO ( \ s -> let
20:07:12 <dons>            r = case m s of (# _, res #) -> res
20:07:12 <dons>         in
20:07:12 <dons>         (# s, r #))
20:07:15 <monochrom> the "unsafe" name tries to remind you that it's a hack.
20:07:16 <Cale> You can also find strict implementations on the mailing lists... Simon Marlow did a nice one a while back
20:07:39 <monochrom> or perhaps I should say a backdoor.
20:08:02 <dons> not the thunk allocated (the let) that will suspend the current action until it is demanded
20:08:19 <dons> so its not so much of a hack, as an interesting interplay between case and let
20:08:23 <Cale> @type System.IO.Unsafe.unsafeInterleaveIO
20:08:25 <lambdabot> forall a. IO a -> IO a
20:08:36 <dons> s/not/note/
20:09:05 <Cale> You can use it to do rather unsafe things, though it's not quite as bad as unsafePerformIO
20:09:24 <dons> in particular, you can end up with interleaved reads on the same file
20:09:27 <dons> which isn't so good
20:09:43 <dons> since the order of the reads will be determined by how the data is demanded
20:09:53 <dons> hence all the stuff with semi-closed file handles
20:09:54 <lispy> ah
20:10:49 <Cale> but for the most part, you can treat the IO monad as strict
20:10:52 <lispy> i think where my friend was going was, if everything is wrappened in a top level IO monad, what does laziness buy you in practice?
20:11:13 <Cale> oh, all the rest of computation is done lazily
20:11:19 <Cale> For example,
20:11:26 <lispy> i said 1) transformations 2) elegance when writing code
20:11:44 <dons> yeah, and you still get lazy io, so you get better complexity (particularly space-wise)
20:11:45 <monochrom> main = print (head [1..])  -- this is one
20:12:12 <dons> where a strict program would use O(n) space, the lazy one has O(1) heap usage.
20:12:26 <dons> that's the trick behind cat and Data.ByteString.Lazy, for example
20:12:34 <Cale> Well, you can get some input from your user and then define a bunch of lazily computed values based on it, and then just print the parts you're interested in
20:12:51 <Cale> even if you defined an infinite data structure
20:13:07 <lispy> dons: you saying that reminds me that i found at work today that my hardwork getting COM working may be wasted...i may be using C++ for this project :(
20:13:13 <dons> lispy: yeah, maybe your firend didn't see how IO on the outer layer doesn't infect the internals of your program
20:13:30 <lispy> dons: yeah, i wondered about that too
20:14:11 <monochrom> Computer time is not all spent on IO actions.
20:14:41 <monochrom> If you have "print (f x)" much time is spent on "f x", no IO.
20:15:43 <lispy> this is a good discussion for me to be having, but i just realized i need to get going
20:15:45 <lispy> thanks!
20:21:10 <dons> Cale: did i see in the logs you were listening to Gotan Project?
20:21:50 <Cale> hm?
20:22:05 <dons> maybe i'm dreaming. /me checks the logs again
20:22:24 <Cale> I mentioned that I was listening to Chunga's Revenge :)
20:23:52 <dons> ah, yes. frank zappa appears on a gotan project album doing chunga's revenge. they're an argentinian electronica thingy band
20:23:55 <dons> $ ls Gotan_Project-La_revancha_del_tango 
20:23:56 <dons> 03.Chungas_revenge.mp3 
20:23:58 <dons> 01.Queremos_paz.mp3                                06.Una_musica_brutal.mp3
20:24:01 <dons> 02.poca.mp3                                       07.El_capitalismo_foraneo.mp3
20:24:08 <Cale> ah
20:24:43 <Cale> I was listening to the actual album entitled Chunga's Revenge
20:24:52 <dons> yep.
20:28:34 <dons> cmarcelo, audreyt, in case you didn't see the commit. Data.ByteString in ghc is now in sync with the darcs version of fps
20:38:27 <dons> patches looking good sjanssen. good stuff
20:38:42 <sjanssen> thanks
20:40:01 <dons> so where do things go now? what's the plan for this week?
20:41:08 <sjanssen> starting the Unicode stuff, methinks
20:41:56 <dons> oh, that' a good idea. the DummyStringable module  useful for QC testing.
20:41:56 <dons> yes, unicode. that needs to be tackled
20:42:47 <dons> what are you thinking, a Word16 or Word32 version of ByteString? 
20:43:00 <dons> in the style of SimonM's packedstring
20:43:25 <dons> also, did you have a look at the Jhc unicode string type?
20:43:48 <bringert> Word16 would land you in the same place as Java, where chars are 16-bit but there are two-char characters
20:43:49 <sjanssen> I think Word32 is the way to go, but I've been back and forth more times than I can count
20:44:00 <bringert> which gets messy
20:44:33 <dons> right. i think Word32 is reasonable. since we already have Char as 32 bits
20:44:38 <sjanssen> bringert: if I go the 16-bit route, the double character stuff will be hidden from the user
20:44:41 <dons> even Char itself might be a reasonable choice.
20:45:04 <sjanssen> hmm, is Char an instance of Storable?
20:45:13 <dons> probably as a CChar though
20:45:20 <dons> so truncated
20:45:58 <dons> good to see the QC properties have gone in. did they help?
20:46:06 <dons> you caught a bug in replicate?
20:46:13 <sjanssen> yeah, caught two bugs
20:46:21 <dons> any in Data.ByteString?
20:46:23 <monochrom> Char is Storable
20:46:29 <sjanssen> no, just in my code
20:46:34 <bringert> there seems to be a CWchar btw: http://www.haskell.org/ghc/docs/latest/html/libraries/base/Foreign-C-Types.html#t%3ACWchar
20:46:54 <dons> STORABLE(Char,SIZEOF_INT32,ALIGNMENT_INT32,
20:46:55 <dons>      readWideCharOffPtr,writeWideCharOffPtr)
20:47:46 <sjanssen> now, I need to figure out whether that's a GHCism or not
20:48:06 <dons> i think it might be a good idea not to trust it to be portable.
20:48:15 <dons> so Word32 
20:48:20 <dons> sjanssen: do you have hugs installed?
20:48:34 <dons> since your properties should be checkable with 'runhugs -98 Properties.hs'
20:49:12 <dons> having hugs installed helps to keep the code quality high I find -- you don't accidentally dip into unportable imports or cpp
20:52:00 <dons> @tell malcolm for even higher bytestring performance you might consider ghc 6.5 -- the representation is much optimised there, you could expected 2x speed up in some bytestring functions
20:52:00 <lambdabot> Consider it noted.
20:52:30 <dgoldsmith> I have to run, but one thing to remember about Unicode is that what the user thinks of as a character - a grapheme - can be more than one Unicode code point.
20:52:54 <dgoldsmith> If you have to deal with that, it's not a big deal to handle surrogate pairs.
20:53:14 <dgoldsmith> However, I agree that if Char is already 32 bits, everything else should agree with that.
20:53:51 <dgoldsmith> I'll be back later and check the discussion...
20:53:54 <sjanssen> dgoldsmith: I think that should be handled at a higher level . . . but perhaps not
20:55:24 <dons> sjanssen: a work colleague recommended looking at how C++ does this stuff. apparently they do locale and similar well
21:04:01 <falconair> i recently read that GHC 6.6 will have GHC itself as a library, what exactly does that mean? The compiler will be available to end programmers?   data structures for abstract syntax will be available?
21:04:24 <dons> yep
21:04:36 <dons> as well as the typechecker, interpreter and code generator
21:04:45 <dons> + the parser and lexer, of course
21:07:00 <falconair> wow, is there an ETA on when it might be released (the wiki says it will be out before...two months ago)
21:07:56 <dons> well, in a few months
21:09:18 <sjanssen> dons: how big of a win is the fusion stuff in ByteString?
21:09:58 <dons> let me find the graphs.
21:10:02 <dons> hint: big
21:10:13 <sjanssen> another argument for Word32 is that fusion works the same as normal ByteString
21:10:22 <dons> yeah
21:10:30 <dons> we do want that.
21:11:20 <sjanssen> I can't imagine fusion with a variable length encoding, that'd have to be a huge headache
21:11:23 <dons> i gave a lecture on the whole fps system a couple of weeks ago to an adv. func. prog class, the slides from that lecture are here: http://www.cse.unsw.edu.au/~dons/talks/fusion-talk.ps.gz
21:11:47 <dons> sjanssen: right. i'm not sure it would be easily done. certainly it would need a different system.
21:11:52 <sjanssen> neat, maybe I can learn this stuff now
21:11:56 <dons> so that's a good argument to avoid variable lengthed encodings
21:14:52 <dons> let me know if you have any questions about the slides.
21:34:29 <falconair> I'm trying to download source code lambdabot so I can see how its lambda calculus interpreters work...but the website keeps hanging...is there a problem with the server?
21:35:02 <audreyt> it's just executing the diverge function
21:35:10 <audreyt> that's what makes it functional
21:36:01 <audreyt> (but, seriously, darcs get --partial http://www.cse.unsw.edu.au/~dons/lambdabot works for me.)
21:36:01 <lambdabot> Title: "Index of /~dons/lambdabot"
21:36:45 <dons_> hmm. maybe there is something wrong with the network? that was odd
21:37:32 <dons> falconair: try again now. maybe the network here had a wibble
21:38:13 <falconair> i don't have darcs, beceause I don't have GHC, I don't have GHC because darwinports doesn't let me install GHC on intel os x machines :)
21:38:27 <falconair> dons: i see it now, thanks
21:39:36 <lispy> falconair: i thought rosetta could save you from that
21:40:50 <pimaniac> the static ppc darcs works on intel os x
21:41:48 <falconair> lispy: when ever I try to install, it looks like it see that I have intel  and specifically tells me that the intel version is not available...I don't know how to force darwinports to just give me the ppc version and let rosetta translate it for me
21:41:56 <sjanssen> falconair: have you tried the GHC builds on the trac wiki
21:42:32 <falconair> sjanssen, are you referring to binaries?
21:42:46 <sjanssen> I installed one of those builds, and whenever I try to install a port that depends on GHC, I just hack the portfile
21:42:49 <sjanssen> falconair: yeah
21:44:12 <falconair> sjanssen: i didn't do that, i was hoping that i could let darwinports do its job, (i was trying to avoid messing with port files)...not only am I new to haskell, i'm new to mac as well...i'm trying to keep things as clean as possible right now :)
21:45:26 <sjanssen> falconair: I'm new to Macs as well, and I'll admit it took a little wrestling to get GHC installed, but it's work very well now
21:46:50 <falconair> are you using the 6.4.? version or development code for 6.6?
21:47:26 <sjanssen> development
21:48:06 <sjanssen> I haven't seen 6.4 builds for OS X/Intel
21:48:13 <lambda_the_insig> (potentially) dumb question: is it possible to write a function `isBot :: a -> Bool' which evaluates to true if the provided argument is undefined?  i.e., isBot undefined -> True; isBot _ -> False
21:48:41 <lambda_the_insig> from what I understand, examining the argument in any way would evaluate the argument, whcih would terminate teh computation.
21:48:49 <falconair> sjanssen: that's cool, there are a couple of things in 6.6 which will really help me out, GHC trac wiki you say?
21:48:51 <sjanssen> lambda_the_insig: not really possible
21:48:54 <Cale> lambda_the_insig: largely, no, though there is a way to cheat
21:49:06 <sjanssen> falconair: http://hackage.haskell.org/trac/ghc/wiki/X86OSXGhc
21:49:07 <lambdabot> Title: "X86OSXGhc - GHC - Trac"
21:49:15 <Cale> lambda_the_insig: if the bottom is of a particular form, and you don't mind messing with the runtime system :)
21:49:19 <sjanssen> falconair: the first tarball
21:49:29 <Cale> lambda_the_insig: of course, you can't catch nontermination
21:49:54 <dons> you could catch undefined though. so there's some cheating ways. 
21:50:22 <dons> but really, this is a halting problem, if you want undefinedness==divergence, of course
21:50:24 <sjanssen> you'd have to use unsafePerformIO to get the type you want
21:50:56 <dons> yeah, unsafePerformIO . handle (UndefinedException -> return True) a, roughly
21:51:26 <lambda_the_insig> neat; thanks.
21:51:30 <falconair> sjanssen: i'll try it out, it might even be worth providing a portfile for it...I know the Mozart/Oz system provides their own portfile which can be used from a local file system (still part of the darwinports infrastructure, but not hosted by darwinports.org)
21:51:36 <scsibug> dons: i didn't realize that there was a =<< operator until I looked at your presentation... i could have sworn it was incorrect until it type-checked
21:51:52 <dons> heh
21:52:10 <dons> ?remember scsibug i could have sworn it was incorrect until it type-checked
21:52:11 <lambdabot> Done.
22:03:20 <dgoldsmith> sjanssen: Yes, graphemes would normally be done at a higher level. The point I was trying to make is that with Unicode, there isn't much you *can* do at a per-code-point level. :-)
22:04:33 <dgoldsmith> ...so it doesn't much matter if you use UTF-16 instead. The only thing that is easier to do in UTF-32 is to get properties for individual characters. But that's normally something you do as part of higher-level processing, in which case handling surrogates is easy.
22:04:47 <dgoldsmith> ...relatively easy...
22:05:17 <dgoldsmith> In any case, if Haskell has a history of Char being 32 bit I don't know that I'd change it at this point. UTF-16 is just more space-efficient, is all.
22:06:04 <dgoldsmith> dons: I wouldn't recommend the C++ libraries as a model for Unicode/international handling. I would recommend looking at ICU instead. http://icu.sourceforge.net/
22:06:06 <lambdabot> Title: "ICU Homepage @ SourceForge.Net"
22:07:11 <dgoldsmith> ICU isn't necessarily a model for how to express a Unicode-handling API in a language like Haskell, but it is a good reference for the kinds of things that a Unicode/international API needs to support.
22:07:25 <dgoldsmith> It might be interesting to come up with a Haskell API for ICU.
22:28:18 <dons> ?uptime
22:28:19 <lambdabot> uptime: 1 day, 7 hours, 14 minutes and 29 seconds
22:28:57 <dons> thanks for the hints dgoldsmith, i'll check those links out.
22:49:13 <moonfish> anyone here familiar with haskelldb?
22:52:00 <urz> not me
22:55:02 <moonfish> nevermind. figured out what I was doing wrong.
23:02:27 <bringert> moonfish: I am
23:02:37 <bringert> moonfish: I am the current maintainer
23:03:03 <bringert> ah, you figured it out
23:03:32 <moonfish> bringert: yes. thanks for responding to my 'IN' question btw.
23:04:17 <bringert> moonfish: out of interest, what are you using it for?
23:05:40 <moonfish> we've got a time tracking application that stores data in a postgresql db, and I figured it would be fun constructing reports from it using haskelldb.
23:07:00 <moonfish> For the time being I've define _in as a function along the lines you suggested, rather than hacking haskelldb.
23:23:11 <lisppaste2> Ronald Mai pasted "Hake" at http://paste.lisp.org/display/22149
23:46:29 <lisppaste2> Ronald Mai annotated #22149 with "excluded class" at http://paste.lisp.org/display/22149#1
23:53:57 <norpan> win 32
23:54:05 <sieni> win 64
23:54:50 <norpan> what pastes are these
