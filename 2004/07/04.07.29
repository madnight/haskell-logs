00:32:58 <Lemmih> Good morning, #Haskell.
00:33:58 <polli> mornin' Lemmih 
01:14:20 <Fractal> Hmmm how would you guys write  getGoodLine :: IO (String)
01:14:55 <Fractal> which I want to keep getLining until it gets a string of form "<number> <l|r>"
01:15:05 <Fractal> like "10 l" for instance
01:41:49 <TheHunter> good morning, #haskell
01:55:53 <bringert> morning
02:04:11 <Marvin--> I'm putting so many ifdefs in this code that I'm going to go hang myself pretty soon
02:23:24 <norpan> ifdefs are evil
02:29:15 <Marvin--> yes
02:41:19 <Lemmih> Fractal: Check the IRC paste page.
03:42:43 <bourbaki> hi
06:22:46 <shapr> man I love unicycling.
06:23:10 * Marvin-- wonders if shapr has been replaced by a very small literal haskell script
06:23:13 <shapr> I bought a new tire today, I wore the tread off the old one.
06:23:14 * shapr grins
06:23:20 <thebug> haha
06:23:37 <SyntaxNinja> hihi
06:23:40 <shapr> two hours of unicycling today
06:23:42 <shapr> hiya SyntaxNinja 
06:23:52 <Philippa> fun
06:23:55 <SyntaxNinja> did you guys see my masterpieces: http://www.haskell.org/tmp/{cabal,wxhaskell}
06:24:22 * Philippa has so far spent today variously waking up, grabbing a delivery, handing a phonecall to my boyfriend and most importantly setting up a router
06:24:29 <Philippa> no more IRCing from my b/f's laptop
06:24:33 <shapr> hey, /tmp is 404
06:24:40 <Marvin--> SyntaxNinja: plenty 404
06:25:03 <SyntaxNinja> er
06:25:08 <SyntaxNinja> s/haskell/syntaxpolice
06:25:12 <shapr> I've lost seven kilos....
06:25:28 <SyntaxNinja> http://www.syntaxpolice.org/tmp/wxhaskell/
06:25:38 <shapr> oh, spiffy
06:25:40 <SyntaxNinja> http://www.syntaxpolice.org/tmp/cabal/
06:25:46 <Marvin--> SyntaxNinja: btw, you mustn't've read the haskell-policy very carefully
06:25:50 <shapr> wow!
06:25:57 <SyntaxNinja> making coffee, brb
06:25:58 <Marvin--> SyntaxNinja: it should be lib$impl-$cname-dev
06:26:05 <Marvin--> that is, libghc6-cabal-dev
06:26:15 <Marvin--> or possibly libghc6-cabal0.1-dev
06:27:15 <Igloo> DYM libghc6-cabal0.0.1-dev?
06:27:39 <Marvin--> oh, yes I do
06:27:40 * shapr wants libghc6.2.1-cabal0.0.1-haskell-spiffy-dev
06:27:49 <Marvin--> I didn't know we had a 0.0.1 version
06:27:59 <Igloo> But that's an ABI version, right? I don't think Debian packages should have ABI versions before cabal does
06:28:38 <Marvin--> honestly, I don't know
06:28:43 <Igloo> If it's a cabal version I think it should be libghc6-cabal-0.0.1-dev
06:28:46 <Igloo> Heh  :-)
06:28:53 <Marvin--> how much does ABI even make sense for the libs?
06:29:06 <Igloo> Oh, I meant to say API
06:29:10 <shapr> look! the Death Star! http://saturn.jpl.nasa.gov/cgi-bin/gs2.cgi?path=../multimedia/images/large-moons/images/PIA05423.jpg&type=image
06:29:43 <Marvin--> hahaha
06:30:51 <Marvin--> hmm, maybe I should put down API versioning in the TODO
06:32:48 <Marvin--> should we use libtool-style versioning or would a plain number be enough, y'think?
06:35:03 <Marvin--> hmm, multiple libraries in cabal packages, with separate api versions... that could be nifty
06:35:52 <Marvin--> SyntaxNinja: did you send that mail about dashes?
06:38:41 <Marvin--> "Windows XP-64 Delayed Into 2005"
06:38:48 <Marvin--> wonder if Windows or Debian will get there first ;)
06:38:57 <Marvin--> </flamebait>
06:39:01 <Igloo> The whole cabal package would need to have the API version as dependencies work on that level, no?
06:40:06 <Marvin--> hmm, I don't know, perhaps it's better to do it the debian way, putting the api version in the library name?
06:40:14 <SyntaxNinja> Marvin--: nope
06:40:27 <SyntaxNinja> OK I'll change the name of the package.
06:41:29 <SyntaxNinja> libghc6-haskell-cabal-dev
06:41:53 <Marvin--> SyntaxNinja: I don't think the name of the *binary* package needs to be haskell-cabal
06:42:05 <SyntaxNinja> you think it should just be cabal?
06:42:09 <SyntaxNinja> because the ghc6 makes that obvious?
06:42:14 <Marvin--> yeah
06:42:16 <Igloo> What's the cabal package called?
06:42:24 <Marvin--> Name: Cabal
06:42:30 <SyntaxNinja> so it's not libHSghc6-cabal-dev
06:42:44 <Igloo> I agree with libghc6-cabal-dev then
06:42:56 <Marvin--> or possibly libghc6-cabal-0.0.1-dev
06:43:11 <shapr> ITP: haskell-spiffy-dev
06:43:26 <Igloo> We shouldn't have cabal versions unless we want to allow simultaneous installation of multiple versions
06:44:36 <Igloo> It should install /usr/lib/haskell-libs/ghc-6.2.1/libHScabal.a or similar
06:45:35 <Igloo> Or /usr/lib/ghc-6.2.1/packages/libHScabal.a if that's what we think today, but I'd like the upstreams to agree to that if so
06:45:46 <Igloo> (agree to not use it themselves, that is)
06:46:36 <Igloo> Aaargg! I mean /usr/lib/haskell-libs/ghc-6.2.1/cabal-0.0.1/libHScabal.a or /usr/lib/ghc-6.2.1/packages/cabal-0.0.1/libHScabal.a
06:46:52 <Igloo> My brain hurts
06:47:19 <SyntaxNinja> Igloo: breath.
06:47:32 <norpan> that's because you are an igloo and you stand where it's very cold
06:48:21 <shapr> hei ibid 
06:49:39 <SyntaxNinja> brain freeze!
06:49:48 <shapr> yeek
06:49:50 <Marvin--> gnngh. cabal build-deps will seriously not work if we have multiple libraries with api versions in a single cabal package
06:50:03 <RussellOConnor> http://tinyurl.com/422v9
06:50:12 <RussellOConnor> Mimas and Death Star side by side.
06:50:30 <Igloo> You just put the API version on the cabal package, not the individual libraries
06:50:47 <Igloo> It will have the same effect regardless
06:50:53 <Marvin--> yeah
06:51:15 <Marvin--> but I wonder how it will interact with hc-pkg
06:51:38 <Igloo> If cpackage have hpackage1 and hpackage2, can I use hpackage1 from cpackage-1.0 and hpackage2 from cpackage-2.0? I think not if my memory of the way hiding libraries works
06:52:07 <Marvin--> I haven't understood library hiding yet
06:52:16 <Marvin--> the terminology overloading hurts my brain
06:54:06 * Marvin-- ponders how to do a run-time check for whether the 'unix' lib is available
06:54:26 <Marvin--> er, scratch that
06:55:02 <Marvin--> what I mean is, how can I, from a haskell program, detect whether the haskell compiler and platform has the unix lib?
06:55:05 <Marvin--> hc-pkg --something?
06:56:04 <shapr> hiya x1alpha 
06:56:09 <shapr> looking for Haskell info?
06:56:39 <x1alpha> errmm.. how did you guess ?
06:56:45 <Igloo> ghc-pkg -l and/or -L would do it for GHC
06:56:45 <shapr> just a random supposition
06:56:57 <x1alpha> yeah i am.
06:57:04 <shapr> how can I assist you?
06:57:09 <shapr> have you done any functional programming before?
06:57:12 <Igloo> Actually, ghc-pkg -s unix and look at $?
06:57:43 <shapr> x1alpha: the primary learning url is in the channel topic, but I can give you some other pointers if you want.
06:58:28 <Marvin--> for nhc it's simple, it only distributes base, and not even all of it :P
06:58:37 <Igloo> :-)
06:58:43 <x1alpha> http://www.haskell.org/learning.html seems broken
06:58:51 <Marvin--> I'm thinking I'm going to need to make cabal's Setup.lhs more complicated
06:58:58 <Igloo> have_you_got _ | compiler == NHC = ProbablyNot  :-)
06:59:01 <Marvin--> like checking for the presence of the unix package and define some macros based on it
06:59:02 <shapr> x1alpha: it works for me...
06:59:24 <x1alpha> ah okee double clcicked and irc client was fooled
06:59:28 <Igloo> If you can do without it, what do you do when you have it?
06:59:41 <Marvin--> better stuff
06:59:53 <Marvin--> like preserving time stamps when copying files
07:00:16 <Marvin--> Igloo: you should see my copyFile implementation
07:00:43 <SyntaxNinja> Marvin--: the unix package?
07:01:06 <SyntaxNinja> Marvin--: did you notice the email to libraries@ about copyFile?
07:01:15 <Marvin--> SyntaxNinja: yes, that's what I based the implementation on
07:01:23 <Marvin--> but I realized that nhc doesn't have openBinaryFile yet
07:01:28 <Marvin--> more ifdefs
07:03:37 <Marvin--> http://sjogren.ost.sgsnet.se:8080/static/CopyFile.hs
07:03:44 <Brandon__> Hi, shapr :)
07:03:48 <shapr> greetings Brandon__ 
07:03:50 <shapr> how's code?
07:04:30 <Brandon__> It's necessary for the guidance of the systems, thank you.
07:04:32 <Marvin--> I wonder if I should send in that code to some haskell-CAN-be-ugly contest
07:05:00 <shapr> heh
07:05:08 <shapr> speaking of which
07:05:12 <shapr> who're the IOHCC judges again?
07:05:20 <Marvin--> <shapr> speaking of which
07:05:23 <Marvin--> that hurt :-(
07:05:28 <shapr> wha?
07:05:41 <andersca> haha
07:05:44 <Marvin--> you're reminded of the IOHCC after looking at my code :-(
07:05:57 <shapr> I didn't look at your code! I was just thinking about a haskell-CAN-be-ugly contest
07:06:16 <SyntaxNinja> heresy!
07:06:24 <shapr> hearsay!
07:06:35 <shapr> SyntaxNinja: are you an IOHCC judge?
07:06:38 <shapr> er juror?
07:06:39 <Brandon__> eh
07:06:51 <SyntaxNinja> shapr: I think I'd better not ;)
07:06:53 <shapr> bringert: do you have time to do an IOHCC juror gig?
07:06:55 <shapr> SyntaxNinja: ok
07:06:58 <Brandon__> how's do lisp and haskell compare
07:07:22 <Brandon__> You see, I'm asking, but the answers include only a certain quality of experience
07:07:26 <shapr> the primary difference is that lisp is impure, and has better support for non-hygienic macros
07:07:38 <Brandon__> impure?
07:07:39 <shapr> plus Lisp has been around for forty years or so
07:07:53 <shapr> sure, Haskell is pure, like a function in your average math class
07:07:57 <shapr> lisp is impure, mutable
07:08:25 <shapr> Lisp is not statically typed in general, though there many compilers that make fast binaries.
07:08:26 <Brandon__> clearly defined?
07:08:41 <shapr> huh?
07:08:52 <Brandon__> I'm not sure about the difference between pure and impure
07:09:14 <shapr> you don't have 'variables' in Haskell
07:09:19 <shapr> you have single assignment constants
07:09:50 <shapr> with recursion, that works just fine
07:09:57 <SyntaxNinja> Igloo: do you have any docs on haskell-utils anywhere?
07:10:07 <SyntaxNinja> I need to fix up my post{inst,rm}scripts
07:10:16 <shapr> aha
07:10:27 <Igloo> Not more than the manpage. But for install libraries you shouldn't be using it
07:10:51 <Igloo> s/install/installing/
07:10:52 <Brandon__> I have to code filters into our messageboards site
07:11:05 <Brandon__> for both filtering incoming message's text to prevent people from saying bad things
07:11:21 <Brandon__> with some sort of levels settable by the individual messageboard (forum) admin...
07:11:23 <Igloo> Well, unless you care about the (hopefully) few days until I change the ghc packages
07:11:26 <Brandon__> (we have thousands of forums)
07:11:59 <Brandon__> we'll have a minimum requirement to prevent some stuff from going in.. not settable less than that by the admin
07:12:04 <SyntaxNinja> hm. Igloo no I don't care.
07:12:45 <Brandon__> so we've also gotta figure out a way to determine if content is too bad to go through at all
07:13:03 <Brandon__> as well as providing some nice other features, like censoring individual words
07:13:45 <Brandon__> so.. how would you maintain a list of profane words and make a sort of ranking for a bit of text?
07:14:07 <Brandon__> also, it must be a bit more complex than this.. some discussions are okay, but not in the context of some other things
07:14:29 <shapr> ranking words is pretty easy
07:14:36 <shapr> Brandon__: you want to write this in Haskell, right? :-)
07:14:55 <shapr> too many clients?
07:15:01 <Brandon__> for example, someone might have an adult conversation.. and unless it passes a threshhold on the profane scale, we might be more or less tolerant.. yet if it's in combination with discussions of children.. well.. now we have a problem
07:15:06 <Marvin--> SyntaxNinja: er, shouldn't that be prerm?
07:15:06 <Igloo> He probably means channels
07:15:17 <Brandon__> well, I'm asking out of an interest in Haskell
07:15:23 <Brandon__> otherwise, it's more practical for me to do it in C
07:15:28 <Brandon__> since the rest of the project is in C
07:15:41 <Brandon__> but if I can do it in Haskell in some way, and provide it callable by C.. maybe I'll do that
07:16:08 <Brandon__> there are two reasons for that, the first, and least probable, is that Haskell is simply so well-suited for the purpose that it *should* be done in Haskell
07:16:14 <SyntaxNinja> Marvin--: yeah.
07:16:27 <Brandon__> I don't know Haskell well enough for that to be determined by me.. but I have a feeling it's not true
07:16:32 <Brandon__> the second is for purposes of learning
07:16:37 <Marvin--> Brandon__: read up on the foreign function interface
07:16:38 <SyntaxNinja> I was up late doing this last night and didn't really care about registering...
07:16:50 <Brandon__> and the experience of coding some apps up is perhaps one of the BEST ways to learn a language
07:17:10 <Brandon__> much like attempting to speak a sentence, and being corrected, is an important way to learn a language
07:17:15 <shapr> yup
07:17:34 <Brandon__> with the listening alone, the brain is stimulated in a different way.. and it develops in a different way..
07:17:38 <Brandon__> the outbound connections aren't made yet
07:18:00 <Brandon__> nevertheless, I am not passing judgement on it--consider Einstein not speaking until he was 5 years old or so...
07:18:10 <shapr> and failing middle school math
07:18:20 <Igloo> I think the ghc packages should also ship a file in a standard place containing what packages should (build-)depend on
07:18:22 <shapr> iirc, his teachers despaired of him ever learning any math at all
07:18:42 <Igloo> And something will need to have a script to stick the build-dep in the right place
07:19:17 <shapr> is there an FFI demo of building a 'callable-from-C' Haskell program?
07:19:51 <Brandon__> well, let's pass on the practical aspect of this for now
07:19:56 <Brandon__> could always pipe the stuff through :)
07:19:58 <shapr> yup
07:20:12 <shapr> scoring individual words is pretty easy
07:20:12 <Brandon__> let's say I give it text, and it gives me a ranking in return..
07:20:31 <shapr> ok, how do you want it to work?
07:20:36 <shapr> bonjour Lukhas 
07:20:41 <shapr> comment √ßa va?
07:20:45 <Lukhas> salut shapr
07:20:50 <Brandon__> let's start with the most simple example.. let's say we have a text file with a list of words.. each word has a rank of badness
07:21:01 <Lukhas> Áa va, et toi ?
07:21:01 <Brandon__> 0 being it's a perfectly fine word.. 1 meaning it's a bad word
07:21:08 <Brandon__> 10 means it's really bad..
07:21:09 <shapr> pas mal :-)
07:21:23 <shapr> √ßa marche...
07:21:32 <shapr> I think that's how I say "it goes"
07:22:00 <Lukhas> Áa roule :)
07:22:14 <Lukhas> "Áa marche" is for "it works"
07:22:18 <shapr> aha
07:22:33 <shapr> well, maybe that's closer now that I think about it.
07:22:33 <shapr> je marche ;-)
07:23:04 <shapr> je sais, "ja travailler"
07:23:04 <shapr> um 'je'
07:23:11 <shapr> mais, les suedoise....
07:23:11 <shapr> mmm
07:23:13 <Lukhas> but if you're working, it's "je travaille"
07:23:15 <Lukhas> hehehe
07:23:30 <shapr> oh, I've forgotten how to conjugate verbs
07:23:33 <shapr> dang
07:23:51 <Lukhas> that's a 1st group verb, really easy :)
07:24:13 <Lukhas> je travaille, tu travailles, il/elle travaille, nous travaillons, vous travaillez, ils travaillent
07:24:17 <shapr> yes, but I haven't spoken any french since christmas in Lille
07:24:23 <Marvin--> meh, now I've forgotten what I was doing
07:25:03 <Marvin--> I'm seriously confused by the terminology overloading in cabal
07:25:18 <SyntaxNinja> Marvin--: ?
07:25:32 <shapr> Brandon__: you want the average score? how do you want to calculate the score?
07:25:37 <Marvin--> well, not only the terminology overloading
07:25:51 <Lunar^> shapr: That's not true !
07:25:59 <shapr> oh right!
07:26:05 <shapr> I spoke french at EuroHaskell!
07:26:14 <shapr> salut Lunar^!
07:27:33 <Marvin--> API versioning will have to be on cabal packages, rather than libraries.. should the API version then also be part of the package spec? Should we base the multiple-installed-versions on API version rather than package version?
07:27:41 <shapr> Lunar^: if you're stopping active development on hOp, can I get a copy of the latest repo?
07:28:00 <Marvin--> Should it be possible to have multiple *exposed* versions of a cpackage or just one exposed and the rest hidden?
07:28:09 <Lunar^> shapr: You have it
07:28:14 <shapr> oh!
07:28:14 <x1alpha> Do you use a specific IDE or just a text editor ?
07:28:21 <shapr> x1alpha: I use emacs, it's both
07:28:25 <Lukhas> hehe
07:28:27 <shapr> but you can use whatever you want
07:28:30 <Lukhas> Emacs rulez
07:28:30 <Lunar^> shapr: No progress at all since the EuroHaskell release
07:28:43 <shapr> ok, can I make that into publically accessible darcs repo?
07:28:47 <Lunar^> x1alpha: Although there is an Eclipse plugin
07:29:08 <Lunar^> shapr: sure, that's free software
07:29:12 <Igloo> multiple *exposed* versions of a cpackage would give you overlapping modules in general, no?
07:29:30 <shapr> ok, thanks
07:29:37 <Lemmih> x1alpha: KDevelop supports Haskell but it's very limited.
07:29:54 * Igloo needs to learn emacs in the next couple of weeks
07:30:03 <shapr> Heffalump: too many clients?
07:30:04 <x1alpha> Lemmih: i m not much of a linux user
07:30:07 <shapr> Igloo: it's easy!
07:30:37 <bringert> shapr: when is IOHCC?
07:30:46 <{Brandon}> sorry..  reconfigging router drops connections
07:30:46 <Igloo> shapr: Is there anything I should learn for epigram that won't be in a generic tutorial?
07:30:53 <Lemmih> x1alpha: I think Virtual Studio has a Haskell mode but I'm not sure.
07:30:55 <Heffalump> I was running the other client on urchin, using IPv6
07:30:58 <shapr> Igloo: not really
07:31:01 <Heffalump> this one is still on a machine in Oxford
07:31:10 <shapr> bringert: whenever?
07:31:11 <Marvin--> Igloo: hmm, true
07:31:32 <Igloo> OK, cool. Would you recommend any particular tutorial?
07:31:44 <Marvin--> Igloo: but does it make sense to base the "hiding" on api version rather than cabal version?
07:32:04 <shapr> I don't think you need to learn much emacs to use epigram
07:32:12 <Marvin--> otoh, you might need to depend on both api version and cabal version
07:32:22 <Marvin--> at least if api version works like a MAJOR
07:32:24 <shapr> like, you can probably get by with none at all
07:32:47 <shapr> bringert: if you tell me when you're available, I'll schedule it for that time
07:33:00 <x1alpha> WOW eclipse is quite a big downlod... i'll use a text editor
07:33:17 <bringert> shapr: IOHCC sounds like fun, though I probably won't get around to entering. what's the story re judging?
07:33:24 <thebug> vi's always handy <unless you use gentoo, where I've heard it's not in the base :/ >
07:33:26 <Igloo> shapr: If it's like the previous AFP then some emacs things will be the tsandard, so it would probably be useful to know how to do regexp replaces and stuff in it
07:33:31 <Brandon__> vim?  :)
07:33:54 <Lemmih> thebug: Say what?
07:34:08 <thebug> apparenly 'vi' is not in the gentoo standard base
07:34:17 <Igloo> Marvin--: I think you're suggesting getting rid of cabal versions altogether and introducing API versions instead
07:34:34 <Lemmih> thebug: I think it is.
07:34:41 <thebug> it's availble, but not included by default <this is just what I've heard ... I'm a rabid non-gentoo-user>
07:34:56 <shapr> bringert: well, if you want to be a juror you have to have the time to read the entries, play with them, and write down your conclusions about them
07:35:24 <shapr> then when all the jurors have come to a written conclusion about an entry, we get together on #iohcc and swap conclusions
07:35:28 <Igloo> Given my experience last time it shouldn't take that much time, but the jurors need to st themselves deadlines and stuck to them
07:35:38 <shapr> right, that's the only sticky part
07:35:42 <Lemmih> thebug: Included by default? Gentoo is an opt-in distribution.
07:36:16 <thebug> mmm ok, not sure what you mean by that, but vi is in the base install of any unixoid os I've ever seen
07:36:39 <shapr> this time I want to announce a judging deadline when I announce the submission deadline, and I want it to be one or two weeks.
07:36:55 <bringert> I've got full-time work + AFP04 and HW coming up, but it sounds like fun
07:37:25 <Marvin--> Igloo: nnno, not really, release versions are still useful
07:37:44 <shapr> last time each entry took an hour or so for me to completely absorb
07:38:16 <Marvin--> Igloo: a cpackage can contain more than a library, if the libraries don't change between releases, the api version shouldn't be changed
07:38:21 <SyntaxNinja> Marvin--: btw, ./setup build broke
07:38:26 <SyntaxNinja> ghc can't compile Compat.H98
07:38:28 <shapr> we only got about ten entries last time, would be nice if we get more.
07:38:31 <SyntaxNinja> (setup build for cabal only)
07:38:41 <Marvin--> SyntaxNinja: ghc shouldn't need Compat.H98...
07:38:45 <Marvin--> oh, frick
07:38:48 * Igloo giggles
07:38:52 <shapr> Marvin--: you a juror?
07:38:56 <Marvin--> shapr: I am?
07:39:00 <shapr> are you?
07:39:08 <Marvin--> I dunno, am I?
07:39:10 <shapr> I think Pseudonym agreed to be a juror.
07:39:12 <shapr> do you want to be?
07:39:18 <Marvin--> ("I dunno, dude, where's your car?")
07:39:22 * shapr grins
07:39:37 <Marvin--> yeah, sure, I could be a juror
07:39:41 <shapr> awright
07:39:41 * {Brandon} lets the possibly important jury conversation go uninterrupted
07:39:47 <Marvin--> though I seem to produce a lot of obfuscated code while hacking cabal
07:40:27 <shapr> {Brandon}: feel free to interrupt
07:40:32 <Marvin--> SyntaxNinja: this is the point where we need conditions in the Setup.description ;) or rather, Setup.lhs needs to modify the module list at runtime
07:41:24 <Marvin--> maybe it makes more sense to move the ifdef:ing into Compat.H98 rather than doing conditional importing
07:41:39 <Marvin--> yes, that makes more sense
07:41:44 * shapr bounces happily
07:41:55 <Igloo> Especially if it would let Distribution/ be ifdef-free
07:41:58 <shapr> ok, one more juror.... hmm
07:42:01 <SyntaxNinja> :)
07:42:16 <Marvin--> Igloo: HAH
07:42:24 <Igloo> :-)
07:42:24 <SyntaxNinja> Marvin--: I hope to eventually make the case that we should also allow the info to not be in the package description file, which is why there are 2 versions of defaultMain :)
07:42:36 <Marvin--> yes
07:43:18 <Igloo> Someone should set nhc up a BTS so you can report a few dozen bugs at them  :-)
07:43:31 <shapr> who's NHC maintainer anyway?
07:43:42 <Igloo> Malcolm Wallace
07:43:51 <shapr> is hbc still maintained?
07:43:52 <Marvin--> Igloo: the thing is, most of the "bugs" are along the lines of "nhc98 only supports h98"
07:44:06 <shapr> I want h04
07:44:07 <Igloo> Sven (I think) and/or Malcolm hacked on it a bit recently
07:44:35 <Igloo> Marvin--: Wishlist bugs...
07:44:40 <shapr> lessee... ghc, hugs, nhc, hbc, uhc...
07:44:47 * Igloo has a few wishlist bugs for hat too
07:44:55 <Marvin--> Igloo: I think they're quite aware of what kind of extensions are out there ;)
07:44:59 <Igloo> What's the status of uhc?
07:45:17 <Igloo> Marvin--: But I'm not so sure they know which ones people care about most
07:45:19 <shapr> I dunno, I heard it was getting closer to release.
07:45:26 <Igloo> Or how much they care about them
07:45:33 <Marvin--> oh damn, damn damn damn
07:45:35 <shapr> I also heard that uhc does some extra cool trix because of the UU Attribute Grammars
07:45:35 <Igloo> Is uhc just H98 or what?
07:45:42 <Marvin--> ./Compat/H98.hs:
07:45:42 <Marvin-->     unknown flags in  {-# OPTIONS #-} pragma: _COMPILE -prelude
07:45:55 <Marvin--> nhc98 needs OPTIONS_COMPILE -prelude
07:46:00 <Marvin--> ghc doesn't understand it
07:46:06 <Igloo> I think that's probably a GHC bug
07:46:09 <Marvin--> hell on earth ensues
07:46:13 <shapr> I know uhc started out as a simple preproc for GHC, and more bits have been rewritten as standalone
07:46:13 * Igloo goes to see what H98 says about pragma names
07:46:24 <Marvin--> does H98 say anything about pragmas *at all*?
07:46:29 <shapr> I think it's all about Swierstra exploring attribute grammars
07:46:46 <shapr> Lor said that UUAG were much cooler than Parsec for the same purposes, but I haven't gotten around to trying them.
07:46:49 <Igloo> http://www.haskell.org/onlinereport/pragmas.html
07:46:53 <Marvin--> huh, I'll be damned
07:47:07 <Igloo> Doesn't mention names. But still, I think GHC ought to look for whitespace after OPTIONS
07:47:35 <Marvin--> well it mentions INLINE, NOINLINE and SPECIALIZE
07:47:40 <Marvin--> yes, definitely should
07:47:56 <Igloo> And it ought to allow OPTIONS_GHC too
07:48:13 <Marvin--> how about more generically $impl:OPTIONS?
07:48:30 <Igloo> That's not more generic, it's just different
07:48:35 <Marvin--> well, yeah
07:48:39 <{Brandon}> a batholith from the cooling of a large resevoir of molten pragma
07:48:57 <Marvin--> I wonder what will happen if I ifdef around pragma comments...
07:48:58 <SyntaxNinja> new and improved cabal debian packages
07:49:00 * SyntaxNinja meeting &
07:49:07 <Igloo> Hurrah!
07:49:37 <Heffalump> in haskell-experimental?
07:49:43 <Marvin--> no, that won't work
07:49:57 * Marvin-- sobs
07:50:04 <Marvin--> maybe I should just give up on getting this to work in nhc
07:50:16 <Igloo> http://www.syntaxpolice.org/tmp/cabal/
07:52:05 <Marvin--> this is hurting me to my soul
07:52:42 <x1alpha> Is syntax highlight available with vim ?
07:52:53 <Marvin--> sure
07:54:13 <{Brandon}> vim's got good syntax highlighting support
07:56:06 <x1alpha> good :)
08:03:44 * Marvin-- giggles as he uses the nhc-built Setup to build cabal with ghc
08:13:24 <Jaggy__> bbl
08:22:51 <shapr> bringert: any word on the big lexicon?
08:24:15 <bringert> aarne is not here most days during the summer
08:24:34 <shapr> ok
08:25:09 <bringert> but if you send him an email, I think he'll try to fix it for you. I think it wasn't just some file sitting around, there was some, but not very much, work to be done with it
08:25:48 <shapr> ah, ok
08:26:41 <shapr> you think there'd be any license issues with using GF + WASH for teaching?
08:27:25 <bringert> but do email him, he has mentioned a few times that he really would like to put together a larger swedish package (big lexicon + grammar) for you
08:27:43 <andersca> boom
08:27:48 <shapr> spiffy :-)
08:27:50 <bringert> don't think so, seing how GF is GPL
08:27:52 <Marvin--> I don't see how build-depends could work properly without putting the api version in the package name
08:29:18 <Marvin--> well, I suppose build-depending on  foo-bar-3 >= 1.0  could be translated into build-depending on foo-bar, api version 3, version 1.0
08:32:34 <Igloo> If API versions are A.B where B is increased when things are added and A when things are changed, why would you ever want to build-dep on a version?
08:33:13 <Igloo> I've somewhat lost track of what these versions are versions of, incidentally
08:33:36 <Marvin--> me too
08:34:08 <Marvin--> because a certain version has bugfixes that didn't change the interface?
08:35:03 <Igloo> I don't think deps should be used to avoid bugs
08:35:39 <Marvin--> well, they are :-)
08:35:41 <Igloo> And if you really want to be able to do that you can bump B anyway
08:35:56 <Igloo> I have a feeling Debian recommends not doing so, for example, BICBW
08:35:57 <Marvin--> no, you don't have control over the libs you build-dep on
08:36:19 <Marvin--> shlibs files include versions
08:46:06 <shapr> hola jao 
08:46:23 <jao> hola shapr 
08:46:32 <shapr> ¬øcomo est as?
08:46:33 <Marvin--> otoh, that might be because the only interaction with major/minor is the major in the package name
08:46:47 <jao> shapr, bien :)
08:46:50 <Marvin--> so you can't depend on the minor in any other way than by version number
08:47:31 * jao is reading 'The Haskell Road to Logic, Maths and Programming'... very funny.
08:47:54 <Marvin--> Igloo: are you advocating that version == api version, or just that version should have no technical importance?
08:49:32 <shapr> oh, I'd like to read that too
08:49:37 <shapr> in my copious spare time
08:50:35 <Igloo> I'm trying to keep it simple
08:52:31 <Igloo> And I think that 1.2.3....8.9 style version numbers can be used to simulate the sort of (1.2, 3.4.5....8.9) you want
08:52:40 <jao> shapr, do it, recommended.
08:52:59 <shapr> man, I hope the debian amd64 ftpmaster problem gets fixed before I purchase an amd64 box.
08:53:00 <x1alpha> Whch is the ideal compiler for learning ?
08:53:06 <Marvin--> Igloo: I think that if there are two version fields and only one is used for dependencies, it'll be confusing
08:53:10 <shapr> x1alpha: I like GHC
08:53:40 <Igloo> I'm advocating only 1 version field, with it being recommended the version be of the form Maj.Min.whatever.you.want
08:53:42 <shapr> the most recent bug report on glasgow-haskell-bugs@ is hysterical
08:54:14 <Igloo> shapr: It really makes almost no difference if you're going to download it off the 'net anyway
08:54:28 <Heffalump> shapr: :-)
08:54:45 <shapr> here's the original bug report - http://www.haskell.org//pipermail/glasgow-haskell-bugs/2004-July/004216.html
08:54:50 <shapr> the reply is the funny part
08:55:09 <Marvin--> Igloo: I really don't believe in restricting what you can do with a field called 'version'
08:55:45 <Heffalump> Elephants!
08:56:02 <shapr> Hunny!
08:56:04 <Heffalump> If there are no restrictions, I want elephants.
08:56:31 <Igloo> "it being recommended"
08:57:12 <Marvin--> but then you have absolutely nothing to base api version on
08:57:42 <Igloo> The users of a library depend on whatever is appropriate
08:59:38 <Marvin--> all I'm saying is that I want some form of api versioning that is as "reliable" as soname, but that's orthogonal to package version
09:00:04 <Marvin--> like it or not, a version that says "1.0" is interpreted in a certain way
09:05:24 <Nathell> hello
09:05:40 <Lemmih> hey
09:06:03 <Lemmih> Looking for Haskell info?
09:06:30 <Nathell> actually, yes
09:06:57 <Nathell> does anybody know whether there is a way of curses-like screen manipulation in Hugs?
09:07:45 <Igloo> Hmm, I have a curses binding, but it uses TH
09:08:04 <bringert> another way (not very portable though) is to print escape sequences
09:08:09 <Igloo> I should really hack it so it can dump the code out
09:08:39 <Nathell> what's TH? (yep, I'm a beginner)
09:09:18 <jao> template haskell?
09:09:19 <bringert> andersca and I have written a simple readline lib which does line editing that way
09:09:59 <Igloo> yes
09:10:01 <shapr> bah, HSQL wants odbc libs even with --disable-odbc
09:10:09 <Igloo> Have you seen MW's simple readline whatsit, bringert?
09:10:14 <bringert> shapr: hmm, that shouldn't happen
09:10:26 <shapr> maybe I need to autoreconf
09:10:32 <bringert> Igloo: not sure
09:10:33 * shapr tries it
09:10:47 <shapr> nope, same thing
09:10:57 <Igloo> http://www.haskell.org/ghc/docs/latest/html/libraries/readline/System.Console.SimpleLineEditor.html
09:11:36 <bringert> shapr: maybe try without any configure flags
09:11:41 <shapr> oh weird, it works fine if I *leave out* the --disable-odbc
09:12:01 <bringert> I seem to remember something about that
09:12:12 <bringert> all the backends are disabled by default
09:12:26 <bringert> but of course --disable-odbc shouldn't enable them
09:12:38 <bringert> which hsql version is that?
09:13:32 <bringert> Igloo: do you know how it does the readline emulation if there is no readline?
09:13:43 <shapr> bringert: latest cvs
09:13:48 <bringert> hmm, ok
09:13:59 <bringert> I have write access to HSQL, should fix that
09:14:19 <bringert> Igloo: ours does history and tab completion too
09:14:29 <bringert> maybe we should merge them
09:15:07 <Igloo> Is there a reason not to just wrap editline?
09:15:21 <bringert> what's that?
09:15:36 <Igloo> Oh, I don't know how easy/ugly tab completion would be if you did that (I've never looked at editline)
09:15:44 <Igloo> It'sa BSD-licenced readline-a-like
09:16:00 <bringert> in C?
09:16:04 <Igloo> Yes
09:16:13 <bringert> why not just use readline then?
09:16:19 <Igloo> Because it's GPLed
09:17:15 <bringert> oh, so the haskell readline package is GPLed too?
09:17:46 <Igloo> I can't remember what happened with all that
09:18:37 <bringert> hmm, not sure I think using the GPL for libraries is that great
09:19:11 <bringert> there is a reason for there being a an LGPL
09:19:38 <Igloo> When you write the library, you get to choose the licence  :-)
09:19:58 <bringert> :)
09:20:00 <Igloo> And the reason is pragmatics. Did you know the first L is now Lesser?
09:20:14 <bringert> yeah, I've seen taht
09:20:34 <bringert> why is it pragmatic? seems more dogmatic to me
09:20:50 <bringert> but of course the author gets to decide
09:21:02 <Igloo> Because GNU wouldn't have flown if everything had been GPLed
09:21:52 <bringert> oh, sorry, what did you mean was because of pragmatic reasons?
09:22:05 <Igloo> "there is a reason for there being a an LGPL"
09:22:40 <bringert> ah, ok, thought you where talking about why people did *not* want to use the LGPL for libs
09:23:22 <bringert> sure, in the GNU vision of an all GNU system, there is no need for LGPLed stuff
09:24:21 <bringert> but I think that BSD-licensed (and maybe even others) have their place
09:24:36 <bringert> not that the FSF has to care about that
09:25:18 <bringert> and I don't really follow this philosophy either, I think I have written some GPLed libraries myself
09:26:41 * bringert is wearing his EuroHaskell t-shirt, btw. 
09:26:53 <bringert> we need to start planning for next year :)
09:32:08 <bringert> shapr: the HSQL thing is a pretty simple fix, but it's autoconf stuff
09:32:10 <bringert> yikes
09:42:44 <Lemmih> Nathell: I think ginsu uses a port of curses.
09:47:15 <bringert> shapr: fixed the bug in HSQL CVS
09:50:35 <Nathell> Lemmih: thanks, I'll check it out
09:53:07 <shapr> yay!
10:00:17 * stepcut reads about tying the the knot
10:00:51 <shapr> >>= bindage?
10:01:00 <stepcut> http://www.mail-archive.com/haskell%40haskell.org/msg10687.html
10:04:39 <shapr> Marvin--, bringert, stepcut: how about I announce IOHCC on Saturday, and submission ends at the end of august?
10:05:01 <shapr> I'll also put up a new IOHCC webpage
10:05:30 <bringert> when would the judging deadline be?
10:06:57 <shapr> either one or two weeks after, depending on whether we think we can get it done in a week.
10:07:52 <stepcut>  shapr: I will be pretty busy the first two weeks of sept, so two weeks would be better than one for me
10:07:56 <shapr> ok
10:08:46 * stepcut goes to lunch
10:08:51 <Marvin--> shapr: works for me
10:08:53 <shapr> two weeks sounds good to me
10:08:54 * Marvin-- goes to dinner
10:09:16 <shapr> oh I'll ask Pseudonym about the mailing list
10:20:23 <bringert> shapr: sounds good
10:20:35 <shapr> excellent
10:20:56 <bringert> so it would be done before icfp then
10:20:58 <shapr> I'll announce on Saturday, judging deadline is two weeks after the end of August
10:21:35 <bringert> would that be the same as two weeks into september?
10:21:54 * shapr checks to see if september comes after august
10:21:56 <bringert> will it be samoan time?
10:22:00 <shapr> ah, so it does.
10:22:11 <shapr> yes, that would be two weeks into september.
10:24:08 <bringert> what will the categories be?
10:24:20 <shapr> I assume the same as last time?
10:26:41 <bringert> looking at the old page, looks good to me
10:43:33 <shapr> aFlag: what kind of flag today?
10:44:11 <aFlag> hi, hum... i'm thinking a white one with black stripes :D
10:44:23 <shapr> heh, neat!
10:45:17 <aFlag> it's the soccer team that i support colors, and it's playing today :P
10:45:23 <shapr> spiffy!
10:49:00 <aFlag> i like python
10:49:11 <shapr> me too, it's a nice language.
10:49:24 <SamB> yeah, I just noticed him in #python ;-)
10:49:28 <shapr> I do get frustrated with it though.
10:50:11 <SamB> I want a cross between Python and Haskell
10:50:18 <shapr> yah, I could go for that.
10:50:30 <shapr> or at least more libraries for Haskell
10:50:30 <aFlag> why do you get frustrated shapr?
10:50:48 <shapr> mostly because I work on Zope, and it's massively stateful.
10:51:24 <SamB> well, sometimes you just don't want to write pure code or worry about typing...
10:52:16 <shapr> Like yesterday, I tried to fix some multilingual cataloging code. Problem is, the results are not actually returned, different parts are set in multiple places. So, I fixed the KeyError, but I still get the number of results returned in *any* language, even when zero results are listed.
10:52:17 <Philippa> I find the monad libs with GHC help with that somewhat
10:53:02 <shapr> if it were Haskell code, I'd know that there's only one 'return' point, since the function evaluates to a single result.
10:53:38 <shapr> also, I wish for partial application, multi-line lambdas, lazy pipelines, and some other features in Haskell
10:53:41 <shapr> oh, unlimited recursion.
10:53:50 <shapr> I tend to blow the recursion stack in Python on a regular basis.
10:55:24 <stepcut> be nice if emacs had unlimited recursion :(
10:55:28 <shapr> yup
10:55:41 <aFlag> i don't usually do much recursion, i'm getting better with it now that i'm learning haskell though
10:56:28 <stepcut> on the otherhand, I am currently implementing a language that has no recursion or looping constructs :p
10:56:49 <aFlag> what language is that?
10:56:54 <stepcut> xl
10:57:18 <aFlag> cool, well, i'm going to the movies, see you guys
10:57:20 <shapr> cya
10:57:23 <aFlag> cya SamB
10:57:37 <SamB> cya
11:05:23 <thebug> hehe MountainDew.hs
11:05:40 * shapr snickers
11:06:19 <shapr> thebug: you want to work on some of those TODO items? ;-)
11:06:47 <shapr> hiya Si\ 
11:07:05 <thebug> they sound pretty easy
11:07:46 <thebug> just needs an AI for the truckdriver, a GPS unit, and a truck so it just gets sa truckload of the items and delivers them directly
11:08:02 * Igloo wonders what I'm missing
11:08:17 <thebug> http://kungens.kemi.fi/~shae/src/haskell/MountainDew.hs
11:08:50 <shapr> how'd you find that anyway?
11:09:06 <thebug> was messing around with the Wiki and saw a link to your stuff
11:09:13 <shapr> ah, neat
11:09:18 <thebug> or your homepage or something, I don't remember :)
11:09:19 <shapr> the new link should be to www.scannedinavian.org
11:09:23 * shapr fixes
11:09:39 <thebug> there doesn't appear to be anything at scannedinavian.org
11:09:50 <shapr> http://www.scannedinavian.org/~shae/
11:09:58 <thebug> <and your link is broken>
11:10:03 <Si\> shapr: Hi
11:10:17 <shapr> which link?
11:10:19 <shapr> oh that link
11:10:33 * shapr fixes more
11:10:36 <Igloo> I think you might just get a bulk discount on that much...
11:10:38 <thebug> anyway, interesting to just read code :)
11:10:51 <thebug> Igloo: that sounds like a new TODO item ...
11:11:00 <shapr> heh, calculate bulk discount
11:16:30 <thebug> apparently Francis Crick <from Crick & Watson, the DNA guys> died last night
11:16:44 <shapr> greetings Sherine, looking for Haskell info?
11:17:22 <RussellOConnor> shapr is so nice.
11:17:28 <Sherine> :) yeah
11:17:36 * shapr bounces nicely
11:22:10 <lament> hi
11:22:20 <shapr> hiya lament, wassup?
11:22:29 <lament> Is there a nice short list of what makes Haskell cool?
11:22:31 <lament> not much really
11:22:45 <shapr> http://www.haskell.org/complex/why_does_haskell_matter.html
11:23:55 <lament> thanks
11:24:04 <shapr> Sherine[LB]: have been here before?
11:24:15 <Sherine[LB]> no :)
11:24:21 <lament> btw it's funny that a haskell site should use MoinMoin :)
11:24:22 <shapr> would you like to learn Haskell?
11:24:42 <RussellOConnor> LB?
11:24:55 <shapr> lament: actually, it makes a lot of sense... MoinMoin works nicely, handles unicode etc, and has a nice api for plugins
11:25:02 <Sherine[LB]> franchement , je sais rien a propos de ces channel :S:S
11:25:13 <shapr> quelle dommage
11:25:18 <lament> shapr: yes, but guess which language it's written in!
11:25:22 <shapr> Python!
11:25:25 <lament> :)
11:25:28 <shapr> I know because I've hacked on MoinMoin lots.
11:25:54 <shapr> I pushed hard to get MoinMoin on haskell.org, we had PikiPiki before.
11:25:55 <Smerdyakov> lament, why is that funny?
11:26:03 <Sherine[LB]> Bon koi shapr tu parles francais??:D
11:26:13 <shapr> I'm also the wiki maintainer, so if you want to start up a haskell wiki project, I'd be thrilled.
11:26:37 <thebug> shapr: you could run it on mod_haskell :)
11:26:53 <shapr> non, je ne parle pas francais! je suis american! nous ne parlons jamais les autres langues! 
11:27:01 <shapr> or something like thta
11:27:04 <thebug> uh
11:27:06 <shapr> Sherine[LB]: talar du svenska?
11:27:23 <Sherine[LB]> hein j'ai rien compris
11:27:27 <Sherine[LB]> sois clair SVP
11:27:28 <RussellOConnor> Anyone have a opinion of TWiki vs MoinMoin.  ... I'm entirely pleased with TWiki, but I'm not sure anything would be better. ... This might be the wrong place to ask. *l*
11:27:43 <thebug> shapr: wrong and bad
11:27:45 <SamB> TWiki is written in what?
11:27:55 <RussellOConnor> TWiki is written in Perl.
11:27:55 <thebug> hehe
11:28:03 <shapr> from a user perspective, TWiki feels too big
11:28:07 <SamB> I would go with MoinMoin for sure
11:28:08 <shapr> that's just my opinion though
11:28:27 <SamB> If something went wrong, I'd like to think I might possibly be able to fix it ;-)
11:28:28 <shapr> I think MoinMoin has the right balance between a simple codebase and a decent plugin API
11:28:36 <lament> i wish moinomin didn't have that horrendous default logo in the corner
11:28:40 <shapr> thebug: what, my french?
11:28:43 <lament> it makes me distrust the whole project
11:28:52 <shapr> I think Juergen drew that logo himself.
11:28:54 <RussellOConnor> That ugly TWiki guy?
11:29:01 <thebug> shapr: it's not bad french, the part about americans not speaking other languages :)
11:29:05 <shapr> oh right
11:29:14 <SamB> lament: what do you want it to default to? a lambda?
11:29:15 <shapr> well, I can speak Southern.
11:29:17 <Riastradh> There are languages besides English?
11:29:21 <lament> SamB: yes! :)
11:29:27 <thebug> I speak French, and German is on my list of things to learn :)
11:29:36 <SamB> lament: have you suggested this?
11:29:37 <lament> Riastradh: Yes. Ebonics.
11:29:37 <shapr> ich habe keine ahnung!
11:29:45 <shapr> I speak ebonics too.
11:29:49 <shapr> y0 h0m3y
11:29:49 <thebug> heh
11:29:51 <shapr> wait, that was leet
11:30:01 <thebug> I speak one line of swedish
11:30:03 <shapr> LOL, nm, a/s/l?
11:30:08 * shapr smacks himself
11:30:10 <thebug> 'shapr vill ha kattmatt'
11:30:12 <shapr> that was n00b
11:30:16 <thebug> that's about it
11:30:20 <shapr> um
11:30:26 <SamB> that is unleet, leet's close cousin
11:30:27 <thebug> something about eating cat food
11:30:37 <shapr> only if a can of tuna qualifies as cat food.
11:30:54 <shapr> jag vill inte ha den kattmatt som vi k√∂per f√∂r v√•ra katter.
11:31:10 <thebug> of course, that's exactly what I was thinking (?)
11:31:10 <SamB> shapr: well, cats think so.
11:31:22 <shapr> kanse det kostar mer an min mat, men det betyder inte att jag trivs med det.
11:31:43 <shapr> tuna is good food.
11:31:55 <shapr> Sherine[LB]: so, wanna learn Haskell?
11:32:16 <Sherine[LB]> yeahh , why not
11:32:21 <shapr> great!
11:32:37 <shapr> here's the place to start: http://www.haskell.org/learning.html
11:32:52 <shapr> I'd suggest using GHC for your compiler and interpreter.
11:32:57 <shapr> do you use vim or emacs?
11:33:48 <Sherine[LB]> wait a second :)
11:34:41 <shapr> here in #haskell we have the Church of the Lambda, since we have the Lambda of Church.
11:35:05 <shapr> that guy was all about separating Church and State
11:35:26 * Riastradh emits an inhumanly miserable groan.
11:35:30 <shapr> :-)
11:35:42 <thebug> state of haskell
11:36:17 <shapr> Igloo: how do I add a dir to the EXCLUDES= part of the lambdabot Makefile?
11:36:44 <Igloo> I have no idea
11:36:46 <Igloo> darcs URL?
11:37:46 <Fractal> Ahaha shapr
11:37:59 <shapr> greetz Fractal, wassup?
11:38:08 <Fractal> Not much, not much
11:38:23 <shapr> any cool code lately?
11:38:28 <Fractal> Well
11:38:32 <stepcut> bash 3.0!! sweet! 
11:38:45 <Fractal> I've written an alpha-beta minimax game tree search function in haskell
11:38:49 <shapr> oh neat
11:38:51 <Fractal> It plays a wicked game of tic tac toe :)
11:39:00 <Fractal> Also, I've got it playing dominoes
11:39:00 <Igloo> Is it? So far I've heard of a couple of regressions and no new features, but I haven't looked
11:39:04 <Fractal> Beats me most of the time
11:39:14 <SamB> there is no such thing as a wicked game of tic-tac-toe
11:39:20 <SamB> unless you break the rules
11:39:27 <thebug> shapr: mind a /msg ?
11:39:32 <Fractal> Well I mean that it plays TTT perfectly
11:40:01 <shapr> Igloo: http://www.scannedinavian.org/cgi-bin/darcs?hlibs*./lambdabot/Makefile*20040314184512-03db8-cc435a1fc4c1c0a37837f5a23249a86eea289a35.gz*./lambdabot/Makefile*20030801174734-03db8-e440db80827b78fb0ab5d0a3fa87fda99d615acd.gz
11:40:02 <Fractal> TTT was a good game to start on because the static evaluation is trivial
11:40:05 <shapr> thebug: sure
11:40:09 <shapr> er, yes, it's okay
11:40:28 <Igloo> Not quite what I meant, but hey  :-)
11:42:06 <Fractal> www.hcsw.org/haskell/TTT/ if anyone's interested
11:42:32 <Philippa> anybody know anywhere good to look for info on writing a fast (compiled) lisp implementation? I suspect it's something I need to learn about sometime
11:43:14 <Riastradh> http://library.readscheme.org/
11:44:10 <Fractal> For a better game example, see http://www.hcsw.org/haskell/Domino/
11:44:23 <Igloo> Adding '( -path "./yourpath/*" -o -oath ./yourpath) -prune -o -print' to the end of the find commandline would do it, although you may need more parentheses or something
11:46:56 <shapr> thanks, I'll try that
11:51:17 <SyntaxNinja> where's that stepcut
11:51:42 <SyntaxNinja> has anyone seen anything obviously wrong w/ the cabal .debs?
12:02:40 * stepcut dances around
12:02:52 * shapr shuffles
12:03:05 * stepcut does the horizontal shuffle
12:03:22 * Igloo hasn't had time to look, sorry
12:03:25 * Riastradh shuffles stepcut like a deck of cards.
12:03:55 * Riastradh straightens stepcut and then fans him out.
12:04:07 * Riastradh straightens stepcut again and spews him across the channel.
12:04:55 <Marvin--> SyntaxNinja: I always use the cvs^Wdarcs version ;)
12:04:58 <Marvin--> let me check
12:10:51 <Marvin--> okay, I seriously have to improve the error reporting of the package parser
12:11:03 <stepcut> yes
12:11:41 <stepcut> and I need to figure out how to do table layout using Pretty Print :(
12:11:47 <SyntaxNinja> stepcut!
12:12:02 <stepcut> SyntaxNinja!
12:12:26 <SyntaxNinja> did you see my gift?
12:12:39 <stepcut> i just built it (though I could not sign it with your key)
12:13:10 <SyntaxNinja> huh, strange.
12:13:16 <SyntaxNinja> ;)
12:13:20 <Marvin--> stepcut: debuild -uc -us
12:13:20 <stepcut> :p
12:13:36 <stepcut> Marvin--: its okay, its just a warning not an error
12:14:17 <stepcut> two lintian errors and a warning :p
12:14:28 <SyntaxNinja> yeah, I know about that
12:14:35 <stepcut> lintian is so funny
12:14:38 <SyntaxNinja> I mean non-obviously obviously wrong
12:15:14 <stepcut> i just like to run lintian to see what things it picks up, my favorite is "Your synopsis ends with a ."
12:15:40 <stepcut> (in general, not specific to this package)
12:16:13 <Marvin--> SyntaxNinja: will you push the changes to the debian dir too?
12:16:57 <stepcut> Marvin--: it take it back, failure to sign the package was fatal after all 
12:18:02 <stepcut> SyntaxNinja: i will investigate more after lunch, thanks!
12:18:05 * stepcut goes to lunch
12:18:10 <SyntaxNinja> l8r
12:19:59 <SyntaxNinja> Marvin--: done
12:20:07 <Marvin--> oh, I've got some patches for you too
12:20:18 <SyntaxNinja> yay
12:20:31 <SyntaxNinja> oh, there was an evil hunk there, I forgot
12:20:40 * SyntaxNinja suddenly remembers why he was keeping two separate repos
12:20:44 <Marvin--> Thu Jul 29 16:32:35 CEST 2004  ijones@syntaxpolice.org
12:20:44 <Marvin-->   * renamed scripts
12:20:44 <Marvin--> Thu Jul 29 16:35:04 CEST 2004  ijones@syntaxpolice.org
12:20:44 <Marvin-->   * trying to fix scripts
12:20:48 * Marvin-- tries hard not to giggle
12:20:59 <SyntaxNinja> hey! that wasn't my fault
12:21:02 <SyntaxNinja> it was the darcs add file bug
12:21:18 <Marvin--> yeah, that one kinda sucks
12:21:22 <SyntaxNinja> the evil hunk is that I removed the Compat.98 module from Setup.description
12:21:44 <Marvin--> oh, hmm
12:22:02 <Marvin--> would it help if I filed a wishlist bug for a new version of darcs? ;)
12:22:11 <SyntaxNinja> is the new version out?
12:22:23 <SyntaxNinja> if not, it might help; he seems to watch the bug reports
12:22:37 <Marvin--> "new upstream version available since, like, five minutes ago, dude!"
12:22:59 <Marvin--> 0.9.23 is out, yeah
12:23:12 <SyntaxNinja> too...many...packages......
12:24:15 <Marvin--> maybe it was a mistake to switch away from parsec
12:24:55 * SyntaxNinja groans
12:25:13 <SyntaxNinja> what am I supposed to be working on again? hm. I guess I should get these WASH packages out...
12:25:28 <SyntaxNinja> maybe I should write the "go-go-gadget-debian-package-from-cabal" script
12:25:44 <SyntaxNinja> or did Igloo want to write that?
12:26:30 <Marvin--> let's see, if I unrecord the patch that fixes the Compat.H98 breakage, and record it again while including the Compat.H98 module in Setup.description again... that's pretty sane, right?
12:26:52 <SyntaxNinja> why would you unrecord it?
12:26:58 <Igloo> I will when the issues have been sorted out if no-one else does, but you should feel free
12:27:01 <SyntaxNinja> just change it back.
12:27:25 <Igloo> It probably belongs in the cabal package anyway
12:27:38 <Igloo> But half of what it does relies on undecided issues like cabal package names, version numbers and API versions
12:28:01 <Igloo> Marvin--: Have you sent it to anyone yet
12:28:06 <Igloo> ?
12:29:08 <Marvin--> Igloo: no
12:29:46 <Igloo> Oh, did you see rerecord in the latest darcs?
12:30:20 <Marvin--> yes, but I don't have the latest darcs yet :)
12:30:22 <Marvin--> *hint hint*
12:30:28 <Igloo> :-)
12:31:37 <SyntaxNinja> oh gimmy a break
12:31:58 <SyntaxNinja> I'm scared to thihnk about API versions very hard
12:33:25 <Igloo> I think they either need to be part of the version number or part of the package name as far as deps are concerned
12:33:41 <Marvin--> you're not the only one
12:35:06 <SyntaxNinja> so let's see; the question about dashes is just about whether or not dashes can be allowed in the package names, there's no real reason why not at this point, right?
12:35:21 <SyntaxNinja> what we decide now may impact the design of HS-PKG, but that's no big deal.
12:35:55 <Marvin--> the problem is that if you've got dashes in both package name and in version numbers, you don't know what foo-bar-baz means
12:36:14 <andersca> ambigous...
12:36:40 <Igloo> I like foo-bar_1.2-3+tag1+tag2
12:36:59 <Marvin--> whoa, 1.2-3?
12:37:10 <SyntaxNinja> Marvin--: but when is that a problem?
12:37:14 <Igloo> Oh, no, that's me being a muppet
12:37:26 <Igloo> foo-bar_1.2.3+tag1+tag2
12:37:28 <SyntaxNinja> muppet!!
12:37:55 <Igloo> I was wondering while I was writing it why I thought we should be able to use - for tag separation, but I think I prefer + anyway  :-)
12:39:36 <Igloo> Oh, which would really be either foo-bar-1.0_1.2.3+tag1+tag2 or foo-bar_1.0.1.2.3+tag1+tag2
12:40:13 <SyntaxNinja> but when do we need to parse a name & version string like that?
12:40:25 <SyntaxNinja> in HC-PKG, maybe in the debian-package-generator
12:41:37 <Igloo> It'll be in a directory name too, right?
12:41:57 <Igloo> Oh, you just mean parsing? Why, what's the issue?
12:42:20 <SyntaxNinja> I mean why do we have to decide whether dashes will be in the package name or not
12:42:33 <SyntaxNinja> I agree that we have to decdie, I'm just trying to look at the situations in which it matters
12:42:40 <Marvin--> because the spec says they can't, and we want to ;)
12:42:47 * Igloo realises that if we use + for tags it doesn't matter if we use _ or - before the version number
12:42:57 <SyntaxNinja> Marvin--: it says we can't, 'eh?
12:43:15 <Igloo> The /only/ consideration here is aesthetics
12:43:43 <Igloo> What unambiguously parsable syntax looks nicest while still allowing everything we want to allow
12:44:10 <Marvin--> SyntaxNinja: well, the dependency parser used to use foo-1 for foo==1
12:44:33 <SyntaxNinja> oh; that shouldn't be.
12:44:52 <Marvin--> until I vetoed that by rewriting it ;)
12:44:58 <SyntaxNinja> oh
12:45:21 <SyntaxNinja> OK so... you know, when I write the mail, I want to say "this matters because..."
12:45:29 <SyntaxNinja> but it doesn't seem like it will really impact anything yet.
12:46:14 <Marvin--> actually, I dunno
12:46:23 <Igloo> If the problems it was meant to solve has gone away is there really any point in sending the mail?
12:46:25 <Marvin--> we should probably just decide something and put it in the spec and the parser
12:46:48 <SyntaxNinja> Marvin--: that's kinda what I'm getting at, but I think we should give a heads-up in case someone knows something we don't konw, which isnt' the case, I'm sure ;)
12:47:09 <Marvin--> actually, now that I look at the spec, I see an example package description saying   name: angela-coll
12:47:27 <Marvin--> so let's just say that the implementation was buggy and that I've fixed it
12:47:46 <Igloo> Heh
12:47:57 <SyntaxNinja> so the issue comes up w/ hc-pkg.. some people wanted to say something like "hc-pkg --remove mypkg-1.0"
12:48:06 <Igloo> So what's the regexp now?
12:48:06 <SyntaxNinja> but I think they will see the light.
12:48:33 <Igloo> [a-zA-Z0-9][-a-zA-Z0-9]*  ?
12:48:34 <Marvin--> Igloo: currently it's  munch1 (\x -> isAlphaNum x || x `elem` "-_")
12:48:45 <Igloo> "_"?
12:48:55 <Marvin--> yeah, don't ask me why that's there
12:48:57 <Igloo> Allowing a - at the start is bad as it'll confuse things looking for options
12:49:09 <Marvin--> oh yes, but this is just the stupid liberal parser
12:49:20 <Marvin--> starting with a digit is probably a bad idea too
12:49:30 <Igloo> If _ stays we'll replace it with + in package names, but I'd like to see it gone personally
12:49:43 <Marvin--> me too, I'm already removing it
12:49:47 <Igloo> :-)
12:49:51 * Igloo goes to update policy
12:51:48 <Igloo> "Cabal package names match the regex <tt>[a-zA-Z][-a-zA-Z0-9]*</tt>, and the tools that manipulate them are case preserving only." - sound good?
12:53:36 <SyntaxNinja> sounds fine to me.
12:53:37 <Marvin--> yes
12:54:31 <SyntaxNinja> well, what does "case preserving only" mean again? does that mean that ghci -package Cabal should be the same as -package cabal, but that when you copy the name, you should preserve the case?
12:55:13 <Igloo> It's not case sensitive so cabal and Cabal cause a name collision
12:55:36 <Igloo> But it's not case insensitive so -package cabal might not work if package Cabal is installed
12:55:37 <SyntaxNinja> right... and if the package is called "Cabal" then "ghci -package cabal" should still work.
12:55:51 <Igloo> There's no reason for it not to
12:56:13 <Igloo> The "preserving" really means it should be printed the same as you told it when you ghc-pkg -l, say
12:56:25 <SyntaxNinja> ok
12:57:48 <Marvin--> "[SCO is] now registering the UNIX System Laboratories trademark in what looks like an attempt to confuse history further. If you're wondering how they can do this, the USL trademark was abandoned in 1993, when USL was bought out by Novell."
12:58:45 <shapr> would be nice to keep track of dropped trademarks
12:59:03 <shapr> I like the Atari comeback for example
12:59:11 <shapr> I wonder if NeXT is still a trademark
12:59:35 <Riastradh> Probably, just owned by Apple.
12:59:50 <shapr> Commodore?
12:59:57 <shapr> Honeywell-Bull ?
12:59:57 <Riastradh> I doubt it.
13:00:18 <SyntaxNinja> meh Marvin-- your patch breaks the build... Package.hs:403 - liftM not in scope
13:00:34 <Riastradh> Symbolics, I believe, still is trademarked.
13:00:57 <Marvin--> dang
13:01:18 <Marvin--> I was so sure I fixed all those thingies
13:01:30 <SyntaxNinja> shall I just fix it on my end?
13:01:46 <Marvin--> yeah, go ahead
13:02:22 <Igloo> I think it works out simplest if ABI version is always part of the package name, incidentally
13:02:34 <Marvin--> huh, make setup  worked just fine for me
13:02:43 <Marvin--> oh wait, that's inside the ifdef debug
13:03:08 <SyntaxNinja> I was doing make moduleTest
13:03:08 * SyntaxNinja &
13:03:26 * shapr gets a scary error building curryspondence
13:10:06 <shapr> man this code needs refactoring.
13:10:22 * shapr gets irritated at himself for leaving this code in such a bad state
13:21:08 * Marvin-- gets annoyed with himself for writing such a crappy parser
13:26:04 <RussellOConnor> It would be interesting if Generic Haskell + XML made Haskell mainstream.
13:31:41 <RussellOConnor> http://www.cse.ogi.edu/PacSoft/projects/rmb/repMin.html
13:31:49 <RussellOConnor> The one pass solution make my head explode.
13:31:55 <RussellOConnor> s/make/makes
13:32:16 <bringert> shapr: fixed comment count and comment threading in blob
13:32:26 <bringert> are you still using it btw?
13:33:27 <bringert> should mention that the threading computation is a bit of a nasty inefficient hack, so don't run slashdot with it
13:33:31 <Marvin--> knot typing is fun :)
13:34:22 <bringert> not typing or knot tying?
13:34:22 <RussellOConnor> I swear it can't work. *l*
13:35:21 <Marvin--> meh, knot tying
13:36:09 <bringert> it sure is
13:36:20 <bringert> who are you tying up?
13:36:58 * RussellOConnor tries to figure out what is going on in that example.
13:37:55 <RussellOConnor> As you traverse the newly built tree, more and more of the old tree is traversed for the min, until when you get to a leaf, the minimum value is found.
13:38:09 <Marvin--> bringert: I'm just looking at the repMin example
13:38:28 <RussellOConnor> or something like that.
13:38:43 <bringert> oh, I thought you where talking about Real Life
13:40:18 <Marvin--> RussellOConnor: the power of lazy evaluation
13:40:21 <RussellOConnor> Hmmm, I can't beleive this is slowly making sense in my mind.
13:41:51 <RussellOConnor> Really, the making of the new tree, and the finding the minimum value are (mostly) independant of each other.
13:42:02 <RussellOConnor> So they might as well be done at the same time.
13:42:08 <kosmikus> RussellOConnor: the UU AG system is using this trick to express arbitrary attribute grammars as one-pass functions over the abstract syntax tree; no scheduling at all, only lazy evaluation ...
13:42:41 <RussellOConnor> kosmikus: Interesting.
13:49:10 <RussellOConnor> How do people think of these solutions?
13:49:48 <RussellOConnor> The description of the problem is a little poor.  One isn't replacing the nodes in a tree, one is creating a new tree.
13:52:50 <Marvin--> that's because you can't replace things
13:53:25 <Marvin--> so yeah it's a bit sloppy, but if you know that you can't replace things, it's not too hard to understand, is it?
13:56:50 <RussellOConnor> I guess when I read the discription of the problem, I was thinking of updating in place.  Mostly because I do a lot of imperative programming.  Anyways, it doesn't make much of a difference.  The same trick should work with an inplace tree update in some Monad.
14:03:41 * Marvin-- swears
14:03:48 <TheHunter> RussellOConnor: what a coincidence! I just included that example in a wiki article.
14:07:38 <RussellOConnor> Strange how Haskell has recursive let binding, but the y combinator doesn't exist because it cannot be typed.
14:07:59 <RussellOConnor> I guess that means lets are very special.
14:08:03 <Marvin--> hush, it's a big secret
14:08:12 <SamB> RussellOConnor: there is a workaround...
14:10:57 <RussellOConnor> workaround?
14:11:54 <Riastradh> So that Y is typeable, presumably.
14:12:32 <RussellOConnor> Was there a typeable version of the Y combinator?  I remember some stange implementation of Y.
14:13:05 <SamB> well, actually, instead of trying to use (... -> t) -> t, use (t -> t) -> t
14:13:13 <Riastradh> In GHCi, at least, y f = f (y f) seems to work.
14:13:39 <RussellOConnor> that is still a recursive binding.
14:13:44 <Riastradh> ...oh, right.
14:13:54 <SamB> oh?
14:14:16 <SamB> oh, you mean you can't turn lets into Haskell-typeable lambdas?
14:14:33 <kosmikus> yes, you need recursive let or y as a primitive
14:15:07 <SamB> hmm...
14:15:29 <Riastradh> Or magic.  Magic always comes in handy in any sort of situation.
14:16:19 * RussellOConnor wonders if he should disable recursive let bindings.
14:16:27 <SamB> lets see.
14:16:31 <kosmikus> disable them? for what?
14:16:40 <RussellOConnor> to prevent infinite loops.
14:16:42 * Riastradh bashes SamB.
14:17:49 <RussellOConnor> I guess that would make my code more inefficient.
14:18:27 <SamB> if you take this new y as a primitive, you can apparantly get a recursive let.
14:18:43 <SamB> at least, I assume thats why I'm getting a stack overflow
14:19:36 <SamB> oh wait, I have a lambda here.
14:19:42 <SamB> am I allowed that?
14:19:50 <Riastradh> Yes, of course lambda is allowed.
14:19:52 <Riastradh> This isn't Unlambda.
14:19:56 <SamB> how about a tuple?
14:20:00 <RussellOConnor> Lambda's are good.
14:20:09 <SamB> am I allowed a tuple?
14:20:23 <RussellOConnor> Tuples can be implemented as lambdas, so they are allowed.
14:20:25 * Marvin-- figures out what was wrong with his parser combinators and goes "d'oh!"
14:20:29 <SamB> okay.
14:20:36 <SamB> well, anyway:
14:20:39 <SamB> Prelude> (y (\ (x, y) -> (y, x)))
14:20:39 <SamB> *** Exception: stack overflow
14:21:17 <RussellOConnor> bad infinite loop
14:21:33 <RussellOConnor> see! see what infinite loops do.
14:21:37 <RussellOConnor> :)
14:21:43 <SamB> RussellOConnor: good loop! it points at the recursion!
14:21:46 <Riastradh> Bah.  It should copy the stack to the heap on overflow.
14:21:59 <SamB> Riastradh: heh, I read a paper about that.
14:22:42 <SamB> it would probably not be too hard if no frames were left lying about by C-native code
14:22:44 <Marvin--> obviously you should be able to feed a potentially infinitely long strip of paper to it through the floppy drive so you get an arbitrarily large stack
14:23:12 <Riastradh> And it should do so by tracing the stack, not directly copying it, so that the doomed stack frames die immediately.
14:23:38 <RussellOConnor> pair = \x -> \y -> \f -> f x y
14:23:50 <SamB> Riastradh: hmm. does GHC actually leave garbage frames about?
14:23:55 <Riastradh> I don't know.
14:24:10 <Riastradh> I'm just rambling half-nonsense.
14:24:14 <RussellOConnor> fst = \p -> p (\x -> \y -> x)
14:24:14 <Riastradh> It's fun.
14:24:24 <RussellOConnor> snd = \p -> p (\x -> \y -> y)
14:24:25 <Riastradh> Try it!
14:24:33 <SamB> RussellOConnor: you are allowed the multiple-parameter sugar, it is purely syntactical
14:25:00 <SamB> RussellOConnor: aren't those "true" and "false", not "fst" and "snd"?
14:25:08 <SamB> ;-)
14:25:19 <RussellOConnor> oops
14:25:21 <Riastradh> No.
14:25:30 <RussellOConnor> hmm
14:25:34 <Riastradh> fst = ($) true
14:25:37 <Riastradh> snd = ($) false
14:25:43 <SamB> oh.
14:25:59 <RussellOConnor> right
14:26:00 <SamB> umm. is that necessarily the case?
14:26:03 <Riastradh> (Down wiith points!  Go pointless!)
14:26:24 <Riastradh> With, even.
14:26:25 <RussellOConnor> pair = \x y f -> f x y
14:26:37 <RussellOConnor> fst = \p -> p (\x y -> x)
14:26:45 <RussellOConnor> snd = \p -> p (\x y -> y)
14:26:52 <RussellOConnor> I like the definition of pair.
14:27:38 <SamB> my, that reminds me of combinator library code. I guess because it is ;-)
14:27:59 * Riastradh tries to think of a way to pointlessly define pair.
14:28:03 <RussellOConnor> snd = \p -> p K
14:28:13 <RussellOConnor> Oh wait.
14:28:17 <RussellOConnor> that's fst
14:28:22 <RussellOConnor> fst = \p -> p K
14:28:23 <Riastradh> No, you were right the first time, RussellOConnor.
14:28:28 <RussellOConnor> I was?
14:28:30 <Riastradh> Oh, no, you weren't.
14:28:49 <SamB> if you have a swap, the difference between fst and snd depends on pair.
14:30:54 * SamB wishes google wouldn't be so smart, it is giving him results about skiing for a 'S K I'
14:31:45 <Marvin--> haha
14:31:52 <Riastradh> Add 'combinator.'
14:33:17 <RussellOConnor> \y (\p -> pair (snd p) (fst p))
14:33:27 <RussellOConnor> err nix that first \
14:33:56 <RussellOConnor> y id
14:34:35 <RussellOConnor> y (id::(()->()))
14:34:36 <SamB> Riastradh: you are smart!
14:36:27 <Riastradh> Ooooo, more people have sent dough to me for the Hindley-Milner t-shirt.
14:36:31 <Riastradh> I still don't know how good it looks.
14:36:31 <RussellOConnor> Why doesn't ghci complain about (y id).
14:36:43 <Marvin--> Riastradh: how many cents have you made now?
14:37:00 <Marvin--> I still haven't gotten around to getting one
14:37:02 <Riastradh> The _gargantuan_ sum of fifteen cents!
14:37:07 <Marvin--> oooh
14:37:39 <RussellOConnor> At least y id doesn't take so much memory.
14:40:35 <SamB> hmm, google should be more carefull about when it returns a result pointing to a search on another service to ensure that the service actually gets a result for that
14:41:16 <Igloo> Riastradh: And how many do you have to send to Messers Hinley and Milner for royalties?  :-)
14:41:39 <thebug> anyone know if GHC 6.2 works on IRIX?
14:41:54 <Riastradh> Ssshhhhh, Igloo!  I might make a killing if I don't have to cough up some of my dough to them!
14:42:04 <thebug> googling around, I see that a version from '97 did, but do current releases work?
14:42:24 <SamB> Riastradh: does the shirt actually mention *them* and not just the type system?
14:42:25 <Igloo> thebug: It's likely to work if you port it and have gcc on it
14:42:36 <Igloo> In unregisterised mode, that is
14:42:39 <thebug> well, I have gcc and MIPSpro, so we'll see
14:42:51 <Riastradh> SamB, it just says: 'WHAT PART OF <the principal type inference algorithm> DON'T YOU UNDERSTAND?'
14:43:00 <Riastradh> And it has a lambda sub tau on the front.
14:43:17 <thebug> I'm not well enough versed with the package system to make a package of it, but if it's useful to anyone, I could probably supply a binary tarball
14:43:52 <SamB> Riastradh: umm, that is mathematical expression. the fact that your equations are the same as someone else may merely indicate that they are locally optimal expressions of the idea
14:44:05 <SamB> s/else/elses/
14:44:24 <Igloo> Have you missed the software patent hoohah?
14:44:40 <Riastradh> Well, _technically_, but I'd be pissed if someone took a cool algorithm I developed and made money off of it.
14:44:50 <Riastradh> ...by displaying it on t-shirts, that is.
14:44:53 <Igloo> Although I guess this is specification not algorithm. Does that matter?
14:44:59 <SamB> and I don't think you are allowed to write patent applications in LaTeX, either.
14:45:12 <SamB> so to speak.
14:45:18 <Riastradh> (I don't even understand what's on the t-shirt!)
14:45:33 <Riastradh> (Ironic, isn't it?)
14:45:40 <SamB> yes ;-)
14:45:52 <Marvin--> hahaha
14:45:53 <Igloo> :-)
14:46:02 <SamB> but also good for my self-esteem.
14:46:16 <Riastradh> Oh, I'm still way better than you are.
14:46:29 <Igloo> Sell another ~10000 and you can buy TaPL and learn  :-)
14:47:46 <SamB> despite the over-press self esteem has been getting of late, it is not good to think too badly of your abilities
14:47:55 <SamB> at least, I think so
14:48:26 <thebug> uhh this is going to sound stupid, but how do I force this to bootstrap instead of die complaining about lack of GHC
14:49:00 <Igloo> Follow the porting guide on the website
14:49:07 <thebug> okay :)
14:49:08 <SamB> thebug: it probably involves cross-compilation or something
14:49:21 <SamB> like many compiler bootstraps
14:49:44 <Igloo> After the first compiler is built you'll additionally need to put a couple of lines in mk/build.mk to keep it unregisterised
14:49:45 <thebug> no problem there, I'm used to building archane combinations of cross compilers :/
14:50:31 <Igloo> And if this is mips you might also need -mlong-calls or somesuch. Both changes can be found in the Debian diff, but I can't get at them easily right now
14:50:44 <thebug> this is indeed mips
14:50:46 <thebug> R10K
14:51:04 <thebug> I can grab the debian diffs if they're on p.d.o
14:51:16 <Igloo> Should be
14:51:40 <thebug> I'll see what I end up needing. Would anyone be interested in a tarball of this if I do manage it?
14:52:00 <Igloo> ghc6 package. You're looking for something like GhcUnregisterised=yes SplitObjs=no
14:52:00 <SamB> presumably someone would
14:52:14 <thebug> I know IRIX isn't the most common thing in the world...
14:54:09 <thebug> hehe I like this non-fatal complaint from hc-build ...
14:54:17 <thebug> You would be better off with gcc
14:54:19 <thebug> You would be better off with gcc
14:54:27 <thebug> err :)
14:55:33 <Igloo> Microsoft is really an agent of RMS, dontchaknow?
14:57:16 <thebug> this is definitely not going to be a mipspro cc build
14:58:34 <Igloo> :-)
14:59:10 <thebug> "The mangler"
14:59:37 <SamB> "the evil mangler", you mean?
15:00:05 <thebug> likely is, I haven't looked at the script
15:00:21 <SamB> why do they call I I and not id?
15:02:23 <Riastradh> Didn't you know that single-character identifiers are infinitely suprerior?
15:02:53 <SamB> oh, right. algebraicness and all...
15:03:01 <SamB> bah.
15:24:48 <monochrom> I think zero-character identifiers are omega^2 superior than single-character ones.
15:25:17 <SamB> monochrom: very hard to scan, though
15:25:38 <SamB> unless you believe () to be one
15:26:02 <monochrom> I don't intend such expressions to be machine readable or automated.
15:28:46 <dons> thebug: bootstrapping GHC on IRIX is a little tricky
15:28:52 <thebug> hmm
15:28:58 <thebug> I get this ->
15:28:59 <dons> so, there is a recent version on the GHc website :)
15:29:13 <thebug> make[1]: *** No rule to make target `AutoApply.hc', needed by `depend'.
15:29:51 <thebug> ah well, if it's available, I'll just download a precompiled one :)
15:30:31 <Igloo> You untarred original tarball then the mips one you made?
15:30:45 <thebug> huh?
15:30:47 <Igloo> Oh, *reads up a bit*
15:30:55 <Igloo> n/m, if there's a tarball it'll be simpler  :-)
15:30:57 <thebug> I just grabbed the 6.2.1 source tarball
15:31:18 <dons> http://www.haskell.org/ghc/download_ghc_62.html
15:31:40 <dons> there's a binary for mips64/Irix 
15:31:50 <thebug> heh oops
15:31:57 <thebug> I missed that at the bottom :)
15:32:08 <Igloo> Did you have to use -mlong-calls or similar for your mips stuff, dons?
15:32:14 <dons> also, I wrote a (long) discussion of how to bootstrap on mips64/irix to the glasgow list at some time
15:32:35 <thebug> I may check it out, just for some masochistic fun
15:32:45 <dons> Igloo: no. but I had to do a bunch of stuff to convince gcc to generate 64 bit 
15:32:59 <dons> and don't even think about mips cc
15:33:09 <dons> won't work with the mangler for one
15:33:17 <thebug> ah, mine might not be happy then...I didn't like how gcc3 series ran on this machine, so I have 2.95.2 from freeware6.2
15:33:25 <Igloo> ow about *BSD mips? Or have you not done that?
15:33:33 <Igloo> (Or am I confused and talking to the wrong person?)
15:33:43 <dons> haven't done that. don't have access to the machine.
15:33:53 <dons> no, Igloo. right person :)
15:34:00 <Igloo> 2.95 is generally better than 3
15:34:36 <Igloo> OK, ta
15:34:43 <thebug> indeed Igloo
15:35:09 <thebug> dons: will having the 2.95.2 from fw62 be a problem? I'm not sure that one generates 64-bit ...
15:35:26 <dons> I'm a bit worried that you needed gcc3 on mips64
15:35:36 <dons> I'm still looking for the mips64 faq
15:35:55 <thebug> well, I'll try it with the 6.5 freeware gcc3.whatever if the 2.95.2 doesn't work
15:35:57 <Igloo> Why is 64-bit needed?
15:36:08 <Igloo> Oh, was ita GMP thing?
15:36:12 * Igloo has vague memories now
15:36:25 <Igloo> As I was worried I'd have the same problems  :-)
15:36:31 <dons> yep. gcc (GCC) 3.3
15:36:41 <dons> IRIX64 edison 6.5 07141529 IP30 mips
15:36:44 <thebug> just for reference, this is an R10K Octane
15:36:51 <thebug> yep, basically the same rig :)
15:37:08 <thebug> IRIX64 constantinople 6.5 10070055 IP30
15:37:17 <dons> ok. good. the binary should work. but you'll at least need gcc3.3 in /usr/freeware/bin/
15:37:26 <thebug> okay, I'll toss that in there
15:38:02 <dons> you also need libgmp 
15:38:04 <thebug> hmm would it be at all possible to recompile it with an older gcc?
15:38:17 <thebug> not that it's a problem if that's not possible
15:40:10 <dons> I don't think it was possible with 2.95
15:41:06 <dons> Igloo: there were defintately gmp issues :)
15:41:21 <dons> I think I posted an faq on 64 bit gmp too. hehe
15:42:29 <thebug> oh yeah, I remember why gcc3 on IRIX is bad ... g++3 isn't compatible with -any- of the SGI libs
15:42:43 <thebug> huzzah for compatibility
15:43:29 <dons> it works?
15:43:41 <thebug> dunno, still downloading the irix ghc tarball
15:43:42 <dons> it is a miracle evertime a binary installation works, imo
15:43:59 <dons> but I know several guys using it, so should be fine
15:45:06 <Igloo> g++ can't even manage binary compatibility with /itself/ over minor releases ATM, so it's not that surprising  :-)
15:45:15 <dons> haha
15:45:46 <thebug> hmm I'm wondering whether it's worth installing firebird on this to replace the broken++ sgi rev netscape or not
15:46:11 * Igloo waves a Debian CD under thebug's nose  :-)
15:46:19 <thebug> hah
15:46:26 <thebug> good luck running that on IP30 anytime soon
15:46:35 <dons> what about netbsd?
15:46:37 <thebug> I run debian on anything x86 though
15:46:52 <dons> then you could do your own ghc port too :)
15:46:56 <Igloo> Ah, OK, I'm not up on what subarches on what work
15:47:13 <thebug> dons: I wasn't aware anyone had IP30 support beyond having a kernel load and promptly crash
15:47:46 <thebug> I -know- linux isn't there yet, but perhaps bsd has gotten farther since I last checked the sgimips port
15:47:58 <dons> ah, found it. here is the mips building guide: http://www.haskell.org/pipermail/glasgow-haskell-users/2004-April/006570.html
15:48:04 <thebug> thanks
15:49:43 <dons> looks like netbsd has some support for IP30
15:50:17 <dons> though I'm not sure what state. it would be an adventure
15:50:50 <dons> hmm. actually, seems to have a user base. good sign :)
15:51:16 <thebug> regardless, I'd prefer to use an OS that will actually run on my hardware :)
15:51:28 <dons> sure :)
15:51:39 <thebug> I thought IP32 and IP24/22 had the most usability/stability
15:51:51 <thebug> Indy is IP24, innit?
15:52:22 <dons> I have no idea. I only build compilers on the IP30 :)
15:53:05 <thebug> hmm I wonder if this'd run on an R4K then
15:53:14 <thebug> they're part-64-bit, iirc
15:55:06 <dons> also, if you ever want to build this thing from scratch, check the series of mails on the topic on glasgow-haskell-users. there is a long thread
15:55:26 <thebug> I may, just si 
15:55:28 <thebug> err
15:55:38 <thebug> just so I have an idea of what you have to do to build it
15:56:05 <dons> it is one of the harder ports I think. the hardest I've done
15:56:40 <thebug> is it picky about perl versions? my base os has 5.005 installed, but I also have freeware perl v5.6.1
15:56:58 <dons> I have never seen any problem with perl. Igloo?
15:57:47 <Igloo> Me neither, but I'll always have had something reasonably recent
15:57:59 <dons> yeah. I've got v5.6.1 in freeware.
15:58:24 <thebug> path-wise though, v5.005 shows up first for me, it's in /usr/sbin
15:58:32 <thebug> though that's certainly fixable
15:58:57 <dons> probably should have freeware ahead in the path, otherwise tool trouble...
15:59:18 <Igloo> sbin?!
15:59:29 <thebug> don't ask me, I don't work for sgi
15:59:34 <dons> though, you're not building ghc yet, are you? so no problems expected
15:59:43 <thebug> no, not building it yet
15:59:45 <monochrom> heh
15:59:49 <dons> huh. it really is in sbin
16:00:08 <monochrom> sbin stands for sgi bin
16:00:49 <thebug> other sgi craziness: dynamically linked system utilites on / requiring libs in /usr
16:01:01 <thebug> so if your disk holding /usr dies ...
16:01:15 <monochrom> sgi dies
16:01:17 <thebug> ka-boom!
16:01:34 <monochrom> unless they are the same disk
16:01:48 <thebug> in which case, it dies even more spectacularly
16:02:00 <monochrom> "fail-fast"
16:04:14 <thebug> so should I just untar this irix ghc tarball over the top of my 6.2.1 sources?
16:04:20 <nbb> leave #haskell
16:04:47 <thebug> or put it by itself and do make install?
16:05:01 <dons> no. don't untar it over the sources. just install it
16:05:07 <dons> into ~/ or something
16:05:11 <thebug> will do
16:05:45 <dons> you untar .hc tarballs over source, when bootstrapping
16:10:02 <dons> thebug: also, you could probably build nhc98 in 32 bit mode, as an alternative
16:10:07 <dons> another port though
16:10:13 <thebug> interesting idea :)
16:10:22 <thebug> I'll have to play around with both of these
16:10:30 <Igloo> Use 2.95 for that if you want no hassle, though
16:10:43 <dons> yep. gcc3 == hell
16:10:50 <thebug> hmm
16:11:10 <thebug> ghc isn't setting up the linker paths correctly or something
16:11:33 <thebug> ld64: FATAL 9: I/O error (-lgmp): No such file or directory
16:11:42 <dons> can't find libgmp
16:11:51 <thebug> yep, and I made sure to install it
16:12:11 <dons> and then set the LD_LIBRARY_PATH var?
16:12:22 <dons> export LD_LIBRARY_PATH=/usr/freeware/lib64:$LD_LIBRARY_PATH
16:12:29 <thebug> ah, ok
16:12:36 <dons> hehe
16:12:42 <thebug> I thought fixpaths did that for you
16:12:49 <dons> don't know
16:12:50 <thebug> or whatever that tool is called
16:13:27 <thebug> still doesn't find the library
16:13:43 <dons> same error?
16:13:50 <thebug> yep
16:13:56 <thebug> ghc is compiling the file, it
16:14:00 <thebug> s just not linking it
16:14:09 <dons> ok. should be easy to fix.
16:14:45 <thebug> can I just add it to the ghc-6.2 script or something?
16:15:12 <dons> well, it works for me out of the box. some lets work out what is different
16:15:44 <thebug> ok, I'm using the freeware gcc version 3.3, with the freeware libgmp
16:15:59 <thebug> I installed ghc in /opt/ghc/6.2
16:16:34 <dons> ok. and you get object files built?
16:16:37 <thebug> yes
16:16:54 <thebug> and if I rerun ghc multiple times, it correctly figures out that it doesn't need to recompile
16:17:11 <dons> good. can you look at /opt/ghc/6.2/lib/package.conf ?
16:17:51 <thebug> s/lib\//lib\/ghc-6.2\//
16:18:16 <dons> and it contains "-mabi=64" all over the place?
16:18:28 <dons> under Package "rts"
16:18:28 <thebug> -opta-mabi=64 for ghc_opts
16:18:38 <thebug> and -mabi=64 for cc_opts
16:18:55 <dons> and at the bottom of extra_ld_opts
16:19:05 <thebug> yep
16:19:08 <dons> good
16:19:11 <thebug> after Prelude
16:19:45 <dons> what about running: ldd ghc-6.2  (the binary in the lib/ dir)
16:19:54 <dons> does that find libgmp
16:20:20 <thebug> ibgmp.so.4  =>  /usr/freeware/lib64/libgmp.so.4
16:20:29 <dons> ok. so ghc is correctly linked. hence it runs.
16:20:33 <thebug> indeed
16:20:39 <thebug> it runs, it doesn't link
16:21:09 <dons> but when it forks off ld, ld doesn't know where to find the 64 bit libgmp
16:21:26 <thebug> apparently
16:21:56 <thebug> would it be wise to add the LD_LIB_PATH to the ghc scripts in bin/ then?
16:22:18 <dons> if you want, but I haven't needed to
16:22:28 <thebug> any other ideas on what I should do?
16:22:36 <dons> when you run ghc -v2 does it invoke ld64 ?
16:23:13 <thebug> oh yeah, it's ld64, you can tell from the error messages
16:23:17 <thebug> even without -v2
16:23:41 <dons> good. can you try adding /usr/freeware/lib64 to $LD_LIBRARY64_PATH
16:23:47 <thebug> certainly
16:23:49 <dons> and make sure to export that var
16:24:23 <thebug> still doesn't work
16:24:33 <thebug> also, I didn't have that env var to begin with
16:25:40 <dons> ok. I'm reading man ld :)
16:26:17 <dons> I'm interested to know why it doesn't work for you, but does work on my box
16:27:29 * thebug permanently changes his shell to bash
16:27:37 <Igloo> Does giving a -L/usr/lib/whateveritwas arg to ghc fix it?
16:27:47 <thebug> irix's csh is incompetent
16:27:51 <thebug> at least my setup of it is
16:27:58 <Igloo> (DIreallyM -L?)
16:28:23 <thebug> yes Igloo 
16:28:27 <dons> it works?
16:28:31 <thebug> yes
16:28:40 <thebug> it generates a usable executable
16:28:46 <thebug> bash-2.05b$ ./a.out 
16:28:47 <thebug> hello world
16:28:48 <dons> woo!
16:29:02 <thebug> indeed :)
16:29:04 <dons> here's a good script I use:
16:29:05 <dons> import System.Info
16:29:05 <dons> main = do 
16:29:05 <dons>         putStrLn System.Info.arch
16:29:05 <dons>         putStrLn System.Info.os
16:29:53 <dons> ok. you can add -L/usr/freeware/lib64 to lib/package.conf as an extra_ghc_opts
16:30:05 <thebug> mipseb
16:30:05 <thebug> irix
16:30:09 <dons> nice.
16:30:13 <thebug> indeed
16:30:28 <dons> you are now running 64 bit Haskell! :)
16:30:35 <thebug> yay!
16:31:23 <dons> so, just edit the package.conf file to permanently add the lib flag, and things should be good
16:32:39 <dons> the Irix Haskell community now contains 4 people :)
16:32:45 <dons> hahaha
16:33:59 <Igloo> Don't knock it, Debian/mips is almost certainly 1 person - a Mr Buildd  :-)
16:34:03 <thebug> that indeed works when I add it
16:34:10 <dons> cool
16:34:22 <thebug> at first, I just appended it to the pre-existing string, which didn't work
16:34:30 <thebug> then I made it its own element, that did work
16:34:31 <dons> Igloo: the joy of the compiler porter, huh?
16:34:49 <dons> sparc/openbsd has 1 user too, I think
16:34:57 <Igloo> Ah, but it'll all have been worthwhile once ghc, darcs etc are all available across the board...
16:35:08 <thebug> perhaps after some food, I'll attemp to rebuild it
16:35:13 <dons> yep. world domination etc.
16:35:58 <dons> thebug: should be easier, but you may need to use CVS head, as I think I my mips patches aren't in stable
16:36:23 <thebug> I'll see what works, but first order is food :)
16:37:01 <dons> sure. I wouldn't even bother, unless you have a specific need
16:38:11 <dons> Igloo: and there are plenty of users we don't know about
16:38:29 <dons> I know a guy using debian alpha ghc, who doesn't realise how special he his :)
16:39:06 <Igloo> Neat
16:39:23 <Igloo> I assume you don't mean John Goertzen?
16:39:48 <dons> no. Simon Winwood, type system hacker here at unsw
16:40:02 <Igloo> Cool - there really are at least two of them then  :-)
16:40:06 <dons> yay!
16:40:24 <Pseudonym> Sounds like a quorum.
16:41:28 <dons> what we need is to get boxes for developers. because they just port to whatever they have
16:41:55 <dons> maybe some kind soul will get me an amd64 one day...
16:43:07 <Igloo> Debian's good at getting developers accounts on machines in theory, but in practice it doesn't happen for some arches (including powerpc currently, which is rather odd)
16:43:19 <thebug> why does ghc leave the object files in the same directory as the .hs, why not the current directory?
16:43:28 <thebug> Igloo: and s/390, I bet
16:43:35 <Smerdyakov> It is ridiculous to have so many different architectures.
16:43:36 <Igloo> No, s/390 is fine
16:43:52 <thebug> Smerdyakov: go tell that to the netbsd people
16:43:55 <Igloo> It's not a lack of hardware, it's a lack of people having the time to set it up I believe
16:44:03 <dons> I'm trying to get nhc98 up on a vax atm. but login time is hard to get
16:44:14 <thebug> dons: on VMS or netbsd?
16:44:15 <dons> heheh
16:44:20 <dons> openbsd/vax
16:44:32 <thebug> if you're seriously in need, I have a vax
16:44:45 * Igloo AFKs
16:44:55 <dons> no seriously in need... sparc64 comes first
16:44:58 <Smerdyakov> That's nothing. I _am_ a VAX.
16:45:10 <Pseudonym> Smerdyakov: Nothing sucks like a VAX.
16:45:12 <thebug> (!) AI is taking over the world!
16:45:16 <dons> Smerdyakov: I already thought that
16:45:34 <Pseudonym> I knew a guy as an undergrad who had a VAX and a S/360.
16:45:35 <Smerdyakov> dons, you are good. Too good.
16:45:41 <Pseudonym> He had three phase power in his living room.
16:46:01 <dons> dear oh dear
16:46:29 <thebug> Pseudonym: I don't have a room-filling 1 VUPS one or anything, just a couple of vaxstations
16:46:40 <dons> Igloo: what about debian/arm. how is that atm?
16:46:51 <Pseudonym> Ah, OK.
16:46:57 <Pseudonym> This guy had an 11/780.
16:47:05 <Pseudonym> Serious iron.
16:47:06 <thebug> hehe I don't have the room for -1- 11/780 let alone a cluster worth :)
16:47:11 <Pseudonym> :-)
16:47:26 <thebug> I have my own vax[station] cluster from hell though :)
16:47:28 <Pseudonym> I think he also might have had a PDP8.
16:47:32 <Pseudonym> Can't recall.
16:47:55 <thebug> interesting, those are quite rare these days
16:48:03 <Pseudonym> Yeah.
16:48:05 <thebug> especially straight 8s
16:48:42 <Pseudonym> There's a wonderful digital design textbook where the second half of the book is a project to build a PDP7 clone out of MSI components.
16:49:04 <thebug> silly question dons, is there any reason I can't build ghc plain 32-bit?
16:49:06 <Pseudonym> It's about the most sophisticated machine that you can realistically build in a semester.
16:49:54 <thebug> hmm I'm not very familiar with 7s ... which word size machine were they? 12-bit?
16:50:02 <Pseudonym> I believe so.
16:50:30 <Pseudonym> And of course PDP7s run Unix. :-)
16:50:39 <dons> thebug: I could never get 32-bit to bootstrap
16:51:00 <thebug> where was the problem bootstrapping it?
16:51:08 <dons> hmm. let me see...
16:52:04 <dons> ah. it dies in __decodeDouble ()
16:52:13 <dons> something nasty
16:52:16 <Pseudonym> Ah, no, PDP7 was 18 bit.
16:52:26 <thebug> but it was the first unix machine
17:13:06 <bourbaki> hi
17:21:34 <bourbaki> has anyone of you ever written an eliza bot in haskell?
17:47:27 <monochrom> No
17:47:55 <bourbaki> have just read that url here
17:48:01 <bourbaki> http://www.haskell.org/hawiki/YetAnotherHaskellTutorial
17:48:13 <bourbaki> i think that i might do something like that with monadic parsers
17:48:24 <monochrom> Good
17:49:12 <dons> bourbaki: blackdog wrote a vixenlove implementation in Haskell, that's *kind* of like eliza, isn't it?
17:49:30 <dons> www.cse.unsw.edu.au/~motton/software.html
17:49:36 <bourbaki> i dont know vixenlove
17:49:44 <thebug> dons: so far the build hasn't failed
17:49:56 <thebug> it's on MachOp.hs atm
17:50:01 <dons> thebug: ok. good. fingers crossed
17:50:04 <bourbaki> dons 404
17:50:21 <dons> on mwotton's page?
17:50:25 <bourbaki> yes
17:50:27 <thebug> this is just with a vanilla 6.2.1 and plain ./configure --prefix=<foo>
17:50:34 <thebug> no funny mods or anything
17:50:44 <dons> thebug: cool
17:51:32 <dons> bourbaki: hmm.. I'm looking at it. the code is at: www.cse.unsw.edu.au/~mwotton/vixenlove.tgz
17:52:00 <Pseudonym> Great name.
17:52:05 <thebug> gcc3/mips is slooooooow
17:52:33 <dons> "vixenlove" -- it's all in the personality, you see ;)
17:52:41 <bourbaki> i can dl that
17:52:46 <bourbaki> cant see the site though
17:53:02 <dons> weird. works for me. you could try google cache.
17:53:25 <bourbaki> what is it that the bot does roughly?
17:53:39 <dons> has a conversation
17:53:47 <dons> not sure how smart it is
17:54:25 <bourbaki> http://ai-depot.com/Articles/49/Semantics.html
17:54:35 <bourbaki> i would like to do something like that with monadic parsers
17:55:02 <dons> certainly not that smart :)
17:55:50 <bourbaki> i had the idea to use the monads to parse the string to some function
17:59:26 <monochrom> Check out "grammatical framework" too.
17:59:38 <bourbaki> yes
18:00:02 <bourbaki> the idea is that the monads are kind of the instances of patterns like S -> NP VP
18:00:38 <bourbaki> you generate a sequence of monadic parsers that parse the sentence
18:06:29 <Igloo> dons: Linux on Arm currently uses a non-standard float representation so I was advised by the Arm guys to wait until it changes (and as I had other ports todo there seemed no point spending time hacking it to work in the short term)
18:07:07 <thebug> I thought it was all soft-float anyway?
18:07:08 <Igloo> It wouldn't actually be a problem as far as porting it goes, except that pi turns out to be infinity and the assembler rejects Inf as an immediate
18:07:13 <dons> huh. fair enough
18:07:31 <Igloo> thebug: Huh?
18:07:48 <Igloo> ncidentally, thebug, something occured to me - is gcc finding the GNU ld or the mips one?
18:07:48 <thebug> on arm, I thought it was all software floating point
18:08:10 <thebug> well, since I don't have any manner of gnu binutils installed .... it'd be the mips one
18:08:22 <thebug> err SGI one rather
18:09:43 <dons> really?
18:09:54 <thebug> I'm pretty sure ... I'll check though
18:10:00 <dons> yep. has to be actually.
18:10:16 <dons> I seem to remember 64 bit linking problems when using gnu ld
18:10:19 <thebug> it's all sgi except for the compiler
18:10:27 <dons> but ld64 (i.e. sgi ld) is fine
18:10:35 <thebug> you don't need the gnu stuff at all
18:10:48 <dons> 'cept libgmp & gcc
18:11:00 <thebug> well, I meant for the toolchain
18:11:01 <Igloo> thebug: Quite possibly, but the bits still have to be in some order in memory
18:11:06 <thebug> not including build deps
18:11:33 <thebug> Igloo: very true ... strange that it's not IEEE floating point though
18:11:38 <Igloo> Oh, I thought that might have been the difference. Oh well.
18:11:50 <thebug> especially if it's all software-based
18:12:19 <thebug> but then again, I've never done any development on arm
18:14:29 <thebug> this is insanely slow ... I have a 225mhz R10K + 1/2 GB of RAM, what's up?!
18:14:47 <dons> unregisterised, for one
18:14:59 <dons> so it isn't using some low level tricks
18:15:04 <dons> s/it/ghc/
18:15:25 <dons> though, I think it took around 4hrs to build on the box I'm using
18:15:52 <dons> ghc is not a small cookie
18:16:00 <thebug> very true
18:16:19 <thebug> I was just wondering if maybe I had something screwing it up, but if you say it takes that long, I believe it
18:16:45 <dons> hey, takes 30+ hours on m68k .. so don't complain :)
18:16:54 <thebug> hmm if I had more of the SGI machines up and running, I could have distcc help :)
18:17:33 <thebug> wow, that's quite a while
18:17:36 <dons> do you have two processors. the box I'm on is a dual. that helps for bootstrapping with make -j2
18:17:49 <dons> but unforunately, still can't build ghc .hs code with make -j
18:18:00 <thebug> when I got the box it had dual 195's, but one one burned out, so I replaced it with a single 225
18:18:18 <thebug> octane procs are so expensive on ebay :/
18:18:44 <dons> the make -j issue is a pain. i sometimes build on a quad itanium 1. that is soo slow when I can't use -j
18:18:53 <monochrom> butane may be cheaper.
18:19:04 <thebug> or kerosene
18:19:41 <thebug> dons: what exactly has to happen to make a 'registered' port?
18:20:14 <dons> some mips code is already written. it may have to be adapted for mips64 -- don't know
18:20:27 <dons> we may actually have to formally split mips64 off as a separate port
18:20:28 <monochrom> I suppose you have to teach ghc how to allocate registers.
18:20:35 <thebug> I'm still missing exactly why it has to be 64
18:20:50 <dons> then you need to write the ffi code, some tail call code, some other stuff
18:21:03 <thebug> is it not possible to build a 32-bit ghc/mips?
18:21:11 <dons> it isn't 32 bits because libgmp goes weird
18:21:25 <dons> it used to be quite possible to build 32 bit mips, but not for a while
18:23:00 <dons> http://www.haskell.org/ghc/docs/latest/html/building/sec-porting-ghc.html
18:23:13 <dons> see S10.2.2 for what needs to be done to registerise
18:23:21 <Igloo> If you want ghci you'll probably have to hack the linker a bit too. Orpossibly wait for someone to make it more generic (is that still being worked on?)
18:23:36 <dons> ghci is a huge problem I think. hardest bit to port
18:23:42 <dons> Igloo: you agree?
18:24:49 <Igloo> I haven't tried due to not having access to the bits of hardware it looked easiest on
18:25:17 <dons> ok. I looked at mips64 -- relocs blah blah nasty is my summary of that
18:25:25 <Igloo> I was told that the xfre86 linker might have some code that could be translated fairly easily, though
18:25:41 <dons> ok. and there is lots of stuff in gnu binutils
18:26:11 <Igloo> The simple ones looked OK, but the arches I could get at at the time seemed to be those that would require GOT stuff and whatnot, which looked like it might even need some assembly written
18:27:10 <dons> yep. similar story for ffi. adjustor thunks are evil
18:27:31 <Igloo> Hmm, something else I haven't had time to look at  :-/
18:27:52 <Igloo> Is that something someone familiar with the arch but totally unfamiliar with ghc would find easy do you know?
18:28:24 <dons> adjustor thunks. I thinks so. it is just C struct manipulations, in the arch's asm.
18:28:35 <dons> all in the rts
18:29:06 <Igloo> OK, ta
18:29:36 <dons> there is plenty of code to look at already. and I did x86 and sparc for openbsd (different to the already existing x86 and sparc) without really knowing how it all worked in the larger scheme
18:45:22 <thebug> be interesting to try to build a linux/x86 -> sgi irix/mips cross compiler to use with distcc
18:46:04 <thebug> hmm that would work if the assembled objects are compatible
18:46:21 <thebug> considering that they get linked on the host machine, not the distributed clients
18:47:10 <dons> hard. but interesting, certainly
18:47:23 <thebug> i've done x86/linux->x86/solaris before
18:47:32 <thebug> that has some quirks
18:47:59 <dons> yeah, and netbsd does this stuff all the time
18:49:03 <thebug> indeed, except that they have one up on that in that they -have- all of the headers for all the arch's quite handy and they're all the same os
18:49:06 <dons> thebug: one problem with the source build I think you'll have is that the extra -mabi=64 flags in the package.conf file aren't in the src distribution
18:49:11 <dons> so you'll have to add those in
18:49:47 <thebug> I'm just going to let it go and see what happens, i'd rather not interrupt it, considering how fast it is :)
18:50:12 <dons> certainly. let it build. and if it starts generating 32 bit binaries, you'll have to add some 64 bit flags
18:50:30 <dons> this can be done after it builds, though, as they are flags to external tools
18:50:31 <ozone> dons: can ghc itself be a cross-compiler? :)
18:50:34 <thebug> hmm, I should go look at the objects it's built so far
18:50:39 <dons> not at the moment
18:50:56 <SamB> it can't?
18:51:56 <dons> there is some support for different host/target archs, but I think simonm has a mail out there on what remains to be done
18:52:30 <thebug> CLabel.o:       ELF 64-bit MSB mips-3 relocatable MIPS - version 1
18:52:40 <thebug> so far so good apparently
18:52:56 <dons> thebug: another thing, you may need to set GhcUnregisterised=YES
18:53:15 <dons> in build.mk, otherwise you'll get a ghc that tries to generate registerised binaries
18:53:21 <thebug> ah, ok
18:53:31 <dons> but, all bugs come to those who wait
18:53:47 <thebug> in the email I saw from 97 it looked like it was registered at that point
18:54:02 <thebug> for irix5/6, so probably 6.0 or 6.2
18:54:17 <thebug> but this is 6.5.22 :)
18:54:19 <dons> yep, mips32 was
18:54:32 <dons> but it dumps core if i recall, if you try and force registerisation
18:54:48 <dons> because we don't distinguish mips32 from mips64
18:54:55 <thebug> ah
18:55:01 <dons> they just use different ld's atm
18:55:11 <thebug> I don't know much about low-level mips stuff, but iirc it's quite similar to sparc
18:55:12 <dons> but if we want to registerise, we need to distinguish them eventually
18:55:25 <thebug> which I have a fair bit of experience with
18:55:45 <dons> well, if you are willing to dive in, ghc will run faster :)
18:56:13 <thebug> I don't know a whole lot about compiler writing, to be honest
18:56:32 <dons> isn't so much about compilers, but about runtime systems :)
18:58:12 <thebug> hmm
18:59:17 <thebug> if you've got pointers to some mips asm guides, I might be able to mess with it some
18:59:47 <dons> no. that's what I don't have. hence the port stalled :(
18:59:53 <thebug> ah
19:00:03 <dons> but there is a lot of existing 32 bit mips code. maybe it is very similar?
19:00:19 <thebug> would an R5K run the 64-bit or 32-bit ghc?
19:00:42 <thebug> <I ask because my R5K indy takes waaaaaaay less electricity than running the octane>
19:00:59 <dons> don't know. does it have the 64 bit ABI?
19:01:23 <dons> man abi
19:01:24 <thebug> I know the chip does 64-bit, but I'm not sure which mode it runs in usually
19:02:04 <dons> these machines seem to support 32 and 64 simultaneously. at least the octane does
19:02:08 <dons> not sure what the os runs as
19:02:27 <thebug> you got me ... IRIX was never as clear-cut about it as solaris is
19:02:44 <thebug> I'm pretty sure anything r10k and above runs full 64 all the time
19:04:36 <thebug> well, according to abi, O32 format has supported ISA mips1,2, n64 is ISAs mips3,4 and n32 is also mips3,4
19:04:51 <thebug> I'm pretty sure r5k is mips3
19:05:30 <thebug> but that still doesn't tell us what the OS runs as
19:06:23 <dons> doesn't matter, does it?
19:06:33 <dons> you just care that you can compile n64 binaries
19:06:43 <thebug> and run n64 binaries
19:10:29 <SamB> anybody can compile them
19:10:39 <SamB> with the right cross-compiler
19:12:01 <SamB> hmm, this is probably not the n64 that I immediately think of...
19:12:35 <SamB> (specially since that one is 32-bit ;-)
19:12:48 <dons> "n64  The 64-bit ABI which was introduced on IRIX 6.0 systems."
19:13:18 <dons> irix has good man pages
19:14:31 <thebug> maybe mipspro has some useful docs
19:14:39 <thebug> hmm
19:17:04 <thebug> d'oh, guess which dists I -didn't- install :/
20:12:49 <pimpbot5000> does anyone have much experience with parsers?
20:13:15 <pimpbot5000> i'm having a bitch of a time with a java parser
20:13:19 <Riastradh> There are lots of experience with lots of parsers.
20:13:21 * Riastradh ducks.
20:13:36 <pimpbot5000> hehe
20:13:55 <pimpbot5000> i'm trying to add a bit of syntax to java
20:14:39 <pimpbot5000> meth ::= t md ( arg* ) { body } @pre { exp } @post { exp }
20:16:30 <pimpbot5000> unfortunately, adding the @pre syntax breaks the java parser i use
20:19:45 <aFlag> use cps all over it
20:29:16 <thebug> hmm
20:29:39 <thebug> inst doesn't pick the 64-bit libraries as a default when I go to install IRIX on my Indy R5K
20:56:35 <thebug> dons: so what we're looking for is MIPS3/4 asm docs, and n64 ABI docs, yes?
20:57:17 <dons> i think so
20:57:25 <dons> probably just the asm docs
20:57:37 <dons> the other stuff we don't care too much about
20:57:51 <thebug> mmmm ok
20:58:21 <thebug> I'll see what I can dig up, I'm doing a fresh install of 6.5.20 on my indy while the octane chugs along
20:58:45 <dons> ok. the stuff that needs to be done is listed on the 'porting' page
20:58:53 <thebug> okay
20:58:58 <dons> if you find some useful docs, I might have a go at it
20:59:33 <thebug> I'd like to help, if I can be of some use or another
21:00:40 <dons> you can get started on any porting you'd like. you can email me any problems.  see www.cse.unsw.edu.au/~dons
21:01:17 <thebug> I'll take a look at that, might be interesting
21:01:59 <dons> once I've got a bit of time, I'll dive back in to mips and see if we can sort something out. anything you get done till then is helpful
21:49:39 <thebug> dons: I have an error log of when the build fails
21:51:02 <dons> can you mail it to me?
21:51:10 <thebug> oh sure
21:51:34 <thebug> it's just the tail end of it, including the line that make used to compile that file
21:51:43 <thebug> and the whole of the error
21:51:57 <dons> ok
21:53:39 <thebug> should be on its way
21:54:10 <dons> ah. it is trying to registerise the build
21:54:16 <dons> hence JMP_
21:54:53 <thebug> hmm that's really evil ... why does it try to build like 30 files at once?
21:55:12 <thebug> oh, that's just linking, nevermind...duh
21:55:23 <dons> you'll have to start over. 
21:55:34 <dons> and write a file: mk/build.mk containing
21:55:35 <dons> GhcUnregisterised=YES
21:55:35 <dons> SplitObjs=NO
21:56:07 <thebug> then make clean && make?
21:56:19 <thebug> or reconfigure?
21:57:04 <dons> well, i'd usually be building in a shadow tree. i.e. rm -rf obj ; lndir .. ; and reconfigure
21:58:48 <thebug> ugh I need to replace this system disk, it's gotten really loud since I last ran the machine
21:59:18 <thebug> reconfiguring won't clobber build.mk, will it?
21:59:25 <dons> no
21:59:39 <dons> but I'm not 100% that everything will get cleaned
21:59:53 <dons> I usually don't trust the cleaning mechanism :}
22:00:04 <dons> but, hey, maybe it works fine!
22:02:52 <thebug> I'll investigate more tomorrow, but for now, thebug needs sleep :)
22:03:56 <dons> ok. ps. looks like some required patches have sneaked into 6.2.1, so you may have a relatively easy time
22:04:21 <thebug> ooh nice
22:05:21 <dons> and i have the rest on my machine, if/when you need them
22:05:48 <dons> maybe you won't
