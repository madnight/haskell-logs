00:00:05 <solidsnack> separate from registry?
00:00:11 <pumpkin> moozilla: environment variables that allow you to affect the loader?
00:00:18 <moozilla> they may be stored in the registry
00:00:22 <moozilla> I'm not sure
00:00:31 <Baughn> mathijs: As far as I'm concerned, just AGPL3 would suffice
00:00:37 <moozilla> pumpkin, I don't know
00:00:45 <Baughn> I see no reasons for free lunches
00:00:52 <pumpkin> I don't actually know how dynamic loading works on windows
00:01:00 <pumpkin> haven't done anything serious on it in years
00:01:05 <moozilla> I don't even know what dynamic loading is >_>
00:01:24 <Baughn> moozilla: When applications use DLLs. They're linked at load-time.
00:01:32 <solidsnack> loading or linking?
00:01:37 <solidsnack> same thing?
00:01:42 <Baughn> Dynamic linking
00:01:46 <mathijs> Baughn: nah, I can understand dual licensing (to enable companies to use your stuff closed source if they pay), and bsd-like stuff too for certain libraries. But in the end, I sure hope everything will become gpl3-like
00:01:53 <Baughn> Dynamic loading could be something like opening a text file in an editor. ^^;
00:02:03 <pumpkin> Baughn: or something like dyld ;)
00:02:16 <Baughn> mathijs: Dual licensing, sure, but then you've still only got one /open-source/ license
00:02:34 <Baughn> pumpkin: No, that's dynamically loaded dynamic linking
00:02:49 <pumpkin> I just call it the loader :)
00:03:04 <Axman6> @hoogle forkOnIO
00:03:04 <lambdabot> No results found
00:03:07 <Axman6> hmm
00:03:53 <mathijs> Baughn: if a library becomes good/big enough, you can be sure that people won't just walk away with it (their improvements will only be minor, or they have to keep an internal fork for many years). In that case wide use of a lib might be more important than keeping it gpl.
00:03:54 <moozilla> so, I'm a bit oblivious (never done any C or C++), do I need to compile the SDL dev libraries for it to work with haskell?
00:04:54 <dmwit> Almost certainly.
00:04:59 <Baughn> Unless there's something weird going on with windows, there are no dev "libraries"
00:05:04 <dmwit> "The dev libraries" is code for "it has the headers, too."
00:05:05 <solidsnack> you could try to run the installer and see if it throws up
00:05:17 <Baughn> ..yeah, that's what I was about to say
00:05:35 <Baughn> The compilers needs headers to figure out how to talk to the libraries, but the headers aren't libraries
00:05:36 <solidsnack> i mean, the Haskell SDL installer
00:05:47 <solidsnack> it will say "headers not found" or some such
00:05:48 <dmwit> solidsnack: We already know that throws up.
00:05:53 <solidsnack> oh
00:06:03 <solidsnack> i've been going back and forth
00:06:20 <moozilla> ok well I tried using these instructions
00:06:21 <moozilla> http://www.libsdl.org/extras/win32/mingw32/README.txt
00:06:43 <moozilla> it failed on step 5
00:06:47 <moozilla> there was no ./configure
00:06:54 <moozilla> so I tried
00:06:57 <moozilla> 'make'
00:07:11 <moozilla> and then 'make native' which did something
00:07:18 <moozilla> 'make install' didnt do anything
00:11:36 <mjrosenb> moozilla: doesn't ghc have native windows graphical library bindings?
00:12:19 <solidsnack> mjrosenb: even if it does, you still might want to work with something a little higher level
00:12:51 <cnwdup> I think using gtk2hs also is less trouble and cairo is nice for drawing if you don't mind using vector graphics (which I recommend over raster graphcis in general).
00:13:15 <mjrosenb> 23:20 < moozilla> well I'm mostly looking for a way to just set pixels of bitmaps and draw them to the screen
00:13:16 <moozilla> well, I think vector graphics would be the wrong choice in this case
00:13:21 <solidsnack> but yeah, GHC has GDI
00:13:35 <solidsnack> mjrosenb: fair enough :)
00:13:50 <mjrosenb> from my experience with C
00:14:01 <mjrosenb> sdl + pixels was not a whole lot of fun
00:15:05 <cnwdup> If I just wanted to change pixels and it wasn't too serious I'd probably use X11 calls or the respective Windows API for that.
00:15:43 <dmwit> Gtk2Hs has its Image class, which allows pixel manipulations.
00:16:00 <dmwit> I've used it for a few Python Challenge things, and it was reasonably usable for super simple stuff.
00:16:27 <mjrosenb> dmwit: last time i tried that, it took like 50 lines of code just to get to something where i could start drawing
00:16:28 <cnwdup> moozilla, can you be more concrete about what you want to do?
00:16:35 <dmwit> mjrosenb: Well, there is that.
00:16:40 <dmwit> Gtk2Hs is high-overhead.
00:16:51 <moozilla> yes, I want to read binary data from GBA games and display it
00:16:54 <dmwit> moozilla: Was there an autoconf or autoreconf or so?
00:17:09 <dmwit> moozilla: Maybe you had to build the configure script yourself.
00:17:13 <dmwit> (with one of those tools)
00:17:22 <moozilla> dmwit in the SDL dev thing?
00:17:33 <dmwit> yes
00:17:36 <solidsnack> moozilla: the instructions omit that step
00:17:42 <solidsnack> it would go right before step 5
00:17:53 <edbond> does ghc automagically parallel map function?
00:17:57 <dmwit> no
00:17:59 <opqdonut> no
00:18:00 <cnwdup> moozilla, and you want to do it for your personal fun or distribute that software?
00:18:04 <opqdonut> but there is a parMap function for that
00:18:05 <dmwit> There is pmap if you want parallel map.
00:18:10 <dmwit> Whoops, parMap.
00:18:16 <moozilla> cnwdup well, both
00:18:25 <dmwit> And there is DPH if you want the compiler to figure out where to make things parallel.
00:18:32 <dmwit> or is it NDP?
00:18:39 <dmwit> I can never keep these TLAs straight.
00:18:41 <pumpkin> DPH
00:18:51 <pumpkin> is what they call it, but they describe it as NDP a lot
00:18:52 <solidsnack> TLA is what?
00:18:57 <moozilla> yeah, dmwit I don't think there is a autoreconf or anything
00:19:01 <dmwit> solidsnack: three-letter acronym
00:19:15 <cnwdup> Then I probably wouldn't even make it dependant on SDL and just manipulate the drawing area directly. At least using X11 thats not a big deal. Or if you want a GUI anyways, use gtk (gtk2hs).
00:19:15 <Axman6> dmwit: can't remember would have been a better response :P
00:19:27 <dmwit> =)
00:19:31 <moozilla> ah GTK
00:19:34 <Axman6> well, DPH is NDP
00:19:35 <moozilla> I've used that before
00:19:40 <dmwit> cnwdup: Did you miss the bit where this is on Windows?
00:19:44 <solidsnack> dmwit: i thought it might be Thread Level A...something
00:19:57 <moozilla> I'm fairly sure I've had GTK working before
00:19:59 <Axman6> as in, data parallel haskell is an implemention of nested data parallelism
00:20:03 <idnar> Threat Level A?
00:20:09 <pumpkin> omg noes
00:20:14 * pumpkin gets into his bomb shelter
00:20:17 <cnwdup> dmwit, nope. But I don't have experience with the Windows API. But I bet there are pretty basic calls to manipulate a drawing area on the screen as well, aren't they?
00:20:22 <solidsnack> Thread Level, Eh?
00:20:24 <dmwit> dunno
00:20:24 <Axman6> dubble up nugga!
00:20:28 <solidsnack> it's canadian
00:20:47 <dmwit> bye bye!
00:20:56 <Axman6> o/
00:21:05 <solidsnack> \o
00:21:06 <moozilla> I don't care if it's raw data manipulation I have to do, I'm working with binary data anyway
00:21:34 <solidsnack> i think the fastest path leads through GTK
00:21:49 <solidsnack> it has a nice windows installer
00:22:13 <solidsnack> then you can go straight to building a window and filling in the pixels
00:22:21 <solidsnack> no, it will not be as simple or clean as SDL
00:22:41 <solidsnack> but i bet you would have been done by now
00:22:46 <cnwdup> And it'll be cross platform, you' have a nice gui which is almost mandatory for Windows imho.
00:22:58 <solidsnack> aye, there's that as well
00:23:32 <solidsnack> it'll work on our computers, too
00:24:14 <solidsnack> well, SDL is cross platform, too
00:24:32 <solidsnack> moozilla: but it does not seem to be crossing for you :)
00:24:44 <moozilla> yeah
00:24:57 <moozilla> solidsnack is there an easy way to set up GTK
00:25:01 <solidsnack> yes
00:25:13 <solidsnack> go to their site and download the one-click installer
00:25:15 <solidsnack> there you go
00:25:29 <moozilla> I mean, the bindings
00:25:44 <solidsnack> oh, wait
00:25:53 <solidsnack> is gtk2hs in cabal yet?
00:26:22 <cnwdup> I don't think so. But there's a windows installer.
00:26:26 <solidsnack> oh, they have windows binaries
00:26:32 <moozilla> ok theres a windows installer
00:26:34 <moozilla> that should work
00:29:39 * Axman6 commits haskell suicide...
00:29:50 <solidsnack> o/
00:29:52 <Axman6> myThreadId >>= killThread
00:29:57 <Axman6> x_x
00:30:01 * Baughn carefully avoids looking at Axman6. So long as he doesn't look, he's still alive.
00:30:27 <Axman6> I AM NOT A SCHRODINGER THREAD!
00:30:30 <Axman6> sp?
00:30:44 <Baughn> You should've used a strict suicide function, then
00:31:01 <Baughn> Anyway, everything is schrodingered in real life. :P
00:32:00 <solidsnack> schroedinger
00:43:28 <zeno> why is the haskell version using so much memory? it seems if the leak was found it would be much quicker
00:44:00 <pumpkin> you talking about pidigits?
00:44:37 <zeno> yes
00:44:44 <dolio> Compiler bug.
00:44:50 <zeno> sorry thought i pasted the link
00:44:54 <zeno> ah ok
00:45:00 <pumpkin> zeno: you can tell it's been brought up enough :P
00:45:08 <zeno> im sorry i didnt know
00:45:09 <pumpkin> that I could tell what you were talking about even when you didn't say so :)
00:45:12 <pozic> Is it possible to load a module which already has been loaded as a dependency to make it the current module without reloading everything?
00:45:19 <pumpkin> nah, just saying :)
00:45:20 <zeno> lol
00:45:40 <Axman6> zeno: it runs a lot faster under 6.8.3 due to that bug
00:45:40 <zeno> was confused a second
00:46:16 <Axman6> zeno: it's also already been fixed, and should be in 6.10.2 :)
00:49:21 <zeno> cool
00:49:41 <f4hy> Axman6: when does that come out?
00:49:57 <Axman6> when it's done ;)
00:50:05 <f4hy> is it near done? haha
00:50:17 <Axman6> an RC is expected semi-soon (next few weeks i'd say)
00:51:04 <f4hy> You know what the biggest problem I am having in learning haskell?
00:51:23 <opqdonut> pray tell?
00:51:27 <f4hy> I have too much fun playing with it and I dont get any of my homework done
00:51:28 <Axman6> it's just too dam awesome your hear explodes?
00:51:38 <Axman6> damn*
00:51:41 <hydrapheetz> Oh, that could be a problem
00:51:43 <Axman6> head*
00:51:45 <Axman6> rawr
00:52:00 <Axman6> managing homework and haskell can be a problem
00:52:19 <f4hy> It is. I have a big test in cryptography tomorrow, but I just want to read more haskell tutorials
00:52:22 <pumpkin> homework doesn't need doing
00:52:24 <pumpkin> it's fine
00:52:50 <ray> the problem is when the homework cuts into your haskell
00:52:57 <Axman6> heh
00:53:11 <hydrapheetz> Too many things to do and not enough time to do them
00:53:18 <pumpkin> yeah :/
00:53:47 <f4hy> How do I to multi line comments?
00:53:51 <moozilla> I can't get GTK working either
00:53:55 * moozilla gives up
00:53:56 <pumpkin> {- -}
00:54:01 <solidsnack> moozilla: yikes
00:54:05 <pumpkin> are the delimiters for multiline comments
00:54:10 <solidsnack> moozilla: what happened?
00:54:14 <f4hy> pumpkin: thanks
00:54:26 <moozilla> I installed the latest GHC and then the GTK thing and it doesnt work
00:54:33 <moozilla> just some demo code
00:54:37 <cnwdup> moozilla, define "doesn't work"
00:54:53 <solidsnack> yeah, it would help us to have error messages
00:55:09 <moozilla> Loading package gtk-0.10.0 ... <interactive>: libgio-2.0-0: The specified proced
00:55:10 <moozilla> ure could not be found.
00:55:10 <moozilla> can't load .so/.DLL for: libgio-2.0-0 (addDLL: could not load DLL)
00:55:47 <cnwdup> moozilla, you've had ghc 6.10 installed *before* you installed gtk2hs, right?
00:56:11 <moozilla> i just installed the new version before I installed gtk2hs
00:56:15 <solidsnack> moozilla: how did you invoke GHC ?
00:56:17 <pejo> moozilla, are you on windows and using ghci? Try compiling the things and see if that works.
00:56:23 <moozilla> yeah I was using ghci
00:56:38 <moozilla> to be honest I've never been able to make it compile
00:56:39 <moozilla> <_<
00:56:49 <moozilla> I can get it working on linux
00:57:37 <pejo> moozilla, the example I mean, not gtk2hs.
00:58:01 <moozilla> pejo yeah, I've never been able to compile *anything*
00:58:12 <solidsnack> oh
00:58:40 <solidsnack> moozilla: like even this, you can not compile:       main = print "halp"
00:58:49 <cnwdup> moozilla, then you fix that first
00:59:03 <moozilla> well let me try compiling the demo
00:59:15 <moozilla> maybe it will work with the new version of ghc
01:00:59 <solidsnack> moozilla: remember to use    --make
01:01:07 <moozilla> nice, it works
01:01:09 <moozilla> :)
01:01:53 * alar sees two Philippas in the channel
01:04:16 <alar> $ runhaskell Setup.lhs build
01:04:16 <alar> Setup.lhs: Package blas-0.7.6 can't be built on this system.
01:04:19 <alar> WTF?
01:04:38 <pumpkin> what system?
01:04:41 <alar> no explanation of what's wrong with my system
01:05:00 <alar> GHC-6.8.3 on fbsd7.1
01:05:01 <Axman6> do you have any BLAS packages installed?
01:05:13 <alar> blas-0.5
01:05:16 <Axman6> you'll probably need BLAS.h somewhere
01:05:22 <alar> should I remove it first/
01:05:30 <Axman6> probably not
01:05:41 <alar> Axman6: I have blas port installed
01:05:49 <Axman6> :\
01:06:24 <alar> and cblas.h in /usr/local/include
01:06:49 <Axman6> i dunno then, sorry
01:07:10 <Axman6> check Setup.hs and see if there's anything in there that'll tell you why it doesn't work
01:07:18 <pumpkin> it's two lines
01:07:27 <f4hy> alright all. So I decided to do problem one on project euler (I can see how many of these will be very easy with haskell) it is just a single line. So if I have an expression in a file how do I run it with say ghci?
01:07:36 <alar> yes, 2 lines
01:07:57 <alar> it seemd that I should dive into cabal's insides to figure
01:08:03 <Axman6> f4hy: ghci fileName.hs ... wait... then run the function
01:08:17 <wli> Here's me running an expression in ghci
01:08:36 <f4hy> Axman6: if it is not a function?
01:09:00 <alar> f4hy:  ghci fileName.hs ... wait... then run the expression :)
01:09:01 <Axman6> f4hy: is what not a function?
01:09:20 <Axman6> f4hy: it needs to be a function to run in ghci from a file...
01:09:28 <f4hy> hmm ok
01:09:46 <Axman6> so f x = blah x $ 10
01:09:48 <Axman6> or something
01:10:11 <wli> >> :m + Data.List Control.Arrow>> take 10 $ unfoldr (Just . second recip . properFraction) (pi :: Double) :: [Integer]
01:10:11 <wli> [3,7,15,1,292,1,1,1,2,1]
01:10:55 <Axman6> wli: what's that actually doing anyway?
01:11:29 <wli> Computing the first ten elements of the continued fraction expansion of pi.
01:12:26 <f4hy> cool! haskell in emacs has a doc mode
01:13:07 <wli> pi = 3 + 1 / (7 + 1 / (15 + 1 / (1 + 1 / (292 + 1 / (...
01:15:58 <Axman6> wli: ah nice :D
01:16:47 <wli> Maybe clearer is pi = 3 + recip $ 7 + recip $ 15 + recip $ 1 + recip $ 292 + recip $ 1 + recip $ 1 + recip $ 1 + recip $ 2 + recip $ ...
01:18:04 <blackh> wli: Hey, do you want to see a really oddball way of calculating pi?
01:19:15 <wli> The continued fraction for e has a regular pattern.
01:19:51 <f4hy> pi = 3.141592653589796 all anyone ever needs to know, ever
01:20:13 <blackh> OK, well, here's a way to "calculate" pi to 4 decimal places: http://www.moonpatio.com/fastcgi/hpaste.fcgi/view?id=1711#a1711
01:20:20 <blackh> This is the first verse in the Bible.
01:20:56 <blackh> Peaker - are you there?  Take a look at this link, if you are ^
01:24:20 <Twey> blackh: Um, what's that syntax?
01:24:22 <Axman6> blackh: not very accurate is it :P
01:24:33 <Twey> Oh
01:24:35 * Twey blinks.
01:24:37 <Twey> value '◊ù' = 40
01:24:49 <Twey> In my browser, it looks like: value '◊ù = '40
01:24:50 <blackh> Axman6: They had computers back in Biblical times but they were very slow.
01:24:52 <Axman6> yeah, i was confused too...
01:24:52 <Twey> o.@
01:25:03 <Axman6> s/was/am
01:25:27 <blackh> Bi-directional text rules never quite work 100% - especially when numbers are involved.
01:25:45 <Twey> Heh
01:26:19 <f4hy> so back then pi was only 3.14155?
01:26:40 <Twey> f4hy: It's due to the expansion of the universe.
01:26:48 <blackh> rofl
01:26:50 <f4hy> Twey: I can accept that
01:27:04 <Axman6> haha
01:27:13 <f4hy> So we can tell if the big crunch is coming by seeing if pi starts decreasing?
01:27:14 <Axman6> blackh: what's the '40 thing about?
01:27:23 <Twey> Axman6: It's not really '40
01:27:32 <Twey> Axman6: It says value '◊ù' = 40
01:27:35 <Axman6> what is it? :\
01:27:41 <Twey> Our browsers are just messing up the text direction
01:27:49 <Twey> So it looks peculiar
01:28:04 <Axman6> well... my terminal is doing the same thing :P
01:28:07 <Twey> Oh
01:28:09 <blackh> It's really "value 'M' = 40" but Hebrew is backwards, and numbers are "neutral" so they are written backwards as well...
01:28:13 <tomdavies> What's the best reference(s) for examples of what Data.Dynamic is useful for?
01:28:17 <f4hy> value '◊®' = 200
01:28:32 <Twey> blackh: You know there's a 'switch to LTR' character too, right?
01:28:35 <f4hy> Copy and paste a line, that is what you will get
01:28:36 <Twey> tomdavies: Um, HList?
01:28:56 <Twey> And the stuff that builds on that...
01:29:00 <blackh> Twey: I don't know if the switch to LTR character would compile in GHC.
01:29:11 <Twey> Someone made an OO system, was it Oleg?
01:29:16 <Cale> Does HList really use Data.Dynamic?
01:29:21 <Twey> blackh: Well clearly the switch-to-RTL character did
01:29:24 <f4hy> I have been wondering, does unicode work well in haskell?
01:29:25 <Twey> Cale: I think so, doesn't it?
01:29:30 <Twey> I don't know how else it could be done
01:29:35 <Twey> f4hy: It works fine in Haskell
01:29:39 <Cale> I thought it used Data.Generics
01:29:51 <Cale> mm... well the newer stuff does
01:29:52 <f4hy> like if I say x = "È¶¨"
01:29:52 <Twey> f4hy: The IO libs need a bit of tweaking, though
01:30:02 <Twey> Cale: Hm, interesting
01:30:07 <Cale> The original HList was just a bunch of typeclasses.
01:30:09 <Twey> f4hy: You will have a lovely horse
01:30:15 <Twey> In a string
01:30:26 <Twey> But if you print it using the Prelude's functions, you'll get garbage
01:30:34 <Twey> There are alternative preludes that fix that
01:30:47 <f4hy> Twey: hmm. Alright will I dont need them right away, but I will
01:31:05 <Axman6> > "È¶¨"
01:31:07 <lambdabot>   "\39340"
01:31:11 <f4hy> :-(
01:31:15 <Axman6> > text "È¶¨"
01:31:15 <ImInYourMonad> the spanish inqusition will be out finding the sinners, killing all those OO-user
01:31:16 <lambdabot>   È¶¨
01:31:20 <Axman6> :)
01:31:20 <f4hy> Oh!
01:31:21 <Twey> (that's not the garbage you'll get: that's fine)
01:31:23 <cnwdup> blackh, is '1 a special notation I don't know of?
01:31:27 <cnwdup> > '1
01:31:29 <lambdabot>   <no location info>:
01:31:29 <lambdabot>      lexical error in string/character literal at chara...
01:31:37 <Twey> cnwdup: No, it's rendering failure
01:31:42 <cnwdup> Twey, ok :D
01:31:56 <Twey> It actually says value '◊ê' = 1
01:32:08 <Twey> AlephOne... wasn't that the name of some AI?
01:32:09 <f4hy> cnwdup: copy nad paste a few lines into a text editor to see what they really are
01:32:10 <Axman6> Twey: that's exactly the same in my terminal >_<
01:32:16 <Twey> Axman6: WFM
01:32:25 <Axman6> WFM?
01:32:30 <cnwdup> Ah, now the code makes more sense. Still that rendering error is awkward.
01:32:30 <Twey> Works For Me
01:32:34 <Axman6> ah
01:32:36 <Twey> And weird
01:32:44 <f4hy> Axman6: wait so what does text do?
01:32:45 <Twey> Since I'm using a GTK-based terminal
01:32:51 <Axman6> well, since i'm on OS X, everything uses the same great text rendering
01:32:57 <Twey> I'd expect it to work the same as Firefox
01:33:02 <blackh> cnwdup: No - What's happening is that the browser sees a Hebrew letter and then takes all the non-A-to-Z text and reverses the lot of it.
01:33:11 <Axman6> :t text
01:33:12 <lambdabot> String -> Doc
01:33:21 <Twey> f4hy: It's part of a pretty-printing library
01:33:23 <Axman6> f4hy: it's part of one of the pretty printing libraries
01:33:28 <Axman6> lame
01:33:32 <Axman6> beelsebob'd
01:33:33 <Twey> We use it for \b output formatting, I think
01:33:35 <Twey> Haha
01:33:50 <blackh> cnwdup: So it really says "value 'M' = 40" where M is a Hebrew letter.
01:34:09 <f4hy> Cool. I will have to play around with that.
01:34:53 <Cale> Twey: That's okay, just don't use it for /b/ output formatting. Those guys are nuts.
01:35:02 <cnwdup> blackh, is there a way to avoid that? Or is there some sense in the code's representation I am missing?
01:35:03 <Axman6> blackh: ah! thanks
01:35:04 <Twey> Haha, touch√©
01:35:08 <f4hy> I wrote a chinese chess engine (which is why I pasted a horse) which I am making into a webapp. It is not to big and so my first project once I get a hang of haskell will be to port that
01:35:26 * Twey nods.
01:35:34 <alar> Unicode support: http://blog.kfish.org/2007/10/survey-haskell-unicode-support.html
01:35:51 <Twey> That's over a year old
01:35:56 <Twey> We've moved on since then :-P
01:36:16 <alar> where have you moved?
01:36:27 <f4hy> Well it will probably take me more than a year to learn the language sufficently so maybe unicode support will be totaly different by the time I need it
01:37:09 <blackh> cnwdup: If you use an intelligent editor, it gets the LTR/RTL thing a little better. I don't know about adding explicit LTR/RTL characters - that would just mess up the program.
01:37:12 <Twey> I prefer the libraries that just replace all the non-Unicode-capable functions in the Prelude
01:37:18 <Twey> Nobody needs anything except UTF-8 anyway :-P
01:37:30 <alar> then I'm nobody
01:37:43 <f4hy> alar: what do you need that is not UTF-8?
01:38:10 <alar> ASCII and some cyrillic encodings
01:38:10 <Twey> And why haven't you converted it already?
01:38:17 <Twey> ASCII is UTF-8
01:38:25 <alar> yep
01:38:26 <Twey> The Cyrillic encodings can be converted to UTF-8
01:38:38 <Twey> (on the fly, if necessary)
01:38:46 <alar> converting entire OS just because Twey doesn't like it?
01:38:51 <alar> I'll think of it
01:38:53 <alar> a bit
01:38:55 <Twey> Haha
01:39:05 <f4hy> Sounds like a good enough reason to me
01:39:07 <Twey> Entire OS?
01:39:17 <alar> every file
01:39:18 <Twey> You have an entire OS written using some legacy Cyrillic encoding?  o.@
01:39:21 <f4hy> You wrote/mantain a cyrillic OS?
01:39:30 <alar> i Use it :))
01:39:41 <f4hy> alar: This OS is?
01:39:57 <Twey> I didn't know such an OS even existed.  It must be pretty old not to know about Unicode.
01:39:58 <alar> fbsd uses KOI-8, W32 uses CP1251
01:40:13 <alar> samba tools on W32 use IBM866
01:40:32 <Twey> Well, we expect this sort of thing from W32
01:40:39 <Twey> I'm disappointed in FBSD, though :-\
01:40:43 <alar> welcome to the real world :))
01:40:50 <Twey> So you can't work with non-Cyrillic characters?
01:41:04 <f4hy> NO! I take the blue pill and pretend nothing exists but UTF-8
01:41:05 <Twey> If you want to send some Chinese text through your OS... it just fails?  :-\
01:41:06 <alar> what non-Cyrillic characters?
01:41:15 <Axman6> f4hy: got a mac? :)
01:41:16 <alar> hebrew and kanji?
01:41:21 <Twey> Sure, why not
01:41:29 <f4hy> Axman6: no
01:41:38 <alar> Twey: why would I want to send Chinese text??
01:41:45 <Axman6> everything's UTF-8 in OS X
01:41:47 <Twey> ...
01:41:57 <Twey> Well that's possibly the worst excuse I've ever heard :-P
01:42:02 * alar is puzzled by idea of sending Chinese texts
01:42:14 <f4hy> alar: speaking to someone in china?
01:42:17 <Twey> Oh wait, no, Paul Graham's 'we don't need non-ASCII text support in Arc' beats it
01:42:19 <Axman6> i don't get typing asian texts
01:42:24 <f4hy> Playing my chinese chess application?
01:42:58 <alar> f4hy: it may sound strenge, I know, someone of you might be shocked, but... I don't speak Chinese
01:43:06 <f4hy> alar: I dont either
01:43:09 <f4hy> Not a word of it
01:43:19 <f4hy> I am glad Twey told me my character was a horse
01:43:20 <Twey> But that doesn't mean that you're never going to need to support text in a language other than Russian x.x
01:43:24 <alar> then why would I need to use Chinese encodings?
01:44:04 <wli> Hang on while I do some stuff.
01:44:08 <Twey> And 'I don't need it so no-one else does either' is a terrible mode of thinking :-P
01:44:19 <blackh> alar: So it takes less time to figure out that there's no English button on your video card manufacturer's website.
01:44:29 <f4hy> alar: _need_ I suppose you wont. but normally it is good to support things you may want later.
01:44:30 <wli> To get the full expansion going.
01:44:31 * Twey laughs.
01:44:33 <alar> Twey: foreign (non-russian and non-latin) text arise so rarely, that they are perfectly covered with the use of UTF-8
01:44:51 <Twey> alar: Yes they are, but you just said that your system doesn't support UTF-8
01:44:55 <atsampson> anyone else going to Fun In The Afternoon today?
01:45:08 <alar> f4hy: premature optimization id the root of all evil
01:45:10 <atsampson> and, more, specifically, anyone on the 09:35 from Kings' Cross to Leeds?
01:45:18 <Twey> (and I'm not sure I'd say they 'arise so rarely' when they're used by the majority of the world's population)
01:45:21 <f4hy> alar: it is not an optimization, it is a support issue
01:45:29 <atsampson> there's a guy in my carriage who was talking about Haskell on the phone earlier, so I assume I'm not the only one ;)
01:45:39 <ImInYourMonad> does anyone here like the new lisps?
01:45:42 <f4hy> alar: choosing to NOT use the standard the supports the widest amount of choices is evil in my mind
01:45:44 <alar> Twey: well, it can't use UTF-8 everywhere, but some parts of it handle UTF-8 well
01:45:44 <Twey> atsampson: No, should've rearranged my sleep schedule; I forgot about it :-\
01:45:45 <ImInYourMonad> clojure arc, n ewlisp etc
01:45:52 <alar> e.g. GHC :))
01:46:04 <ImInYourMonad> i like clojure but arc is not much there
01:46:13 <Twey> Clojure is interesting
01:46:16 <Twey> Liskell too
01:46:52 <Twey> Arc seems... unimaginative
01:47:16 <ImInYourMonad> now i feel clojure is just a bad haskell, used to really like it though
01:47:50 <ImInYourMonad> paul graham at work: hmm reduce, wait we can make it shorter, red, no wait thats a color, hmm redu, no to long, ah rdc! woot 100 year language ftw
01:48:04 <alar> f4hy: it's not choosing NOT to use _the_standard_, it's just admitting the existence of non-standard entities
01:48:17 <solidsnack> ImInYourMonad: lolz
01:48:25 <alar> in the end the system will support UTF-8 and something else
01:48:26 <Axman6> paul graham?
01:48:29 <alar> or die :))
01:48:49 <Twey> alar: That doesn't mean I have to work with it
01:49:13 <alar> Twey: yes, but I have to work with it :\
01:49:27 <Twey> Alternatively, you could get a better OS :-P
01:49:39 <alar> there's no such ting
01:49:43 <blackh> I'm very interested in language innovation, so I'm listening intently.
01:49:43 <alar> thing
01:50:52 <blackh> I'm one of those kinds of people that - in my OO code - would pass an object around that gave you the system time. So you can imagine that I took to Haskell like a duck to water.
01:50:58 <Twey> alar: When your current OS doesn't even support Unicode, a standard that's been out and about for, what, seventeed years? it's time to move on :-P
01:51:34 <alar> Twey: it kinda does support it, but it doesn't use it ;)
01:51:49 <blackh> One of my co-workers asked me whether it was OK to use the Singleton pattern.  I went on about how bad it was for two pages!
01:51:51 <Twey> seventeen**
01:51:58 <solidsnack> FreeBSD can use UTF-8
01:52:01 <Twey> blackh: Hahaha
01:52:05 <alar> yes
01:52:10 <Twey> alar says it doesn't
01:52:24 <solidsnack> no, someone just made a bad choice
01:52:32 <alar> Twey: I said it uses other encodings in some places
01:52:52 <solidsnack> they set the system encoding to something other than the encoding of the future
01:53:25 <alar> solidsnack: they probably set the system encoding to the encoding of today :))
01:53:40 <solidsnack> alar: it was their today, i guess
01:53:44 <atsampson> it's easy enough to change the system encoding...
01:53:53 <Twey> solidsnack: So it's user-correctable?
01:53:59 <solidsnack> sure
01:54:02 <solidsnack> uhm
01:54:07 <solidsnack> it is time consuming
01:54:09 <atsampson> it's not necessarily sensible to ship with the system encoding being UTF-8, because *lots* of people have filenames in something other than UTF-8 on existing filesystems
01:54:10 <Twey> Well, there you go then.
01:54:19 * alar can't imagine UNIX-like without user-adjustable encoding
01:54:40 <Twey> atsampson: Yes, but for any encoding X, *lots* of people will have filenames in something other than X on existing filesystems
01:54:42 <solidsnack> honestly, i hope that they just ban alternative encodings soon
01:54:57 <Twey> At least with UTF-8 or UTF-16 you *can* convert them
01:55:01 <atsampson> Twey: sure, but UTF-8 is special -- because arbitrary strings of characters in other encodings aren't valid UTF-8
01:55:14 <Twey> True
01:55:30 <Twey> But you can also specify per-filesystem encodings, at least on Linux
01:55:50 <solidsnack> you can convert all the names
01:55:56 <solidsnack> i can't remember how i did it
01:56:07 <solidsnack> but i had to transition a system from chinese to utf-8 once
01:56:20 <solidsnack> linux system -- gentoo
01:58:00 <alar> solidsnack: no sooner than when all network things: ftp-clients, samba tools, NFS, etc start conversion of encoding on-the-fly
01:58:01 <p_l> Twey: The system doesn't use any specific encoding. You can however specify what encoding is used on certain filesystem for names and which one should be used for communication with applications (iocharset)
01:58:39 <alar> p_l: and there are EVIL tools that do not have configurable iocharset :(
01:58:49 <solidsnack> alar: it will be some time before we can have a complete ban, yeah :)
01:59:24 <alar> solidsnack: and I live today :)
01:59:29 <p_l> alar: you mean in kernel? usually it's because the underlying filesystem doesn't care too
01:59:54 <jeltsch> Hello, I have a problem with the generic Linux binary package of GHC 6.10.1.
01:59:55 <p_l> NTFS, on the other hand, has 3 encodings at the same time, on-disk
02:00:09 <solidsnack> alar: well, i don't see any reason why someone with root ever needs to tolerate other encodings
02:00:48 <solidsnack> well, i guess if you want to serve that stuff
02:00:55 <jeltsch> After installation, I get messages like: ‚Äúcan't load .so/.DLL for: HSparsec-2.1.0.1 (libHSparsec-2.1.0.1.so: cannot open shared object file: No such file or directory)
02:01:36 <solidsnack> like you have a website in Russian and you can't serve UTF-8
02:02:06 <solidsnack> i'm having trouble coming up any other good reason to keep old encodings around
02:02:17 <p_l> solidsnack: Then you need to deal with applications serving the files. Also, why the hell can't you serve UTF-8 having a website in Russian?
02:02:19 <jeltsch> This happens when I force the package to load with ghci -package
02:02:19 <jeltsch> If I just start ghci and try something like ‚Äúimport Network‚Äù, GHCi tells me that it cannot find the module.
02:02:28 <solidsnack> p_l: users
02:02:58 <p_l> solidsnack: All browsers support UTF-8
02:03:05 <edwardk> woot. got the strongly typed datalog working
02:03:12 <edwardk> @hpaste
02:03:13 <lambdabot> Haskell pastebin: http://hpaste.org/new
02:03:18 <solidsnack> edwardk: interesting
02:03:29 <solidsnack> p_l: well, i don't know then
02:03:44 <solidsnack> alar: what possible reason is there to keep these old encodings around?
02:03:47 <HugoDaniel> is there any virtual machine made in haskell ?
02:03:59 <Axman6> jeltsch: why not just use :m +Network?
02:04:19 <Axman6> HugoDaniel: there's one or two (i maintain one... not very well though :P)
02:04:21 <edwardk> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2031#a2031
02:04:24 <alar> solidsnack: to work with thingies that use them
02:04:29 <edwardk> abuses data.typeable for rules
02:04:32 <HugoDaniel> Axman6: where can i read about it ?
02:04:33 <edwardk> er for facts
02:04:40 <p_l> also, KOI-8 was 8bit long, afaik? I could understand needing to support EUC or ISO-2022 or eventually UCS-2/4
02:04:40 <Axman6> HugoDaniel: hackage ;)
02:04:43 <Axman6> @hackage HARM
02:04:44 <lambdabot> http://hackage.haskell.org/cgi-bin/hackage-scripts/package/HARM
02:04:51 <alar> solidsnack: what possible reason is there to keep OSes not writen in haskell?
02:05:00 <edwardk> *Backlog> naive kb -- [Fact Backlog.Dies (Dies Socrates),Fact Backlog.Mortal (Mortal Socrates),Fact Backlog.Man (Man Socrates)]
02:05:10 <p_l> alar: Cause rest of the world disagrees
02:05:19 <doserj> jeltsch: what does "ghc-pkg list parsec" or "ghc-pkg list network" say?
02:05:20 <solidsnack> well, more than that
02:05:28 <solidsnack> there is no decent OS written in Haskell
02:05:34 <p_l> However, rest of the world will happily support UTF-8
02:05:45 <alar> solidsnack: what's wrong with the existing ones?
02:05:57 <edwardk> so this way you model predicates using haskell data types. next step is stratified negation and relationlog predicates
02:06:00 <Twey> There's House
02:06:00 <Axman6> they don't work anymore
02:06:03 <Axman6> afaik
02:06:05 <Twey> Don't know if it counts as 'decent'
02:06:08 <jeltsch> Axman6: This is the same (I think) as saying  ‚Äúimport Network‚Äù in GHCi. Same error message: ‚ÄúCould not find module ...‚Äù.
02:06:23 <solidsnack> Twey: i can compile C for it?
02:06:39 <Twey> I don't know
02:06:41 <Axman6> NICTA here in Aus there's L4.verified, which is an L4 kernel written in haskell (and converted to C), that is provably correct
02:06:43 <Twey> You can compile Haskell for it
02:06:44 <solidsnack> yeah
02:06:46 <Axman6> not an OS though
02:07:01 <solidsnack> well, a decent OS will have a C compiler, sed, sh and all that stuff
02:07:03 <alar> p_l: you're wrong, major part of the rest of the world supports UTF-8, and you're lucky if you don't have to work with minor part
02:07:19 <solidsnack> so i can run ruby, autoconf and other "bad" programs
02:07:31 <Twey> Heh
02:07:31 <p_l> alar: You mean like MS-DOG etc?
02:07:36 * Twey laughs.
02:07:37 <HugoDaniel> Axman6: do you teach assembly ?
02:07:44 <p_l> solidsnack: autoconf is evil and should die a horrible death
02:07:54 <edwardk> i do wish TypeRep had an Ord instance though, even if it changed from every run of the program to the next
02:07:55 <Axman6> nope. i didn't write that HugoDaniel :)
02:07:56 <alar> p_l: I mean some minor custom software
02:08:01 <atsampson> p_l: autoconf is the worst build system out there, except for all of the others
02:08:03 <solidsnack> p_l: autoconf has been a blessing to the community for a long time
02:08:23 <alar> and, yes, MS-DOG have put legacy footprint on windows networking :)
02:08:44 <jeltsch> doserj: Waaah. There it is: network is installed system-wide and for the user.
02:08:47 * alar is afraid of autoconf
02:08:50 <p_l> solidsnack: I have mixed feelings about that "blessing" that breaks everytime you don't run exactly the same stuff than the maintainer
02:09:05 <edwardk> i suppose i could cheat and abuse its Show, and sort on that
02:09:18 <solidsnack> p_l: it has to deal with a lot of issues, though
02:09:21 <jeltsch> doserj: Sorry, there was a ~/.ghc from a previous GHC install. I removed the old ~/.cabal but forgot to remove the old ~/.ghc.
02:09:27 <p_l> alar: That's one reason to change to NT6 and later
02:09:54 <solidsnack> i would never use it for anything
02:10:05 <solidsnack> but i can see how it was a help
02:10:09 <p_l> solidsnack: I have also seen makefiles that are 1/10 the length of autoconf-generated configure that worked everywhere where the program managed to compile at all
02:10:28 <alar> p_l: what encoding does samba part of NT6 use? and how is it compatible with NT5?
02:10:41 <jeltsch> doerj: But the message is misleading nevertheless because it says that a shared object file is missing while GHC in fact doesn‚Äôt use shared object files.
02:10:55 <p_l> alar: NT6 introduced SMB2, which is a new protocol that mandates unicode-only exchange
02:11:27 * alar wonders what version of SMB is used in his LAN
02:11:46 <Peaker> blackh: heh
02:12:20 <p_l> alar: SMB1, certainly, unless you have win2k8/r2 and vista/7 or samba 4.x
02:12:32 <blackh> Peaker: :)
02:12:55 <alar> p_l: sad that I have XP and samba 3
02:14:11 <p_l> alar: well, you can always use AFS or NFS...
02:15:36 <p_l> though unless you pay for NFS4 clients for windows I'd recommend AFS :)
02:17:45 <p_l> for AFS there is quite nice client out there it seems, and the OS is also very nice
02:17:52 <p_l> *FS
02:17:53 <alar> p_l: NFS in windows?
02:18:07 <alar> and what's AFS?
02:18:11 <alar> @google FS
02:18:12 <lambdabot> http://www.fs.fed.us/
02:18:12 <lambdabot> Title: US Forest Service - Caring for the land and serving people.
02:18:19 <alar> @google AFS
02:18:20 <lambdabot> http://www.afs.org/
02:18:20 <lambdabot> Title: AFS Intercultural Programs
02:18:44 <p_l> openafs.org
02:19:32 <p_l> distributed filesystem that had from beginning stuff that NFS is slowly getting now
02:19:50 <p_l> and yes, there is even a native client for NFSv2/v3 on windows nt
02:20:05 <p_l> and some company sells NFSv4 support
02:21:50 <alar> kernel NFS in fbsd has some issues
02:22:06 <alar> and I don't know if there exists user-level NFS
02:25:52 <pozic> Is there an XML library that is A) Not terribly slow B) Can read simple XML files (DTD validation not needed) C) has a well-factored API (and more importantly, is documented) D) Works on Windows ?
02:28:01 <alar> pozic: I do not understand your A)
02:28:15 <alar> is HXT terribly slow?
02:30:08 <doserj> @hackage hexpat
02:30:09 <lambdabot> http://hackage.haskell.org/cgi-bin/hackage-scripts/package/hexpat
02:30:53 <pozic> alar: HaXml used to be terribly slow, I don't know whether it was improved in the mean while.
02:31:15 <pozic> alar: HXT used to have a terrible API. Has this been improved?
02:31:28 <vegai> Hey. I was wondering how one would do mocks in Haskell
02:31:28 <alar> pozic: HXT probably haven't go far from HaXML in performance
02:31:48 <vegai> i.e. if you wanna test a module that has a dependency to another module, but as it's a unit test, you don't want to depend on the other module in the test
02:31:52 <alar> what's wrong with HXT API?
02:33:57 <pozic> alar: getXmlContents :: IOStateArrow s XmlTree XmlTree
02:34:20 <pozic> alar: Why is the XmlTree type parameter there twice to begin with?
02:34:32 <pozic> alar: what is 's'?
02:34:53 <pozic> alar: it might even be documented, but I am sure you can write an API which does not have that.
02:35:36 <pozic> alar: HXT is a mess. A good XML library can be documented in one page.
02:36:08 <wolverian> try xml
02:36:11 <wolverian> (the library)
02:36:18 <wolverian> @hackage xml
02:36:19 <lambdabot> http://hackage.haskell.org/cgi-bin/hackage-scripts/package/xml
02:36:19 <pozic> wolverian: yes, I was already doing that.
02:36:37 <pozic> wolverian: since it looked the most sane and is created by Galois, so it's probably not that bad.
02:36:54 <wolverian> right.
02:37:05 <alar> @karma+ wolverian
02:37:06 <lambdabot> wolverian's karma raised to 1.
02:38:00 <vegai> I used HXT successfully, though
02:38:18 <vegai> the arrow syntax is quite nice
02:38:19 <alar> I used successfully HaXml then HXT
02:39:29 <vegai> I found this rather helpful to bootstrap myself: http://www.haskell.org/haskellwiki/HXT/Practical/Simple1
02:40:10 <vegai> Galois's xml lib is probably good too, but I didn't find any examples for it
02:41:13 <alar> vegai: the arising need to explicitly specify types for all my arrows is boring
02:42:09 <alar> I'd like to say myfunction::(XmlArrow a)=> a XmlTree ghc-go-figure-what-s-here
02:42:32 <alar> because GHC can't infer (XmlArrow a)=> a part of the type
02:43:18 <alar> the dark side of polymorphism :)
02:44:03 <vegai> I let type inference loose on my hxt module
02:45:59 <alar> vegai: is there any other way to 'run' my arrow besides runX? HXT examples do not show it
02:46:22 <alar> my arrows are 'pure': no IO, no state
02:46:26 <pozic> alar: you can do such things by forcing parts of the type.
02:46:56 <alar> pozic: I don't understand, can you show me how?
02:47:39 <pozic> alar: although there is no syntax for it, you can have a function which already restricts the part of the type in which you are interested in and then do asTypeOf, or just in a where clause where you don't actually use the result.
02:49:49 <alar> :t asTypeOf
02:49:50 <lambdabot> forall a. a -> a -> a
02:50:01 <alar> @index asTypeof
02:50:02 <lambdabot> bzzt
02:50:16 <alar> @hoogle asTypeOf
02:50:17 <lambdabot> Prelude asTypeOf :: a -> a -> a
02:50:36 * alar is caught not knowing The Standard Prelude
02:52:29 <HugoDaniel> im building a list automagically from html, and then the list cames as ["Vila Gal","\147pera", ...] because it doesn't understand iso-8859-1 characters, how do i merge these without touching the html parser ?
02:52:35 <HugoDaniel> is there any fast and dirty way ?
02:52:53 <HugoDaniel> or is it better to touch the parser ?
02:54:14 <blackh> HugoDaniel: Convert them to UTF-8 first? What parser are you using?
02:54:25 <HugoDaniel> ["test1", "Vila Gal","\147pera", "test2"] i would like this list to became: ["test1", "Vila GalÈra", "test2"]
02:54:28 <HugoDaniel> hxt
02:54:33 <HugoDaniel> im checking the options there
02:54:46 <pozic> The xml library doesn't appear to work. I will try another one.
02:54:47 <HugoDaniel> [(a_validate, v_yes), (a_parse_html, v_yes)] these are the only ones im passing it
02:56:21 <blackh> HugoDaniel: I have used it but haven't got into that much detail. It must support UTF-8 because my input is UTF-8. It should be easy to convert your 8859-1 to UTF-8 first.
02:56:46 * alar uses HXT with UTF-8 and all works fine
02:57:36 <HugoDaniel> yeh, i just need to enable it somewhere
02:58:46 <alar> I use "readString [(a_parse_html,"1"),(a_validate,"0"),(a_issue_warnings,"0")]"
02:59:55 <alar> and get UTF-8 String from Network.Browser
03:00:16 <alar> to pass it to HXT
03:01:58 <HugoDaniel> hmm
03:02:14 <HugoDaniel> im using lib curl for the http handling
03:02:29 <HugoDaniel> im passing hxt the (a_encoding, isoLatin1)
03:03:28 <HugoDaniel> in hxt im using xpath for the parsing
03:03:35 <HugoDaniel> which is darn slowwwww
03:04:04 <alar> I use hand-made arrows in place of XPath
03:04:45 <alar> and don't understand how to install libcurl on windows for HXT to work with
03:04:49 <liyang> fun fun fun! (in the afternoon!)
03:05:31 <HugoDaniel> yes, i used to have hand-made arrows, but it was a pain if the website structure changed too often, xpath is a bit more stable... but i think it goes up and down the tree a couple of times :/
03:05:39 <Spark> pic related http://tinyurl.com/b8vbf
03:05:44 <HugoDaniel> i guess my hand-made arrows sucked quite much
03:05:54 <liyang> hello Dave.
03:11:53 <Baughn> There's nothing in hackage, but just on the off chance, is there any haskell software dealing with bayesian networks around already?
03:15:22 <ImInYourMonad> would haskell be suitable for writing a browser(i know monster project not thinking abotu doing it)? fast enoguh I guess but what about memory use?
03:15:26 * alar has just figured that the file "blas.buildinfo" with "buildable: false" content prevented blas lib from building
03:16:18 <Baughn> ImInYourMonad: Considering Firefox, there should be /no problem at all/.
03:16:31 <Baughn> You couldn't possibly get worse memory use than FF already has. ^^;
03:16:36 <p_l> yup
03:16:46 <Baughn> And the fine-grained threading allowed by haskell would be a great benefit
03:16:56 <p_l> IE8 is miles ahead, srsly
03:16:57 <liyang> ImInYourMonad: there are Gecko bindings in Gtk2Hs
03:17:29 <p_l> better yet, don't use gecko.... :P
03:17:39 <blackh> ImInYourMonad: I don't see any reason why not. Haskell would be ideal for managing the memory cleverly. You'd need to avoid certain memory hogs such as String but that's no problem if you know what you're doing.
03:17:53 <Baughn> ImInYourMonad: If you just want web support in a haskell application, I'd suggest wrapping webkit
03:21:14 <Baughn> ImInYourMonad: Or, on X11, there's the very neat option of encapsulating an entirely different program as a sub-window
03:23:18 <wli> YourInnerMonad would be cooler than ImInYourMonad.
03:24:06 <p_l> Baughn: You can do the same on win32, afaik
03:25:00 <Baughn> You sure? It has so many mechanisms to work around /not/ having that option (OLE, COM, etc. etc. etc.), but I've never heard of straight embedding
03:26:28 <p_l> OLE & COM have different purpose (external/internal services which *might* use graphics)
03:26:30 <ManateeLazyCat> Now, process-1.0.1.1 and process-1.0.1.0 make cabal dependencies conflict, but when i use "ghc-pkg unregister process-1.0.1.0" or "ghc-pkg unregister process-1.0.1.1", ghc-pkg notify me "would break the following packages: ...", how to fix this problem?
03:26:34 <p_l> however, if you play with messages, you should be able to embed a window
03:26:56 <Baughn> ManateeLazyCat: Typically, rm -rf ~/.ghc should fix it
03:27:04 <Baughn> ManateeLazyCat: In the future, don't say cabal upgrade. :/
03:27:22 <ManateeLazyCat> Baughn: So i can't "cabal upgrade"?
03:27:33 <Baughn> ManateeLazyCat: Not yet. It's not a very safe command.
03:28:03 <Baughn> Ideally it'd only upgrade packages you've installed in $HOME, and also recompile packages that depend on them
03:28:09 <Baughn> But as it doesn't, you have to take care of that yourself
03:29:22 <ManateeLazyCat> Baughn: This is GHC bug? Why it trace user's version?
03:29:35 <Baughn> ManateeLazyCat: cabl-install "bug"/missing feature
03:29:44 <Baughn> For the time being, just consider upgrade an internal/maintainer command
03:29:56 <dcoutts> and a mis-design feature of the ghc package db
03:30:24 <dcoutts> ManateeLazyCat: if you get the latest cabal-install, the upgrade command has been disabled
03:34:08 <ManateeLazyCat> So need remove *all* file under "~/.ghc"? I have use cabal install many packages and always upgrade. If i remove "~/.ghc", those packages is lost?
03:34:27 <Baughn> The packages are lost, the tarballs are not. It won't need to download them again.
03:34:44 <dcoutts> ManateeLazyCat: you only need to unregister packages where there is duplication between global and user
03:34:59 <Baughn> Well, technically the packages aren't lost either.. they're just unregistered; the binary code is in ~/.cabal
03:35:11 <dcoutts> ManateeLazyCat: eg if you've got Cabal-1.6.0.1 registered both per-user and globally, then unregister the user one
03:35:28 <cnwdup> http://moonpatio.com/fastcgi/hpaste.fcgi/view?id=1716#a1716 which extension allows that? Can guards have side - effects?
03:35:34 <dcoutts> ManateeLazyCat: and get rid of the per-user registered process lib
03:35:36 <ManateeLazyCat> dcoutts: But both version notify me some package would be break.
03:35:41 <dcoutts> ManateeLazyCat: do it anyway
03:35:59 <dcoutts> ManateeLazyCat: then use ghc-pkg check to see which broken packages you have to rebuild
03:36:40 <dcoutts> ManateeLazyCat: look in the output of ghc-pkg list for any packages where the exact same version is registered per-user and globally. That's bad. Different versions are ok, same is not.
03:37:42 <ImInYourMonad> and firefox uses a lot of memory because? 1. written by a lot of amateurs(or is it really? most free software projects seems to have pros in the places that matters) 2. C++ is a bad choice for large projects, one little pointer mistake here and there adds up? 3. X?
03:38:26 <p_l> ImInYourMonad: More like "oh god javascript everywhere"
03:38:27 <beelsebob> ImInYourMonad: 1
03:38:36 <beelsebob> as evidenced by the fact that WebKit is a lot lighter
03:38:41 <beelsebob> but still coded in C++
03:38:46 <p_l> ImInYourMonad: And let's reimplement C++ features on our own!
03:39:19 <ImInYourMonad> YourInnerMonad is good :)
03:39:26 <liyang> dcoutts: FitA?
03:39:37 <dcoutts> liyang: when is it?
03:39:47 <p_l> beelsebob: rendering engine seems to be small part of FF memory footprint, and WebKit is just a rendering engine
03:40:03 <beelsebob> p_l: firefox's UI is entirely done using its rendering engine
03:40:26 <beelsebob> p_l: also, for a direct comparison ‚Äì Safari, Chrome and Konqueror are all lighter than FF
03:40:37 <ManateeLazyCat> dcoutts: I use "ghc-pkg list" got two list, and $HOME is process-1.0.1.1, i need unregister forcely?
03:40:37 <Laney> liyang: sup
03:41:00 <dcoutts> ManateeLazyCat: yes, but look for other cases where the same version is registered in both.
03:41:06 <liyang> dcoutts: it'll be after noon in 20 minutes.
03:41:24 <dcoutts> liyang: oh, did I miss all the publicity?
03:41:28 * liyang waves at Laney across the train aisle.
03:41:45 <p_l> beelsebob: Yes. And all of those examples don't: "recreate standard C++ library on their own", "create the whole UI as a mess of JS and XML". Also "might not use rand() for choosing which unused object to free"
03:41:54 <dcoutts> liyang: well, sadly I'll not be there.
03:42:00 <liyang> dcoutts: looks like it. :3
03:42:27 <beelsebob> p_l: exactly, which all lends support to the incompetent coder theory
03:42:40 <beelsebob> (they made some spectacularly shit design desisions)
03:42:52 <dcoutts> liyang: ooi, where did it get announced?
03:43:24 <p_l> beelsebob: Sometimes I wish that they didn't drop Motif but simply used lesstif...
03:43:29 * ManateeLazyCat pasted "ghc-pkg check" at http://paste2.org/get/157448
03:43:35 <ManateeLazyCat> dcoutts: Above is ghc-pkg check output list.
03:43:35 <liyang> dcoutts: um, I'm not sure. I just get told these things in the office...
03:43:55 <dcoutts> liyang: aye, I'm not in the office any more :-(
03:44:07 <p_l> also, Firefox 4.0 promises to drop XP* libs from internals, replacing most of them with C++ templates
03:44:08 <Laney> dcoutts: There's a mailing list on the website
03:44:11 <beelsebob> p_l: I just get on with using one of the better browsers
03:44:17 <liyang> dcoutts: the usual places, I imagine. haskell/-cafe et al.
03:44:23 <ManateeLazyCat> dcoutts: But when i execute "cabal install leksah", i got "There is no available version of ghc that satisfies >=6.10.1"
03:44:31 <ManateeLazyCat> dcoutts: What's wrong?
03:44:37 <p_l> beelsebob: None of them support the extensions I'm used too
03:44:42 <dcoutts> liyang: that's where I looked, I don't see anything
03:44:47 <p_l> *to
03:45:07 <beelsebob> p_l: what extensions do you use?
03:45:10 <dcoutts> ManateeLazyCat: you've probably still got Cabal-1.6.0.1 registered per-user
03:45:28 <p_l> beelsebob: around 26 :>
03:45:32 <liyang> dcoutts: Graham says 'it was announced on the FitA list.' :3
03:45:48 <dcoutts> liyang: that's great but it's not enough I'd say.
03:45:56 <beelsebob> p_l: heh, you may be one of the ones who I can't convince to drop all of them, but pm me, I'll give it a shot
03:46:04 <dcoutts> liyang: I'll subscribe in future, but I bet there are others missing out too
03:46:20 <liyang> it was just this time
03:47:02 <liyang> Not sure who's responsible for sending such things out. The local organisers, maybe.
03:47:28 <dcoutts> liyang: I note the FiTA website is not syndicated on planet Haskell
03:47:52 <liyang> it's not a blog...
03:48:07 <ManateeLazyCat> dcoutts: Sorry, i'm confusion. I unregister process-1.0.1.1, i need register process-1.0.1.0 again? If i use cabal upgrade, cabal will install process-1.0.1.1 automatically.
03:48:14 <edbond> where can I see parMap example?
03:48:28 <dcoutts> ManateeLazyCat: you've still got process-1.0.1.0
03:48:45 <dcoutts> ManateeLazyCat: did you unregister the Cabal-1.6.0.1 that was registered per-user?
03:49:32 <blackh> edbond: http://shootout.alioth.debian.org/u32q/benchmark.php?test=binarytrees&lang=ghc&id=2
03:49:38 <aleator> Is ghc-6.10 with -O2 supposed to be a really slow?
03:51:41 <wli> Hmm, there may be a trick I'm missing.
03:53:26 <ManateeLazyCat> dcoutts: I have execute "ghc-pkg unregister process-1.0.1.1 --force", i missing something?
03:54:03 <dcoutts> ManateeLazyCat: perhaps you should hpaste your ghc-pkg list
03:54:11 <ManateeLazyCat> Ok
03:54:38 * ManateeLazyCat pasted "ghc-pkg list" at http://paste2.org/get/157452
03:54:39 <ManateeLazyCat> dcoutts: Above, thank!
03:55:38 <dcoutts> ManateeLazyCat: you've got haskell98 registered both globally and per-user
03:55:44 <HugoDaniel> hmm
03:56:16 <ManateeLazyCat> dcoutts: So i need unregister package that have same version?
03:56:17 <HugoDaniel> ghci doesn't display utf8 characters on the console, instead it displays them escaped, like \8364 for the euro sign
03:56:24 <HugoDaniel> is there any way to "solve" this ?
03:56:31 <HugoDaniel> im using ghc 6.8.3
03:56:31 <dcoutts> ManateeLazyCat: unregister the per-user one, yes.
03:56:55 <dcoutts> ManateeLazyCat: when that's done, use ghc-pkg check. Some packages will need installing.
03:57:15 <dcoutts> ManateeLazyCat: and upgrade cabal-install
03:57:21 <ManateeLazyCat> dcoutts: Thanks, i try.
03:59:52 <wli> I should probably use a more intellligent procedure to convert a generalized continued fraction to a simple/regular one.
04:02:32 <ImInYourMonad> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2034#a2034 <- im trying to write my own little language, what am i doing wrong there?
04:03:16 <vsthsqrs> lambdabot: numbers1 = 1 : map (+1) numbers1 numbers2 = 1 : [x+1 | x <- numbers2] numbers3 = [1..]
04:03:17 <beelsebob> ImInYourMonad: why does compiling an application always return a function?
04:03:24 <beelsebob> don't you want to actually *do* the application
04:03:43 <beelsebob> also, this isn't compilation ‚Äì this is interpretting
04:05:02 <ImInYourMonad> sure interperting then. but why des it return a fucntion?
04:05:05 <ImInYourMonad> where
04:05:17 <beelsebob> your compile function
04:05:19 <beelsebob> for applications
04:05:22 <beelsebob> you create a function
04:05:33 <beelsebob> which applies the argument of the application to its argument
04:05:40 <beelsebob> and then applies the function from the application to the result of that
04:05:49 <ManateeLazyCat> dcoutts: I have unregister hasekll98 and process-1.0.1.1 per-usr, and works fine. Success install leksah.
04:05:49 <beelsebob> why not just apply the function in the application to the argument in the application
04:05:53 <ManateeLazyCat> dcoutts: Thanks
04:06:08 <dcoutts> ManateeLazyCat: does ghc-pkg check say everything is ok now
04:06:10 <dcoutts> ?
04:06:18 <ManateeLazyCat> dcoutts: Then i use cabal upgrade, cabal install process-1.0.1.1 again
04:06:28 <beelsebob> ImInYourMonad: also, the type of compile is Expr a -> a
04:06:33 <ManateeLazyCat> dcoutts: This way is okay?
04:06:34 <dcoutts> ManateeLazyCat: don't do that :-) upgrade cabal-install
04:07:11 <dcoutts> ManateeLazyCat: the latest cabal-install disables upgrade to stop you from shooting yourself in the foot
04:07:31 <beelsebob> and finally ImInYourMonad ‚Äì once that works, it will generate a type error, because 10 is not a function
04:07:41 <beelsebob> you need a construct in your language for creating a function
04:07:46 <beelsebob> (commonly known as a lambda)
04:07:49 <dcoutts> ManateeLazyCat: use $ cabal install Cabal cabal-install
04:08:14 <ManateeLazyCat> dcoutts: Okay. update....
04:08:57 <ManateeLazyCat> dcoutts: So when i update new version of cabal-install, i won't need fix above bug manualy?
04:09:19 <dcoutts> ManateeLazyCat: in the latest version you cannot run cabal upgrade
04:09:59 <dcoutts> ManateeLazyCat: the answer is to use cabal install and only install things you think are sensible to install, ie not core libs like process
04:13:18 <ManateeLazyCat> dcoutts: Cabal will failed when per-usr and globally have same version, why? Can you explain it? Can't cabal fix this problem automatically?
04:13:53 <dcoutts> ManateeLazyCat: http://haskell.org/pipermail/haskell-cafe/2009-January/054523.html
04:14:26 <ImInYourMonad> interpret (Value x) = x , but why doesnt that just return x?
04:14:29 <ImInYourMonad> it fails
04:15:10 <beelsebob> ImInYourMonad: no, that's fine
04:15:36 * beelsebob would expect interpret (f :$ a) to look something like f $ a
04:15:44 <beelsebob> oh, could do with interprtting f and a
04:15:52 <beelsebob> interpret f $ interpret a
04:16:04 <ManateeLazyCat> dcoutts: I see, i need do above step problems manually before next version fix it?
04:16:29 <ImInYourMonad> LolCat> interpret (Value (\x -> x*x)) 5
04:16:38 <dcoutts> ManateeLazyCat: the problem can be avoided by not running cabal upgrade, which in any case is now disabled in the latest version.
04:17:08 <ManateeLazyCat> dcoutts: I see, thanks for your help! :)
04:17:20 <ImInYourMonad> data Expr a = App (Expr a) (Expr a) | Value a deriving(Show) , is that fine? i was gonna do Genetic algorithms and soemone handed me that, now im tyring to make a basic interpreter for a turing complete lang instead, using that
04:17:27 <dcoutts> ManateeLazyCat: you're welcome
04:18:28 <ManateeLazyCat> dcoutts: Do you know how to dynamic re-load haskell code? I want listen your point about dynamic re-load. :)
04:18:48 <HugoDaniel> i find myself doing a lot of "head . tail . tail . tail ..." functions :/ is this a good practice ?
04:18:58 <dcoutts> ManateeLazyCat: are you talking about shared libraries?
04:19:21 <HugoDaniel> i feel like car and cdr :/
04:19:22 <idnar> HugoDaniel: what about using (!!)
04:19:30 <HugoDaniel> idnar does it work on lists ?
04:19:33 <ManateeLazyCat> dcoutts: No, i read "Dynamic Applications From The Ground Up" that wrote by "Dons Stewart"
04:19:37 <idnar> @type (!!)
04:19:39 <lambdabot> forall a. [a] -> Int -> a
04:19:42 <HugoDaniel> :D
04:19:44 <HugoDaniel> great
04:19:45 <idnar> > [1..100] !! 55
04:19:47 <lambdabot>   56
04:19:58 <HugoDaniel> that helps :D
04:20:01 <HugoDaniel> thanks
04:20:02 <dcoutts> ManateeLazyCat: I guess you should ask dons about that, I don't know all the details
04:20:17 <ManateeLazyCat> dcoutts: Example, in Emacs, i can wrote elisp code, then dynamic reload new version and not need compile source code of Emacs.
04:20:49 <ManateeLazyCat> dcoutts: Like Yi editor or lambdabot.
04:21:01 <ManateeLazyCat> dcoutts: Nevermind, i just ask. :)
04:21:21 <dcoutts> ManateeLazyCat: sorry, I'm not the best person to ask those questions
04:22:27 <ManateeLazyCat> dcoutts: Last question, cabal will disable upgrade until developers fix above bug. Or disable forever?
04:22:42 <dcoutts> ManateeLazyCat: until it's fixed.
04:22:51 <dcoutts> ManateeLazyCat: it's really not that important an operation though
04:23:01 <ManateeLazyCat> dcoutts: I see, thanks!
04:25:13 <HugoDaniel> when using explicit recursing is there any way to know when ghc will use tail-call optimization and when not ?
04:26:28 <HugoDaniel> im assuming ghc will do more than using the typical C approach of checking if the function call is the last operation on the recursion
04:26:44 <HugoDaniel> when im coding in haskell i keep having this feeling that ghc will mangle the code around
04:26:59 <HugoDaniel> and reduce it all to a single assembly nop instruction
04:27:12 <HugoDaniel> :P
04:28:06 <iago_> HugoDaniel, if your definition is tail-recursive I'm sure that GHC will perform the optimization
04:28:53 <iago_> if your definition is not tail-recursive I can expect that GHC won't do any optimization for you
04:29:03 <beelsebob> ImInYourMonad: you need to add Lam and Identifier
04:29:15 <beelsebob> otherwise you can't create functions in it
04:31:37 <HugoDaniel> yes tail recursive that
04:31:38 <HugoDaniel> heheh
04:33:17 <ImInYourMonad> beelsebob: what is Identifier? should I have value in there?
04:33:26 <iago_> HugoDaniel, I *think* that you are wrong if you think that GHC will transform a non-tail-rec function into its tail-rec equivalent
04:33:48 <HugoDaniel> even in obvious cases ?
04:34:10 <iago_> yep
04:34:18 <HugoDaniel> oh bummer :/
04:34:21 <iago_> don't use explicit recursion :)
04:34:23 <beelsebob> ImInYourMonad: identifier allows you to reference one of the variables that a lambda will introduce
04:34:46 <HugoDaniel> iago_: in this case i need to
04:34:55 <iago_> what is this case?
04:34:59 <HugoDaniel> otherwise i wouldn't
04:35:13 <HugoDaniel> im parsing a huge list of strings, their values depend on the position on the list
04:35:40 <iago_> is the code too long?
04:35:42 <HugoDaniel> ["string1", "string2", "string3" ... ] it depends on the list position
04:35:50 <HugoDaniel> let me finish it, and i will show you
04:35:55 <iago_> oks
04:45:56 <malosh> Hi. I need to compute an iterated function over integers. Should I use monads to do it (from a performance point of view) or are my simple recursive functions clear enough for ghc to optimize them ?
04:46:19 <ivanm> the latter should be sufficient
04:46:31 <daf> are monads ever easier to optimize?
04:46:33 <koala_man> if they're tail recursive, then definitely
04:46:52 <ivanm> AFAIK, very rarely does a purely monadic way of doing it return a markedly better result
04:47:00 * ivanm could of course be wrong...
04:47:02 <malosh> daf : well I thought they might be converted into loops (but I'm just starting haskell)
04:47:20 <daf> ivanm: that matches my intuition
04:47:21 <HugoDaniel> iago_: here, my tail-recusive algorithm: http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2039#a2039
04:47:43 <ivanm> malosh: any tail-recursive function (pure or monadic) should be converted to efficient loops
04:47:57 <daf> malosh: the standard performance advice applies: write it, then profile it
04:47:59 <ivanm> daf: yeah, and all monads would give you is less surety about your code
04:48:09 <ivanm> in fact, the monadic wrappers might cause a penalty
04:48:15 <malosh> ivanm : ok, then monads are just cool syntax and provability ?
04:48:27 <ivanm> malosh: monads are for stuff like IO
04:48:35 <ivanm> do all your computation in standard functions
04:48:40 <daf> I'm not sure monads give you provability either
04:48:46 <ivanm> the opposite
04:48:51 <ivanm> since they can interact with the real world
04:48:55 <HugoDaniel> hmmf, its taking too long, something tells me it aint working right :P
04:48:57 <daf> they might make your code easier to read
04:49:02 <malosh> Is it really just for side-effects ?
04:49:06 <daf> no
04:49:08 <ivanm> malosh: actually, monads would probably be slower because they _can't_ be optimised as much
04:49:11 <malosh> ah ok for syntax sugar
04:49:16 <malosh> ok, thanks
04:49:18 <ivanm> no
04:49:20 <daf> not syntax sugar either
04:49:32 <ivanm> malosh: side-effects is why they were developed, but they're used in other purposes as well
04:49:41 <ivanm> malosh: for example, lists are a monad
04:49:43 <ivanm> so is Maybe
04:49:53 <Axman6> malosh: they're a mathematical idea, which happens to works quite well for a lot of stuff in haskel
04:49:55 <malosh> yeah I understood that
04:49:56 <Axman6> l
04:50:08 <ivanm> Axman6: s/haskell/programming languages/ ;-)
04:50:19 <Axman6> just so happens the IO monad allows for side effects
04:50:25 <ivanm> monads were proposed before haskell was standardised, IIRC
04:50:38 <Axman6> ivanm: yeah, but no one else calls 'em that :P
04:50:48 <HugoDaniel> oh well, lunch time
04:50:51 <HugoDaniel> buy*
04:50:56 <ivanm> Axman6: yes they do, those that took the idea from haskell rather than the paper
04:54:40 <McManiaC> is "f a >>= g" the same as "g =<< f a" ??
04:54:51 <qwr> yes
04:54:53 <McManiaC> ok cool
04:55:50 <iago_> HugoDaniel,
04:55:54 <rabideejit> It reminds me of befunge.
04:55:58 <HugoDaniel> my code sucks :P
04:56:00 <McManiaC> so i could write the following
04:56:02 <McManiaC> betterFind p path = getRecursiveContents path >>= filterM check
04:56:03 <McManiaC> as
04:56:08 <McManiaC> betterFind p = filterM check =<< getRecursiveContents
04:56:08 <McManiaC> ?
04:56:25 <HugoDaniel> index out of range, and huge memory requests...
04:56:32 <HugoDaniel> ...thats haskell optimization for me
04:56:35 <iago_> HugoDaniel, well, I think you are complicating you unnecessary
04:56:45 <iago_> why not use a parser combinator library?
04:57:14 <HugoDaniel> like parsec ?
04:57:17 <rabideejit> anyone ever had this problem?
04:57:17 <rabideejit> for an interactive program which reacts to input -
04:57:17 <rabideejit> when compiled with ghc it doesn't output anything until it is interrupted
04:57:17 <rabideejit> when run inside ghci, it outputs once it recieves input ( like it's sopposed to )
04:57:25 <iago_> HugoDaniel, for example
04:57:45 <iago_> HugoDaniel, your code will be cleaner
04:58:07 <HugoDaniel> ok, i should look at that
04:58:12 <HugoDaniel> thanks
04:58:18 <HugoDaniel> now its lunch time for time :)
04:58:20 <HugoDaniel> buy*
04:58:23 <cnwdup> rabideejit, do you have the code? Maybe ghci sets buffering different than the default in ghc.
05:00:04 <whpearson> If I called a function of the type --} (a -> m a) -> b -> m b {-- a  function transformer would people understand what I meant? Or is there better terminology for it?
05:00:28 <alar> >>=
05:01:22 <whpearson> Alar, not quite.
05:01:32 <alar> yes
05:01:32 <whpearson> @type (>>=)
05:01:33 <lambdabot> forall (m :: * -> *) a b. (Monad m) => m a -> (a -> m b) -> m b
05:04:42 <rabideejit> cnwdup: the code is all a bit complicated -- it's an interpreter for another language - and the problem arises when I run the other lang.  (only when compiled, as I mentioned)
05:04:42 <rabideejit>  I tried to replicate the problem it in haskell without success.
05:04:42 <rabideejit> essentially I have a variable, which holds the input, and other code is run depending on what the input is.  However, if I output the value of the input variable it works ok both compiled and in ghci, if I don't output the value of the input variable, it only works in ghci
05:06:41 <cnwdup> rabideejit, try set buffering for stdout or whatever you are writing to. Thats the only thing I can think of.
05:07:44 <rabideejit> cnwdup: ok, I'll try it, thanks
05:08:58 <rabideejit> You're right, hSetBuffering stdout NoBuffering does the trick, cheers!
05:09:29 <cnwdup> Instead of using NoBuffering you could use hFlush wheneven necessary. That might be more performant, if you don't have many functions which generate output.
05:10:00 <cnwdup> Well, I think performance would be better anyways, but having to write hFlush stdout all the time seems a little cumbersome.
05:10:48 <rabideejit> I only have to write it once
05:10:48 <bastl> Hi. I just wanted to write a bash script to wget a number of articles from ieeeexplore. But this should be easy with haskell. Can anyone advise a little tutorial or examples on downloading and saving files?
05:10:57 <rabideejit> The language has 11 functions, one of which is output.  It's a little like brainfuck, but for kolmogorov machines instead of a tape.
05:11:11 <cnwdup> rabideejit, then hFlush definitely is better than NoBuffering.
05:12:09 <rabideejit> cool.
05:13:50 <rabideejit> bastl: I made a program which downloaded and got info from pages before, maybe I can find some things for you
05:14:56 <rabideejit> bastl: theres a curl library on hackage, which is quite easy to use
05:14:58 <bastl> hmm, perhaps its too easy.
05:15:04 <bastl> right :-)
05:16:01 <forkingYourIO> beelsebob: should it be: data Expr a = App (Expr a) (Expr a) , shouldnt it be App (Expr a) (Expr a) (Expr a) ? like operator val val.
05:16:31 <beelsebob> forkingYourIO: functions only need one argument
05:16:48 <beelsebob> once you have that, you can create multi-argument functions with currying
05:17:07 <forkingYourIO> i see
05:18:12 <ManateeLazyCat> When i compile gtk2hs, "sourceview" can't pass, i missing some depend package?
05:18:38 * ManateeLazyCat pasted "gtk2hs config list" at http://paste2.org/get/157492
05:18:39 <rabideejit> bastl: It's a little deviated from downloading web pages, but I use curl tolog into the msn passport service over http, here http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2040
05:18:58 <ManateeLazyCat> http://paste2.org/get/157492 have ./config output of gtk2hs
05:19:37 <cnwdup> ManateeLazyCat, in archlinux it depends on gtksourceview, which is an extra package.
05:20:13 <ManateeLazyCat> cnwdup: I use Debian.
05:20:17 <blackh> Haskell is the only language I know of where you can re-factor your program for 12 hours solid, and have a reasonable expectation that it is going to work.
05:20:39 <ManateeLazyCat> cnwdup: I have install libgtksourceview-dev
05:21:00 <bastl> rabideejit: wow, that looks cool. Things like that get sooo ugly in other languages :-)
05:21:01 <cnwdup> ManateeLazyCat, theres also libghc6-sourceview-dev. But I don't know which on is right.
05:21:17 <forkingYourIO> what kind of automatic refactorings can Eclipse and NetBeans do? like create classes and add methods to it and take them from others?
05:21:20 <ManateeLazyCat> cnwdup: But libghc6-sourceview-dev just for ghc 6.8 in Debian
05:21:35 <ManateeLazyCat> cnwdup: I use ghc 6.10
05:21:52 <ManateeLazyCat> too old haskell source in Debian
05:21:54 <cnwdup> Then you might have to build it yourself? Sorry. I am not familiar with debian at all.
05:22:05 <bastl> absolute beginner question: how do i write a string to a file?
05:22:14 <cnwdup> :t writeFile
05:22:15 <lambdabot> FilePath -> String -> IO ()
05:22:17 <ManateeLazyCat> cnwdup: I install binary pacakge of GHC
05:22:21 <bastl> oops
05:22:27 <bastl> again to easy
05:26:08 <rabideejit> cheerio
05:29:15 <forkingYourIO> could there be a future when you dont have to learn C because it is haskell all the way down to the metal?
05:29:39 <sioraiocht> unlikely
05:29:58 <mmorrow> forkingYourIO: well hopefully we'll have a functional-like lang to use instead of C :)
05:30:06 <mmorrow> (hopefully sooner than later)
05:30:21 <mmorrow> it wouldn't (couldn't) be haskell though..
05:30:35 <mmorrow> since you'd need to be able to write code that doesn't allocate/etc
05:30:56 <sioraiocht> mmorrow: functional programming without garbage collection? that'd be interesting
05:31:05 <mmorrow> sioraiocht: yeah, it would
05:31:20 <vegai> bitc claims to compete with C: http://www.bitc-lang.org/
05:31:25 <sioraiocht> mmorrow: maybe that can be my phd...
05:31:35 <mmorrow> sioraiocht: do it!! :)
05:31:45 <mmorrow> vegai: oh cool, haven't heard of that
05:34:21 <McManiaC> is there a way to write a pointfree style function using the >>= operator?
05:34:45 <McManiaC> as getting rid of the "path" in "betterFind p path = getRecursiveContents path >>= filterM check" ?
05:34:59 <mmorrow> @pl \p path -> getRecursiveContents path >>= filterM check
05:34:59 <lambdabot> const ((filterM check =<<) . getRecursiveContents)
05:35:13 <mmorrow> err
05:35:27 <mmorrow> @pl \p path -> getRecursiveContents path >>= filterM p
05:35:27 <lambdabot> flip ((>>=) . getRecursiveContents) . filterM
05:35:43 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2041#a2041 <- ok im notgetting anywhere. where do i strat ? sicp?
05:36:07 <mmorrow> filterM p <=< getRecursiveContents
05:36:29 <mmorrow> McManiaC: (<=<) and (>=>) are nice for this exact thing
05:36:37 <mmorrow> @src (>=>)
05:36:37 <lambdabot> Source not found. I've seen penguins that can type better than that.
05:36:55 <Peaker> @type (flip >>=)
05:36:57 <lambdabot> forall a b c b1. ((b -> a -> c) -> (a -> b -> c) -> b1) -> (a -> b -> c) -> b1
05:36:57 <mmorrow> \f k -> (\a -> f a >>= k)
05:37:05 <Peaker> @type flip (>>=)
05:37:06 <lambdabot> forall (m :: * -> *) a b. (Monad m) => (a -> m b) -> m a -> m b
05:37:06 <mmorrow> f >=> k = (\a -> f a >>= k)
05:37:21 <Peaker> @type (>=>)
05:37:22 <lambdabot> forall a (m :: * -> *) b c. (Monad m) => (a -> m b) -> (b -> m c) -> a -> m c
05:37:29 <McManiaC> thanks mmorrow !
05:37:32 <mmorrow> :)
05:37:53 <McManiaC> those arrows are confusing sometimes :)
05:38:29 <mmorrow> heh
05:38:44 <mmorrow> @let (=<<<) = (join .) . liftM2 (=<<)
05:38:45 <lambdabot>  Defined.
05:38:50 <mmorrow> @type (=<<<)
05:38:51 <lambdabot> forall (m :: * -> *) a b. (Monad m) => m (a -> m b) -> m (m a) -> m b
05:40:42 <McManiaC> O.o
05:40:54 <mmorrow> Peaker: kinda like a monadic version of (<*>)
05:40:55 <forkingYourIO> http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-26.html#%_sec_4.1 <- should i start with that if i want to do my own interpreter?
05:41:59 <Peaker> mmorrow: yeah
05:42:27 <mmorrow> McManiaC: i was messing with that the other day, and our discussion reminded me of it
05:43:26 <McManiaC> haskell is such a crazy language
05:43:48 <McManiaC> =)
05:51:57 <NameAlreadyInUse> are type classes and typeful programming and such only possible with static type systems?
05:52:15 <pozic> forkingYourIO: it depends on your goals.
05:53:52 <pozic> NameAlreadyInUse: no
05:54:26 <koeien> "typeful" programming
05:54:35 <koeien> strong and static typing are orthogonal
05:54:41 <koeien> they often get confused
05:56:27 <ddarius> First line of the abstract of "Typeful Programming" by Luca Cardelli. "There exists an identifiable programming style based on the widespread use of type information handled through mechanical typechecking techniques."
05:57:36 <jeltsch> Hello, is there anyone who knows a bit about Gtk2Hs?
05:58:01 <jeltsch> Is it possible to disable cairo and enable gtk at the same time?
06:00:23 <doserj> jeltsch: gtk depends on cairo
06:01:02 <jeltsch> doserj: On my machine, the gtk package depends on the cairo package? But I wondered whether disabling cairo might reduce the gtk to those parts that don‚Äôt depend on cairo.
06:01:50 <jeltsch> doserj: After all, the configure script doesn‚Äôt complain when gtk is enabled and cairo is disabled. Does this mean that this should work or is this a deficiency of the configure script?
06:03:31 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2042#a2042 <- what is wrong there?
06:04:10 <forkingYourIO> oh wait
06:05:34 <fasta> Is there a library to compute euler angles from a transformation matrix?
06:05:48 <forkingYourIO> meh how do I do the pattern mathicng on ^^ the binary search Tree?
06:07:01 <doserj> jeltsch: I'm not sure. it might work
06:08:03 <blueonyx> forkingYourIO, isnt the error that you call finMinimum on the right side with 2 arguments instead of 3?
06:09:55 <forkingYourIO> yes but i chaned that
06:10:09 <forkingYourIO> but im unsure how to pmatch against the tree int he first place
06:10:24 <jeltsch> Does Gtk2Hs 0.10.0 work with libcairo-1.8.6?
06:10:33 <jeltsch> I experience strange problems.
06:10:44 <blueonyx> forkingYourIO, think you did it right
06:11:13 <jeltsch> make complains that cairo-0.10.0 cannot be found or something like that.
06:11:46 <jeltsch> The exact message is: ‚Äú<command line>: unknown package: cairo-0.10.0‚Äù
06:11:53 <paper_cc> jeltsch: maybe it is talking about the Haskell package
06:12:06 <jeltsch> paper_cc: This is definitely the Haskell package.
06:12:18 <paper_cc> (but the Gtk2Hs Makefile should build cairo...)
06:12:56 <jeltsch> paper_cc: I enable cairo support with the configure script of Gtk2Hs.
06:13:15 <jeltsch> paper_cc: Then I run make. It does a lot of building and then complains that the cairo-0.10.0 package cannot be found.
06:13:20 <vincenz> @seen sjanssen
06:13:20 <lambdabot> I saw sjanssen leaving #haskell-in-depth, #haskell-blah, #xmonad and #haskell 52m 32s ago, and .
06:13:22 <vincenz> @seen sjanssen_
06:13:22 <lambdabot> sjanssen_ is in #haskell-in-depth, #haskell-blah, #xmonad and #haskell. I don't know when sjanssen_ last spoke.
06:13:46 <doserj> jeltsch: what happens if you let the configure script autodetect cairo?
06:14:36 <jeltsch> doserj: I used autodetection to enable cairo, i.e., I didn‚Äôt use the --with-cairo flag and it said it wanna build cairo.
06:15:33 <wferi> Hi! How do I add a "deriving" clause to a template haskell data definition?
06:15:36 <wferi> dataD (cxt []) typeName [] (map mkCon typeDesc) []
06:15:42 <wferi> is what I've got now.
06:15:44 <forkingYourIO> but hwen i call findMinimum with the left tree im passsing on a new Tree, thats whats confusing me since a Tree has a left and right but i can only ass it as one argument
06:16:09 <wferi> Inserting mkName "Eq" into the brackets doesn't help... :(
06:16:33 <wferi> What are the parameters of dataD at all?
06:16:55 <wferi> Context, name and constructors... but what are those lists?
06:16:57 <doserj> forkingYourIO: Either your tree is built in a way so you know whether to search left or right, or you have to search both subtrees
06:17:24 <doserj> (and then take the minimum of both results)
06:17:59 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2042#a2043
06:18:33 <forkingYourIO> well if it is a BST findMinimum = go left until you find a leaf right?
06:18:48 <doserj> yep
06:19:21 <doserj> forkingYourIO: what is the second argument to findMinimum' (the '_')supposed to to?
06:20:22 <doserj> jeltsch: what kind of .o and .a files where built?
06:20:33 <forkingYourIO> that is the right side of the tree that i have no use for but i guess im ding that part wrong
06:21:06 <forkingYourIO> oh wait
06:21:11 <forkingYourIO> or not
06:21:21 <blueonyx> the right side is the r in (Node x l r)
06:22:30 <forkingYourIO> yeah
06:22:42 <jeltsch> doserj: The following were built: libHScairo.a, HScairo.o, libHSglib.a, HSglib.o.
06:23:07 <nlogax> is there a nice PDF of RWH somewhere? i have the book, and a PDF, made from the HTML version, which is not so nice :)
06:23:42 <ddarius> nlogax: You can buy it in eBook form.  I believe some vendors will give you an eBook for free if you bought the book from them.
06:24:06 <forkingYourIO> findMinimum (Leaf x)            = x
06:24:07 <forkingYourIO> findMinumum (Node v left right) = findMinimum left
06:24:11 <forkingYourIO> shoulnt that eb enough
06:24:32 <nlogax> ddarius: thanks, i will look into that.
06:24:37 <forkingYourIO> *BinarySearchTree> findMinimum (Leaf 5)
06:24:37 <forkingYourIO> 5
06:24:44 <forkingYourIO> *BinarySearchTree> findMinimum (Node (Leaf 5) (Leaf 10))
06:24:44 <wferi> I beg your pardon. Adding mkName "Eq" in the last list does work, but I had to make clean beforehand.
06:24:44 <forkingYourIO> <interactive>:1:19:
06:24:44 <forkingYourIO>     Couldn't match expected type `Integer'
06:24:44 <forkingYourIO>            against inferred type `BinarySearchTree t'
06:26:12 <paper_cc> forkingYourIO: maybe you meant (Node 20 (Leaf 5) (Leaf 10))?
06:27:25 <forkingYourIO> ah yes
06:27:30 <forkingYourIO> man im so dumb sometimes
06:27:35 <forkingYourIO> i shold think more test less
06:27:37 <forkingYourIO> *BinarySearchTree> findMinimum (Node 6 (Leaf 5) (Leaf 10))
06:27:37 <forkingYourIO> *** Exception: C:\ghc\ghc-6.10.1\progs\Misc\BinarySearchTree.hs:17:0-34: Non-exhaustive patterns in function findMinimum
06:27:46 <forkingYourIO> but what case isnt covered there?
06:27:58 <cnwdup> forkingYourIO, compiling with -Wall should tell you.
06:28:25 <paper_cc> forkingYourIO: according to your paste, the second case is misnamed: "findMinumum"
06:29:20 <forkingYourIO> ah
06:29:59 <doserj> jeltsch: looks fine, don't know what is going wrong. maybe make clean?
06:31:06 <blackh> Here's a small Haskell success story:  I just re-factored my code.  It took about 12 hours, with 500 changes touching 3200 lines of code.  Once I got it to compile, I had to fix two bugs:  One was some new untested code, the other was an execution order bug in some "imperative style" code (that needs work).  After that, I gave the code a test - fair but not 100% complete - and it worked perfectly.
06:34:26 <Botje> blackh: nice!
06:37:38 <jeltsch> doserj: I try to build it afresh anyway now.
06:38:00 <jeltsch> doserj: So I currently build it from a clean state and log the output of configure and make.
06:38:24 <jeltsch> doserj: If it doesn‚Äôt work now, I‚Äôll post the output to the Gtk2Hs users mailing list.
06:39:08 <forkingYourIO> a question about BSTs, when you search them what do you want to know? the depth of the node? or just if it is in there, ie True/False?
06:43:21 <forkingYourIO> man im getting such kicks out of Haskell
06:46:36 <Botje> forkingYourIO: you want to see if the element is in there, yes
06:47:28 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2044#a2044 <- good so far?
06:47:41 <forkingYourIO> Botje: yes but do you want some extra info like found at level X ?
06:48:33 <Botje> normally not, no :)
06:50:37 <blueonyx> but why do you use data BinarySearchTree a, Leaf a but Node Integer?
06:51:06 <forkingYourIO> to fakk wit your head man
06:51:47 <blueonyx> np
06:52:07 <forkingYourIO> good point i changed
06:52:19 <forkingYourIO> i dont want the structure to be tied to the tyoe
06:52:21 <forkingYourIO> type
06:52:49 <forkingYourIO> but if the trree can havde values liek 12 or in soem other tree 12: "hello" then should i pass in soem function to compare to search?
06:53:31 <Botje> you can constrain your type a to the Ord typeclass
06:53:37 <forkingYourIO> liek if i want to find the word coresponding to 12 ill pass in a function liek: (x,y) -> v -> x==v then y
06:53:38 <Botje> which support the (<) operation
06:53:40 <blueonyx> or you use search :: Ord a => BinarySearchTree a -> a -> Bool
06:57:56 <forkingYourIO> hmm how do I do if i a left or right doesnt exist? Nothing? Maybe left?
07:01:00 <blackh> Maybe (Either a) ?
07:01:13 <blackh> Maybe (Either a b) that is
07:01:19 <doserj> forkingYourIO: there are several options: 1) only have values in nodes, not in leafs, 2) only have values in leafs, not in nodes, 3) not every node has two children.
07:11:26 <stepcut> I am trying to turn some ADTs into JSON objects, but I don't really see a good way to encode sum types in JSON. i.e. something like, Either String Int
07:12:57 <wjt> stepcut: two-elt lists, with an integer tag and the value as the second element?
07:13:57 <stepcut> wjt: yeah, I have been doing something like that, but doesn't seem all that great to use the resulting object in javascript
07:15:12 <dbbddbdb> Hi!  What is the best way to get an immutable array of 65K pre-computed 32-bit integer values?
07:15:24 <dbbddbdb> I tried listArray, but it takes forever to compile
07:19:27 <drhodes> dbbddbdb: do you mean load them from a file?
07:20:47 <dbbddbdb> drhodes: no, I just want something immutable like [Integer] with O(1) access time.
07:21:14 <drhodes> Data.Sequence maybe
07:22:11 * drhodes sacrifices self on the thrown of ignorance so that someone might aid dbbddbdb with more authoritative advice.
07:22:38 <forkingYourIO> and which do you prefer? im using (Node 10 (Leaf Nothing) (Leaf Nothing)) for example now
07:22:50 <forkingYourIO> but I have Just and Nothing all voer the place, not to pretty
07:23:52 <drdozer> blackh?
07:24:01 <drhodes> :t Data.Sequence.index
07:24:02 <lambdabot> forall a. Data.Sequence.Seq a -> Int -> a
07:24:43 <dbbddbdb> drhodes: I just want an precomputed array of fixed length (that won't ever change) with 0(1) access time that could be compiled into a program
07:26:52 <drhodes> looks like Data.Seqence.index is O(log(min(i,n-i))).
07:30:57 <iago_> listArray takes too time to compile?
07:31:25 <doserj> http://thread.gmane.org/gmane.comp.lang.haskell.glasgow.user/14059/ has some ideas
07:32:24 <forkingYourIO> if i want to use my BST for huffman encoding then what representation of those 3 would you choose doserj?
07:36:24 <doserj> forkingYourIO: http://en.wikipedia.org/wiki/Huffman_coding#Basic_technique describes the datastructure.
07:40:11 <dbbddbdb> iago_: yes.  Looks like all huge lists take a lot of time to compile (I GHC'd a randomly generated list of integers of length 0xFFFF a few minutes ago and it still compiles).  Is there any way to avoid them when predefining an array?
07:41:52 <w0lter> Any use haskell on gentoo ? I got a eclass override warning while add haskell overlay  http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2046#a2046
07:42:24 * paper_cc imagines a bunch of TH-generated tuple accessors
07:44:19 <whpearson> Netsplits? We still have them?
07:45:05 <w0lter> While seems Gentoo is not so popular
07:45:08 <mib_iyfg9q> @type map
07:45:10 <lambdabot> forall a b. (a -> b) -> [a] -> [b]
07:45:47 <paper_cc> w0lter: #gentoo-haskell should help ... at least theoretically
07:46:06 <w0lter> paper_cc: thanks
08:11:07 <edbond> what is the difference between Fractional, RealFrac, Floating and RealFloat ?
08:11:11 <mmorrow> dbbddbdb: for huge amounts of static data like that i'd use C, and ffi import the ptr
08:11:43 <edbond> I want to write function that will return result of sqrt. What should I use?
08:11:55 <mmorrow> dbbddbdb: i think ghc as-is is O(n^2) in compile-time where n := amount of static data
08:12:03 <mmorrow> at least O(n^2)
08:13:20 <mmorrow> edbond: those are all typeclasses describing a set of functions a type that's an instances of each has implemented for it
08:13:41 <mmorrow> so they're not types, just constraints on types
08:13:51 <mmorrow> @type pi
08:13:52 <lambdabot> forall a. (Floating a) => a
08:13:57 <mmorrow> > pi :: Float
08:13:58 <lambdabot>   3.1415927
08:14:00 <mmorrow> > pi :: Double
08:14:01 <lambdabot>   3.141592653589793
08:14:10 <mmorrow> @type sqrt
08:14:11 <lambdabot> forall a. (Floating a) => a -> a
08:14:25 <edbond> mmorrow: so can I use Float?
08:14:28 <mmorrow> @instances Floating
08:14:28 <lambdabot> Double, Float
08:14:47 <mmorrow> yeah, you can use either Float, Double, or (Floating a) => a
08:14:52 <temoto-wd> @src print
08:14:53 <lambdabot> print x = putStrLn (show x)
08:14:58 <temoto-wd> lambdabot: thx
08:15:05 <mmorrow> in the last case you'd be letting the caller of your function decide the type they want
08:15:24 <mmorrow> > return 42 :: [Int]
08:15:25 <lambdabot>   [42]
08:15:29 <mmorrow> > return 42 :: Maybe Double
08:15:30 <lambdabot>   Just 42.0
08:15:35 <mmorrow> > return 42 :: IO Integer
08:15:36 <lambdabot>   * Exception: "<IO Integer>"
08:16:02 <edbond> mmorrow: great! thanks a lot.
08:16:04 <mmorrow> :)
08:17:57 <temoto-wd> i'm trying to play with Error monad in ghci
08:18:18 <temoto-wd> do { print "1" ; print "2" } `catch` handler
08:18:28 <temoto-wd> let handler x = do { print x }
08:18:36 <temoto-wd> i know this must be ugly but still
08:18:50 <temoto-wd> and then how do i throw some kind of error inside that `do`?
08:19:12 <temoto-wd> It's funny that it's hard to throw an error.
08:21:46 <temoto-wd> mygod first time i see this channel absolutely quiet
08:21:50 <paper_cc> temoto-wd: print is not in the (Either a) monad, it's in the IO
08:22:24 <temoto-wd> paper_cc: i'm sorry, how does that change my code?
08:22:37 <Apocalisp> @yarr
08:22:38 <lambdabot> Swab the deck!
08:22:55 <temoto-wd> @w80 swab
08:22:58 <lambdabot> *** "swab" wn "WordNet (r) 2.0"
08:22:58 <lambdabot> swab
08:22:58 <lambdabot>      n 1: implement consisting of a small piece of cotton that is used
08:22:58 <lambdabot>           to apply medication or cleanse a wound or obtain a
08:22:58 <lambdabot>           specimen of a secretion
08:23:00 <lambdabot> [6 @more lines]
08:23:32 <temoto-wd> Apocalisp: like wash the deck?
08:24:05 <temoto-wd> paper_cc: does it mean that i can't use IO inside error handler?
08:25:07 <paper_cc> temoto-wd: (Either a) is still pure... you have to use a transformer to use IO
08:25:30 <temoto-wd> paper_cc: IO is pure too, no? What is transformer?
08:26:04 <paper_cc> well, you can't use IO inside (Either a) because ... well ... there's no IO in Either
08:26:19 <paper_cc> a transformer is sort of a way to combine monads
08:26:34 <paper_cc> like "a stateful computation that may throw errors"
08:26:42 <paper_cc> or "an ambigous stateful computation"
08:26:54 <temoto-wd> like try/catch block in other langs?
08:26:57 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2050#a2050 <- can someone give me a pointer?
08:27:04 <paper_cc> temoto-wd: no
08:27:37 <seliopou> paper_cc: believe temoto-wd was talking about the Error monad, just to clarify
08:27:48 <seliopou> I don't think there's a Monad instance for Either in the base package
08:28:25 <temoto-wd> paper_cc: let's skip transformers for now, like i change handler so it returns, say, "molo". Does it become Either then?
08:28:30 <seliopou> though I created an instance and put it on github ;) http://github.com/seliopou/either-monad/tree/master
08:28:35 <temoto-wd> like Just "foo"
08:30:54 <whpearson> @instances Monad
08:30:55 <lambdabot> ((->) r), ArrowMonad a, Cont r, ContT r m, Either e, ErrorT e m, IO, Maybe, RWS r w s, RWST r w s m, Reader r, ReaderT r m, ST s, State s, StateT s m, Writer w, WriterT w m, []
08:31:17 <seliopou> @info Either
08:31:17 <lambdabot> Either
08:31:19 <seliopou> ?
08:31:28 <seliopou> ...
08:31:41 <seliopou> where is it defined?
08:31:53 <paper_cc> seliopou: though that might be (Error e) => Monad (Either e)... also one needs a MonadTrans instance and MonadFoo instances... =(
08:32:29 <temoto-wd> I'm sorry can i have an example of using `catch` please?
08:33:51 <jonaskoelker> Hi all.  I have an expression tree and three functions which traverse it, all visiting the nodes in the same order.  I want to eliminate the redundant encoding of the traversal in the three functions.  What's the haskell-idiomatic way to do it?
08:33:59 <paper_cc> seliopou: Either is in the Prelude AFAIK
08:34:00 <iago_> temoto-wd, print "a" `catch` (\_ -> print "exception")
08:34:10 <paper_cc> @ty catch
08:34:11 <lambdabot> forall a. IO a -> (IOError -> IO a) -> IO a
08:34:24 <paper_cc> 'catch' is not from the error monad!
08:34:29 <Cheshire> jonaskoelker: can you paste the actual code ?
08:34:33 <temoto-wd> alright! But it never fails, does it?
08:34:36 <jonaskoelker> I was thinking about defining a Visitor type class (hey, maybe those design patterns *are* useful...)
08:34:39 <jonaskoelker> Cheshire: sure
08:34:52 <kruth> I'm learning haskell and programming a bit of CGI to do it - and I wondered if some of the experts here could look at my (working) code and let me know if I'm doing anything boneheaded?  ( http://artlogic.nfshost.com/haskell/env.hs - http://artlogic.nfshost.com/haskell/env.cgi )
08:34:56 <seliopou> paper_cc: that must be new in 6.10
08:35:21 <paper_cc> seliopou: hm (it's mtl-1.1.0.2)
08:35:27 <temoto-wd> kruth: you're doing stone age if you do CGI.
08:36:08 <paper_cc> seliopou: no, ErrorT is in mtl-1.1.0.0 bundled with ghc-6.8.2
08:36:09 <kruth> temoto-wd: I know - like I said just learning - I'll pick up a framework once I get a handle on the more basic concepts
08:36:24 <seliopou> paper_cc: I'm taking about either, not error
08:36:31 <seliopou> you keep using them interchangeably :)
08:36:33 <Dunearhp> seliopou:  data Either a b = Left a | Right b      -- Defined in Data.Either
08:36:37 <jonaskoelker> Cheshire: http://rafb.net/p/Wny5gr48.html and http://rafb.net/p/ci7r6384.html (that's part of it)
08:36:41 <Dunearhp> from ghci
08:36:45 <seliopou> Dunearhp, I'm talking about the monad instance
08:37:06 <seliopou> it wasn't in 6.8 but it seems it's now somewhere in 6.10, but I can't track it down
08:37:07 <Cheshire> jonaskoelker, eep
08:37:09 <paper_cc> seliopou: you're right... ErrorT is just a newtype though
08:37:38 <Cheshire> jonaskoelker, this is my first suggestion: data Binary = Add | Sub | Cat | ...,  data Exp = ... | Bin Binary Exp Exp | ...
08:37:51 <jonaskoelker> Cheshire: yeah, I thought about that too
08:37:52 <temoto-wd> kruth: for future i'd recommend to avoid any other artifical (if that term is applicable in programming) protocols and go straight to HTTP.
08:38:08 <Cheshire> jonaskoelker, which are the 3 tree traversals though?
08:38:15 <jonaskoelker> Roll.hs is one of them
08:38:20 <seliopou> ohhh, paper_cc, I see now
08:38:21 <jonaskoelker> lemme paste the others
08:38:25 <seliopou> sorry for the confusion
08:38:59 <temoto-wd> iago_: could you give an example of failing something so `catch` does something? :)
08:39:03 <jonaskoelker> Cheshire: http://rafb.net/p/NpNFQ229.html and http://rafb.net/p/dplhHV16.html
08:39:24 <temoto-wd> i tried usual    print 1/0  but it doesn't lead to catch.
08:39:38 <paper_cc> seliopou: Haddock doesn't know of a Monad instance for Either. so it looks like one has to use ErrorT e Identity a :(
08:39:51 <paper_cc> > 1/0
08:39:52 <lambdabot>   Infinity
08:39:57 <paper_cc> ah
08:40:00 <paper_cc> > 1 `div` 0
08:40:01 <lambdabot>   * Exception: divide by zero
08:40:11 <jonaskoelker> > (Left "foo") `catch` Right 1
08:40:13 <lambdabot>   Couldn't match expected type `IO a'
08:40:17 <paper_cc> temoto-wd: (/) is floating-point division
08:40:20 <jonaskoelker> hm..
08:40:37 <seliopou> it's catchError
08:40:39 <paper_cc> johaskoelker: `catch` is not from Either or ErrorT
08:40:42 <paper_cc> @ty catch
08:40:44 <lambdabot> forall a. IO a -> (IOError -> IO a) -> IO a
08:40:44 <jonaskoelker> ah
08:40:48 <Cheshire> jonaskoelker, I think there are two things to improve this
08:40:51 <paper_cc> @ty catchError
08:40:53 <lambdabot> forall (m :: * -> *) a e. (MonadError e m) => m a -> (e -> m a) -> m a
08:41:02 <jonaskoelker> paper_cc: cool, thanks :)
08:41:10 <jonaskoelker> Cheshire: yes? :)
08:41:14 <iago_> temoto-wd, write in a closed file handle
08:41:15 <iago_> :)
08:41:16 <kruth> temoto-wd: Since CGI is just basically an HTTP response and environment variables - I'm pretty close to bare HTTP already - which apache just sending my program the HTTP request - but I'll go looking for a framework sometime here - in any case - how's the code?
08:41:33 <paper_cc> > throwError "my error" `catchError` \msg -> "Error: " ++ msg
08:41:34 <lambdabot>       No instance for (MonadError [Char] [])
08:41:34 <lambdabot>        arising from a use of `th...
08:41:47 <Cheshire> jonaskoelker, the first thing I said, about abstracting out binary ops.. maybe you could also do it for data vs languagee constructs.. (seems like Let/While/etc may be separate from Function/Cons etc)
08:42:00 <jonaskoelker> > (Left "foo") `catchError` (Right 0xBA2)
08:42:01 <lambdabot>   Couldn't match expected type `e -> Either [Char] b'
08:42:06 <paper_cc> > throwError "my error" `catchError` \msg -> return $ "Error: " ++ msg
08:42:07 <lambdabot>       No instance for (Show (m [Char]))
08:42:08 <lambdabot>        arising from a use of `show' a...
08:42:08 <Cheshire> jonaskoelker, once you have that Exp typed simpilfied a lot more than you could define a foldExp for it
08:42:16 <Cheshire> jonaskoelker,  I think all 3 tree operations are folds
08:42:59 <seliopou> > (Left "foo") `catchError` (const (Right 0xBA2))
08:43:00 <lambdabot>   Right 2978
08:43:39 <jonaskoelker> Cheshire: how would foldExp look?
08:43:56 <paper_cc> > either (runErrorT (throwError "my error" `catchError` \msg -> return $ "Error: " ++ msg :: ErrorT String Identity a)) (\err -> "Catch: " ++ err) (\ret -> undefined)
08:43:57 <lambdabot>   Couldn't match expected type `(->) a'
08:44:31 <paper_cc> > either (runIdentity $ runErrorT (throwError "my error" `catchError` \msg -> return $ "Error: " ++ msg :: ErrorT String Identity a)) (\err -> "Catch: " ++ err) (\ret -> undefined)
08:44:32 <lambdabot>   Couldn't match expected type `a -> c'
08:45:21 <paper_cc> runIdentity $ runErrorT (throwError "my error" `catchError` \msg -> return $ "Error: " ++ msg :: ErrorT String Identity String)
08:45:30 <paper_cc> > runIdentity $ runErrorT (throwError "my error" `catchError` \msg -> return $ "Error: " ++ msg :: ErrorT String Identity String)
08:45:31 <lambdabot>   Right "Error: my error"
08:45:39 <Cheshire> jonaskoelker, here is a fold for a simpler data type: data Huff a = Leaf a | Branch (Huff a) (Huff a) deriving Show
08:45:45 <Cheshire> foldHuff leaf branch = œÜ
08:45:45 <Cheshire>  where œÜ (Leaf o) = leaf o
08:45:45 <Cheshire>        œÜ (Branch left right) = branch (œÜ left) (œÜ right)
08:45:46 <temoto-wd> kruth: i'm sorry i'm not haskell zealot, so i can't really rate your code. I can only advice avoid CGI, WSGI, FastCGI and Apache, etc.
08:45:51 <Cheshire> jonaskoelker, and also
08:45:52 <Cheshire> @src maybe
08:45:53 <lambdabot> maybe n _ Nothing  = n
08:45:53 <lambdabot> maybe _ f (Just x) = f x
08:45:54 <Cheshire> @src either
08:45:55 <lambdabot> either f _ (Left x)     =  f x
08:45:55 <lambdabot> either _ g (Right y)    =  g y
08:46:06 <temoto-wd> Thanks for examples of fail.
08:46:16 <jonaskoelker> Cheshire: and my next question: for performance reasons I might want to handle `calc (Selection Keep Last _ (While _ _ _))` in a special way (but only that particular fold)... what'd be a smart way to do it?
08:46:19 <Cheshire> jonaskoelker, once you simplefied your type then you could define the analoge of thes for yourse
08:46:22 <kruth> temoto-wd: noted - thanks for the advice
08:46:28 * paper_cc remembers the generalized folds from category-extras
08:47:16 <jonaskoelker> Cheshire: so basically a pattern match for each constructor?
08:47:31 <Cheshire> jonaskoelker, yes replace every constructor with a function (value)
08:47:55 <leadnose_> :t 3
08:47:57 <lambdabot> forall t. (Num t) => t
08:49:47 <jonaskoelker> Cheshire: and then... take a function of type [Result] -> Exp -> Result?
08:50:20 <leadnose_> :t (((.).(.)).((.).(.)).((.).(.)).((.).(.))).(((.).(.)).((.).(.)).((.).(.)).((.).(.)))
08:50:22 <lambdabot> forall a a1 a2 a3 a4 a5 a6 a7 a8 a9 a10 a11 a12 a13 a14 b c a15. (b -> c) -> (a -> a1 -> a2 -> a3 -> a4 -> a5 -> a6 -> a7 -> a8 -> a9 -> a10 -> a11 -> a12 -> a13 -> a14 -> a15 -> b) -> a -> a1 -> a2
08:50:22 <lambdabot> -> a3 -> a4 -> a5 -> a6 -> a7 -> a8 -> a9 -> a10 -> a11 -> a12 -> a13 -> a14 -> a15 -> c
08:51:23 <jonaskoelker> Cheshire: I was thinking... maybe I should parameterize out the Exp bits in the definition of Exp and fixpoint-type something almost equal to my current tree, and then use the type Exp Childresult in the visitor/folder-function...  good/bad idea?
08:53:21 <jfredett> whereabouts could I find an example instantiation of the Typeable class -- google,hoogle, and the gang have all turned up goose egg.
08:54:08 <canadaduane> Given the line "stateVar <- initialState >>= newIORef", how would I go about determining order of operations?
08:54:26 <forkingYourIO> would Parsec be to slow to parse huge amounts of html? is the tagsoup library written with Parsec?
08:54:39 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2050#a2050 <- can someone give me a pointer?
08:54:52 <centrinia> Doesn't Parsec operate in stream mode?
08:55:06 <jfredett> canadaduane: what do you mean? what happens first? if so. then it first binds initialState to stateVar, and then creates a newIORef...
08:55:09 <jfredett> I think...
08:55:30 <canadaduane> jfredett: yeah, thanks
08:55:46 <jonaskoelker> Cheshire: I think the folds for maybe, either and list aren't particularly instructive for my case: each case has only one way to go, and maybe/either strip off types non-recursively...
08:55:48 <canadaduane> jfredett: how do you know that, btw? Is there a lookup table?
08:55:56 <Cheshire> jonaskoelker: that sounds completely insane.. dunno if that is good or bad
08:56:28 <jfredett> canadaduane: (>>=) roughly correlates to "do left first, right second" it's really shown best by the type of bind, viz:
08:56:32 <jfredett> :t (>>=)
08:56:34 <lambdabot> forall (m :: * -> *) a b. (Monad m) => m a -> (a -> m b) -> m b
08:57:04 <jfredett> you have, in the first argument, the context of the operation, the second is the function to apply to that context, the result is a new context
08:57:41 <canadaduane> I think I see
08:57:45 <jfredett> so in do notation, do {foo <- bar; quux} translates to (sortof) (foo <- bar) >>= quux
08:58:02 <canadaduane> Where does the newIORef go?
08:58:07 <jfredett> the left-arrow business doesn't work, methinks, outside of do notation.
08:58:19 <canadaduane> right
08:58:20 <jfredett> canadaduane: currently, it would end up as the return type-
08:58:50 <jfredett> iirc, you'd end up with a type IO (IORef <somethign>)
08:59:17 <centrinia> forkingYourIO, you should look at lines 39 and 40.
08:59:19 <jfredett> I think the rule is that the last thing you evaluate is returned.
08:59:28 <tromp_> > 1388/2872
08:59:30 <lambdabot>   0.4832869080779944
08:59:32 <canadaduane> jfredett: http://holumbus.fh-wedel.de/hayoo/hayoo.html#0:Typeable
09:00:11 <basvandijk> Hello, I'm writing a little library for converting numbers to text. For example 180 -> "one hundred and eighty". It has support for lots of different languages and is able to handle very large numbers. Now I remember there was a mailinglist post or blog article published a long time ago about this problem and they solved in in a very elegant way. I would like to compare my approach to theirs. However I can't find the post anymore. Does
09:00:11 <basvandijk> anybody remember this post and can point me to it? Unfortunately the only thing I remeber was that is was about this problem and that the solution was very elegant...
09:00:48 <sbahra> basvandijk, the list one?
09:01:09 <basvandijk> sbahra: what do you mean?
09:01:13 * centrinia had a function (say :: Integer -> String) for a Euler Project problem.
09:01:16 <chessguy_work> oh, there was a series of blogs about this
09:01:16 <lambdabot> chessguy_work: You have 2 new messages. '/msg lambdabot @messages' to read them.
09:01:29 <chessguy_work> basvandijk, as i recall, it had to do with monoids
09:01:52 <sbahra> basvandijk, http://conway.rutgers.edu/~ccshan/wiki/blog/posts/WordNumbers1/
09:01:57 <sbahra> basvandijk, this one?
09:02:03 <jfredett> canadaduane: right, I'm looking for sourcecode, I haven't poked through Hayoo, but I'd really like to see something like instance Typeable <SomeCommonMonad> where followed by a implementation...
09:02:18 <forkingYourIO> heureka i solved it!
09:02:23 <chessguy_work> sbahra, that's the one i was thinking of
09:02:24 <forkingYourIO> god i want to have sex with haskell
09:02:25 <chessguy_work> sbahra++
09:02:34 <basvandijk> sbahra: yes I know that one but that not the one I mean
09:02:41 <jfredett> forkingYourIO: lol.
09:03:15 <basvandijk> sbahra: thanks anyway for this link
09:04:00 <canadaduane> jfredett: http://hackage.haskell.org/packages/archive/base/4.0.0.0/doc/html/src/Data-Typeable.html
09:04:11 <canadaduane> about 3/4 of the way down
09:04:28 <jfredett> Fantastic.
09:05:49 <jfredett> _I Knew_ I should have looked harder in the Base src...
09:06:54 <chessguy_work> @tell boegel mostly for #haskell entertainment purposes :)
09:06:54 <lambdabot> Consider it noted.
09:07:02 * basvandijk back in 15min
09:08:13 <Cheshire> jonaskoelker: it's possible to rewrite the Exp datatype so that you have a typed language
09:08:56 <Cheshire> jonaskoelker: that stops allowing things like    Add Nil (Int 3)
09:09:27 <jonaskoelker> Cheshire: that'd be interesting! ...
09:09:34 <Cheshire> I will show you
09:12:04 <Cheshire> jonaskoelker, http://rafb.net/p/zWsCRp13.html
09:12:08 <jonaskoelker> but wait, how do I then parse things like "() + 3" without running into type problems in the parser?
09:12:12 <jonaskoelker> oh, lemme have a look
09:12:23 <Cheshire> jonaskoelker, well you could raise a type error inside haskell when you parse that
09:12:50 <Cheshire> which means you get a result like   Left "Unit and Integer do not match"  rather than  Right (Add Unit (Num 3))
09:14:03 <jonaskoelker> (Nil is spelled "()" in my language)
09:14:48 <jonaskoelker> Cheshire: huh... run-time checking of haskell types?
09:15:12 <Cheshire> no runtime checking of the object language (Exp) types
09:16:37 <jonaskoelker> hmm... wait, I think it won't work.  in Exp, ints are just length-1 lists.  Using haskell as a pseudocode for Exp, if length (filter pred list) == 1, then in a sense "filter pred list :: both-Int-and-[Int]"
09:17:14 <jonaskoelker> Cheshire: or at least, it'd be somewhat less pretty
09:17:35 <Cheshire> yes if the language is inherently untyped then this is not a good idea
09:17:42 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2053#a2053 <- can I make the traversal better+ it uses ++ , cant i use : somehow? and it is correct right? a traversal of a BST returns a list of the values in sorted order.
09:17:50 <jonaskoelker> I think it's inherently untyped enough :)
09:19:15 <jfredett> ... I sure hope I did that right, it seems... too simple...
09:24:39 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2053#a2053 <- can I make the traversal better+ it uses ++ , cant i use : somehow? and it is correct right? a traversal of a BST returns a list of the values in sorted order.
09:25:41 <forkingYourIO> and can avoid using filter on the end? still O(n) but it sucks if i have to traverse twice
09:28:17 <dons> strong recommend to read the new ghc rts paper, http://www.reddit.com/r/programming/comments/81rzr/new_how_ghc_haskell_runs_on_multicore_the/
09:29:49 <pumpkin_> woo
09:30:33 <pumpkin_> dons: did my second attempt at sending it work?
09:31:37 <dons> yes!
09:31:50 <Herald> im having an odd (but pretty basic) problem with quickcheck
09:31:59 <Herald> ive specified
09:32:04 <Herald> ((length xs) == 36) ==>
09:32:10 <Herald> and where types = xs::[Int]
09:32:18 <pumpkin_> and your test gets exhausted?
09:32:22 <Herald> but when i run it i get arguments exhausted after 0 checks
09:32:23 <Herald> yeah
09:32:25 <Herald> why is that?
09:32:32 <pumpkin_> it's randomly generating inputs
09:32:37 <pumpkin_> and very few of them have that length
09:32:41 <dons> no list is > 36 elems?
09:32:45 <pumpkin_> you might want to make a custom generator
09:32:51 <pumpkin_> that generates the lists you're after
09:33:01 <Herald> i have an earlier test which specifies
09:33:09 <Herald> (length xs == length grid) ==>
09:33:11 <ddarius> What kind of property requires a list of exactly 36 elements?
09:33:13 <Herald> and that always works :-\
09:33:23 <dons> scary ones :)
09:33:31 <pumpkin_> 10 digits + 26 letters?
09:33:44 <Herald> lol, good guess, but no :P
09:33:49 <pumpkin_> that's my anglocentric way of looking at things :P
09:33:54 <Herald> im writing a kenken solver
09:34:03 <Herald> kenken is a 6x6 grid logic puzzle
09:34:05 <Herald> like sudoku
09:34:07 <pumpkin_> aha
09:34:09 <Herald> but different
09:34:19 <pumpkin_> Y is like X, but different
09:34:20 <Herald> http://en.wikipedia.org/wiki/KenKen
09:34:26 <pumpkin_> I see :)
09:34:48 <jfredett> thats that new puzzle in the Times, right Herald ?
09:34:50 <ddarius> Okay, the kind of property I suspected, one that suggests poor design.
09:34:57 <Herald> yep
09:35:00 <jfredett> I did it the other day, it wa interesting
09:35:03 <Herald> it was in the new york times recently too
09:35:11 <newsham> herald: in quickcheck ==> works like a filter.  it will generate lists, and then throw out th eones that arent length 36.  this is obviously ont very efficient
09:35:19 <newsham> you'd be better off generating just lists of length 36
09:35:59 <Herald> can that be specified in the 'where' part of a quicktest property ?
09:36:27 <jfredett> Herald: It seemed to me that the trick was to try to do the multiplication zones first- since there are far fewer products than partitions. Esp wrt prime product zones.
09:36:41 <newsham> i'm not that practiced in quickcheck so not sure the best way.  one solution is to define a newtype and make an instance of Arbitrary for it that generates a list of length 36
09:36:53 <newsham> and then write your property to take that type and unwrap its data
09:36:59 <Herald> jfredett: good tip, that might be useful :)
09:37:20 <michaelcdever> how do i list the users in a room?
09:37:27 <newsham>  /names #haskell
09:37:33 <michaelcdever> cool cheers
09:37:57 <Herald> ok newsham, thanks :)
09:38:54 <Herald> i would have thought quickcheck would just keep generating lists until it reaches 100 which match the condition
09:39:18 <pumpkin_> it has no way if it ever will
09:39:23 <pumpkin_> *no way to tell
09:39:39 <Herald> at what point does it give up?
09:39:44 <pumpkin_> so you normally just specify the number of attempts
09:39:55 <pumpkin_> it might generate 500 arbitrary values
09:39:59 <pumpkin_> run them against the filter
09:40:07 <forkingYourIO> hmm i noticed some of my BST stuff didnt work when i inserted valeus instead of declare it. is it ok to have all bottom leafs to be Nothing?
09:40:08 <pumpkin_> and run the test on the filtered ones
09:40:46 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2053#a2054
09:44:32 <newsham> fyIO: is there a reason your tree is storing Maybe a's?  How do you determine which way to traverse the tree when you hvae an inner node that has a Nothing?  BST should store values that are Ord so you can tell which way to traverse while searching.
09:45:27 <newsham> why not just   data BST a = Leaf | Node (BST a) a (BST a)    ?
09:46:09 <newsham> with property that for  Node l x r , all (<x) in l and all (>x) in r
09:46:56 <forkingYourIO> then what is the value of the leaf?
09:47:15 <newsham> no values stored in the leaf.
09:47:48 <newsham> empty tree is Leaf.  tree with one value is Node Leaf 5 Leaf.
09:56:49 <forkingYourIO> ok . im havign soem trouble now because i had to change findMinimum
09:56:55 <forkingYourIO> but that fakked everyhting up
09:56:59 <forkingYourIO> mayeb i try your way
10:00:36 <tromp_> > length ['a'..'o']
10:00:38 <lambdabot>   15
10:07:54 <forkingYourIO> newsham: with your definition dont i need any maybes at all?
10:09:17 <forkingYourIO> wait i see
10:15:11 <mmorrow> forkingYourIO: alternatively, you can have:
10:15:24 <mmorrow> data T a = Tip a | T a (T a) (T a)
10:15:38 <mmorrow> and if you want an empty tree, use Maybe (T a)
10:16:19 <mmorrow> errr, that doesn't work too well with a value in the node..
10:16:30 <BONUS> how about data Tree a = Leaf | Tree a (Tree a) (Tree a)
10:16:35 * mmorrow usually uses that like T a = Tip a | T (T a) (T a)
10:16:38 <BONUS> or am i missing something cause i just kind of dropped in :]
10:16:52 <mmorrow> BONUS: that's what was suggested above
10:17:05 <BONUS> ah sorry
10:17:11 <mmorrow> :)
10:17:42 <mmorrow> i thought i could pull a fast one, but it didn't go as planned ;)
10:18:05 <Cheshire> you know what the topic sucks
10:18:18 <mmorrow> i don't know what the topic suck
10:18:20 <Cheshire> ["Real World Haskell: out now", "#haskell-in-depth launched!", "Haskell News:  http://reddit.com/r/haskell ", "The Haskell programming language", "http://haskell.org ", "Paste:  http://moonpatio.com ", "Logs: http://tunes.org/~nef/logs/haskell/ "]
10:18:23 <forkingYourIO> if i have a Tree with just 10 and insert 20, should it be 20 in the root or: Nothing - root=10 - 20 ? then if i enter 30, should i balance it? or in an ordinary Binary Search Tree you just keep adding where ti fits no matter how shitty the tree looks like?
10:18:25 <Cheshire> someone should change it to that
10:18:25 <Gracenotes> :D
10:18:29 <Gracenotes> :(
10:18:46 <Gracenotes> my client can handle it fine
10:19:03 <Eelis> when i compile and run the program at http://rafb.net/p/JstbRh31.html with "ghc -threaded -O --make t.hs && ./t +RTS -N2 -RTS" on my dual core machine, top shows that it doesn't actually use the two cores. am i using par/pseq wrong?
10:19:21 <mmorrow> Cheshire: oo
10:19:43 <dons> quite possibly :) try the standard helloworld first, http://haskell.org/haskellwiki/Haskell_in_5_steps#Write_your_first_parallel_Haskell_program
10:20:29 <maltem> Cheshire: Heh true. Btw can't we link to hpaste.org again?
10:20:40 <Baughn> dons: Remember mwinter's program on haskell-cafe? I've got some extremely weird results from running it on ghc 6.10 here.
10:20:41 <Eelis> dons: hm, looks exactly like what i did. i'll see if i can find the difference, thanks.
10:21:01 <Baughn> dons: Namely, "22,734,040 bytes allocated in the heap"..." 1234 MB total memory in use (107 MB lost due to fragmentation)"
10:21:10 <sjanssen> vincenz: you @seen'ed?
10:21:15 <Baughn> top confirms, but I don't see where the memory is going
10:23:36 <mmorrow> @let realTitle = ["Real World Haskell: out now", "#haskell-in-depth launched!", "Haskell News:  http://reddit.com/r/haskell", "The Haskell programming language", "http://haskell.org", "Paste:  http://moonpatio.com", "Logs: http://tunes.org/~nef/logs/haskell/"]
10:23:37 <lambdabot>  Defined.
10:23:56 <mmorrow> @let cheshireTitle = ["Real World Haskell: out now", "#haskell-in-depth launched!", "Haskell News:  http://reddit.com/r/haskell ", "The Haskell programming language", "http://haskell.org ", "Paste:  http://moonpatio.com ", "Logs: http://tunes.org/~nef/logs/haskell/ "]
10:23:57 <lambdabot>  Defined.
10:24:17 <mmorrow> > fmap snd . filter fst . concat $ (zipWith . zipWith) (\x y -> (x==y,(x,y))) realTitle cheshireTitle
10:24:18 <lambdabot>   [('R','R'),('e','e'),('a','a'),('l','l'),(' ',' '),('W','W'),('o','o'),('r'...
10:24:31 <pumpkin_> lol
10:24:32 <mmorrow> oops
10:24:39 <mmorrow> > fmap snd . filter (not . fst) . concat $ (zipWith . zipWith) (\x y -> (x==y,(x,y))) realTitle cheshireTitle
10:24:40 <lambdabot>   []
10:24:48 * mmorrow doesn't get it
10:24:49 <pumpkin_> > realTitle == cheshireTitle
10:24:50 <lambdabot>   False
10:25:09 <mmorrow> gah, we needz a zipWithPlusLeftovers
10:25:16 <pumpkin_> extra space?
10:25:22 <mmorrow> ah, that's it
10:25:27 <pumpkin_> in the last element
10:25:30 <Gracenotes> you're trying to make a naive diff-finder?
10:25:34 <drdozer> is there a good tutorial to get me started with accessing a c++ library from haskell?
10:25:35 <mmorrow> pretty much
10:25:53 <Eelis> dons: the key difference appears to be that that hello world example creates two sparts, whereas my program only created one. i can't seem to get any parallelism if i only create one spark. how can this be?
10:25:57 <Eelis> *sparks
10:26:33 <Baughn> Eelis: There's a bug in ghc 6.10 causing that
10:26:39 <Eelis> argh..
10:26:43 <Baughn> Fixed in head, I'm pretty sure
10:26:55 <Eelis> ok, thanks. i'll try parallel haskell again in a few years ;)
10:27:07 <Baughn> Is there any way I can limit, or see, the stack size of a haskell program?
10:27:26 <Baughn> I've got something using 1,400MB of memory here, of which 2.2MB is heap space. I'd really like to know what the other 1398 are, so..
10:27:39 <dons> Eelis: that's a knonwn bug in ghc 6.10.x. Just create a second spark
10:27:40 <pumpkin_> :o
10:28:00 <ddarius> drdozer: If it doesn't expose a C API, it'll probably be pretty painful.  You can try using SWIG in that case to make a C API and then bind to that.
10:28:11 <pumpkin_> Baughn: 1400 as reported by the OS? GHC's RTS never returns memory to the OS afaik
10:28:15 <dons> its an interesting limit case, ghc decides its not worth firing up a core for only 1 spark.
10:28:55 <Baughn> pumpkin_: I'm aware, but /peak/ heap size of the program is 2.2MB...
10:29:04 <pumpkin_> oh
10:29:06 <Baughn> Also, the rts -M option appears to be ignored
10:29:08 <pumpkin_> then that's odd :)
10:29:14 <ddarius> drdozer: It's very painful to bind to C++ from any language, including C++.
10:29:17 <Baughn> While the -H option causes it to invoke the OOM killer
10:29:32 <Baughn> At this point I suspect a really horrible bug. ;_;
10:29:56 <dons> oh you kids and your bugs
10:29:59 <pumpkin_> as long as it doesn't use templates, it shouldn't be too hard to expose a c-like API
10:30:07 <Baughn> dons: Well, why doesn't -M work?
10:30:09 <vegai> dons's bugs bring down countries
10:30:10 <vegai> :P
10:30:12 <pumpkin_> but binding to a library that uses templates is painful
10:30:18 <drdozer> ddarius: c++ is what I've been given
10:30:19 * dons tries this silly program
10:30:23 <p_l> Baughn: Are you working with overcommit disabled?
10:30:28 <drdozer> no templates
10:31:04 <Baughn> p_l: overcommit? I'm working without swap.
10:31:21 <Baughn> But no, it isn't disabled
10:31:22 <p_l> Baughn: Overcommit doesn't care about swap
10:31:44 <Baughn> Oh, wait. Yes, it's disabled.
10:31:48 <p_l> change oom killer behaviour to kill allocating task and disable overcommit
10:31:55 <Baughn> ..no.
10:32:07 <Baughn> If I'd done that, I'd have lost firefox and two long-running java processes.
10:32:18 <forkingYourIO> hehe anyone can give a tip, when doing a BST, in which order is it best to implement the functions on it? insert, traverse, sort...
10:32:20 <forkingYourIO> ?
10:32:35 <p_l> Baughn: let me guess, firefox uses most of memory?
10:32:56 <Baughn> p_l: No, just 200m.. but it happened to be the first process to invoke the OOM killer
10:33:16 <p_l> heh
10:33:18 <Baughn> Said killer proceeded to kill ./test instead of firefox, seeing as test was the one that'd just allocated 3GB
10:33:41 <Baughn> ..unfortunately it took its sweet time, and wound up killing three other apps while trying to kill test. -_-;
10:33:57 <p_l> well, with overcommit disabled oom killer shouldn't ever be called
10:34:39 <drdozer> oh, it does use templates, for collections
10:34:39 <p_l> it's just that mmap()/sbrk etc. should fail
10:35:03 <Baughn> Apparently, setting overcommit_memory to 0 still invokes the OOM killer instead of failing mmap.
10:35:07 <Baughn> Which is /fine/, for me.
10:35:27 <Baughn> A system where I'd want mmap/sbrk to fail would be very much a special-case one. Firefox dying is very Do not Want.
10:36:04 <Baughn> p_l: ..after all, this way let me /recover/ from the OOM condition
10:36:06 <p_l> Baughn: sbrk/brk/mmap() failing don't kill apps...
10:36:06 <forkingYourIO> Leaf | Node a (BinarySearchTree a) (BinarySearchTree a) seems better than Leaf a | Node a (BinarySearchTree a) (BinarySearchTree a)
10:36:14 <forkingYourIO> anyoen with experience that can confirm?
10:36:24 <Baughn> p_l: Hah. You think firefox would do anything but throw a fit and immediately exit?
10:36:27 <p_l> Baughn: failing is there exactly for recovering from OOM
10:36:45 <p_l> Baughn: Firefox throws a fit anyway...
10:37:00 <sjanssen> forkingYourIO: it depends on your intent.  Do you want to be able to represent the empty tree?
10:37:13 <p_l> Baughn: It should, otoh, call whatever the hell it uses for GC and deallocate as much as it can
10:37:16 <p_l> (and you can in emergency add your own swap)
10:37:30 <Baughn> p_l: Yes, well, it doesn't.
10:37:43 <EvilTerran> p_l, what if its GC needs to allocate memory to do its work?
10:37:49 <p_l> Baughn: I think we had a discussion on FF code quality before :)
10:38:04 <p_l> EvilTerran: As I said, *nix systems with virtual memory allow you to create your own swap
10:38:10 <Baughn> p_l: We did. I'll set my system to use whatever settings are most pragmatic, anyhow. :P
10:38:34 <EvilTerran> did you? sorry, i'm just providing drive-by random input :P
10:39:00 <p_l> EvilTerran: Though it won't help if you exhausted memory completely... there should have been some memory left for system just for memory mappings
10:39:45 <p_l> also, after cursory read on GC, I decided that if I ever write a GC system, it will preallocate some memory on for GC :)
10:41:18 <Baughn> dons: Well, compare your memory figures to mine, please. ;_;
10:41:46 <dons> are they different?
10:41:50 <Baughn> Extremely
10:41:56 <dons> try getting a recent ghc then?
10:42:00 <dons> i'm using today's stable branch
10:42:07 <Baughn> dons: Namely, "22,734,040 bytes allocated in the heap"..." 1234 MB total memory in use (107 MB lost due to fragmentation)"
10:42:33 <Baughn> Ah.. I'm leery about using pre-release software due to.. bugs. Yeah. Um, when is 6.10.2 due?
10:42:39 <dons> didn't see anything like that. sounds like the 'fac' space leak
10:43:03 <sjanssen> Baughn: where is your program?
10:43:05 <dons> well, it's the stable branch, not the unstable branch
10:43:06 <Baughn> Well, how can the memory in use be orders of magnitude larger than memory actually allocated?
10:43:11 <sjanssen> Baughn: are you running into the Integer memory leak?
10:43:27 <Baughn> sjanssen: Don't know, and on haskell-cafe. Hang on, I'll paste it.
10:43:51 <Baughn> sjanssen: http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2055#a2055
10:43:56 <sjanssen> Baughn: well, are you making a bunch of Integers?
10:43:56 <p_l> Baughn: resizable stack?
10:44:05 <Baughn> sjanssen: Probably
10:44:18 <Baughn> ..why?
10:44:27 <sjanssen> @google GHC 6.10 inurl:trac Integer
10:44:28 <lambdabot> No Result Found.
10:44:59 <sjanssen> Baughn: there is a bug with 6.10.1, Integers and excess memory use
10:45:23 <dons> see. e.g. pidigits.
10:46:02 <sjanssen> Baughn: force your types to Int and see if it makes a difference
10:47:09 <Baughn> sjanssen: Quite. I see.
10:47:34 <forkingYourIO> which is better: delete Leaf val = Leaf; or delete Leaf val = error empty tree?
10:47:39 <Baughn> Well, guess it's time for me to upgrade, then..
10:48:09 <mmorrow> forkingYourIO: never call error unless the situation is so dire the program must end immediately :)
10:48:38 <sjanssen> forkingYourIO: the former is better
10:48:54 <sjanssen> forkingYourIO: if the user really needs to know whether the delete was successful, use Maybe instead
10:49:19 <vincenz> sjanssen: Yes, I did
10:49:24 <vincenz> sjanssen: But I have it figured out :)
10:49:47 <vincenz> sjanssen: I was curious how to get the size of the desktop at runtime in xmonad, but I don't need it, I can just get the information in the layout code
10:50:08 <vincenz> This is relevant for desktops/workspaces that change size at runtime
10:56:28 <jfredett> :r
10:56:29 <jfredett> shit.
10:57:57 <Alpounet> hi
10:59:58 <yav> hi Alpounet
11:00:39 <MyCatVerbs> jfredett: I have vague memories of aliasing :q to exit and :r to "source ~/.bashrc" :)
11:01:11 <L11> Would someone mind explaining what the show and read types do?
11:01:31 <zachk> show lets your print the data
11:01:47 <MyCatVerbs> L11: sure. (Show a) is a constraint that says that there exists a version of the function show :: a -> String.
11:01:48 <yav> L11: They are for converting values to and from strings
11:01:48 <zachk> read reads in a string and turns it into the correct type
11:01:52 <drhodes> :t show
11:01:54 <lambdabot> forall a. (Show a) => a -> String
11:01:58 <Baughn> They're type-classes, not types.. but generally, show converts (some) data to textual form; read is the inverse
11:02:31 <MyCatVerbs> L11: (Read a) is a constraint that says that there exists a version of the function read, which converts a String to a value of type 'a'. (Well, almost, but close enough.)
11:02:59 <MyCatVerbs> s/version/instance/
11:03:31 <MyCatVerbs> L11: so show, which has the type (Show a) => a -> String, takes any a for which (Show a) holds, and returns a String.
11:06:51 <icee> Hey-- I'm trying to do some starter work in Haskell, using ubuntu heron server; I've installed the packages, including the network stuff; it doesn't seem to find the actual libraries involved at link time though
11:06:56 <icee> e.g.:
11:07:07 <icee> dolphin:~/erl/ghc> ghc meh.hs
11:07:07 <icee> meh.o: In function `rji_info':
11:07:07 <icee> (.text+0x84b): undefined reference to `__stginit_networkzm2zi1zi0zi0_NetworkziSocket_'
11:07:10 <icee> collect2: ld returned 1 exit status
11:07:20 <icee> Is there anything magical I need to do to make this work?
11:07:42 <centrinia> Try ghc --make -p network meh.hs
11:08:09 <dons> and use -O - it's nice
11:08:11 <icee> wow, --make is magically happy, thank you
11:08:21 <icee> -p is an unrecognized flag
11:08:23 <centrinia> Sure.
11:08:26 <centrinia> Oh.
11:08:32 <centrinia> -package ?
11:08:33 <icee> But, it solves things :)
11:08:47 <icee> I assume big O is optimization?
11:08:56 <dons> -O yes
11:09:04 <icee> cool :)
11:09:33 <Baughn> It goes up to -O2, but that's quite a bit slower
11:12:44 <halcyon10> hi folks, i hope someone who understands the inner workings of cabal can help me out. I have used the ~/.cabal/config file to specify a custom prefix and libsubdir. But there is global section and a user section for this. It seems that cabal uses the user-install-directory as default for new packages that i install with cabal install ...  .But i would like to install it globally, so i can use it with multiple user accounts on my system. So my question 
11:13:17 <Botje> you got cut off after "so my question"
11:13:31 <Botje> but i'm guessing you have to add --global when you call cabal, or set global somewhere in your config
11:13:31 <halcyon10> So my question is: how can i tell cabal to install a package globally?
11:14:37 <int-e> halcyon10: you can change the default by saying  user-install: False  in the configuration
11:15:20 <forkingYourIO> should a good binary search tree be balanced?
11:15:24 <halcyon10> int-e: thanks! that's just what i searched for
11:15:56 <Botje> forkingYourIO: yes, otherwise you lose that sexy O(lg n) characteristic
11:17:06 <centrinia> Most sequences of insertions and deletions produce BSTs that do have the sexy O(lg n) characteristic. :)
11:17:51 <Botje> except when inserting a sorted list :)
11:18:26 <centrinia> Not many permutations of a list are sorted. ;)
11:19:48 <aluink> who here is involved with gsoc projects for haskell?
11:22:44 <forkingYourIO> how do I turn [Just 12, Just 44, Just 5566] into [12,44,5566] ? because mapping fromMayeb doesnt work
11:22:54 <seliopou> catMaybe
11:23:03 <forkingYourIO> i guess i coul do that and if Nothing then 1.2929273777373737 and then filter outt hat nbr but that is very ugly
11:23:25 <seliopou> @type catMaybe
11:23:27 <lambdabot> Not in scope: `catMaybe'
11:23:31 <seliopou> @type catMaybes
11:23:32 <lambdabot> forall a. [Maybe a] -> [a]
11:23:37 <forkingYourIO> where is it?
11:23:39 <BONUS> @type concat . maybeToList
11:23:40 <lambdabot> forall a. Maybe [a] -> [a]
11:23:41 <forkingYourIO> ah
11:23:45 <seliopou> Data.Maybe
11:23:49 <koala_man> does lambdabot have a hoogle function?
11:23:51 <BONUS> @type concat . map maybeToList
11:23:52 <lambdabot> forall a. [Maybe a] -> [a]
11:24:02 <idnar> > catMaybes [Just 1, Nothing, Just 3, Nothing, Nothing, Just 6]
11:24:04 <lambdabot>   [1,3,6]
11:25:36 <forkingYourIO> good i came upw tih a way to dont use Maybe it all instead :)
11:27:53 <aluink> dcoutts__: ping
11:27:58 <forkingYourIO> the order of which you insert into a bst matters right? if i insert 10,9,8,12 it will look different than 8,9,10,12
11:27:58 <forkingYourIO> ?
11:28:07 <drhodes> monad in biology? -> http://www.budererdrug.com/images/glove_box.jpg
11:28:47 <aluink> drhodes: i was thinking the other day how dreaming could be considered a Monad
11:30:11 <Cheshire> hi
11:30:23 <drhodes> aluink: ok, I'll have to let that one simmer.
11:30:35 <bremner> I have to do a little queueing theory (well, some simple simulation anyway). Is there a nice haskell library,  or shall I learn R?
11:33:59 <kniu> to represent vectors,
11:34:01 <kniu> which is faster?
11:34:05 <kniu> lists, or tuples?
11:34:30 <Cheshire> lists can reach up to 40 mph but tuples can go 300 nm/s
11:35:33 <centrinia> Arrays are the fastest. You can get instantious access with them.
11:37:16 <thoughtpolice> dons++ -- for liboleg!
11:37:58 <kniu> but arrays are harder to use.
11:38:10 <maltem> 3e-7 m/s ?
11:38:31 <centrinia> 3e+7 m/s
11:38:45 <dons> thoughtpolice: :)
11:38:46 <trofi> :t (!!)
11:38:47 <trofi> :t (!)
11:38:47 <lambdabot> forall a. [a] -> Int -> a
11:38:48 <lambdabot> forall i e. (Ix i) => Array i e -> i -> e
11:39:41 <kniu> back to writing for loops, eh?
11:40:19 <trofi> @hoogle uvector
11:40:20 <lambdabot> package uvector
11:40:47 <forkingYourIO> hashtables vs binary search trees, are hashtables binary search trees? or they have better performance? but with worse worst cases?
11:41:02 <kniu> huh
11:41:22 <Baughn> forkingYourIO: Actually, they're completely different things. Read the wikipedia article on hash tables, I think
11:41:29 <trofi> hash tables are usually arrays of linked lists
11:42:08 <Baughn> Half the time they're just arrays
11:42:18 <Baughn> It's how you use them that matters. ;)
11:42:53 <FunctorSalad> anyone present who'd like to give me a hackage upload account? ;)
11:44:17 <forkingYourIO> so associative arrays are they pointless?
11:44:41 <Botje> forkingYourIO: hash tables have their uses.
11:44:46 <centrinia> No, maps are associative arrays.
11:45:11 <Botje> however, in haskell hash tables are really at a disadvantage because of the whole "no mutation" thing
11:45:30 <forkingYourIO> so what is Data.Map?
11:45:40 <Botje> it's a tree
11:45:55 <Botje> probably a red-black tree or an AVL tree or somesuch
11:46:19 <Baughn> That's why Data.Hashtable is in IO
11:46:27 <Baughn> ..it could easily stick to ST, though
11:46:36 <Botje> forkingYourIO: in perl hash tables are used all over the place
11:46:55 <forkingYourIO> anyone know what Python dicts are, hashtables?
11:46:55 <Botje> because they're easy to use, and because you're allowed to change variables there
11:47:02 <Botje> probably, yes
11:47:04 <Baughn> forkingYourIO: ayup
11:47:05 <Taejo> forkingYourIO: yes
11:47:09 <forkingYourIO> Data.Hashtable is mutable?
11:47:15 <Baughn> Yes
11:47:41 <Baughn> forkingYourIO: Well, it's not a very good hash-table implementation, really.
11:47:45 <Baughn> We could do a lot better today
11:48:10 <Baughn> And even if hash-tables are at a disadvantage, they'd still be extremely useful for read-mostly data
11:49:47 <forkingYourIO> why better today? is it just a lazy implementation?  or someone with haskell has changed?
11:49:58 <forkingYourIO> anyway Data.Map seems fast enough
11:50:18 <Baughn> Haskell has changed. We've got stream fusion, type families.. lots of things that lends themselves to better implementations.
11:50:32 <forkingYourIO> ok
11:50:33 <tromp_> > Data.HashTable.prime
11:50:34 <lambdabot>   /tmp/348660792655308371:70:32: Not in scope: `Data.HashTable.prime'
11:50:45 <Baughn> That said, the interface was bad even when it was made. There's no particular reason hash-table /reads/ should be in IO.
11:51:01 <SamB> Baughn: eh ?
11:51:18 <Baughn> SamB: Well, there should be a freeze/thaw equivalent, and an interface for pure hash tables
11:51:24 <SamB> the same applies to MArrays ...
11:51:26 <SamB> oh,
11:51:34 <SamB> that's what you mean
11:51:52 <kruth> I'm learning haskell and programming a bit of CGI to do it - and I wondered if some of the experts here could look at my (working) code and let me know if I'm doing anything boneheaded? ( http://artlogic.nfshost.com/haskell/env.hs - http://artlogic.nfshost.com/haskell/env.cgi )
11:52:00 <Baughn> that, and it should work with either IO or ST. ;)
11:53:06 <SamB> personally, I think the main thing wrong with HashTable is that ... it is used in base and therefore remains in base
11:53:13 <omnihil> Baughn,couldn't you use unsafePerformIO to wrap your hashtable reads in that case?
11:53:28 <omnihil> then you have your own convenience API that acts that way
11:53:37 <SamB> as opposed to going away completely ;-P
11:54:05 <Baughn> omnihil: The same issues as with unsafeFreeze would apply, so not really
11:54:23 <Baughn> Or was it unsafeThaw? Well, that pair anyhow
11:54:34 <SamB> either one would do it
11:54:43 <omnihil> I'm not that familiar with the problem. what are the issues with unsafeFreeze/Thaw?
11:54:49 <SamB> the thing I'm wondering is does unsafeThaw exist ?
11:55:15 <trofi> it should
11:55:31 <trofi> @hoogle IArray -> MArray
11:55:31 <lambdabot> Warning: Unknown type IArray
11:55:34 <lambdabot> Unsafe.Coerce unsafeCoerce :: a -> b
11:55:34 <lambdabot> Prelude ($) :: (a -> b) -> a -> b
11:55:45 <Baughn> omnihil: It would be possible to thaw the hash-table (or array) while there still exists a pure reference, breaking referential transparency.
11:56:05 <Baughn> omnihil: That's why it's unsafe. Proper discipline works, but it'd be nicer to have an ST equivalent instead.
11:56:10 <omnihil> ah okay so the language can't enforce proper use
11:56:14 <omnihil> I see
11:56:29 <Baughn> STArray enforces proper use..
11:56:29 <omnihil> you want a safeFreeze
11:56:38 <Baughn> I want both.
11:56:44 <Baughn> safeFreeze, of course, would have to copy the whole thing.
11:56:47 <British0zzy> are there persistent hash tables?
11:56:57 <SamB> http://hackage.haskell.org/packages/archive/array/0.2.0.0/doc/html/src/Data-Array-Base.html may be of interest
11:57:07 <Baughn> British0zzy: Not yet. ;)
11:57:18 <British0zzy> k, thanks
11:57:33 <SamB> along with the other code in http://hackage.haskell.org/packages/archive/array/0.2.0.0/doc/html/
11:57:47 * SamB dreams of HXR
11:58:06 <Baughn> And of course I'd like hash-table specialized to use unboxed arrays whenever possible
11:58:23 <SamB> Baughn: and I suppose you'll want a pony too ?
11:58:30 <Baughn> SamB: Pink, please.
11:59:00 * SamB considers going off to add that patch to cabal-install to make it say "No, you can't have a pony!" regardless of what hackage has
11:59:27 <FunctorSalad> when would that message be emitted?
11:59:29 <Baughn> ..not even a pink one?
11:59:32 <FunctorSalad> cabal install pony?
11:59:38 <SamB> FunctorSalad: precisely
11:59:47 <trofi> > moo
11:59:48 <lambdabot>   Not in scope: `moo'
11:59:59 <Baughn> @let pony = error "No, you can't have a pony."
12:00:00 <lambdabot>  Defined.
12:00:16 <forkInYourI> @faq Can I have a pony?
12:00:17 <lambdabot> The answer is: Yes! Haskell can do that.
12:00:35 <forkInYourI> @faq What is my name?
12:00:36 <lambdabot> The answer is: Yes! Haskell can do that.
12:00:53 <Peaker> > pony
12:00:55 <lambdabot>   * Exception: No, you can't have a pony.
12:01:16 <SamB> http://hackage.haskell.org/cgi-bin/hackage-scripts/package/pony-1.0
12:01:38 * Baughn groans
12:01:41 <SamB> incidentally, TimBL (the guy who invented the web) frowns on that URL
12:01:52 <Baughn> Oh? Why?
12:02:27 <SamB> http://www.w3.org/Provider/Style/URI
12:02:27 <p_l> Baughn: Probably because of cgi-bin
12:03:04 <forkingYourIO> if(node->val > val), where node is a pointer the that means the val that is in the structure it points to?
12:03:13 <SamB> I don't imagine he approves of the "-scripts" bit either
12:03:17 <SamB> whatever that means
12:03:21 <Baughn> forkingYourIO: This is #haskell. You want ##c.
12:03:23 <idnar> obviously it should be http://hackage.haskell.org/packages/pony-1.0
12:03:26 <Zao> Now, the solution to this is to run Hackage on HAppStack. Then it would be trivial to support the "old URIs must work" bit :)
12:03:33 <idnar> cgi-bin/hackage-scripts is an implementation detail ;)
12:04:46 <p_l> wouldn't simply using mod_rewrite/whatever-your-frontend-uses-for-that be enough?
12:05:05 <Baughn> Well, yes
12:05:31 <p_l> IIRC TimBL also suggested using that mechanism in order to create better URIs
12:05:41 <SamB> basically, yeah
12:06:50 <SamB> I always found websites with .dll in the URLs very ... well, I don't remember what I found them
12:07:04 <Baughn> Amusing?
12:07:06 <p_l> ... I think I'll need to find a linux dynamic loader expert ...
12:07:25 <Peaker> p_l: ?
12:07:34 <SamB> but I have to wonder how many of them that actually reflected the implementation of anymore
12:07:37 <Baughn> p_l: Hmm?
12:08:01 <p_l> Baughn: The app in question is in C, but errors suggest to me a dramatic failure of dynamic loading >_>
12:09:17 <p_l> One more try with ld running on target machine... if it doesn't work, I'm gonna tell client to use static linking
12:09:40 <omnihil> p_l, have you run ldd to make sure all the libraries are found?
12:09:51 <Baughn> p_l: Or objdump -x, for.. control purposes
12:10:10 <p_l> omnihil: Yes. The thing is, when I return from call to the library, it trashes stack and jumps to nowhere
12:10:29 <omnihil> p_l, your header files probably aren't declaring the right calling convention
12:10:30 <Baughn> Oh, the sqlite thing?
12:10:43 <Baughn> I thought that was due to a bug in the library
12:13:31 <forkingYourIO> when I have a bst and ant to delete a node with 2 childre, should i move up the lft or the right node to be the original node? ic ant figure it out clearly from wikipedia
12:13:51 <p_l> Baughn: at the moment, I'm lost. The _same_ code, compiled on x86 using simple "gcc sqlite-demo.c -lsqlite3 -o sqlite-demo" works. On mipsel-uclibc ... it fails fatally
12:14:13 <p_l> Baughn: At the same time, sqlite3 cli application _works_, despite being dynamically linked
12:15:35 <agruman> Hello, i have: "data Value = ValInt Integer | ValDouble Double" and  i want a general function like this "f :: (Num a) => (a -> a -> a) -> Value -> Value -> Value" that can be used with arithmetic operations, but ghc gives me Couldn't match the rigid variable `a' against `Integer' `a' is bound by the type signature for `a', could someone please explain the problem here?
12:16:12 <Cheshire> agruman, when Num gets instantiated, it can't be both Integer and Double
12:17:10 <agruman> Cheshire ok, still dont quite get it, but does that mean that this cant be done this way?
12:17:19 <pumpkin_> you'd probably want a typeclass
12:17:51 <agruman> would be so nice to be able to do "f (+) x y" :)
12:18:09 <Cheshire> you could do
12:18:17 <Cheshire> (Integer -> Integer -> Integer) ->
12:18:19 <aluink> drhodes: http://tinyurl.com/byox9l
12:18:22 <Cheshire> (Double -> Double -> Double) ->
12:18:27 <Cheshire> (Value -> Value -> Value)
12:18:34 <Cheshire> then  f (+) (+) x y
12:18:42 <idnar> @type let f (*) x y = x * y in f
12:18:43 <lambdabot> forall t t1 t2. (t -> t1 -> t2) -> t -> t1 -> t2
12:18:45 <Cale> Or: f :: (forall a. Num a => a -> a -> a) -> Value -> Value -> Value
12:18:57 <drhodes> aluink: reading
12:19:01 <Cale> But that's a higher rank type and probably not actually what you want.
12:19:51 <Cale> agruman: The thing is that f is supposed to do its work regardless of what type 'a' is.
12:20:15 <pumpkin_> which is fine since it's a Num, right?
12:20:24 <pumpkin_> and the things he intends to pass in are Num methods
12:20:32 <Cale> agruman: So if f really had that type you gave it, it should be okay for me to pass in some function which works only on complex numbers.
12:20:35 <aluink> for those who might care, my thoughts on Dreams and Monads http://tinyurl.com/byox9l
12:21:15 <Cheshire> aluink silly
12:21:43 <agruman> Cale, pumpkin_, Cheshire thanks alot for your help, i believe forall might work for me, will read up on that :)
12:21:52 <aluink> Cheshire: came to me while I was either half asleep or straight up dreaming, so bear with me, i'm just sharing ;)
12:22:03 <Cale> agruman: What are you actually trying to express?
12:22:11 <Cale> agruman: What's "Value"?
12:22:17 <FunctorSalad> aluink: makes sense to me :)
12:22:24 <Cale> oh, you said what it is :)
12:22:29 <agruman> Cale, Value is either int, double, bool or void
12:22:49 <FunctorSalad> aluink: also, there's no way to get something out of Dream :(
12:23:01 <FunctorSalad> unsafeMaterialiseFromDream anyone?
12:23:13 <Cale> agruman: One thing you might consider...
12:23:17 <agruman> but i only want this for int and double, and a general function for +-/* aso would be nice
12:23:38 <Cheshire> unsafeMentionSomeMatrixQuote
12:23:45 <aluink> FunctorSalad: well, not entirely, consider this very idea, it came to me in a dream, and now i'm playing with it IRL (at least I think IRL) ;)
12:23:52 <Cale> combine :: (Integer -> Integer -> Integer) -> (Double -> Double -> Double) -> (Bool -> Bool -> Bool) -> Value -> Value -> Value
12:24:22 <Cheshire> combineHarvester :: Value (a -> a -> a) -> (Value a -> Value a -> Value a)
12:24:39 <omnihil> aluink, this is just a do block before you return to your dream.
12:24:54 <aluink> omnihil: toucher
12:24:58 <Cheshire> another case where type lambda would be useful..
12:27:29 <SamB> oh, that thing about implementation details in URLs reminded me of this page:
12:27:33 <SamB> http://insecure.org/sploits/pcwebserver.perl-cgi.html
12:30:13 <whpearson> I have two functions a -> b and a -> d do I need to use arrows to combine them into a function a -> (b, d)?
12:30:20 <zerny> Hi, I have just installed pandoc with cabal, but can't seem to get highlighting to work. pandoc -v shows that it has been compiled with the highlight flag.
12:30:24 <Cheshire> whpearson no
12:30:32 <zerny> Am I missing something?
12:30:37 <seliopou> @type (&&&)
12:30:38 <lambdabot> forall (a :: * -> * -> *) b c c'. (Arrow a) => a b c -> a b c' -> a b (c, c')
12:31:16 <Cale> whpearson: You may use an arrow combinator, but you could also use a lambda
12:31:31 <Cheshire> :t let  par f g (x,y) = (f x, gy) in join par
12:31:32 <Cale> (\x -> (f x, g x))
12:31:32 <lambdabot> Not in scope: `gy'
12:31:40 <Cheshire> :t let  par f g (x,y) = (f x, g y) in join par
12:31:41 <lambdabot> forall t t1. (t -> t1) -> (t, t) -> (t1, t1)
12:31:45 <trofi> @pl \a b d -> (f a b, g a d)
12:31:45 <lambdabot> ap (flip . (((.) . (,)) .) . f) g
12:31:50 <FunctorSalad> > liftM (,) f g x
12:31:51 <lambdabot>   Add a type signature
12:31:58 <FunctorSalad> > liftM (,) f g x :: (Expr,Expr)
12:31:59 <lambdabot>   Add a type signature
12:32:03 <Cale> liftM2
12:32:04 <FunctorSalad> :p
12:32:06 <FunctorSalad> ah
12:32:10 <Cheshire> :t let  par f g (x,y) = (f x, g y) in :t join (uncurry (par f g))
12:32:10 <FunctorSalad> > liftM2 (,) f g x :: (Expr,Expr)
12:32:12 <lambdabot>   (f x,g x)
12:32:12 <lambdabot> parse error on input `:'
12:32:17 <FunctorSalad> thanks :)
12:32:30 <whpearson> Heh, thanks all.
12:33:20 <trofi> @pl (\x -> (f x, g x))
12:33:20 <lambdabot> liftM2 (,) f g
12:33:51 <olsner> ooh, since tdfa was just as fast as pcre before this release, shouldn't it be awesomely fast now?
12:34:08 <Cheshire> :t let  injPrj (i,j) (p,q) = (i . p, j . q) in injPrj
12:34:10 <lambdabot> forall b c b1 c1 a a1. (b -> c, b1 -> c1) -> (a -> b, a1 -> b1) -> (a -> c, a1 -> c1)
12:34:25 <FunctorSalad> olsner: if anyone actually finds it among the 10 other regex libs ;)
12:34:45 <forkingYourIO> treeFromList :: (Ord a) => [a] -> BinarySearchTree a ; Ambiguous type variable `a' in the constraint:
12:34:45 <forkingYourIO>       `Ord a'Probable fix: give these definition(s) an explicit type signature
12:34:45 <forkingYourIO>                   or use -XNoMonomorphismRestriction
12:34:49 <olsner> iirc, tdfa is the only one which has no dependencies on external libraries
12:35:46 <FunctorSalad> maybe hackage should have some sort of activity indicator on the package list so you have a hint which one of several similar packages to use?
12:36:18 <FunctorSalad> OTOH a mature package doesn't have much recent activity I guess
12:36:54 <forkingYourIO> why doesnt pointsfree work sometimes? you ahd to add an argument to it and then it works even without telling anything about the arg
12:37:12 <Eelis> FunctorSalad: perhaps an indication of how many other packages depend on it would be nice. should tell you which ones are the tried and tested ones, and which are the prototypical alternatives
12:38:24 <olsner> tried and tested sometimes means old and slow but works, and new and fast and awesome sometimes means it hasn't had any time to get widely used :)
12:38:46 <Eelis> yes, i'm not saying "more dependencies" == "better"
12:39:12 <forkInYourI> @pl \xs -> if null (head xs) then tail xs else xs
12:39:13 <lambdabot> join (ap (if' . null . head) tail)
12:39:29 <forkingYourIO> puh, im done! http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2058#a2058 , comments on my BST please, any bugs? it seems to work. thanks for the help those of you who pointed me in the right direction.
12:39:47 <FunctorSalad> speaking of "tried and testet", some "stability" statements seem excessively conservative :) (is Data.Bits really "experimental"?)
12:40:00 <forkingYourIO> the traverse function, can it be made better? it uses ++ which is not so cute...
12:40:36 <olsner> FunctorSalad: maybe it's just not in Haskell98 :P
12:41:12 <FunctorSalad> olsner: are you saying only haskell98 is allowed to be declared "Stable" in that field?
12:42:43 <FunctorSalad> (really don't know)
12:42:50 <olsner> no, no such rule... I just think haskell people are usually the kind of people who won't easily call anything stable
12:44:54 <MyCatVerbs> FunctorSalad: presumably, everything in Haskell' will be marked as stable too. :)
12:47:58 <Cheshire>   -- –∫–∞–∫–æ–π –±—ã –±—ã–ª–∞ bind (>>=) –≤ Haskell, –µ—Å–ª–∏ –±—ã join –∏ fmap –±—ã–ª–∏ –≤—ã–±—Ä–∞–Ω—ã –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–∏—á–Ω—ã—Ö
12:50:30 <mmorrow> Cheshire: i realized how/why your title was different about 10 minutes later.. ;)
12:50:50 <Cheshire> what's my title?
12:50:58 <mmorrow> > cheshireTitle
12:50:59 <lambdabot>   ["Real World Haskell: out now","#haskell-in-depth launched!","Haskell News:...
12:51:06 <mmorrow> > realTitle
12:51:07 <lambdabot>   ["Real World Haskell: out now","#haskell-in-depth launched!","Haskell News:...
12:51:07 <Cheshire> oh that ok
12:51:14 <mmorrow> :)
12:51:21 <Baughn> > realTitle == cheshireTitle
12:51:23 <lambdabot>   False
12:51:29 <mmorrow> i was like ohhhh, i know i hate that!!
12:51:43 <mmorrow> "Don't you hate that?"
12:51:47 <mmorrow> yes!
12:51:58 <Baughn> > cheshireTitle \\ realTitle
12:51:59 <lambdabot>   ["Haskell News:  http://reddit.com/r/haskell ","http://haskell.org ","Paste...
12:52:03 <Cheshire> lol
12:52:26 <skorpan> :t (\\)
12:52:27 <mmorrow> > zipWith (\\) cheshireTitle realTitle
12:52:28 <lambdabot> forall a. (Eq a) => [a] -> [a] -> [a]
12:52:28 <lambdabot>   ["",""," ",""," "," "," "]
12:52:40 <Cheshire> @go Quantum Entalgmentmumbo Jumbo Godels Wonky Bonker Theorem Telegalatic Transendental Truth Paradox
12:52:42 <skorpan> @src (\\)
12:52:42 <lambdabot> No Result Found.
12:52:42 <lambdabot> (\\) = foldl (flip delete)
12:52:56 <skorpan> @src delete
12:52:57 <lambdabot> delete = deleteBy (==)
12:52:59 <mmorrow> quite the search there
12:53:07 <mmorrow> @w80 Telegalactic
12:53:10 <lambdabot> No match for "Telegalactic".
12:53:17 * mmorrow votes to add that one
12:53:21 <Baughn> "Unacceptable type in foreign declaration: forall a. FinalizerPtr a" <-- Is it really unacceptable?
12:53:27 <Cale> http://www.youtube.com/watch?v=TLMxHB19khE -- yay, a new Catsters video :)
12:53:30 <Cheshire> Unpardonable
12:53:55 <forkingYourIO> a BST: Node 10 Leaf Leaf, does that have height 0 or 1?
12:55:10 <FunctorSalad> how did "cheshireTitle" get defined?
12:55:19 <Baughn> @undefine
12:55:39 <Baughn> > cheshireTitle
12:55:40 <lambdabot>   Not in scope: `cheshireTitle'
12:55:46 <FunctorSalad> :(
12:56:29 <Gracenotes> because of the inconvenient of quotes afters URLs in Cheshire's client, I guess..?
12:56:32 <Gracenotes> ce
12:57:16 <dons> sjanssen:   SPARKS: 1398105 (73275 converted, 17339 pruned)
12:57:22 <dons> ghc spark stats == useful!
12:57:37 <forkingYourIO> what is the standard Int-type to use, Int or Integer?
12:57:43 <Baughn> Integer
12:57:47 <Baughn> Int is very much an optimization
12:57:48 <dons> Int is fast. Integer is unbounded and ok.
12:58:02 * kaol feels like he's using TH just because he's missing that C++ coding experience
12:58:23 <Gracenotes> there are also more optimized int types
12:58:30 <Gracenotes> defined in GHC.Int
12:58:39 <Baughn> s/ optimized//
12:58:50 <dons> ?
12:58:53 <dons> more optimized?
12:59:00 <MyCatVerbs> You mean the unboxed ones, right? Please don't use those.
12:59:19 <Gracenotes> well, in cases where performance really really matters
12:59:25 <MyCatVerbs> No, seriously, don't.
12:59:32 <Baughn> You get better results by tickling the optimizer until it unboxes for you
12:59:49 <MyCatVerbs> Not until *after* you've compiled with -ddump-simpl and assured yourself that GHC hasn't already converted the entire program to use unboxed ints by itself.
13:00:36 <MyCatVerbs> Because it usually does. I have tried this manually, and the lack of any difference whatsoever (in both the code generated and to an even greater degree the runtime performance) is quite striking.
13:01:18 <Baughn> "Unacceptable type in foreign declaration: forall a. FinalizerPtr a" <-- Anyway, what does this error actually mean?
13:01:23 <Gracenotes> a few shootout entries use it or the unsigned Word8, so it must make some differences in some cases
13:01:48 <Baughn> Gracenotes: Or the entries were written back before the optimizer got this smart
13:01:52 <forkingYourIO> if traversing a Tree returns a sorted list, is that enough to say that it IS a binary search tree?
13:02:15 <Baughn> No
13:02:18 <Gracenotes> Baughn: that's possible. New entries should be submitted then
13:02:21 <SamB> Baughn: well, it says you can't foreign import/export something at the type "FinalizerPtr a"
13:02:26 <Baughn> forkingYourIO: For one thing, it may not be binary
13:02:34 <MyCatVerbs> forkingYourIO: no. There are other shapes of search trees which can be traversed in sorted order.
13:02:58 <MyCatVerbs> Gracenotes: Word8 is another matter entirely. For one thing, it's still boxed. :)
13:02:58 <Baughn> SamB: This is in Foreign/Marshal/Alloc.hs, though. :(
13:03:15 <SamB> Baughn: oh, that means something is screwed up ;-P
13:03:23 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2058#a2060 <- can traverse be done without using ++ ? and can height and delete be simplified?
13:04:24 <tromp_> yes, you can avoid ++
13:04:45 <MyCatVerbs> forkingYourIO: you can AFAIK always get rid of concatenation of lists that you're producing yourself by doing unpleasant transformations on the functions that generate them.
13:05:06 <mmorrow> Baughn: it says it's a type FinalizerPtr a = FunPtr (Ptr a -> IO ())
13:05:14 <mmorrow> Baughn: just castPtr until it's happy?
13:05:31 <MyCatVerbs> It's not always necessarily worth the effort, but yes. It involves a lot of { let rest = ... in (thisElement : rest) }.
13:05:34 <Baughn> mmorrow: That's probably asking for trouble. I'd hope ghc would be able to compile itself, but..
13:05:48 <Baughn> mmorrow: Well, maybe I just need 6.8.3 to compile 6.10.2 properly
13:06:00 <mmorrow> Baughn: is this a foreign import or axport?
13:06:04 <mmorrow> *export
13:06:07 <Baughn> import
13:06:25 <Baughn> "foreign import ccall unsafe "stdlib.h &free" finalizerFree :: FinalizerPtr a
13:06:31 <mmorrow> oh
13:06:39 <mmorrow> just castPtr ;)
13:06:51 <mmorrow> wait
13:07:10 <mmorrow> oh, n
13:07:31 <mmorrow> i've never seen anyone grab a functionptr by doing & on a function
13:07:42 <Cheshire> we should have something like
13:07:57 <Cheshire> ffPuts :: String -> IO ()
13:07:57 <Baughn> mmorrow: It's currently in the base library source code, so it ought to work. ^^;
13:08:00 <Cheshire> ffPuts = ffi "puts"
13:08:09 <Baughn> Cheshire: Why?
13:08:11 <mmorrow> Baughn: weird
13:08:21 <Baughn> Let's see how 6.8.3 does
13:10:17 <Cheshire> just seemed like a cool idea
13:10:20 <Cheshire> I guess it isn't
13:10:48 <Baughn> You can define it yourself if you like, but it's probably a bad idea. haskell already does its own output buffering.
13:12:25 <Cheshire> Baughn, I mean as a ffi
13:12:35 <Baughn> Cheshire: Yes, but /why/?
13:13:06 <Cheshire> I don't think my idea is implementable
13:13:15 <Cheshire> I mean, unless you hack GHC
13:13:20 <Baughn> Sure it is. Trivial, even.
13:13:41 <Baughn> It's a bad idea and might cause output to get mixed up, but that's a different issue. :P
13:13:52 <Cheshire> what
13:14:02 <Cheshire> Baughn, a different example:
13:14:16 <forkingYourIO> search, findMin, findMax should be instant in a BST right? at least for a 10K elem one? because then my BST must suck...
13:14:27 <Baughn> If you use stdio puts to print text.. stdio has its own buffering code, and its own buffer, bypassing the haskell one
13:14:28 <forkingYourIO> works for 100 elem BST but goes on forever for 10K
13:14:33 <Cheshire> dodecaheadron :: Double -> GLUT ()
13:14:45 <Cheshire> dodecaheadron = ffi "glutSolidDodecaheadron"
13:14:46 <Baughn> With block-buffered output, it'S all too likely to mix the output with whatever you print with putStr
13:15:08 <Baughn> Cheshire: Of course it'd be Double -> IO ()
13:15:12 * mle teapots Cheshire
13:15:16 <forkingYourIO> and it (must) be soemthing wrong because worst case should be O(n) right? and tha should still be instant for 10K elems
13:15:22 <Baughn> Cheshire: Okay, I see now. I think c2hs already does something like that, though..
13:16:52 <FunctorSalad> forkingYourIO: try the profiler :)
13:17:05 <tomh> mm whats the best way to convert an int to something which can be divided?
13:17:16 <Cheshire> :t (%)
13:17:17 <lambdabot> forall a. (Integral a) => a -> a -> Ratio a
13:17:21 <FunctorSalad> tomh: fromIntegral
13:17:27 <Cheshire> > ((3::Int) % 1) / 7
13:17:29 <lambdabot>   3%7
13:17:32 <Cheshire> ^^^^^
13:17:34 <Cheshire> the best
13:17:49 <FunctorSalad> uh not if you eventually want a Double anyway
13:18:19 <forkingYourIO> FunctorSalad: ok, how do I use it?
13:18:35 <tomh> ok thanks
13:18:41 <forkingYourIO> it will just tellme what function that takes up the memory anyway right? i already no that sinc eim just calling one...
13:19:11 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2061#a2061 <- what i ahve now
13:19:13 <FunctorSalad> forkingYourIO: IMO the simplest way is to make an cabal package with an executable out of you program, cabal install -p --enable-executable-profiling -ghc-option=-auto-all
13:19:32 <FunctorSalad> then "myProgram +RTS -p"
13:20:13 <forkingYourIO> but tell me, in worst case a BST should behave liek a linked list right? so if i have 10K elems it should still be instant to search it? so if it takes a long time it suggests there is soemthing wrong with my algorithm or (since it is not overflowing) that I use some stupid exponential algorithm?
13:20:53 <Baughn> forkingYourIO: Well, if you're only searching it once..
13:21:42 <forkingYourIO> i msut be doing soemthing like naive fibonacci
13:22:55 <johnbs> If I have some computation in the Either monad, how can I push it down into the IO monad so that Right values get passed through and Left values get turned into errors/exceptions?
13:23:16 <FunctorSalad> forkingYourIO: which function is it?
13:23:19 <FunctorSalad> (the problem)
13:23:38 <Cheshire> johnbs,  ioify (Left err) = throwError err ; ioify (Right roar) = return roar
13:23:51 <johnbs> great, thanks
13:23:52 <FunctorSalad> forkingYourIO: due to lazyness, your tree will only get built once it is actually used the first time, so the problem can also be in the tree builder
13:24:15 <yav> johnbs: in the version of monadLib on github, this functions is called "raises"
13:24:36 <johnbs> I'll check that out. I wasn't sure if there was already a function in the libraries to do it
13:24:45 <forkingYourIO> FunctorSalad: search, sort, maximum, findMin, all of them.
13:25:21 <forkingYourIO> basically the height of the tree is the nbr of elems, but event hen it should be linear time right?
13:25:32 <FunctorSalad> forkingYourIO: yes
13:26:07 <FunctorSalad> the code looks right to me at first glance... where's the main function with the builder?
13:27:19 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2061#a2062
13:27:23 <forkingYourIO> im running in ghci
13:27:27 <sjanssen> dons: huh?
13:27:31 <forkingYourIO> but it should still not take that long
13:27:56 <whpearson> forkingYourIO: I may be being dumb but what does your function do if it comes across insert (Node v left Leaf) and hits the otherwise guard?
13:28:29 <whpearson> Ah, I see. Never mind.
13:28:59 <dons> sjanssen: ghc 6.11.x prints spark conversion stats now
13:29:01 <FunctorSalad> (btw isn't the second 'insert' clause redundant?)
13:29:08 <sjanssen> ah, I see
13:29:16 <sjanssen> dons: I'm reading the par paper now
13:29:23 <lament> we put an insert clause in your insert clause?
13:29:37 <sjanssen> I love these sorts of papers, with all the implementation details and such
13:30:08 <dons> yeah, it's awesome
13:30:13 <mmorrow> :r
13:30:15 <dons> i've got today's head snapshot
13:30:15 <mmorrow> heh
13:30:23 <dons> need to find out which things are in the head now
13:30:46 <dons> definitely getting more reliable, and easier to understand, `par` results on quad core now
13:30:56 <dons> and i can actually see when the par gc kicks in
13:31:01 <dons> bos will be happy
13:31:19 <bos> :-)
13:31:40 <dons> just having +RTS -sstderr print the number of sparks that did and didn't turn into threads is immensely useful
13:31:51 <dons> and which GC passes and generations ran in parallel.
13:32:12 <dons> the old days of `par` programming are dead i think
13:32:24 <FunctorSalad> forkingYourIO: does the first 'print' statement ('print a') finish?
13:32:25 <dons> get ghc 6.11.today, and start afresh
13:32:28 <sjanssen> I don't think they were ever really alive
13:32:36 <dons> it was uber black magic :)
13:32:41 <sjanssen> such a crapshoot whether things will fire
13:33:20 <dons> i like knowing that e.g. in binary-trees 9 / 9 sparks were turned into threads, while if i change it, we go to 10k tunred/ 2M not turned.
13:33:30 <dons> much easier to work out if parallelisation is going down the wrong path
13:35:25 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2063#a2063
13:36:12 <forkingYourIO> yes it prints the whole tree fast for 1000 elems
13:37:18 <sw17ch> i can't really count on ghc using gcc as the C compiler/processor, can i?
13:37:40 <sw17ch> specifically, i'm looking at using __alignof__() with hsc2hs's #const declarations
13:38:38 <sw17ch> __alignof__() is, as far as I know, a GNU extension
13:39:12 <bos> sw17ch: what do you want alignof for?
13:39:21 <sw17ch> bos: storable instances
13:39:40 <sw17ch> unless i'm missing a feature of hsc2hs that can tell me that
13:39:52 <bd_> You can empirically measure the alignment of some type
13:39:53 <FunctorSalad> forkingYourIO: I agree that should run almost instantly, but I can't find the problem either :(
13:40:03 <bd_> create a struct { char c; type t; };, and measure the offset of t
13:40:04 <sjanssen> forkingYourIO: which operation is too slow?
13:41:32 <forkingYourIO> sjanssen: all of them
13:42:19 <FunctorSalad> except insert and treeFromList, apparently
13:42:33 <Cheshire> bd_: sort of um.. bad way to do it
13:42:45 <Peaker> forkingYourIO: where's the code?
13:42:51 <Cheshire> bd_: proper way:  Read the ABI notes which give the full algorithm for calculating offsets
13:43:27 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2063#a2063
13:43:42 <forkingYourIO> yes insert is fast and so is treeFromList
13:43:51 <bd_> Cheshire: True, but a configure script can't necessarily read ABI notes
13:43:56 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2061
13:43:59 <seliopou> sw17ch, I don't think hsc2hs has any alignment macros
13:44:02 <forkingYourIO> ^^ the code
13:44:15 <bd_> Cheshire: And the offset should give a legal alignment, should it not?
13:44:42 <mmorrow> Cheshire: you just need to mess with ffi importing dlfcn.h, then maybe a typeclass and a bunch of (foreign import ccall "dynamic")'s
13:45:19 <forkingYourIO> findMaximum should be just taking the head node, it should see right is empty there fore root is maximum, and it looks like my algorithm does that but apprently not?
13:45:49 <forkingYourIO> findMaximum (Node v _ Leaf)  = Just v -> instant! but take sforever
13:45:53 <Cheshire> I'm kind of not into config scripts
13:46:08 <Gracenotes> @type max
13:46:09 <lambdabot> forall a. (Ord a) => a -> a -> a
13:46:29 <pumpkin_> moo
13:46:29 <Gracenotes> you can try that instead of maximum in height', if you wish
13:47:12 <Gracenotes> *cricketes*
13:47:14 <Gracenotes> -e
13:47:25 <augustss> yo
13:47:45 <mmorrow> oy
13:48:08 <Cheshire> hi
13:48:42 <augustss> on the train after a fun afternoon :)
13:48:50 <FunctorSalad> Gracenotes: both would get unfolded I'd hope ;)
13:48:59 <Cheshire> cool what happened
13:49:20 <sjanssen> forkingYourIO: the code is not slow at all here
13:49:26 <Cheshire> was it "fun in the afternoon"?
13:49:34 <augustss> indeed it was
13:49:41 <FunctorSalad> sjanssen: did you ghc it? forkingYourIO's using ghci
13:49:44 <Gracenotes> @src maximum -- well, one would get unfolded to the other, I'm pretty sure
13:49:44 <lambdabot> Source not found. There are some things that I just don't know.
13:49:48 <Gracenotes> :(
13:50:00 <sjanssen> FunctorSalad: I used 'runghc'
13:50:11 <sjanssen> forkingYourIO: please define what you mean by "slow"
13:50:14 <Axman6> @src maximum
13:50:15 <lambdabot> maximum [] = undefined
13:50:15 <lambdabot> maximum xs = foldl1 max xs
13:50:16 <Gracenotes> foldl1 max
13:50:23 <Cheshire> ooo
13:50:29 <snhmib> can i ask ghci for the signature of a function in a where clause?
13:50:38 <Cheshire> looks like a interesting bunch of talks wish
13:50:45 <Gracenotes> bad lambdabot!
13:51:04 <augustss> Cheshire: it was interesting
13:51:10 <njbartlett> augustss: Had an interesting blog comment today about the talk you gave at London HUG a while back...
13:51:37 <FunctorSalad> Gracenotes: maybe "max" gets turned into if ...< ... then ... too
13:51:39 <njbartlett> augustss: Some guy suggesting that Credit Suisse's Paradise is probably infringing several patents
13:51:40 <augustss> njbartlett: the Djinn talk?  The Paradise talk?
13:52:21 <snhmib> i have a function like   f :: (Stuff -> a) -> a, and then in the where of f i have a function that goes "g :: Stuff -> [a]", which is a wrong signature
13:52:28 <augustss> njbartlett: Well, I think it's hard to do anything without infringing patents.  What patents was he referring to?
13:52:35 <snhmib> if i do it without types for g it works allright
13:52:43 <njbartlett> augustss: http://www.londonhug.net/2008/08/11/video-paradise-a-dsel-for-derivatives-pricing/#comment-58818
13:52:50 <Cheshire> snhmib, no point in writing  (S -> a) -> a just write S
13:53:00 <Gracenotes> max x y = if x <= y then y else x
13:53:02 <forkingYourIO> wtf now I run it compiled and it is almost instant
13:53:06 <mmorrow> snhmib: put g temporarily at the top-level, then in ghci do :t g
13:53:22 <forkingYourIO> i emant slow as in not finishing..ever
13:53:23 <augustss> njbartlett: So I'd claim prior art on everything we did. :)
13:53:29 <njbartlett> augustss: Indeed, you can't write anything without infringing somebody's dumb patent. I thought the comment was funny :-)
13:53:30 <sjanssen> forkingYourIO: it does take a while if you bump the tree to [1 .. 10000], but this is not surprising
13:53:42 <sjanssen> forkingYourIO: and you're running the program exactly as you pasted on hpaste?
13:53:47 <forkingYourIO> wait
13:53:54 <forkingYourIO> 1000 elems was fast
13:54:03 <forkingYourIO> now it seems 10K is also reasonably fast
13:54:24 <augustss> njbartlett: I hate software patents.
13:54:31 <snhmib> mmorrow: i don't know how to write it in the top level.. it uses the function i pass to f for it's type
13:55:05 <sjanssen> forkingYourIO: do you want tips to make the program quicker?
13:55:39 <forkingYourIO> hmm ok, it takes a while befpore it prints the height(so height might be slow or it is building the tree that is(but sinc eprinting was fast...) then it deos the res tinstantly
13:55:55 <njbartlett> augustss: Me too. Oh but you're not at CS any more are you? What are you doing these days?
13:56:10 <mmorrow> snhmib: ok, comment out `g' and replace all external occurences with "?g" maybe
13:56:11 <FunctorSalad> forkingYourIO: odd, 10000 is a lot slower here too (1000 is 0.16s)
13:56:26 <FunctorSalad> forkingYourIO: (using runhaskell, not ghc)
13:56:32 <mmorrow> snhmib: or, pull out all the freevars in g and make them params (of g)
13:56:33 <sjanssen> forkingYourIO: height is slow because your function is too lazy
13:56:34 <augustss> njbartlett: I work for Standard Chartered.  A bank that made a profit last year.  Still doing Haskell.
13:57:19 <mmorrow> > map ?f [0..9]
13:57:20 <lambdabot>       Unbound implicit parameter (?f::a -> b)
13:57:21 <lambdabot>        arising from a use of `e...
13:57:30 <forkingYourIO> sjanssen: yes I want it faster. in ghci it doesnt seem to finish at all, kind of like naive fibonacci it seems to grow in execution time expo. but compield it is kind of fast.
13:57:32 <FunctorSalad> forkingYourIO: compiling with ghc -O2, 10000 element takes 3.4s here
13:57:35 <mmorrow> > map ?f [0..9::Int]
13:57:35 <njbartlett> augustss: Cool. Are you allowed to talk about the work you do now? If so I'll pick you brains at the next HUG
13:57:36 <lambdabot>       Unbound implicit parameter (?f::Int -> b)
13:57:36 <lambdabot>        arising from a use of ...
13:57:41 <forkingYourIO> but why does building a 10K elem tree take several seconds?
13:57:48 <snhmib> cool :)
13:57:49 <njbartlett> augustss: CS are still advertising for Haskell devs
13:57:59 <augustss> njbartlett: In private I can tell you things. :)
13:58:33 <njbartlett> augustss: :-)
13:58:43 <sjanssen> forkingYourIO: http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2061#a2065
13:58:59 <sjanssen> forkingYourIO: well, for one thing, you're using O(n) stack space due to foldr
13:59:46 <sjanssen> forkingYourIO: and it isn't just building the tree that is slow, it's the printing
14:00:00 <sjanssen> Show is not fast, and the unbuffered IO in ghci doesn't help
14:00:06 <forkingYourIO> sjanssen: so i should use foldl'
14:00:15 <sjanssen> forkingYourIO: yes
14:00:18 <forkingYourIO> im not printing anymore, i dont do any IO
14:00:37 <forkingYourIO> just printing answers like height, minimum etc
14:00:42 <FunctorSalad> how do you force computation for benchmarking if you don't have NFData? :)
14:00:51 <FunctorSalad> (without printing or other slow IO)
14:01:30 <blackh> FunctorSalad: force x `seq` return ()   with some force function that you created
14:02:51 <blackh> I have found that this works, because the IO monad needs to evaluate the IO action to execute.  force would do lots of `seq`s
14:03:20 <Cheshire> blackh, why this doesn't work in Maybe monad?
14:03:23 <FunctorSalad> blackh: hmm ok, sounds like force = rnf
14:03:39 <Cheshire> (I guess that it's because IO can catch a 'error')
14:03:46 <michaelcdever> is there anyway of getting a filepaths permissions as a string does anyone know?
14:04:16 <blackh> Cheshire: The Maybe monad is pure so the "statements" in it only get forced if it, in turn, gets forced.
14:04:38 <forkingYourIO> sjanssen: that height might be slightly faster, i didnt really notice
14:05:03 <forkingYourIO> but I still dont get why building the tree takes so long, is this the penalty of algebraic datastructures?
14:05:33 <sjanssen> forkingYourIO: due to the structure of your tree, height will use O(n) stack which is a problem
14:05:38 <sjanssen> forkingYourIO: the problem is foldr
14:06:06 <forkingYourIO> i dont use foldr anymore
14:06:11 <forkingYourIO> treeFromList xs = L.foldl' (\t v -> insert t v) Leaf xs
14:06:18 <forkingYourIO> if thats what you mean
14:06:32 <sjanssen> yes
14:06:38 <forkingYourIO> still the same
14:06:49 <sjanssen> forkingYourIO: but the resulting tree is a different shape, right?
14:07:29 <sjanssen> Node 1 Leaf (Node 2 Leaf (Node 3 ...))?
14:08:21 <sjanssen> forkingYourIO: with foldl, treeFromList is O(n^2) on ascending input
14:08:27 <FunctorSalad> sjanssen: made it slightly stricter, that drops it from 2.3s to 2.0s for me
14:09:39 <Cheshire> what are the alternatives of pattern matching?
14:09:50 <Cheshire> I know one:  folds (and generalizations of)
14:10:23 <FunctorSalad> (for 10k elements)
14:10:28 <forkingYourIO> sjanssen: ok that explaines things, how do I improve it
14:10:40 <sjanssen> forkingYourIO: use balanced trees
14:11:15 <FunctorSalad> really cheap way: randomly permute the input ;)
14:11:32 <sjanssen> forkingYourIO: alternatively, fromList [10000, 9999 .. 1] -- will exhibit the same shape as your old foldr
14:12:59 <forkingYourIO> yes but it is still the worst case, catn i make the worst case n log n or n?
14:13:23 <forkingYourIO> but the other functiosn are fine then? it is the worst case of insert that is the problem only?
14:13:50 <sjanssen> forkingYourIO: insert is the only function that needs to change, yes
14:14:39 <sjanssen> forkingYourIO: the best you can do for fromList is O(n log n), which is achieved by using any of the standard balancing schemes
14:14:44 <sjanssen> red-black, AVL, etc.
14:15:25 <FunctorSalad> IIRC randomization is average-case O(n log n) :D
14:15:55 <Cheshire> provability is NP-complete
14:16:18 <FunctorSalad> (with expected height involving the natural logarithm IIRC :))
14:16:39 <forkingYourIO> hmmt he insert fucntion i chanegd to seemd to have slowed things down
14:16:40 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2061#a2067
14:16:51 <forkingYourIO> the one at the bottom(also the original is faster).
14:17:15 <thoughtpolice> dons: do you have a repo for liboleg?
14:17:16 <sjanssen> forkingYourIO: you should skip all the special Leaf cases
14:17:38 <forkingYourIO> and I can do a balanced tree by onyl changing the insert function?
14:17:49 <sjanssen> insert Leaf v = Node v Leaf Leaf
14:18:06 <forkingYourIO> what do yiou mean?
14:18:08 <forkingYourIO> insert Leaf val = Node val Leaf Leaf
14:18:09 <sjanssen> insert (Node v l r) = ... -- these are the only two cases worth handling
14:18:12 <forkingYourIO> i have that
14:18:39 <sjanssen> forkingYourIO: I mean you should only handle those two cases, the others complicate and slow down your program
14:19:05 <sjanssen> forkingYourIO: in order to make a balanced tree, you'll probably have to change the data type as well
14:23:50 <mije> hi
14:24:24 <dons> thoughtpolice: http://code.haskell.org/~dons/code/liboleg/
14:24:44 <thoughtpolice> dons: i found that; doesn't seem to have IterateeM modules etc. from 0.1.0.2
14:24:48 <dons> updated.
14:24:49 <mije> i have an issue trying to install cabal-install, i can't figure out how to install the zlib library
14:24:51 <dons> try again
14:24:52 <thoughtpolice> dons: ty
14:24:55 <thoughtpolice> grr
14:25:06 * thoughtpolice is sad you can't get ghc+all the libs with git yet
14:25:57 <mije> the install script runs ld with wrong parameters (-lgmp)
14:26:18 <mije> has anyone meet this problem ?
14:27:22 <forkingYourIO> sjanssen: you mean those cases i added didnt do anything at all?
14:27:40 <forkingYourIO> or those extra i had
14:27:42 <sjanssen> forkingYourIO: they're redundant, they won't do anything useful
14:29:05 <Cheshire> are there any functional languages based on linear logic?
14:29:53 <wli> Clean
14:29:58 <thoughtpolice> dons: sent a patch for a type signature for (==<<)
14:30:43 <dons> pushed.
14:31:43 <mmorrow> forkingYourIO: implem a red-black tree
14:31:51 <MyCatVerbs> Cheshire: almost. Clean uses linear typing to prove that particular variables always have exactly one reference to them in order to replace copying with in-place mutation. Uniqueness typing, it's called. It's not full linear typing though, AFAIK.
14:32:14 <forkingYourIO> ok now it is reasonable both compiled and in ghci(same speed almost)
14:32:22 <Cheshire> what's the difference
14:32:23 <forkingYourIO> thanks for the help!
14:32:24 <MyCatVerbs> Cheshire: by which I mean, AFAIK you can't embed *all* of linear logic in it.
14:32:29 <forkingYourIO> i will now make it balanced!
14:32:30 <dolio> ATS has linear typing, I think.
14:32:38 <dolio> And linear lisp, if you count that.
14:32:40 <Cheshire> dolio the section in the user manual about linear types is missing :(
14:33:18 <forkingYourIO> mmorrow: red black tree it is!
14:33:46 <forkingYourIO> is -- the onyl form of commentary there is? is there no prettier one like """comment""" in python?
14:33:58 <wli> Depends on whether you're insert/remove heavy or lookup-heavy.
14:34:00 <mmorrow> forkingYourIO: here's a start http://darcs.haskell.org/yhc/src/compiler98/Util/Tree234.hs
14:34:09 <Tobsan> forkingYourIO: {- Comment -}
14:34:15 <Tobsan> If I update a record, does all items in that record get copied onto the updated record?
14:34:22 <wli> Insert/remove heavy and you want rbtrees, lookup-heavy and you want AVL trees.
14:35:44 <wli> Anymore, though, cache and TLB effects are so strongly influential that B+ trees are very good ideas.
14:35:56 <MyCatVerbs> forkingYourIO: """ string """ in Python is not a comment!
14:36:29 <forkingYourIO> to get fmap on my BST, would I implement a Functor?
14:36:30 <wli> I wish I could still write search tree code. I'll have to work on that on the side.
14:36:57 <dolio> Anyhow, uniqueness typing allows weakening but not contraction (I believe), and has backward-facing modality, as edwardk puts it.
14:37:13 <forkingYourIO> can the delete function be simplified, ti seems a bit on the gross sude
14:37:13 <MyCatVerbs> forkingYourIO: it merely looks like one, because of a convention that almost all Python programmers stick to. It's actually a string literal. It's just that Python takes an optional string literal at the right place in a method/class/function definition as a docstring for that method/class/function.
14:37:17 <Cheshire> I am not sure what backward-facing modality means
14:37:17 <travisbrady> MyCatVerbs: sure it is or are docstrings not comments?
14:37:45 <dolio> It's like, "I haven't yet contracted" versus "I will never contract in the future".
14:37:46 <travisbrady> MyCatVerbs: but if it quacks like a comment then it is one per the Python convention
14:38:00 <MyCatVerbs> travisbrady: I'm saying the syntax is not for comments. And no. Docstrings are not merely comments.
14:38:37 <MyCatVerbs> travisbrady: see the spark.py parser. You can access them at runtime with .__doc__ (though whether or not that's a good idea might be up for debate).
14:39:08 <dolio> So, if you haven't yet duplicated an array, it's safe to mutate it.
14:39:09 <byorgey> forkingYourIO: yes, just make a Functor instance to get fmap.
14:39:12 <dolio> But once you do, it isn't.
14:39:39 <byorgey> forkingYourIO: although note that mapping a general function over a BST may result in something which is no longer a BST.
14:40:05 <wli> It must be monotone.
14:40:08 <byorgey> right.
14:40:21 <travisbrady> MyCatVerbs: strictly speaking i agree, but everyone uses the terms interchangeably to no detrimental effect that i can see
14:40:45 <Cheshire> for array you use   swap(x,array[i])
14:40:56 <dolio> Linear typing is forward facing, but gives you some of the same guarantees, I guess.
14:40:58 <Cheshire> and if the value x and cells of the array are linear you are ok
14:41:19 <dolio> Since if you're never allowed to duplicate references to an array, it's safe to mutate it.
14:42:10 <dons> mm fizzled sparks
14:42:40 <pumpkin_> does linear typing in ATS have anything to do with its dependent types, or are those just both features it thas?
14:42:47 <dons> the latter
14:43:03 <pumpkin_> I really need to read TAPL :P
14:43:07 <pumpkin_> it's lying next to my bed
14:43:37 <cypher-> I'm reading it now
14:43:43 <cypher-> don't like it too much
14:44:11 <Gracenotes> have you translated ML to Haskell?
14:44:17 <dons> you're not supposed to like it. it just is.
14:44:53 <Gracenotes> there are many opportunities for improving the code design in the book, using Maybe instead of throwing errors left and right (no pun intended)
14:44:59 <forkingYourIO> byorgey: yes ofc, id dint think about that, thats obv true
14:45:35 <Gracenotes> many of the language rules the book defines can be adapted nicely into pattern-matching code :)
14:45:43 <Cheshire> cypher-, oh why?
14:45:49 <Cheshire> cypher-, I never heard anyone say that? :p
14:45:52 <Cheshire> s/?//
14:45:54 <Gracenotes> but I'm not a dozen chapters in yet... close though
14:46:16 <dons> sjanssen: note the advice on how to avoid space leaks in par code on page 8
14:46:39 * Gracenotes would TAPL that
14:47:08 <dons> "rule of thumb: always put a variable on the left of `par`"
14:47:37 <forkingYourIO> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2070#a2070 <- final version(thanks for the help), i might see if i can simplify my delete function
14:47:50 <forkingYourIO> now i ill do the redblack tree
14:47:58 <FunctorSalad> could you make a uniqueness typing monad? ;)
14:48:26 <dolio> You can make a monad that enforces linearity by construction.
14:48:29 <dolio> That's what ST is.
14:48:29 <forkingYourIO> which are the basic datastructures to know? linked list, binary search tree, hashtable?
14:48:40 <FunctorSalad> dolio: ahhh I see
14:48:58 <forkingYourIO> and is the the Haskell Data.List module implemented using arrays?
14:49:01 <Cheshire> forkingYourIO: function
14:49:05 <FunctorSalad> (haven't got around to ST yet)
14:49:25 <forkingYourIO> Cheshire: what do you mean?
14:49:33 <Cheshire> (->)
14:49:34 <daf> forkingYourIO: no, it's implemented using lists
14:49:49 <Cheshire> here is an example:
14:49:57 <Cheshire> @let single x = (x:)
14:49:58 <lambdabot>  Defined.
14:50:02 <Cheshire> @let append x y = x . y
14:50:04 <lambdabot>  Defined.
14:50:09 <Cheshire> @let freeze = ($[])
14:50:10 <lambdabot>  Defined.
14:50:23 <Cheshire> > freeze $ append (single 'x') (single 'y')
14:50:25 <lambdabot>   "xy"
14:50:45 <Cheshire> leaves (Leaf x) = single x
14:50:55 <dolio> FunctorSalad: http://citeseerx.ist.psu.edu:80/viewdoc/summary?doi=10.1.1.51.1593
14:50:56 <Cheshire> leaves (Branch l r) = append (leaves l) (leaves r)
14:51:01 <travisbrady> dons: i get a stack overflow with this code using uvector http://github.com/travisbrady/funzone/blob/90fd232cdecf8c2742760456d9f6b593393fb72d/uho.hs but the same algorithm implemented using lists http://github.com/travisbrady/funzone/blob/90fd232cdecf8c2742760456d9f6b593393fb72d/aho.hs works fine, do i need strictness annotations somewhere in the uvector version?
14:51:17 <forkingYourIO> so a proper fmap on a BST should basically: map over each value, make a list of them and then reinsert them so tehy coem int he right order? then is it "safe"?
14:51:22 <dons> travisbrady: compiling with -O2 ?
14:51:32 <travisbrady> in both instances yes
14:51:39 <Axman6> travisbrady: uvrector shouldn't need strictness at all, i think it's all strict
14:51:43 <Axman6> -r
14:52:14 <forkingYourIO> Cheshire:  -> from C? or what do you mean? the haskell symbol?
14:52:33 <FunctorSalad> forkingYourIO: why not implement the fmap directly?
14:52:34 <ddarius> forkingYourIO: Except that to do that you need an ordering on the items (so you can't make a Functor instance).  You can view stuff with an ordering function as being in a category such as Posets in which case what you'd be "fmapping" would be -monotonic- functions.
14:52:56 <forkingYourIO> > append 10 12
14:52:57 <lambdabot>       Overlapping instances for Show (a -> c)
14:52:57 <lambdabot>        arising from a use of `s...
14:53:07 <ddarius> forkingYourIO: If you could guarantee that the function you were using was monotonic, it would make sense to simple apply the function element-wise to the tree without restructuring it.
14:53:13 <FunctorSalad> oh right, the Set-is-not-a-monad issue :-(
14:53:33 <ddarius> FunctorSalad: Not really.
14:54:17 <thoughtpolice> dons: you'll probably get more patches later today; i'm adding some stuff to liboleg (notably some of the regions stuff, and some polyvariadic stuff too)
14:54:18 <travisbrady> dons: actually doesn't seem to overflow, just takes a really long time
14:54:22 <FunctorSalad> ddarius: it's the reason why you can't make Tree into a functor in the first place...
14:54:38 <dons> thoughtpolice: i think i've included all this haskell posts back to Dec 08
14:54:47 <dons> so if you work back through his announces, that'll help.
14:54:48 <newsham> fyIO: for each type of BST node you should be able to create the same kind of node with a functin applied to the value it stores.
14:54:56 <FunctorSalad> (ddarius: a binary search tree)
14:55:00 <dons> there's an agreed policy with oleg about the format of the code too
14:55:06 <newsham> without converting the structure to a list
14:55:14 <dons> we must include at the top of the file the text from his site, and a link back to the original article
14:55:24 <Cheshire> forkingYourIO: Haskell
14:55:31 <dons> thoughtpolice: you know what i mean?
14:55:37 <FunctorSalad> newsham: that's what I thought, but the function needs to be monotonic indeed
14:55:41 <ddarius> FunctorSalad: Yes, but that wasn't what he was asking, and in the case of Set, ordering is an implementation detail whereas it's the point of a BST.
14:57:12 <FunctorSalad> ddarius: is it really any different? the BST's external interface doesn't care about the ordering either as far as I can see
14:57:20 <dons> how do i get hold of the new graphical threadviewer?
14:57:24 <FunctorSalad> except for fromAscList / toAscList
14:58:55 <jeffwheeler> There's no way to indicate a preferred instance is there? E.g., I want to provide a fallback for my typeclass when "Show" is available, but then provide more specifics for many specific cases.
14:58:58 <ddarius> FunctorSalad: Well, if you just use a BST as a mapping, no, but that's a mapping's interface, a BST guarantees and exposes more.
14:59:09 <dons> sjanssen: might be fun to port the parallel tuples et al from manticore to haskell
14:59:11 <ddarius> jeffwheeler: You can't have multiple instances at all.
14:59:31 <jeffwheeler> Well, at least until you try to use it. :)
14:59:53 <kpreid> ddarius: remind me, how does it work that [Char] is printed differenly from all other [a]?
14:59:59 <ddarius> @src Show
14:59:59 <lambdabot> class  Show a  where
14:59:59 <lambdabot>     showsPrec :: Int -> a -> ShowS
14:59:59 <lambdabot>     show      :: a   -> String
14:59:59 <lambdabot>     showList  :: [a] -> ShowS
15:00:05 <ddarius> That last method.
15:00:08 <ddarius> It's a hack.
15:00:35 <MyCatVerbs> A horrible, horrible hack. </mimic nice Dutch lecturer's voice>
15:00:40 <dmwit> a very, very clever hack
15:01:00 <FunctorSalad> jeffwheeler: you could make a new class and use -XOverlappingInstances, that kind-of works if it's for personal use only ;)
15:01:03 <kpreid> ddarius: oh...so it's the Show Char instance, and the default is to use []
15:01:07 <Cheshire> it's not clever
15:01:14 <abuiles> could someone please explain me, what is the value that the "s" takes,,, http://moonpatio.com/fastcgi/hpaste.fcgi/view?id=1720#a1720
15:01:19 <jeffwheeler> FunctorSalad: unfortunately, nope :-/
15:01:35 <Cheshire> abuiles no value
15:01:43 <dmwit> any value
15:01:56 <dmwit> The value of the current parse state.
15:02:09 <blackdog> dons: did you get that GC stats interface going?
15:02:17 <newsham> ddarius/functor: the search tree constraint is a property of the search function, not the tree shape, no?
15:02:18 <ddarius> kpreid: instance Show a => Show [a] where showsPrec _ = showList; instance Show Char where showList cs =
15:02:30 <abuiles> Cheshire: so if ,  parse 2, s == 2 ?
15:02:31 <newsham> so you can fmap over it as long as you dont assume that you can search it anymore
15:02:36 <FunctorSalad> jeffwheeler: IIRC that 'trick' becomes a bit confusing if you export the class and add new Show instances later
15:02:54 <FunctorSalad> (maybe someone else knows what exactly goes wrong?)
15:02:54 <whpearson> I'm still working on my functional graph toolkit. I have somewhat composable data structures that control the way that the tree is traversed, pruning off branches or stopping them visiting the same nodes again. I also have one of these data structures that adds a breadcrumb trail of how you get to a node, so that this can then be filtered upon.
15:02:58 <dons> blackdog: getting there. i think it makes sense to do it against ghc head now, there's lots of cool stats
15:03:18 <whpearson> Anything else that people can think they might want to do in terms of controlling traversal?
15:03:24 <thoughtpolice> dons: ok
15:03:25 <ddarius> newsham: A BST is a tree with an invariant.  fmapping arbitrarily over the tree won't preserve that invariant (i.e. the result won't be a BST necessarily)
15:03:39 <thoughtpolice> dons: so i take it i should contact oleg before anything? :)
15:03:41 <dons> thoughtpolice: so you can see that in the existing modules : top text is text from the post on pobox, and a link back
15:03:46 <dons> then haddockise oleg's literate code
15:03:51 <dons> also, keep extensions per module
15:03:52 <blackdog> dons: golden.
15:04:19 <thoughtpolice> dons: right, every module has '-fglasgow-exts' removed in favor of LANGUAGE pragmas and the modules I've got in place (so far) have no dependencies on each other
15:04:28 <FunctorSalad> newsham: hmm maybe if the tree had a "corrupted" bit so it would get rebalanced by any functions that require it to be a BST...
15:04:34 <newsham> ddarius: so the solution is obvious.  s/BST/Tree/ and doc the find interface as "requiring a properly ordered BST" ;-)
15:04:35 <dons> thoughtpolice: sweet.
15:04:46 <dons> we should put the oleg porting conventions in the README
15:04:51 <dons> also, check that 'cabal haddock' works
15:04:55 <FunctorSalad> newsham: ah of course. outsource that bit to the user's mind ;)
15:04:57 <thoughtpolice> dons: I always do :)
15:05:00 <dons> since without valid docs on hackage, these modules will be useless:)
15:05:05 * thoughtpolice despises haddock build errors
15:05:25 <Alpounet> @pl map . drop 3
15:05:25 <lambdabot> map . drop 3
15:05:29 <forkingYourIO> ddarius: and checking if a functions is monotonic is solving the halting problem?
15:05:37 <newsham> perhaps you could pass a proof of orderedness to the find function? ;-)
15:05:42 <Alpounet> @pl map . drop 3 . lines
15:05:42 <lambdabot> map . drop 3 . lines
15:05:55 <wli> I'm kind of scared about mixing different sets of LANGUAGE pragmas across different modules.
15:06:06 <FunctorSalad> forkingYourIO: f n = if (programHaltsAfterStep n) then 0 else 1
15:06:07 <thoughtpolice> wli: why?
15:06:10 <ddarius> newsham: Yeah, you could encode it in the type and use abstraction to avoid violating it.
15:06:19 <wli> thoughtpolice: Worried about breakage.
15:06:21 <thoughtpolice> wli: in this case all the modules are basically self-contained, so it's not too horrible
15:06:34 <thoughtpolice> although there may be some dragons lying there i'm not aware of :)
15:07:12 <thoughtpolice> dons: also, thanks for starting this. some of oleg's code is immensely useful, IterateeM is an example (and FDList!)
15:07:25 <thoughtpolice> i think the regions code could be very useful too
15:07:33 <Saizan> what's FDList?
15:07:35 <dons> and gee. there's a Tiff aprser
15:07:50 <thoughtpolice> http://hackage.haskell.org/packages/archive/liboleg/0.1.0.2/doc/html/Data-FDList.html
15:08:15 <thoughtpolice> it's cute that's a zipper as well. might come very much in useful :)
15:08:22 <FunctorSalad> jeffwheeler: hmm nevermind my suggestion, in this case even OverlappingInstances won't help since you'd have duplicate right hand sides for the "Show a => MyShow a" and the default "MyShow a"
15:08:51 <FunctorSalad> (duplicate right hand sides are illegal even with IncoherentInstances...)
15:09:03 <jeffwheeler> IncoherentInstances, hehe?
15:09:14 <forkingYourIO> Cheshire: you mean I should what, create an interpreter that can create or parse functions? (i am doing a little functinal language interpreter so i have to do that then if that is what you mean)
15:09:43 <FunctorSalad> jeffwheeler: it lifts the restriction that among the overlaps, there always must be a most specific one
15:10:24 <Cheshire> what is the language you interpret?
15:16:31 <forkingYourIO> Cheshire: i dont know, it is just something im trying to build, maybe  a basic lambda calculus interpreter
15:16:46 <forkingYourIO> but how do you men that function is a datastructure?
15:17:05 <Cheshire> Haskell gives a nice setting to use semantics to interpret lambda calculus
15:18:26 <drguildo> does haskell have an arc function?
15:18:40 <lament> that does what?
15:19:10 <blackh> @seen sioraiocht
15:19:10 <lambdabot> sioraiocht is in #haskell. I last heard sioraiocht speak 9h 47m 44s ago.
15:19:17 <blackh> @seen dcoutts
15:19:17 <lambdabot> I saw dcoutts leaving #haskell, #haskell-overflow, #haskell-soc, #gentoo-haskell, #darcs and #ghc 8h 45m 55s ago, and .
15:19:31 <drguildo> the trig function
15:19:32 <monochrom> arcsin is called asin.
15:19:50 <monochrom> "It's asin!"
15:19:52 <drguildo> monochrom: thanks
15:20:30 <drguildo> the exercises in chapter 3 of real world haskell have more to do with trigonometry than haskell :-/
15:21:01 <travisbrady> does one need to know how to code in an applicative (not sure if my language here is correct) style to really know Haskell?
15:21:04 <monochrom> http://en.wikipedia.org/wiki/It%27s_a_Sin
15:21:19 <Cheshire> :p
15:39:29 <McManiaC> are there any solutions for the real world haskell books exercises? in the first few lessons ppl used to write their solutions as a comment but if you go beyond chapter 7,8,9 theres not one single comment =(
15:40:19 <forkingYourIO> hmm can I or-patternmatch? like if i have a data rbt = r | b | l; and i want to do the same for r or b on some operations?
15:40:31 <paczesiowa> forkingYourIO: no
15:40:34 <Cheshire> use RBT = R | B | L
15:40:36 <jre2> is lhs2tex capable of adding colored syntax highlighting?
15:42:34 <paczesiowa> jre2: Hscolour can highlight syntax in html and can output tex, so maybe it can do both
15:43:31 <jre2> I don't think lhs2tex and hscolour get along though
15:47:02 <FunctorSalad> forkingYourIO: "f x = case x of ...; R -> f B; ..."
15:47:15 <FunctorSalad> maybe ugly don't know ;)
15:47:19 <oshyshko> How to change this code http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2074 so it will not open a new connection on every with_db call, but only once, stil I will not need to pass connection as a function argument. In an OOP that connection would be a class field. How to do it elegantly in Haskell?
15:54:40 <newsham> oshyshko: you can use an IORef to cache the database handle
15:57:55 <johnbs> I've created an infinite loop in a parsec parser, and I can't find it :(
15:58:11 <johnbs> (well, I think it's in the parser... it might be somewhere else)
15:58:12 <newsham> alternately you could use a closure to capture the connection handle.
16:02:05 <monochrom> Identify all cycles in your parser. Make sure that every cycle eats up some tokens.
16:02:32 <scwizard> what's the book you people recommend for learning haskell?
16:02:43 <monochrom> Example: p = ... <|> p <|> ...  this will be problematic.
16:02:49 <travisbrady> scwizard: Real World haskell
16:03:06 <newsham> scwiz: what's your background?  what are your goals?
16:03:17 <travisbrady> scwizard: is pretty nice too http://learnyouahaskell.com/
16:03:27 <scwizard> travisbrady: does it have exercises?
16:03:30 <monochrom> Example: p = bracket (char '(') p (char ')')  this will not be problematic because you eat '(' at least.
16:04:46 <scwizard> travisbrady: no exercises :(
16:04:52 <travisbrady> scwizard: yeah http://book.realworldhaskell.org/read/functional-programming.html
16:05:22 <scwizard> travisbrady: will check that out
16:05:53 <scwizard> newsham: just a (comp sci) student who is interested in programming languages
16:07:07 <newsham> programming in haskell by graham hutton is a good quick intro,  rwh has lots more details on practical programming tasks and libs.
16:07:39 <scwizard> so having spent a good deal of time with C++ and such, I'm trying to open my mind
16:08:05 <gweiqi> read sicp
16:08:16 <scwizard> gweiqi: what does that stand for?
16:08:32 <gweiqi> structure and interpretation of computer programs
16:08:49 <travisbrady> scwizard: Haskell is awesome, give it a shot you'll get hooked
16:08:50 <scwizard> k
16:09:09 <gweiqi> it's not haskell, but it's a good first step, if you're beginning to open your mind
16:09:09 <scwizard> travisbrady: I've heard people say the same thing about Java
16:09:17 <m3ga> is there any tool that will check for unsafe uses of head?
16:09:21 <ddarius> Bird's "Introduction to Functional Programming Using Haskell" is probably a good choice if you are interested in theory.
16:09:33 <ddarius> @google sicp
16:09:34 <lambdabot> http://mitpress.mit.edu/sicp/
16:09:34 <lambdabot> Title: Welcome to the SICP Web Site
16:09:38 <travisbrady> scwizard: i haven't had that same experience
16:09:41 <ddarius> SICP stands on its own.
16:10:01 <scwizard> travisbrady: actually come to think of it neither have I
16:10:07 <newsham> scwizard: so the soln is obvious.  learn haskell and java.  :)
16:10:24 <scwizard> travisbrady: you do have a point, the Haskell people are stronger fans of their language
16:10:27 <inimino> there is a group working through SICP in ##SICP, if anyone wants to join us
16:10:35 <scwizard> newsham: I already know more than enough java for my taste
16:10:49 <ddarius> Saying that about Java makes any sense at all only when talking to someone using C and maybe C++ or assembly.
16:10:51 <newsham> scwizard: then your mind has already been opened ;-)
16:11:12 <scwizard> newsham: no, it hasn't been opened to the deep wonders of functional programming
16:11:14 <StoneToad> ddarius: I think only assembly on that list
16:11:21 <scwizard> hell I didn't even know what lazy evaluation was until like a month or two ago
16:11:24 <newsham> scwizard: but you've learned th eimportant lesson java has to teach.
16:11:32 <scwizard> newsham: stay the fuck away?
16:11:37 <newsham> more or less :)
16:11:40 * ddarius actually first heard about call-by-need/name in assembly actually.
16:11:46 <ddarius> +actually
16:15:02 <oshyshko> newsham: I need connection to appear inside "with_db" in some non-explicit way. If I will pass IORef as an argument it will not be good <- to much "noise" code
16:15:32 <newsham> oshyshko: you can make the IORef global by initializing it with unsafePerformIO
16:15:40 <newsham> if you're willing to use that level of force
16:16:02 <oshyshko> newsham: is there a more natural way to do it, may be monads?
16:16:24 <newsham> you could use a state monad to hide the state passing.
16:16:43 <newsham> (keep in mind that OO programming actually *does* pass the this pointer around)
16:17:11 * oshyshko is gone reading about state monads
16:17:32 <newsham> if you're using it with IO, you'll probably want StateT, which is slightly advanced.
16:18:01 <newsham> (the unsafePerformIO/newIORef hack isnt that bad if you dont mind globals in your code)
16:18:04 <travisbrady> oshyshko: that's a problem i've hit too when using SQLite, i haven't bitten the bullet yet and used State
16:18:47 <oshyshko> travisbrady: wow, that's exactly my case. Can you show me your code?
16:18:56 <pejo> m3ga, catch can find lots of stuff, but it doesn't handle all ghc extnesions.
16:19:14 <m3ga> pejo: thanks
16:19:27 <travisbrady> oshyshko: i just wrote a little cgi app http://github.com/travisbrady/sayit/blob/123fac4b57d2ccd1eb64c431626da54b4e4b7421/Main.hs running here: http://70.87.222.160:3001/sayit
16:20:09 <travisbrady> i haven't done anything about it though, i'm just connecting every time since this is just hobby code
16:20:34 <newsham> conRef :: IORef (Maybe Connection); conRef = unsafePerformIO (newIORef Nothing);  initConnection = do { con <- connectSqlite...; writeIORef conRef con };  withDb f = do { con <- readIORef conRef; r <- f conn; ... }
16:20:38 <newsham> for example
16:21:03 * scwizard is reading over the first chapter
16:21:10 <scwizard> why did they decide to put pi but not e in prelude?
16:21:17 <oshyshko> travisbrady: well, you do open+close your database everytime you call a function
16:21:26 <scwizard> I mean e is no more or less significant than pi
16:21:33 <StoneToad> scwizard: because you need it for radian conversion?
16:21:45 <newsham> > exp 1
16:21:47 <lambdabot>   2.718281828459045
16:21:50 <StoneToad> or that
16:22:05 <newsham> it has e^x, why define e?
16:22:07 <oshyshko> travisbrady: that's what I want to get rid of, so all functions will share the connection
16:22:08 <travisbrady> oshyshko: right, i said i haven't solved the problem yet or used State
16:22:21 <scwizard> newsham: for the same reason it has pi because it has radian conversion
16:22:23 <oshyshko> travisbrady: ah.
16:22:45 <scwizard> newsham: I don't see what arguments could be used for including pi, that couldn't also be used for including e
16:22:59 <Twey> @quote emission
16:22:59 <lambdabot> jamesbritt says: Writing Haskell, for example, involves an hour of meditation followed by the emission of a fold expression.
16:23:07 <StoneToad> lol
16:23:40 <SamB> scwizard: what do you call it ?
16:23:54 <ddarius> scwizard: You almost always use e in e^x.  pi has slightly more varied usage.
16:23:54 <StoneToad> scwizard: but newsham showed that it does include e...
16:24:09 <scwizard> ddarius: I guess you have a point
16:25:16 <ddarius> Also, (exp 1) is still pretty clear, whereas 4*atan 1 is less clear (and less efficient)
16:25:55 <newsham> ddarius: isnt that how pi is defined ?
16:26:08 <SamB> @src pi
16:26:08 <lambdabot> Source not found. Are you on drugs?
16:26:10 <pumpkin_> in CReal it is
16:26:19 <ddarius> newsham: That's its default definition perhaps.  But it can be (and is) overridden.
16:26:27 <pumpkin_> oh actually
16:26:30 <SamB> @src Floating
16:26:31 <lambdabot> class  (Fractional a) => Floating a  where
16:26:31 <lambdabot>     pi                                                      :: a
16:26:31 <lambdabot>     exp, log, sqrt, sin, cos, tan                           :: a -> a
16:26:31 <lambdabot>     asin, acos, atan, sinh, cosh, tanh, asinh, acosh, atanh :: a -> a
16:26:31 <lambdabot>     (**), logBase                                           :: a -> a -> a
16:26:37 <pumpkin_> that's not how CReal defines it
16:27:10 <pumpkin_> > 16 * atan (1/5) - 4 * atan (1/239)
16:27:12 <lambdabot>   3.1415926535897936
16:27:35 <forkingYourIO> hmm how does an empty redblacktree look? Black leaf?
16:28:41 <ddarius> forkingYourIO: Watch these some time: http://ocw.mit.edu/OcwWeb/Electrical-Engineering-and-Computer-Science/6-046JFall-2005/VideoLectures/index.htm
16:30:15 <newsham> fyIO: http://www.eecs.usma.edu/webs/people/okasaki/jfp99.ps has a good discussion of RBTs in haskell
16:31:11 <newsham> "empty nodes are considered black." -pg2
16:34:25 <forkingYourIO> yes thta i know
16:34:41 <forkingYourIO> but i was thinking i first make red than make it black again if root for example
16:35:09 <forkingYourIO> so the easiest way sinc i dont use pointers must be to pass around an extra paramter which is the current level of the tree or something like that
16:35:09 <newsham> in okasaki's representation the leaf doesnt even store any color information, so you cant make it red or make it black
16:35:15 <newsham> its just assumed to be black implicitely
16:44:41 <sw17ch> k, dumb question, but is there a memcpy somewher in Foreign im' not seeing?
16:44:48 <sw17ch> or do i need to fall bck on the ByteString binding?
16:44:49 <forkingYourIO> yes
16:44:50 <forkingYourIO> data RedBlackTree a = Black a (RedBlackTree a) (RedBlackTree a)
16:44:50 <forkingYourIO>                     | Red   a (RedBlackTree a) (RedBlackTree a)
16:44:50 <forkingYourIO>                     | Leaf
16:46:06 <ddarius> sw17ch: There's a copyBytes
16:46:13 <sw17ch> @index copyBtes
16:46:13 <lambdabot> bzzt
16:46:15 <sw17ch> @index copyBytes
16:46:15 <lambdabot> Foreign.Marshal.Utils, Foreign.Marshal, Foreign
16:46:19 <sw17ch> ah, that'd do it
16:46:51 <newsham> fyIO: if you define a data type containing Red and Black you can simplify your data definition (as per okasaki paper)
16:47:06 <ddarius> Or you could just use Bool ...
16:47:07 <sw17ch> ddarius, thanks
16:48:13 <scwizard> reading these introductions to haskell, it seems non trivial to see what kind of big O your program has, this is bothering me
16:48:46 <scwizard> is it just due to me not having experience, or does it remain kind of tricky throughout?
16:49:03 <newsham> scwizard: yah, lazy evaluation makes it harder to reason about memory and cpu.  you can sometimes just pretend its strict and calculate stuff based on that assumption
16:49:21 <ddarius> scwizard: Um, it's non-trivial to see what kind of big O your program has in general, but yes, lazy evaluation makes it trickier.
16:49:23 <TomMD> scwizard: Its experience - I've not had an issue determining O().  Now memory use - that is tricky.
16:50:28 <scwizard> memory use is something you optimize after you write the program though, unlike efficiency which should be built into the program design
16:50:57 <TomMD> Not necessarily.
16:51:04 <scwizard> well to a degree
16:51:06 <ddarius> Memory use is definitely something that should not be optimized after the fact any more (or less) than speed.
16:51:26 <scwizard> what I mean is, it's the same deal, about how you only care about the biggest term I'd imagine
16:52:02 <TomMD> Some of my more annoying issues have been memory.
16:53:07 <scwizard> as in memory not growing linearly or just high numbers in general
16:54:27 <scwizard> well by "not growing linearly" I mean it growing by a faster term than it should
16:54:57 <scwizard> for instance a function that swaps two lists using O(n) memory instead of O(1) memory
16:55:16 <scwizard> s/swaps two lists/swaps n elements of two lists/
16:55:27 <TomMD> scwizard: typically one wants O(1) memory, sometimes I expect O(1) but get O(n) due to a misunderstanding or lack of strictness.
16:55:49 <scwizard> TomMD: so was the example about swapping elements pretty on?
16:55:59 <newsham> something you might not be used to in strict language, haskell sometimes builds up big chain of thunks when you ask it to compute something
16:56:02 <pumpkin_> having a high memory (space) complexity is a lot more painful than a high time complexity, in general
16:56:45 <scwizard> pumpkin_: ya, and what I'm hearing here, is not only is it hard to control your memory complexity, but it's hard to even detect it
16:56:54 <pumpkin_> I wouldn't say that
16:57:05 <scwizard> that's reassuring
16:57:17 <pumpkin_> I think it's quite common for people new to the language to have memory run out of control (it happened for me a lot)
16:57:22 <pumpkin_> but it happens less as you go on
16:57:28 <ddarius> scwizard: If you blindly treat Haskell as a strict language, you will have surprising memory leaks.
16:57:29 <TomMD> Detection is easy: "My system is thrashing... why?"  "Oh, kswap is going nuts... why?"  "oh... damn."
16:57:44 <scwizard> ddarius: I'll keep that in mind
16:58:03 <scwizard> TomMD: I meant detection through reading the code
16:58:20 <TomMD> Right - not always trivial but it does get easier.
16:58:28 <scwizard> obviously disruptive bugs can be detected, but one of C's failures is that it's difficult to detect bugs while reading over the code
16:58:30 <monochrom> "your program will thrash" "why?" "by induction"
17:00:14 <newsham> mono: the base case does not swap, but swapping n does imply swapping n+1.
17:00:26 <newsham> what do I conclude?
17:01:43 <mmorrow> johnbs: one thing that i've used (due to lack of a better idea and wanting to be done with it) with ReadP parsers that've looped is to insert a bunch of Debug.Trace.traces at function top-levels
17:01:56 <sioraiocht> blackh1: ?
17:01:59 <mmorrow> um, responding to scrollback...
17:02:23 <monochrom> Hmm, base case does not swap. Then the whole thing will not swap.
17:02:30 <mmorrow> hmm
17:02:39 <blackh1> sioraiocht: I was going to ask you about Data.Text but I found it on code.haskell.org.  I am going to use it in a new version of the hexpat package (a binding for expat XML parser).
17:02:58 <mmorrow> > Debug.Trace.trace "omg" 42
17:02:59 <lambdabot>   /tmp/6695743743075854364:70:40: Not in scope: `Debug.Trace.trace'
17:03:26 <sioraiocht> blackh1: excellent! please let me know how it goes.  if you have performance metrics, please let me know!
17:04:40 <blackh> sioraiocht: The hexpat package is all about speed, so I'll do some benchmarks at some point. Do you have conversion to/from UTF-8? I couldn't spot it.
17:04:56 <sioraiocht> blackh: yes, it's in there...
17:05:20 <sioraiocht> the library has been changed a bit by bos, but it should have "encode" or "decode" in the name
17:06:04 <blackh> Found it - thanks.
17:11:52 <bremner> is there a more idiomatic way of dropping the last element of a list than  (reverse . tail . reverse )
17:12:02 <Cale> init
17:12:09 <Cale> > init [1..10]
17:12:11 <lambdabot>   [1,2,3,4,5,6,7,8,9]
17:12:24 <Cale> bremner: But, try to avoid doing it so much.
17:12:29 <Cale> bremner: (if possible)
17:12:50 <Cale> init and last are necessarily expensive operations
17:12:51 <bremner> Cale: cool. O(length of list) I suppose
17:12:53 <Cale> yeah
17:13:12 <bremner> just postprocessing, so only once.
17:13:15 <Cale> Well, O(min(length of list, the amount of the list you look at))
17:13:25 <Cale> > init [1..]
17:13:27 <lambdabot>   [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28...
17:13:54 <bremner> got it.  Is there something like a deque in Haskell?
17:14:01 <Cale> You could use Data.Sequence
17:14:13 <Cale> which internally uses a structure called a finger tree
17:14:52 <Cale> It can split at any point and concatenate in time proportional to the logarithm of the smaller of the two sequences
17:15:11 <Cale> and it can access both ends in constant time
17:15:29 <bremner> ahh, sounds a bit like van Emde Bose (sp?) trees
17:16:33 <Cale> Finger trees are a very beautifully generic structure. They're parametrised by an arbitrary monoid, and other specialisations include fast priority queues, and iirc, space partitioning trees.
17:16:43 <Cale> Oh, interval trees, at least.
17:17:30 <pumpkin_> interval trees are fun
17:21:58 <forkingYourIO> scwizard: i thought the same in the beginning, now i find it clearer. it is much easier to track execution, verify all cases, big O analysis etc.
17:22:32 <forkingYourIO> liek said ^^ memory use is harder but that  dotn know to well anyhow
17:23:14 <forkingYourIO> or well it is not that hard
17:23:44 <forkingYourIO> but i had soem programs woosh up to eat all my memory but generally some friendly haskell-soul will point out to you how to fix it
17:24:52 <forkingYourIO> man you watched heroes? just finished it
17:25:15 <forkingYourIO> 4th season it is getting exciting again, though not as good as the first
17:25:35 <forkingYourIO> anyway im back tomy red black trees and insertion seems harder thna i first thought
17:25:59 <forkingYourIO> i need grandparent, parent and uncle, it just seems liek a lot of p-matching to cover every case
17:26:48 <FunctorSalad> say you are building a graph-like structure... you might as well dispense with vertex IDs and store the whole vertex inside the edge, since it will be shared anyway (hence not waste time or space), right?
17:27:08 <FunctorSalad> (s/building/designing/)
17:27:48 <FunctorSalad> assuming vertices have an appropriate Eq instance
17:28:23 <edwardk> FunctorSalad: due to sharing in a lazy setting?
17:29:24 <FunctorSalad> edwardk: I mean something like "let vertex1 = expensiveCalculation; ... in Graph [vertex1,vertex2] [Edge vertex1 vertex2]"
17:29:41 <edwardk> sure
17:30:01 <FunctorSalad> then the calculation will only be run once and the result only stored once, even if the vertex1 is used in both the nodes list and in the edge I think
17:30:11 <edwardk> sure
17:30:14 <FunctorSalad> ok :)
17:30:29 <edwardk> i was agreeing with you originally ;)
17:30:44 <FunctorSalad> most libs seem to use integer node id's, but they seem slightly artificial
17:30:55 <forkingYourIO> http://people.ksp.sk/~kuko/bak/index.html <- that one drops elements when they are equal, but a BST can have several elements of the same value right?
17:31:02 <edwardk> known ord instance, easy to fit into an array,e tc.
17:31:37 <edwardk> i did find myself having to use data.graph the other day though
17:32:01 <edwardk> and since those nodes are using 'Int's anyways, it does seem kinda pointless
17:32:08 <edwardk> there is a box involved anyways =)
17:32:53 <FunctorSalad> hmm... Ord can be implemented but for serializing you'd surely want to make IDs
17:33:28 <FunctorSalad> not sure what you mean by "using Ints anyway"?
17:33:37 <edwardk> i suppose any Ix would work for the Vertex notion
17:33:52 <edwardk> Int as in not Int#, its boxed ;)
17:33:53 <FunctorSalad> I'm suggesting to hide any IDs from the user :)
17:33:58 <forkingYourIO> hmm rather than patternamtching something giant it seems i should pass mroe args around to keep track of grandparent and uncle?
17:33:58 <FunctorSalad> ah
17:33:59 <edwardk> yeah
17:35:15 <edwardk> forkingYourIO: depends really, what are you doing? in general matching a bunch of args is cheap either way
17:35:45 <edwardk> i'm just skimming Data.Graph because it is the rep most recently on my brain
17:36:22 <edwardk> its hard to give up the Table rep though, easy to ask a node for its successors, etc.
17:38:05 <forkingYourIO> how is the data implemented? like how does it do this amazing "algebra". its like a custom language inside haskell.
17:38:23 <forkingYourIO> edwardk: red black tree
17:38:27 <FunctorSalad> as in array of successor lists? ok, wasn't thinking of that (I was thinking more of data structure with cross-references in general, not really graphs)
17:38:51 <newsham> fyIO: implementation specific.
17:38:52 <edwardk> data is kind of the secret sauce, there are a ton of tricks its acquired over the years.
17:39:04 <FunctorSalad> :)
17:39:35 <newsham> fyIO: here's one approach (not necessarily indicative).  http://www.st.cs.ru.nl/papers/2006/janj2006-TFP06-EfficientInterpretation.pdf
17:39:44 <edwardk> fyio: if you want to see how you _can_ implement data in a functional setting, take a look at http://people.cs.uu.nl/johanj/MSc/jwroorda/, which develops a let and case construct for a more general setting
17:40:35 <newsham> edwardk: heh, I like the program's banner.
17:41:04 <edwardk> if you really want to dig deep you can go into the papers on the spineless tagless g-machine, but i think thats a lot lower level than you want to go =)
17:41:42 <FunctorSalad> that sounds like some sort of villain ;)
17:41:46 <thomashartman> hey can someone help me understand implicit params? I have some code that uses em, I read the ghc guide but I still feel a blank.
17:41:48 <forkingYourIO> what is Nat in general? Natural?
17:41:58 <thomashartman> Is there a tutorial that breaks it down better somewhere?
17:42:06 <edwardk> thomashartman: yes, they are easy, they are pure evil. done. you now understand them ;)
17:42:10 <thomashartman> Why do you use them? Where are they helpful? What's the big diea?
17:42:17 <edwardk> oh wait. _pure_ evil is linear implicit params. ;)
17:42:54 <thomashartman> are they, like, borrowed from another paradigm?
17:43:20 <edwardk> forkingYourIO: Nat is usually used for natural numbers or natural transformation. the former among most programmers, the latter among the few that really like category theory.
17:43:20 <FunctorSalad> thomashartman: hmm coq uses them all the time FWIW
17:43:50 <FunctorSalad> for example, id is of type "forall A:Type, A -> A" so A is implicit to prevent annoyance
17:44:13 <newsham> fyIO: did you look at the red-black tree paper I URLd?  they use simple haskell patterns to distinguish the various cases without having any sort of grandparent/uncle/etc
17:44:21 <edwardk> do you mean the ? params in haskell or the { } params in coq or agda?
17:44:29 <newsham> its really quite an elegant presentation.  I highly recommend it
17:44:39 <thomashartman> edwardk: if you're asking me, i mean the ? params in haskell
17:44:42 <FunctorSalad> edwardk: didn't know implicit params means something else in haskell :)
17:45:03 <edwardk> thomashartman: in haskell they were intended as a way to plumb configuration info down deep into your code
17:45:22 <edwardk> they are in general full of fail ;)
17:45:47 * edwardk doesn't hold any strong opinions on the topic or anything though =)
17:45:54 <newsham> :)
17:45:56 <thomashartman> edwardk: yeah this is pretty unpleasant.
17:46:31 <thomashartman> edwark: the docu doesn't mention anything about configuaration that I see.
17:46:59 <edwardk> the linear ones are even harder to debug because they just start splitting on you and you can't safely eta reduce, etc.
17:47:13 <mmorrow> thomashartman: this is the one use of them i've seen that i was like "oh, nice": http://www.cs.chalmers.se/~rjmh/Globals.ps
17:48:01 <thomashartman> the best example is something that enables global variables? but... I don't want global variables.
17:48:29 <mmorrow> thomashartman: they're not actually giving you global global variables :)
17:48:36 <thomashartman> i guess global variables are usualy configuration info when they are being used right, so at least that makes sense
17:48:51 <thomashartman> mmorrow: what are they giving you?
17:48:53 * bremner does not have access to them, so they cannot really be called global
17:49:46 <edwardk> hrmm. does no-implicit-prelude change the definition of Splittable that gets loaded?
17:49:46 <mmorrow> the punchline of that paper is that the implicit params as globals turns out to be a lot faster than using a  unsafePerformIO (newIORef blah) global
17:50:08 <mmorrow> like, by seconds faster
17:50:12 <mmorrow> iirc
17:50:15 <edwardk> i wonder if i could abuse it for my evil comonadic obsessions
17:50:48 * mmorrow wrings his hands "excellent, excccelent"
17:50:58 <thomashartman> still pretty confused but at least I have more motivating examples now.
17:51:01 <thomashartman> thx
17:51:06 <mmorrow> np
17:51:33 <FunctorSalad> edwardk: btw, I ended up serializing nodes to safe identifiers essentialy by showing them and encoding the string in base32 ;)
17:51:49 <FunctorSalad> I *think* it's injective
17:51:56 <edwardk> FunctorSalad: *twitch*. ;)
17:52:14 <mmorrow> thomashartman: all they really do is let you "let ?foo = ..." in some enclosing scope (no matter how much higher up) of another function which eventually uses ?foo, without having to explicitly pass the ?foo all the way down to that function
17:52:15 <edwardk> FunctorSalad: sok, i wound up making TypeRep into an instance of Ord by sorting on its Show representation ;)
17:53:06 <mmorrow> thomashartman: and they're fast because they're only passed to the function(s) that actually use them, rather than being handed down through the possibly arbitrary many functions down to the one(s) that uses it
17:53:48 <mmorrow> edwardk: augustss made a typehash pkg on hackage, i've been meaning to try it out
17:53:55 <edwardk> woo
17:54:06 <mmorrow> (he uses md5 on the TypeRep tree someway)
17:54:13 <edwardk> perfect!
17:54:33 <seydar> howdy, y'all
17:54:47 <mmorrow> edwardk: yeah, it looks like it could be interesting for serialization or something
17:55:02 <mmorrow> or, typesafe serialization
17:55:11 <edwardk> i'm abusing the typerep stuff in a strongly typed datalog i cobbled together for test purposes.
17:55:23 <mmorrow> ah, cool. yeah i saw that paste
17:55:24 <edwardk> so i can use this for a more efficient existential database
17:55:28 <seydar> I have a data thing `Add String String`, but I would like it to be `Add Int Int`. I have string representations of the numbers atm, and am not sure how to get the strings to be Ints safely
17:55:58 <Zao> seydar: Try and parse them both, fail if failing.
17:56:25 <mmorrow> edwardk: i came across some paper a while ago that used datalog as a query language for a database of hoogle-meets-sql-db-of-TH-reify-Info-meets-etags
17:56:38 <mmorrow> it was pretty cool
17:56:43 * mmorrow tries to find it
17:56:51 <Spark> was that the title
17:57:28 <mmorrow> edwardk: here's the proj webpage and a link to the paper http://progtools.comlab.ox.ac.uk/projects/codequest
17:57:39 <mmorrow> Spark: (@datalog thing?)
17:57:58 <FunctorSalad> seydar: safe as in catching parse errors? you could use the "safe" package's readMaybe
17:57:59 <edwardk> mmorrow: hrmm. i'm just using it in the guts of a type system. i probably don't need the pure datalog i put together but i wanted it to think through the corners of the system
17:58:34 <FunctorSalad> seydar: err, "readMay"
17:58:41 <edwardk> i was thinking about going a step farther with the abuse of the type system and seeing if i could make rules into newtypes ;)
17:58:46 <mmorrow> edwardk: cool, i don't really know datalog/prolog myself, but i'm vaguely familiar with them conceptually
17:58:57 <seydar> FunctorSalad: safe as in not having Add (IO Int) (IO Int) -- I'd rather have IO Add Int Int
17:59:30 <edwardk> newtype MMR x = MMR (Mortal x :- Man x) -- then unification works like Datalog and you can avoid explicit guards! ;)
17:59:49 <mmorrow> oh, cool i see i think
17:59:56 <FunctorSalad> seydar: IO just for 'catch'? with readMay you can catch the error purely
18:00:14 <FunctorSalad> (readMay :: Read a => String -> Maybe a)
18:00:30 <FunctorSalad> maybe there is some equivalent in the standard lib but I wouldn't know it
18:00:56 <seydar> tell me if i'm doing something wrong - my plan was to do `Add (read s) (read s2)` to get the Int values
18:01:00 <edwardk> right now i've got two versions, one i did first which just works traditionally as a parser/interpreter and the TypeRep based version. the latter is much better for calling from haskell, but a mostly type level version would be interesting
18:01:03 <seydar> but obviously this will not work (right?)
18:01:53 <FunctorSalad> seydar: right, "read" will fail by throwing an error
18:02:10 <seydar> well, that's not what i meant by safe
18:02:24 <seydar> by safe i meant not having Add (IO Int) (IO Int)
18:02:42 <seydar> because that would require me to write my own monad, and I am NOT even close to that good yet
18:03:16 <FunctorSalad> I don't see where you are getting the IO? because you're using "catch"?
18:03:31 <FunctorSalad> "read" itself is not in IO
18:04:09 <seydar> better, more general question: how do i get "5" to be 5
18:04:40 <edwardk> seydar the answer is you don't. you're thinking about the problem a bit sideways ;)
18:05:02 <FunctorSalad> but either way, you can go from "Add (IO Int) (IO Int)" to "IO (Add Int Int)" with a function like this: f (Add x y) = liftM2 Add x y
18:05:10 <edwardk> you can 'move it outward' using the do sugar. You can wind up with IO (Add Int Int)
18:05:25 <seydar> edwardk: what's the do sugar?
18:06:20 <chessguy> @hoogle result
18:06:20 <lambdabot> Test.QuickCheck data Result
18:06:20 <lambdabot> Test.QuickCheck Result :: Maybe Bool -> [String] -> [String] -> Result
18:06:20 <lambdabot> Data.Typeable funResultTy :: TypeRep -> TypeRep -> Maybe TypeRep
18:06:39 <edwardk> seydar: do sugar is just a generic phrase for the do keyword in haskell, which lets you write monadic code a little more conveniently.
18:07:38 <edwardk> seydar: when you have Add (IO Int) (IO Int) you have a container of type Add, that contains two different actions you can do, each of which when they are performed will yield an integer, but which haven't been asked to happen yet.
18:08:18 <seydar> k
18:08:23 <edwardk> you can't just 'get rid of' the IO, because the IO has to happen to get you your integers presuming you actually want the answers to those computations
18:08:40 <thomashartman> I see a serious problem with implicit parameters, that if you paste what ghci tells you as the type of a function into the code, this could change the meaning of the program.
18:08:44 <thomashartman> I do that all the tmie.
18:08:47 * mmorrow links to this here so that when he loses the link he can just search the haskell logs http://cryp.to/blockio/fast-io.html
18:09:06 <thomashartman> (from the ghc docs)
18:09:07 <edwardk> but what you can do, is figure out the order you want those side effects to happen in, and box everything up in another IO action that when executed will perform both of those computations, and wrap the answer up in an Add. the type of the result would be IO (Add Int Int)
18:09:36 <seydar> edwardk: does that mean only converting my strings to ints when they are finally needed?
18:09:40 <edwardk> you have to tell it which order you want though, do you want to evaluate the first argument's side effects first? the second? what if you had a list of potentially side effecting operations
18:10:17 <blackdog> is it normal behaviour for "./Setup build" to rebuild everything?
18:10:46 <newsham> liftM2 f a b = do { x<-a; y<-b; return f x y; };  liftM2' f a b = do { y<-b; x<-a; return f x y; }
18:11:29 <seydar> edwardk: gaaaaah i need a tutorial for this my brain is exploding
18:11:33 <edwardk> imperative languages tend to implicitly just evaluate function arguments, sometimes left to right, sometimes in undefined order before calling the function, but haskell is lazy, so the io side effects are separated explicitly because evaluation doesn't happen until you actually look at the value,
18:11:49 <edwardk> @google All About Monads
18:11:50 <lambdabot> http://www.haskell.org/all_about_monads/html/
18:11:51 <lambdabot> Title: All About Monads
18:11:55 <seydar> thank you!
18:11:57 <seydar> bbiab
18:11:59 * seydar fades
18:12:02 <Zao> edwardk: In C++ the order is undefined, in C# it's left-to-right.
18:12:22 <edwardk> zao: yeah =)
18:13:04 <forkingYourIO> edwardk: in proofs liek on Coq, is it the natural number?
18:13:08 <forkingYourIO> (generally)
18:13:15 <edwardk> i++ + ++i; there be dragons ;)
18:13:24 <edwardk> forkingYourIO: Natural number usually yeah
18:13:42 <newsham> I said "master, in what order are the arguments evaluated?".  The master frowned and said "your thoughts are impure."
18:13:54 <forkingYourIO> http://www.st.cs.ru.nl/papers/2006/janj2006-TFP06-EfficientInterpretation.pdf
18:14:01 <forkingYourIO> ^is tha tthe url you meant?
18:14:30 <edwardk> newsham: and i agreed with the master right up until the realities of memory pressure and space leaks made his abstraction leak, and the master was enlightened.
18:14:30 <newsham> fyIO: re red/black trees, the URL I meant is http://www.eecs.usma.edu/webs/people/okasaki/jfp99.ps
18:14:56 <newsham> edwardk: thats what you get for running your code on machines.
18:15:11 <edwardk> newsham: dijkstra would have loved you ;)
18:15:22 <newsham> i think its the other way around.
18:15:29 <edwardk> hah
18:15:59 <edwardk> well, you may feel free to express your emotions into the present tense, he just no longer has that luxury ;)
18:16:24 <newsham> edwardk: but anyway, what i really meant is that you shouldnt be writing your side effects in a confusing way that makes the evaluation order apparent.
18:17:10 <newsham> you dont have to write f(i++, --y, ...);
18:17:20 <edwardk> true, cps transformation for everyone, then you need not care ;)
18:17:29 <newsham> or even f(i++, i++, ..) <- woulda made more sense
18:25:11 <FunctorSalad> f(effectfulFunction(x),y) seems less contrived though
18:29:37 <m3ga> is there an environment variable I can set so that runghc uses -Wall?
18:29:52 <FunctorSalad> should I put testing/example stuff into the "extra-source-files:" cabal field for hackage?
18:29:53 <seydar> edwardk: while i was walking my dog, i was reminded of a phrase said by someone else in this channel: whenever you see IO X, know that it could've been done in a do block
18:30:09 <seydar> so i'm going to attack this by keeping it in a do block, thus making my life magical
18:30:43 <edwardk> seydar: thats not a bad plan
18:30:44 <pumpkin> omg it's seydar :P
18:31:09 <newsham> I thought you were going to say "what happens in IO stays in IO"
18:32:34 <ImInYourMonad> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2080#a2080 <- so that cant be simplified?
18:33:00 <Gracenotes> I reject your RealWorld and substitute my own
18:33:06 <FunctorSalad> another question, if I have my internal modules export everything, but put them into "other-modules:", will internal functions be inlined aggressively as if they weren't exported?
18:33:34 <pumpkin> no
18:33:42 <FunctorSalad> :-(
18:33:47 <FunctorSalad> ;)
18:34:45 <seydar> pumpkin: how big of a haskell head are you? like, UBER haskell head, or CS8 haskell head?
18:35:13 <pumpkin> seydar: never took CS 8 :) I only started three months ago, cause my gf was taking CS 8
18:35:33 <pumpkin> I did 18 when it was scheme
18:35:37 <FunctorSalad> CS8?!
18:35:46 <seydar> pumpkin: is your office in sudikoff?
18:35:53 <pumpkin> yeah, but I'm never in it
18:36:07 <seydar> where are you?
18:36:13 <pumpkin> in the library right now
18:36:15 <pumpkin> I move around a lot :)
18:36:18 <newsham> inyourmonad: if our red/black were parameters you could simplify.
18:36:19 <pumpkin> try to avoid being caught
18:37:34 <Gracenotes> by gf? ..
18:37:34 <seydar> pumpkin: we should go code something sometime
18:37:49 <pumpkin> Gracenotes: ?
18:37:50 <seydar> he means girlfriend
18:38:09 <pumpkin> seydar: sure, but I'm not sure what something would be :)
18:38:09 <newsham> inyour: like how about this?  http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2080#a2081
18:38:28 <seydar> pumpkin: whatever, let's just chill in sudi and geek out.
18:38:36 <seydar> who's your gf?
18:38:37 <pumpkin> fair nuff :P
18:39:01 <pumpkin> an 09, doubt you know her
18:39:02 <newsham> oops, botched it.  http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2080#a2083
18:39:03 <ImInYourMonad> http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2082#a2082 <- it seems a bit dumb if i cant simplify those functions by merging the Red and Black ones since they do the same thing
18:39:41 <newsham> inyourmonad: thats why I suggested having the color be a parameter
18:39:46 <newsham> about an hour ago
18:40:09 <newsham> also if you read the paper I mentioned you'd see that as well
18:40:13 <ImInYourMonad> newsham: how do you mean parameters(I know parameter, but i dont understand how to use it here)?
18:40:17 <seydar> pumpkin: you'd be surprised
18:40:19 <chessguy> conal continues to amaze me....
18:40:32 <newsham> inyourmonad: http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2080#a2083
18:40:34 <pumpkin> chessguy: how so?
18:40:41 <newsham> chessguy: you're not alone.
18:40:49 <pumpkin> seydar: maybe I would :)
18:40:55 <chessguy> i just finally started to get where he's going with his semantic editor combinators.
18:40:56 <Ringo48> has anybody else had a problem with the barcode example from chapter 12 of "Real World Haskell"?
18:40:58 <seydar> pumpkin: name, please!
18:41:24 <Ringo48> Google turned up this, but no explanation: http://groups.google.com/group/real-world-haskell-book-club/browse_thread/thread/52a993406a8b8e22/7f55226ec7c33ddd?lnk=raot
18:41:47 <pumpkin> seydar: her blitz nick is hln
18:41:52 <newsham> ringo: i found that chapter to be a bit harder to follow, used some unintroduced concepts and didnt motivate some of the design decisions.
18:42:03 <newsham> one of the rougher chapters in the book overall
18:42:10 <Ringo48> I get an incorrect answer completely different than the two people in that group
18:42:46 <newsham> oh, I didnt try to run the code.
18:43:27 <Ringo48> well, it's valid code, and compiles fine
18:43:37 <Ringo48> just doesn't give the correct result :-/
18:44:11 <newsham> have you tried to analyze it in more detail to see where it might be going wrong?
18:44:35 <seydar> pumpkin that was scary fast
18:44:42 <ImInYourMonad> yeah i was messing with having color like that when i had uncles and stuff but now i think i see how it should be done
18:44:43 <pumpkin> seydar: I get gmail notifications :P
18:45:01 <Ringo48> well, it looks like it tries to find a bunch of candidate solutions, and picks the first one
18:45:06 <seydar> oh shoot! The plan was that i'd surprise you
18:45:14 <seydar> sorry, gonna have to defriend you
18:45:31 <pumpkin> lol
18:46:39 <newsham> ringo: fwiw, there's a lot of theory behind signal analysis and the approach they took in the book isnt the normal way you'd approach the problem.  their approach isn't as robust in the presence of noise as it could be.
18:46:40 <seydar> i don't know if i did that thought because my fb is in finnish, so i'm just hitting random links
18:46:53 <pumpkin> maybe you should switch it back
18:47:37 <newsham> its decent as an example of ow to program something in haskell, but not really the best design for the problem
18:48:13 <seydar> sorry man, i no longer speak english
18:48:35 <pumpkin> ah okay
18:49:19 <seydar> what's your grad project on?
18:50:04 <pumpkin> working on machine learning mostly for now
18:50:42 <edwardk> do you think anyone would cry if infix{l|r} definitions had to come before the actual operators were used in a haskell-alike?
18:51:16 <pumpkin> I'll cry myself to sleep every night
18:51:18 <pumpkin> if you do that
18:51:34 <edwardk> pumpkin: ok, any one other than pumpkin? =)
18:52:22 <seydar> edwardk: can you explain what the means for the unenlightened
18:52:26 <edwardk> i always thought the late determination of precedence was one of the craziest thing about the haskell parser
18:52:38 <gnuvince_> In the new Simons paper, they use a symbol when describing the semantics of seq, _|_.  What does that symbol mean?
18:52:54 <liyang> Bum.
18:52:57 <pumpkin> lol
18:53:04 <pumpkin> bottom
18:53:05 <pumpkin> butt
18:53:12 <wli> Bottom. It's the minimal element of a lattice. \bot in TeX.
18:53:16 <edwardk> seydar: i have a toy language kinda like haskell. i never got around to implementing the infixl and infixr keywords which are what haskell uses to give infix operators precedence, i.e. * binding more tightly than + is done based on the precedences they assign using those keywords
18:53:29 <wli> undefined in Haskell does the thing.
18:54:08 <pumpkin> or fix id
18:54:39 <liyang> or let x = x in x
18:54:44 <sjanssen> gnuvince_: undefined, error "foo", or non-termination
18:54:48 * jeffwheelerPhone never thought of the fix one
18:55:07 <pumpkin> fix is such a funky function
18:55:09 <jeffwheelerPhone> > fix id
18:55:11 <lambdabot>   * Exception: stack overflow
18:56:12 <Spark> Œªf.(Œªx.f(xx))(Œªx.f(xx))
18:56:56 <pumpkin> seydar: it'd be nice to have another, more "advanced" haskell course here
18:57:01 <liyang> :t fix id :: Integer
18:57:04 <lambdabot> Integer
18:57:14 <liyang> :t fix id :: Bool
18:57:15 <lambdabot> Bool
18:57:33 <liyang> :t fix id :: IO ()
18:57:34 <lambdabot> IO ()
18:57:37 <Spark> > fix id 4
18:57:38 <lambdabot>   * Exception: stack overflow
18:57:41 <Spark> duh
18:57:53 <pumpkin> > fix const 4
18:57:54 <lambdabot>       Occurs check: cannot construct the infinite type: a = b -> a
18:57:54 <lambdabot>      Proba...
18:57:56 <edwardk> > fix $ const "What's wrong with it?"
18:57:57 <pumpkin> boo :)
18:57:58 <lambdabot>   "What's wrong with it?"
18:58:08 <pumpkin> I'm doing it wrong
18:58:10 <pumpkin> maybe http://is.gd/Gf7 ?
18:58:11 <pumpkin> style
18:58:20 <Spark> what does const do
18:58:34 <jeffwheelerPhone> @src const
18:58:34 <lambdabot> const x _ = x
18:58:35 <liyang> const a b = a
18:58:42 <Spark> ah
18:59:08 <edwardk> > fix ("this terrible echo " ++)
18:59:10 <lambdabot>   "this terrible echo this terrible echo this terrible echo this terrible ech...
18:59:22 <pumpkin> hah
18:59:26 <Spark> that's just a demonstration of lazy semantics thing
18:59:27 <pumpkin> you forgot the text $
18:59:27 <Spark> *then
18:59:50 <Spark> > const 42 (fix id)
18:59:51 <lambdabot>   42
19:00:00 <pumpkin> alright, going home, ciao :)
19:00:52 <liyang> fix (\f@(_:t) -> 0:1:zipWith (+) f t)
19:01:04 <liyang> > fix (\f@(_:t) -> 0:1:zipWith (+) f t)
19:01:19 <lambdabot>   thread killed
19:01:30 <liyang> meh'
19:01:48 <liyang> > take 256 $ fix (\f@(_:t) -> 0:1:zipWith (+) f t)
19:02:03 <lambdabot>   thread killed
19:02:13 <liyang> wat.
19:02:22 <Saizan> > fix (\f@(~(_:t)) -> 0:1:zipWith (+) f t)
19:02:24 <lambdabot>   [0,1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,1597,2584,4181,6765,10946...
19:02:49 <Saizan> pattern matching is strict by default
19:04:11 <liyang> I'm sure I didn't need that before...
19:04:36 * gwern sighs. no interesting haskell stuff today
19:04:45 <liyang> (also, a space between @ and ~ will suffice.)
19:04:51 <seydar> can I use strings in a case ... of thing?
19:04:57 <Cale> seydar: yes
19:04:58 <sjanssen> seydar: yes
19:05:08 <seydar> k
19:05:10 <gwern> don't case strings have to be desugared?
19:05:13 <Cale> no
19:05:16 <seydar> then i'm doing something else wrong
19:05:26 <Cale> You cannot however pattern match against ++
19:05:32 <Cale> If that's what you're trying :)
19:05:44 <wli> > unfoldr (Just . second recip . properFraction) (pi :: Double)
19:05:45 <lambdabot>   [3,7,15,1,292,1,1,1,2,1,3,1,14,3,3,23,1,1,7,4,35,1,1,1,2,3,3,3,3,1,1,14,6,4...
19:05:55 <edwardk> seydar: keep in mind that "foo":_ is very different than 'f':'o':'o':_
19:06:14 <gwern> edwardk: the former is [String] and the later String ?
19:06:19 <edwardk> aye
19:06:47 <wli> If you want to pattern match against ++ try Prolog or similar.
19:07:15 <edwardk> yeah its rather clean to do so in dialects like mercury
19:07:22 <MyCatVerbs> wli: I never quite could make my mind up whether Prolog's notation for pattern matching on lists was surpremely ugly or surpremely clever.
19:07:49 <Cale> Everything up to and including the 14 in that expansion is correct. The 3 after it is wrong, and should be 2.
19:07:52 <MyCatVerbs> wli: I'm thinking perhaps both; while it comes in very, very handy, it's still annoyingly non-orthogonal.
19:08:13 <seydar> can someone take a look at this: http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2084#a2084
19:08:19 <seydar> i'm having issues around line 23
19:08:22 <Cale> (in that CF expansion of pi)
19:08:31 <seydar> i and i2 are both strings in that
19:08:36 <wli> I'm pretty sure you don't get syntax for appends, but just have to append etc.
19:08:40 <seydar> WAIT
19:08:42 <seydar> nobody look
19:08:44 <seydar> i'm really dumb
19:08:54 <Cale> hehe
19:09:03 <MyCatVerbs> seydar: you've written "add":something, which is of type [String]. You want ('a':'d':'d':something). :)
19:09:24 <wli> Cale: Floating point h0rkage. I tried and failed to convert generalized continued fraction expansions to simple/regular continued fraction expansions.
19:09:45 <Cale> > unfoldr (Just . second recip . properFraction) (pi :: CReal)
19:09:57 <MyCatVerbs> Er, probably the other way around. You want parseCode to be of type [String] -> ..., not to make it all damn ugly.
19:10:00 <lambdabot>   thread killed
19:10:03 <seydar> MyCatVerbs: yea, that's what i realized
19:10:09 <wli> Cale: That'll take a while.
19:10:27 <seydar> fork monger!
19:10:42 <MyCatVerbs> seydar: the or just apply "words" to the input to get the String -> Opcode version. :)
19:10:51 <MyCatVerbs> s/the or/or/
19:10:52 <Cale> also... seems to produce negative elements?!
19:11:15 <Cale> > take 10 . unfoldr (Just . second recip . properFraction) $ (pi :: CReal)
19:11:17 <lambdabot>   [3,7,16,-294,3,-4,5,-15,-3,2]
19:11:47 <wli> The CReal instances are probably strange.
19:12:03 <seydar> MyCatVerbs: yes BUT... does words include an MUA?
19:12:19 * seydar changes parseCode to words
19:12:20 <Cale> ÂÖ®„Åè„ÄÇ„ÄÇ„ÄÇ
19:12:56 <seydar> oh no, i can't quite. I need to get in into the special data thingy
19:13:05 <MyCatVerbs> seydar: MUA?
19:13:10 <wli> Cale: I wrote something that expanded elements of Q(n^(1/2)) into infinite continued fractions correctly using that idiom so it does DTRT.
19:13:22 <Cale> Yeah, it looks correct.
19:13:33 <Cale> I agree it must be a problem with CReal.
19:13:56 <Cale> For something which was supposed to be proved correct, CReal has a lot of bugs ;)
19:14:01 <TomMD> I'm about to upload the new package 'network-data'.  It has {UDP, TCP, and IP} header data types, checksum routines, classes, pretty printing, and parsec definitions.  Any other requests?
19:14:11 <wli> Not bugs, limitations.
19:14:26 <sjanssen> TomMD: pony?
19:14:27 <Cale> wli: Well, it did have a bug in the trig functions a while back
19:14:28 <TomMD> I'll hopefully add a new berkeley socket like API on top.
19:14:41 <TomMD> sjanssen: I could add a dep on the pony package - would that make you happy?
19:14:42 <MyCatVerbs> TomMD: can I put ByteStrings into packets?
19:14:47 <wli> The instances used with the stock typeclasses are stubs that just spew garbage in a bunch of cases.
19:14:48 <Cale> wli: Where they were discontinuous and would produce a value of the wrong sign...
19:15:19 <TomMD> MyCatVerbs: No, not yet.  You can define a Packet data type and the binary instance can (put header >> putLazyByteString payload)
19:15:28 <TomMD> After fixing up the header minorly.
19:15:32 <TomMD> I'll get to that though.
19:15:38 <wli> I'm in favor of dumping the stock typeclasses and doing some monadic asm-ish stuff for fancier number types.
19:15:39 <MyCatVerbs> TomMD: also, how about Foreign.C.CStrings? :)
19:16:05 <TomMD> Now you're just getting greedy.
19:16:35 <MyCatVerbs> TomMD: I only ask because those seem like the most convenient things to use.
19:16:54 <TomMD> You'd really use CStrings?
19:17:04 <MyCatVerbs> TomMD: well, less CString and more (forall a. (Ptr a,Int)) but yeah.
19:17:06 <seydar> @src words
19:17:07 <lambdabot> words s = case dropWhile isSpace s of
19:17:07 <lambdabot>     "" -> []
19:17:07 <lambdabot>     s' -> w : words s'' where (w, s'') = break isSpace s'
19:17:30 <TomMD> MyCatVerbs: I'll consider those, but certainly ByteStrings.
19:17:32 <seydar> ok that's too complex for me
19:17:34 <MyCatVerbs> CString being just a pair consisting of a Ptr Word8 and an Int.
19:17:47 <TomMD> Yep, got it.
19:18:44 <MyCatVerbs> TomMD: well, current ByteString implementation is based on ForeignPtrs, so I was thinking that to have a way to make use of (forall a. Ptr a, Int) gets you halfway to having the ability to use ByteStrings anyway.
19:19:22 <TomMD> MyCatVerbs: Not sure how to make one function handle both without a new typeclass
19:19:37 <TomMD> Do we have a de facto 'packed string' class?
19:20:11 <Plouj> So, I figured out http://book.realworldhaskell.org/read/functional-programming.html#Fold.hs:myFoldl after a couple of weeks of staring at it. What do I do now? Should I write code like that?
19:20:34 <MyCatVerbs> TomMD: meh. I'd just write several functions. Things don't absolutely *have* to be overloaded. Arguably it's not even all that good an idea unless you have at least, say, three instances.
19:20:59 <TomMD> Perhaps not.
19:21:23 <MyCatVerbs> Plouj: probably not. It's a really cool exercise, but it's not actually all that useful.
19:22:14 <Plouj> MyCatVerbs: it kinds of makes me scared of reading "real" haskell code, written by other "clever" people
19:22:19 <mmorrow> Plouj: awesome. :)
19:22:20 <MyCatVerbs> Plouj: you want to always aim for clarity when you're coding, rather than cleverness. So no.
19:22:37 <Plouj> good point
19:22:50 <MyCatVerbs> Do not worry. Nobody writes "real" Haskell code that looks like that. At least, nobody who likes actually getting things done.
19:22:56 <pumpkin> looks like what?
19:23:04 <MyCatVerbs> pumpkin: http://book.realworldhaskell.org/read/functional-programming.html#Fold.hs:myFoldl
19:23:27 <wli> MyCatVerbs: Looking.
19:23:50 <pumpkin> MyCatVerbs: you mean the expanded foldl?
19:23:53 <mmorrow> Plouj: at the same time, don't let peoples' opinions cramp your style ;)
19:24:08 <mmorrow> (not talking specifically towards you MyCatVerbs :)
19:24:18 <Plouj> right
19:24:23 <MyCatVerbs> pumpkin: like foldl in terms of foldr.
19:24:40 <pumpkin> oh okay, I think my browser messed up the anchor
19:24:49 <MyCatVerbs> mmorrow: disappointing. I get cranky if nobody accuses me of talking utter crap for more'n about a week straight.
19:24:50 <pumpkin> or whatever the # is supposed to be called
19:25:14 <MyCatVerbs> pumpkin: that *is* what the name of the identifier after the # is supposed to be called. You win: one goat.
19:25:21 <pumpkin> yay!
19:25:29 * pumpkin does unspeakable things to the goat
19:25:31 <inimino> actually it's a fragment identifier
19:25:38 <bremner> goats have side effects
19:25:38 <Saizan> realizing that the 'b' in foldr :: (a -> b -> b) -> b -> [a] -> b can be a function type can make you write very nice code.
19:26:01 <mmorrow> MyCatVerbs: well in that case ...
19:26:12 <pumpkin> inimino: :(
19:26:14 <Plouj> Saizan: heh, realizing that both a and b can be functions makes me scared!
19:26:29 <Plouj> but I like the idea of writing map in terms of foldr
19:26:34 <Plouj> that's easy to understand
19:26:52 <MyCatVerbs> foldr (.) id [(+2),(*2),(1/)] $ 4
19:26:56 <pumpkin> someone should write a @pl like module that will write any existing function in terms of functions you specify, if possible
19:27:03 * MyCatVerbs facepalms.
19:27:23 <mmorrow> pumpkin: that's an idea
19:27:24 <Saizan> yeah, map is in the standard foo [] = z; foo (x:xs) = .. foo xs .. form
19:27:27 <MyCatVerbs> pumpkin: yeah, and then we can make all our Turing machines halt.
19:27:29 <mmorrow> i wonder how feasible that is
19:27:46 <seydar> @pl (+) foldr
19:27:47 <lambdabot> (foldr +)
19:27:47 <pumpkin> MyCatVerbs: lol, I don't say it's always possible
19:27:54 <pumpkin> but some basic transformations should help
19:28:04 <f4hy> pumpkin: help how?
19:28:18 <pumpkin> we can write out a few identities ourselves
19:28:32 <pumpkin> and then try substituting them in until we get what we want, or give up after a certain number of failures
19:28:32 <MyCatVerbs> seydar: beware, @pl will emit things that don't make sense if things that don't type are fed into it.
19:28:37 <MyCatVerbs> @pl (\a -> \b -> foo a >> bar b)
19:28:38 <lambdabot> (. bar) . (>>) . foo
19:28:46 <mmorrow> take n ==> fst\ . splitAt n
19:28:52 <Plouj> ok, thanksf or ideas
19:28:56 <MyCatVerbs> @unpl (. bar) . (>>) . foo . join
19:28:57 <lambdabot> (\ d o -> (foo (d >>= \ k -> k)) >> (bar o))
19:29:26 <MyCatVerbs> @unpl join ((. bar) . (>>) . foo)
19:29:26 <lambdabot> ((\ f l -> (foo f) >> (bar l)) >>= \ b -> b)
19:29:33 <mmorrow> f $ x ===> f `id` x
19:29:37 <pumpkin> MyCatVerbs: you got lambdabot to write food!
19:29:55 <seydar> MyCatVerbs: what does @pl do?
19:29:58 <MyCatVerbs> pumpkin: I can't say it was entirely intentional.
19:30:00 <pumpkin> it's pointless
19:30:06 <mmorrow> @pl \x -> x
19:30:06 <lambdabot> id
19:30:10 <mmorrow> @pl \x -> f x
19:30:10 <lambdabot> f
19:30:16 <MyCatVerbs> seydar: takes a definition of a function and outputs the points-free equivalent.
19:30:18 <mmorrow> @pl \x y -> g (f x y)
19:30:18 <lambdabot> (g .) . f
19:30:22 <mmorrow> @pl \x y z -> g (f x y z)
19:30:23 <lambdabot> ((g .) .) . f
19:30:27 <mmorrow> @pl \x y z a -> g (f x y z a)
19:30:27 <lambdabot> (((g .) .) .) . f
19:30:30 <mmorrow> ...
19:30:33 <pumpkin> seydar: it basically removes all the explicit mentions of arguments from a function (not necessarily in the best way, but it succeeds)
19:30:38 <seydar> MyCatVerbs: what does points free mean?
19:30:46 <seydar> ah
19:30:48 <seydar> gotcha
19:31:06 <seydar> @pl \x y -> g d h t
19:31:07 <lambdabot> const (const (g d h t))
19:31:08 <MyCatVerbs> seydar: \a -> a, the 'a' here is a 'point'. @pl produces functions that don't ever mention their arguments by name.
19:31:15 <pumpkin> @pl f g x y = g y x
19:31:15 <lambdabot> f = flip
19:31:20 <seydar> so it's like
19:31:44 <seydar> <thick accent> "my name must never be spoken" </thick accent>
19:31:50 <seydar> voldemort!
19:31:51 <pumpkin> lol
19:32:02 <seydar> @voldemort f g x y = g y x
19:32:03 <lambdabot> Unknown command, try @list
19:32:05 <mmorrow> @pl \f g (a,b) (c,d) -> (f a c, g a d)
19:32:05 <pumpkin> The Argument That Must Not Be Named
19:32:06 <lambdabot> flip flip snd . (ap .) . flip flip fst . (((.) . (const .)) .) . flip flip snd . ((flip . (ap .)) .) . flip flip fst . ((flip . ((.) .)) .) . liftM2 (flip . (((.) . (,)) .))
19:32:28 <sw17ch> @let voldemort = undefined
19:32:30 <lambdabot>  Defined.
19:32:30 <mmorrow> @pl (\x -> x x) (\x -> x x)
19:32:34 <lambdabot> ap id id (ap id id)
19:32:34 <lambdabot> optimization suspended, use @pl-resume to continue.
19:32:35 <sw17ch> > voldemort * 2
19:32:37 <lambdabot>   * Exception: Prelude.undefined
19:32:40 <sw17ch> D:
19:33:04 <pumpkin> you paid the price for naming He Who Must Not Be Named
19:33:10 <mmorrow> > fix error
19:33:12 <lambdabot>   "* Exception: * Exception: * Exception: * Exception: * Exception: * Excepti...
19:35:58 <gwern> suppose I have an ADT Inline, and I have a arg which is type [Inline]; and suppose one of Inline's constructors is Str String; how could I take [Str "foo", Str "bar"] and get "foo bar"? is there some wondrous general way of doing that?
19:36:24 <seydar> so... how do i convert my nice lil' "12" to a big fat 12
19:36:36 <gwern> > read "12" :: Int
19:36:40 <lambdabot>   12
19:36:47 <mmorrow> gwern: write the analogy of maybe (==> "inline"), then
19:36:54 <gwern> > read "12.0" :: Double
19:36:55 <lambdabot>   12.0
19:36:59 <gwern> > read "12" :: Double
19:37:00 <mmorrow> concatMap (inline .... id ....)
19:37:01 <lambdabot>   12.0
19:37:12 <gwern> > read "12.0" :: Int
19:37:14 <lambdabot>   * Exception: Prelude.read: no parse
19:37:35 <sileni> LynuxDevil: haha
19:37:37 <Saizan> or use Data.Data
19:37:38 <gwern> hm
19:38:06 <mmorrow> data Foo a b c = A a | B b c | C a b c
19:38:17 <pumpkin> Data.Data feels like cycle Data, somehow
19:38:20 <mmorrow> foo f _ _ (A a) = f a
19:38:26 <pumpkin> I wonder if Data.Data.Data is the same thing
19:38:31 <mmorrow> foo _ g _ (B b c) = g b c
19:38:40 <mmorrow> foo _ _ h (C a b c) = h a b c
19:38:56 <pumpkin> I mean
19:38:59 <pumpkin> repeat Data :)
19:39:29 <gwern> actually, pandoc seems to parse odd, so I guess it doesn't matter whether I can flatten the list or not. hm
19:39:36 <gwern> better raise it in the new gitit ml
19:39:39 <f4hy> I need to unsubscribe to the haskell reddit, half my front page is haskell now
19:39:53 <pumpkin> f4hy: that's a good thing!
19:40:03 <gwern> f4hy: the proper solution is to vote up everything, and thereby hide them
19:40:21 <dolio> Or just click hide.
19:40:26 <gwern> dolio: shh!
19:40:33 <f4hy> I dont have voted up things set to be hidden
19:40:39 <f4hy> but voted down things are....
19:41:05 <pumpkin> oh no, you're one of those people who votes down all the haskell subreddit stories :(
19:41:12 <f4hy> not yet
19:41:50 <gwern> I really don't understand why one wouldn't hide upvote things. you're done with it, you've read and commented on it
19:41:53 <gwern> so hide it!
19:41:54 * Saizan realized that if something is interesting he won't need to go to reddit to see it
19:41:59 <gwern> dunno why one has to request that
19:42:26 <MyCatVerbs> Saizan: what methods of finding interesting crap do you recommend?
19:42:52 <pumpkin> having other people read reddit and post it on IRC
19:42:54 <gwern> MyCatVerbs: Saizan apparently adocates the mindless sessile approach: sit there and let the screen float past
19:42:56 <pumpkin> if it's good enough
19:43:09 <Saizan> pumpkin: exactly :)
19:43:26 <Saizan> or -cafe, or planet.haskell or ltu
19:43:38 <pumpkin> that must be an approach I learned in italy
19:43:51 <pumpkin> "la furbizia"
19:44:07 <pumpkin> :)
19:44:43 <gwern> the furbie approach?
19:44:51 <pumpkin> pretty much
19:45:12 <gwern> didn't realize furbies made it to italy
19:45:13 <pumpkin> I'd translate it rougly as "sly", without a negative connotation
19:46:16 <gwern> clever? cunning?
19:46:23 <pumpkin> maybe
19:46:29 <MyCatVerbs> Saizan: ah yes, that's a pretty g... well.
19:46:44 <pumpkin> cunning without the easy rude pun
19:46:57 <MyCatVerbs> Saizan: dump reddit,digg,etc and pick up LtU sounds like a good idea, but LtU hurts my brain. :)
19:47:08 <seydar> pumpkin: do you think tim the sysadmin should join us?
19:47:09 <sw17ch> any one want to kick around a FFI problem with me?
19:47:10 <MyCatVerbs> Saizan: as for -cafe, the traffic level is kind of intense. :)
19:47:17 <pumpkin> join us?
19:47:28 <f4hy> I wish my phone number was prime
19:47:31 <seydar> pumpkin: light up with various hard drugs in #haskell
19:47:33 <pumpkin> MyCatVerbs: I find a gmail filter does a good job
19:47:41 <pumpkin> seydar: sure, why not
19:48:44 <seydar> is the guy who wrote learn you a haskell here?
19:48:57 <sw17ch> @seen BONUS
19:48:57 <lambdabot> BONUS is in #haskell. I don't know when BONUS last spoke.
19:49:05 <gwern> lb just joined
19:49:08 <gwern> @quote anal
19:49:09 <lambdabot> qwe1234 says: the lisp folks have purposefully made lisp so that static analysis is impossible.
19:49:14 <gwern> @quote anal
19:49:14 <lambdabot> Alanna says: Saying that Java is nice because it works on all OS's is like saying that anal sex is nice because it works on all genders.
19:49:18 <gwern> @quote anal
19:49:18 <lambdabot> lilac says: * lilac looks forward to Cale explaining category theory by analogy to Call of Duty
19:49:22 <f4hy> seydar: I am reading learn you a haskell as well
19:49:26 * gwern is a little disturbed
19:49:29 <pumpkin> @quote strictanal
19:49:29 <lambdabot> ddarius says: "pumpkin: Known for StrictAnal"
19:49:41 <sw17ch> @quote funptr
19:49:41 <lambdabot> No quotes match. :(
19:49:45 <gwern> ok, so lb didn't lose too much then
19:50:06 <pumpkin> strict anal is the best kind
19:50:17 <pumpkin> * -> *
19:50:22 <sw17ch> any strategies for porting a C union to haskell?
19:50:22 * wli refers the channel to Dijkstra on reasoning by analogy.
19:50:35 <gwern> O
19:50:45 <seydar> i wrote on a history test once that dead guys don't matter
19:50:47 <gwern> wli: we're not medeival!
19:51:06 <seydar> i'm inclined to say that thus dijkstra doesn't matter, but according to his own quote, he's immortal
19:51:20 <Saizan> sw17ch: an haskell union type?
19:51:27 <sw17ch> Saizan, C union type
19:51:28 <gwern> somewhere, Niels Bohr walks among us - immortal and unobserved
19:51:42 <sw17ch> or, is there some haskell equivelant
19:51:59 <kmeyer> gwern: haha
19:52:04 <Saizan> sw17ch: yeah, what's the problem in using an haskell union type like data Foo = A .. | B .. | C .. ?
19:52:31 <sw17ch> Saizan, umm, in this case it's that the same data has different representations
19:52:57 <sw17ch> union { uint32_t a[4]; uint16_t b[8]; uint8_t c[16]; }
19:53:01 <pumpkin> seydar: you're not on twitter => u phail, sry
19:53:38 <sw17ch> Saizan, i think i could make that work, except that the memory in this case seems to have legitimate uses...
19:53:45 * wli tries to think of the next step to take beyond http://moonpatio.com/fastcgi/hpaste.fcgi/view?id=1722#a1723
19:53:48 <sw17ch> mapping different types to the same memory
19:54:04 <pumpkin> sw17ch: unsafeCoerce?
19:54:06 <Saizan> sw17ch: ah, i see
19:54:10 <seydar> pumpkin: false. treedog669
19:54:15 <sw17ch> pumpkin, eww... gross
19:54:22 <pumpkin> sw17ch: it's not inherently unsafe
19:54:26 <seydar> i have two identities on the internet, seydar and treedog669
19:54:35 <sw17ch> pumpkin, man 3 dnet
19:54:38 <sw17ch> check out struct addr
19:54:45 <sw17ch> and the __addr_u field
19:55:46 <wli> The only thing that really changes is the arity of the operation.
19:56:10 <wli> There's a lot of boilerplate to kill off there.
19:56:25 <wli> It also doesn't handle multiple destinations of a single operation.
19:56:38 <pumpkin> sw17ch: alright
19:56:52 <pumpkin> just use Ptrs and castPtr maybe?
19:57:06 <pumpkin> sw17ch: I'm pretty sure you're going to need some form of "nasty hack" like that
19:57:10 <MyCatVerbs> gwern: slowest update "schedule" ever.
19:57:16 <sw17ch> pumpkin, yeah, i'm just trying to pick the nasty hack :)
19:57:31 <pumpkin> I'd do the Ptr
19:57:34 <MyCatVerbs> gwern: but Copenhagen Interpretation Fantasy Camp sounds like a blast anyway.
19:57:44 <sw17ch> yeah, that's my plan, i just wanted to make sure a second opinion ratified my own
19:57:50 <pumpkin> probably a foreignPtr actually
19:58:05 <gwern> MyCatVerbs: I'm glad I suddenly remembered that. I'd been trying to rememebr that all evening as the example of the funniest quantum mechanics comic I'd seen
19:58:10 <sw17ch> pumpkin, ahead of you :)
19:58:15 <pumpkin> :(
19:58:22 <wli> #haskell-in-depth has died
19:58:24 <sw17ch> pumpkin, it's okay :(
19:58:30 * pumpkin feels useless
19:58:40 <pumpkin> wli: has it? it just has its ups and downs I think
19:58:42 * sw17ch invites pumpkin to help write the bindings
19:58:59 <wli> pumpkin: It's down right now.
19:59:00 * pumpkin haz 2 do wurk sry
19:59:10 <MyCatVerbs> gwern: I think it's the way it takes you all the way out into ancient Egyptian mythology and back before returning to the quantum mechanics joke in progress that really makes it.
19:59:15 <sw17ch> pumpkin, what time zone are you in?
19:59:25 <pumpkin> sw17ch: eastern US :P
19:59:42 <sw17ch> pumpkin, oh, hai!
20:03:50 <seydar> EST FTMFW
20:04:59 <pumpkin> lol, you facebooked my gf
20:05:00 <gwern> http://dresdencodak.com/cartoons/dc_022.htm <-- ah here we go
20:05:09 <seydar> have I wronged this channel somehow: http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2085#a2085
20:05:42 <seydar> pumpkin: what's her major?
20:05:48 <pumpkin> seydar: why do you ask?
20:05:51 <pumpkin> (the wronged)
20:05:55 <pumpkin> (she's a Math major)
20:06:05 <seydar> because it refuses to compile
20:06:28 <seydar> citing irreconcilable religious differences
20:06:50 <seydar> gonna be honest, i have no clue what i'm doing there. i'm shooting from the hip
20:07:00 <gwern> seydar: send it to the principal's office
20:07:05 <seydar> i'm trying to get Add "12" "37" to be Add 12 37
20:07:19 <seydar> and it's clearly not working
20:09:07 <kpreid> seydar: read is not monadic...
20:09:17 <gwern> couldn't that just be 'foo (Add x y) = Add (read x :: Int) (read y :: Int)'? (assuming Add is allowed to have int and str type args)
20:10:34 <kpreid> seydar: sample fixed line:    "add":[i, i2] -> Add (read i) (read i2)
20:11:27 <seydar> kpreid: read is... not... monadic?
20:11:31 <seydar> EXPLAIN
20:11:36 <kpreid> of course
20:11:38 <kpreid> :t read
20:11:40 <lambdabot> forall a. (Read a) => String -> a
20:11:45 <kpreid> there isn't any IO there
20:11:59 <kpreid> do not use any do-notation or return inside parseCode
20:12:11 <Gracenotes> or any state at all besides what's returned from the functions themselves :)
20:12:15 <gwern> > read "5" :: Int -- no monads!
20:12:17 <lambdabot>   5
20:12:21 <kpreid> then your code should be type-correct as far as I see it
20:12:24 * kpreid z
20:12:35 <seydar> read is... not... monadic
20:13:10 <f4hy> Hey so I just discovered that my girlfriends phone number is prime... I wrote a factoring program and tested my phone number than hers, at first I thought my code was bad... but her number is prime
20:13:37 <Gracenotes> congrats :3
20:13:53 <f4hy> Do I have to marry her or something now? I am scared
20:13:56 <wli> Try reads vs. read; the list monad comes out there.
20:14:06 <seydar> wli: what's reads do?
20:14:11 <kpreid> wli: but he doesn't want reads anyway
20:14:27 <Gracenotes> only one result is expected from the string
20:14:43 <Olathe> f4hy: Well, usually there are many factors that go into making decisions like that...
20:14:52 <FunctorSalad> sigh... haddock --debug --verbose  ... "haddock: parse error in doc string"
20:15:04 <f4hy> Olathe: well her number does not have factors
20:15:09 <seydar> so read is... not... monadic
20:15:10 <seydar> huh
20:15:17 <seydar> how does it work its magic
20:15:19 <seydar> @src read
20:15:19 <lambdabot> read s = either error id (readEither s)
20:15:29 <seydar> @src readEither
20:15:29 <lambdabot> Source not found. I can't hear you -- I'm using the scrambler.
20:15:34 <seydar> @src readEither
20:15:34 <lambdabot> Source not found. The more you drive -- the dumber you get.
20:15:36 <kpreid> seydar: it's not magic
20:15:36 <Olathe> Why would read be monadic ?
20:15:39 <seydar> @src readEither
20:15:40 <lambdabot> Source not found. Maybe if you used more than just two fingers...
20:15:42 <seydar> @src readEither
20:15:43 <lambdabot> Source not found. :(
20:15:45 <seydar> @src readEither
20:15:45 <lambdabot> Source not found. Maybe if you used more than just two fingers...
20:15:47 <seydar> @src readEither
20:15:47 <lambdabot> Source not found. BOB says:  You seem to have forgotten your passwd, enter another!
20:15:55 <seydar> Olathe: I don't know...
20:16:03 <MyCatVerbs> seydar: seriously, it's not going to do anything other than just insult you. :)
20:16:05 <seydar> ooooh, it's a C function
20:16:10 <kpreid> seydar: for example, I could write instance Read Bool where read "True" = True: read "False" = False
20:16:17 <seydar> !!!!!!!!
20:16:18 <seydar> OOOOOOOOOOOOOH
20:16:19 <Olathe> read should be pure.
20:16:22 <kpreid> that's oversimplified, but that's all you really need
20:16:25 <seydar> omg that makes soooo much sense now!
20:16:33 <seydar> wow
20:16:35 <seydar> that's awesome
20:17:07 <kpreid> seydar: your parseCode could be made part of a Read instance :)
20:17:07 <dolio> readEither is not C.
20:17:16 * kpreid z
20:17:34 <FunctorSalad> any hint for finding the culprit in haddock failure? :(
20:17:36 <Olathe> @type readEither
20:17:37 <lambdabot> Not in scope: `readEither'
20:17:44 <Olathe> Well, thank you lambdabot.
20:17:57 <seydar> ok, i'm loading my code up in ghci... it's been a while so forgive me... but i can't access any of my functions
20:18:09 <FunctorSalad> (other than manual binary search :p)
20:18:29 <wli> Binary search is O(lg(n)) so give it a shot.
20:19:07 <seydar> what do i have to do to get my functions to be accessible in GHCi?
20:19:26 <FunctorSalad> wli: yeah I actually did ;) it was an empty line inside an @ block
20:20:43 <f4hy> seydar: let
20:20:44 <chessguy> seydar:  you have them in a file?
20:20:55 <seydar> chessguy: yea
20:21:00 <f4hy> :l
20:21:06 <chessguy> seydar:  :load <filename>
20:21:13 <seydar> it says none!
20:21:18 <chessguy> and :load can be shortened to :l
20:21:22 <seydar> but it just said "modules loaded: Main"
20:21:35 <seydar> fail. now it works
20:21:55 <chessguy> yeah, you didn't define a module name at the top of your file, so it just called it Main
20:22:08 <FunctorSalad> :|
20:22:36 * chessguy ties FunctorSalad's lips into a :&
20:22:49 <FunctorSalad> :&
20:23:00 <seydar> what can i do to improve this code: http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2086#a2086
20:25:54 <chessguy> seydar:  for one thing, get rid of the ":: Int" everywhere
20:26:04 <seydar> chessguy: it beats my ass if I don't have it
20:26:11 <seydar> it says ambiguous typeness
20:26:21 <chessguy> seydar:  compiles fine here
20:27:24 <Gracenotes> :O
20:27:31 <seydar> chessguy: you're right. what else?
20:27:43 <chessguy> @hoogle [a] -> a -> [[a]]
20:27:44 <lambdabot> Data.List intersperse :: a -> [a] -> [a]
20:27:44 <lambdabot> Data.List insertBy :: (a -> a -> Ordering) -> a -> [a] -> [a]
20:27:44 <lambdabot> Data.List deleteBy :: (a -> a -> Bool) -> a -> [a] -> [a]
20:27:59 <chessguy> @hoogle a -> [a] -> [[a]]
20:27:59 <lambdabot> Data.List intersperse :: a -> [a] -> [a]
20:27:59 <lambdabot> Data.List insertBy :: (a -> a -> Ordering) -> a -> [a] -> [a]
20:27:59 <lambdabot> Data.List deleteBy :: (a -> a -> Bool) -> a -> [a] -> [a]
20:28:34 <Gracenotes> @type intercalate
20:28:35 <lambdabot> forall a. [a] -> [[a]] -> [a]
20:28:41 <Gracenotes> oh. x.x
20:28:51 <chessguy> @type splitWith
20:28:52 <lambdabot> Not in scope: `splitWith'
20:29:55 <chessguy> bah, i'd bet there's a more standard way to implement that, but  my brain is on strike for the night
20:30:01 <chessguy> reading too much conal :)
20:30:33 <seydar> kk
20:30:36 <seydar> have a great night everyone!
20:30:42 <seydar> pumpkin: stalk ya later
20:30:46 <pumpkin> night :)
20:30:46 <pumpkin> lol
20:30:54 <chessguy> heh
20:30:59 <chessguy> that was...abrupt
20:31:14 <Gracenotes> @type break
20:31:15 <pumpkin> he's a high school kid, probably his parents bugging him to go sleep
20:31:16 <lambdabot> forall a. (a -> Bool) -> [a] -> ([a], [a])
20:31:48 <sw17ch> iCanHazMagic :: CFileHeader -> IO HsBindings
20:31:58 <chessguy> err, his split function looks to just be broken, actually
20:32:26 <chessguy> *Junk> split "aaa" 'a'
20:32:26 <chessguy> ["","","",""]
20:32:55 <gwern> looks invertible; odd arg ordering
20:33:29 <chessguy> oh, i think he wants words...
20:34:03 <Gracenotes> > let split ch str = uncurry (\a b -> a:if null b then [] else split ch (tail b)) (break (==ch) str) in split 'a' "bcabcabsdjkafisiiaaa"
20:34:04 <lambdabot>   ["bc","bc","bsdjk","fisii","","",""]
20:35:03 <Gracenotes> the problem being that there are so many ways to define it. Especially regarding duplicate characters, etc... so hackage split :\
20:35:18 <Gracenotes> anyway, that was invigorating
20:35:26 <sw17ch> night all
20:37:51 <chessguy> @type getLine >>= readFile fname >>= liftM (map ?parseCode . lines)
20:37:52 <lambdabot> Not in scope: `fname'
20:38:11 <chessguy> @type getLine >>= readFile >>= liftM (map ?parseCode . lines)
20:38:12 <lambdabot>     Couldn't match expected type `Char' against inferred type `String'
20:38:12 <lambdabot>       Expected type: Char -> [a]
20:38:12 <lambdabot>       Inferred type: String -> [String]
20:41:31 <chessguy> @undo do { c <- r f; let o = m p . l $ c; ru o}
20:41:31 <lambdabot>  Parse error at "}" (column 41)
20:41:44 <chessguy> @undo do { c <- r f; let o = m p . l $ c; ru o; }
20:41:44 <lambdabot>  Parse error at ";" (column 41)
20:42:09 <jmcarthur> so when can i use haskell on this? http://www.picotux.com/ ;)
20:42:16 <yhal003>  
20:42:27 <chessguy> @undo do { c <- r f; let o = m p . l $ c in ru o}
20:42:28 <lambdabot> r f >>= \ c -> let { o = m p . l $ c} in ru o
20:42:28 <pumpkin> it's arm linux
20:42:31 <pumpkin> you already should be able to
20:42:54 <pumpkin> except there's not much memory
20:42:57 <jmcarthur> it has 8 MB of ram and 2 MB of flash memory
20:42:58 <jmcarthur> yeah
20:43:09 <pumpkin> you should come up with a picoruntime for ghc
20:43:12 <pumpkin> :)
20:43:19 <jmcarthur> oh boy
20:44:05 <jmcarthur> hmm... isn't nhc optimized for size? or am i thinking of something else?
20:45:43 <jmcarthur> looks like i'm right, although i haven't found any data showing exactly how small things can get
20:46:48 <pumpkin> it'd be an interesting exercise
20:46:55 <pumpkin> to write an -Os for haskell
20:46:58 <pumpkin> *ghc
20:50:02 <chessguy> @tell seydar http://hpaste.org/fastcgi/hpaste.fcgi/view?id=2086#a2088
20:50:02 <lambdabot> Consider it noted.
20:53:54 <chessguy> @type interact (map ?parseCode) >>= runVM
20:53:55 <lambdabot> Not in scope: `runVM'
20:54:05 <chessguy> @type interact (map ?parseCode) >>= >runVM
20:54:06 <lambdabot> parse error on input `>'
20:54:10 * chessguy sighs
20:54:16 <chessguy> @type interact (map ?parseCode) >>= ?runVM
20:54:17 <lambdabot> forall b. (?runVM::() -> IO b, ?parseCode::Char -> Char) => IO b
20:54:43 <sjanssen> jmcarthur: yes, small binaries were a goal of nhc
20:54:51 <chessguy> hm, that's not what i wanted
20:55:42 <chessguy> @src interact
20:55:42 <lambdabot> interact f = do s <- getContents; putStr (f s)
20:55:58 <pumpkin> how big is the RTS to link against?
20:56:16 <pumpkin> I guess I can just take a peek at libHSRTS or whatever it's called
20:56:54 <sjanssen> pumpkin: check the stripped binary of "Hello, world!"
20:57:10 <sjanssen> that's pretty much all RTS and just a few base functions
20:57:13 <pumpkin> does it do anything fancy? like give you a subset of the RTS if you don't need stuff?
20:57:14 <pumpkin> ah
20:57:36 <ddarius> If you are really interested in size, check out the Virgil language.  I'm not sure how many (if any) of the techniques could be applied to Haskell.  It's an interesting language on its own.
20:58:03 <pumpkin> 351k with no -O
20:58:27 <pumpkin> 347 with -O2
20:58:33 <pumpkin> probably not too meaningful :)
21:00:05 <chessguy> @type getContents >>= ?runVM . map ?parseCode . lines
21:00:06 <lambdabot> forall b b1. (?parseCode::String -> b, ?runVM::[b] -> IO b1) => IO b1
21:01:39 <chessguy> @tell seydar it would also be more idiomatic to write main as "getContents >>= runVM . map parseCode . lines" and then pipe the input from another file on the command-line. let me know if this doesn't make sense
21:01:39 <lambdabot> Consider it noted.
21:03:58 <Gracenotes> or =<< if only to maintain right-to-left flow ^.^
21:17:03 <bos31337> hi travisbrady
21:29:23 <andyjgill> The ICFP programming contest will be held on the 26th-29th June this year.
21:29:40 <travisbrady_> bos: hi bos
21:30:46 * wli wishes his brain were un-fried enough to participate.
21:32:21 <newsham> wli: there's a low barrier of entry and little commitment required.
21:32:24 <newsham> you should play along
21:32:30 <mle> andyjgill: page up yet?
21:33:09 <andyjgill> Yes, http://www.icfpcontest.org/
21:33:29 <wli> newsham: Some ability is required for meaningful participation. I can sign up, sure. When the time comes to do anything I'll just bomb the entire project, probably with zero code to submit when the smoke clears.
21:33:31 <mle> that's still showing the 2008 contest on my end
21:33:40 <mle> dns propagation timing?
21:33:54 <newsham> wli: you dont need to sign up.  and you dont need that much ability to participate.
21:34:12 <andyjgill> Its been forwarded for about 3 weeks now. What do you see, mle?
21:34:29 <andyjgill> If your on a mac, you might try clear your dns cache.
21:34:50 <wli> newsham: Trust me, I'm in deep enough trouble on this front that the ability to participate meaningfully is an extremely serious concern.
21:34:53 <ray> with www it just says "June 26-29, 2009" in giant letters
21:35:00 <ray> with no www, it goes to last year's
21:35:13 <mle> I see the old 'The Eleventh ICFP Programming Contest" etc etc.... on a mac though
21:36:01 <newsham> wli: its for fun.  just give it a whilr and if you dont enjoy it, drop it.  little committment required
21:36:23 <newsham> you can even just do it in your own time after the official contest is done
21:36:41 <andyjgill> http://www.ittc.ku.edu/icfp-contest/ is an alternative to the same site.
21:38:07 <mle> well that looks different
21:38:14 <wli> newsham: I've looked into trying to do some of the contest problems for programming practice. I'm trying to recover from a much lower level of functionality than is required to even think of what solutions would be, much less implement them.
21:38:34 <newsham> wli: oh well. :(
21:40:40 <mle> andyjgill: with a cacheflush, it works, thanks!
21:41:07 <andyjgill> I wonder how long osx keeps its entries. its be changed for weeks.
21:41:19 <mle> what was the TTL on the entry?
21:42:34 <andyjgill> TTL?
21:42:40 <mle> time-to-live
21:43:11 <mle> cache-ttl is in Theory controlled on the authoritative server
21:43:18 <mle> at least for normal dns
21:44:13 <mle> like right now the TTL is 3600 seconds (half an hour)
21:44:21 <mle> er
21:44:24 <mle> an hour!
21:44:35 <andyjgill> no idea. Tim told go-daddy to point the domain to ittc, who were ready for hosting it.
21:44:42 <newsham> icfpcontest.org.        86400   IN      SOA     ns45.domaincontrol.com. dns.jomax.net. 2008052700 28800 7200 604800 86400
21:44:48 <newsham> (the new entry's soa)
21:45:22 <newsham> its 24hrs if the old record had the same ttl
21:51:57 <scwizard> anyone planning on fixing pidigits anytime soon? http://shootout.alioth.debian.org/u32q/benchmark.php?test=pidigits&lang=all&box=1
21:52:07 <pumpkin> scwizard: it's a ghc bug
21:52:12 <pumpkin> next ghc release, it'll be all better
21:52:16 <pumpkin> and we'll own the shootout once more
21:52:35 <scwizard> sweet
21:52:41 <scwizard> when's next release?
21:52:52 <Raynes> "When it's ready."
21:53:08 <pumpkin> RC in the next couple weeks I hear
21:53:14 <pumpkin> for 6.10.2
21:53:15 <scwizard> woah, that's soon
21:53:22 <pumpkin> it's not a major release
21:54:37 <scwizard> still a nice turn around for a patch
21:55:28 <pumpkin> would you expect any less from the glorious haskell compiler?
22:16:33 <dons> scwizard: its fixed in the stable branch already.
22:16:49 <dons> let me run a benchmark for you, actually, good to check.
22:17:19 <dons> oh, i see another problem in that benchmark.
22:17:34 <dons> -optc-O3 isn't enabled without -fvia-C iirc
22:17:46 <dons> and we don't use -funbox-strict-fields weird...
22:19:06 <hydrapheetz> -fruit-roll-ups
22:19:11 <hydrapheetz> ... I'll be here all week :|
22:19:40 <amz> hey... Haskell noob here, but been programming C++ for over a decade... I was considering using Haskell for a game project (something like a simple MUD, mostly so I finally learn Haskell), but I'm worried that it might just be too insane, given that I'm pretty much forced to do OO-ish stuff for it ("player" and "mob" objects, with lots of associated variables that will be changing at every update, often only one at a time). Thoughts? :)
22:20:07 <dons> amz, check out xmonad.
22:20:15 <dons> interactive window manager, shared global state
22:20:27 <dons> amz: also, think about what fun you can have with fast cheap haskell threads :)
22:20:33 <wli> amz: I wish I had enough of a mind left to figure out how to use the database libraries or purposes such as that.
22:20:50 <amz> interesting, I'll research how xmonad does stuff
22:21:04 <ddarius> Spawn a thread for each entity!
22:21:11 <amz> I think that would be incredibly insane :)
22:21:19 <amz> not because of performance, but because of manageability
22:21:30 <ddarius> Why?  It's more OO than OO.
22:21:42 <amz> yes, but there are limits to be drawn ;)
22:21:43 <amz> though.
22:21:44 <amz> well...
22:21:57 <amz> if I'm updating all objects, I guess that's just a map application
22:22:02 <ddarius> Planning on having half a million objects?
22:22:03 <amz> which could be trivially paralelized
22:22:10 <ddarius> (all active at the same time)
22:22:21 <amz> no, just still stuck on the "update loop" mentality
22:22:23 <mle> thousands are fairly normal in that situation
22:22:50 * amz did notice that Haskell wins (and beats C++ by 20 times...) that "programming language benchmarks game" bench on thread-ring
22:22:58 <amz> but, of course, the C++ implementation uses native threads
22:23:09 <ddarius> mle: 1000s /= 100,000s
22:23:38 <mle> Hmmm.
22:24:29 <amz> huh? "It makes use of Haskell features and tools such as: QuickCheck, GHC extensions like pattern guards, monads, monad transformers, zippers,"
22:24:32 <amz> did I miss something?
22:24:39 <amz> oh
22:24:39 <amz> nm
22:24:42 <dons> ?
22:24:44 <amz> I just fail at reading comprehension
22:24:51 <amz> "extensions like" is limited to pattern guards
22:25:04 <ddarius> We should add scoping operators to English.
22:25:11 <amz> no joke
22:25:12 <amz> ;)
22:25:28 <newsham> lojban?
22:25:39 <amz> I wonder if people actually speak that.
22:25:57 <ddarius> There's quite a few crazy people here that do.
22:26:10 <amz> so, any oo-ish libs/extensions to Haskell that I should look into?
22:26:20 * amz heard good things about Scala, but Haskell just looks so much more... elegant
22:26:23 <pumpkin> I occasionally use parentheses to express precedence in english
22:26:28 <dons> amz, i'd just look at records and the State monad
22:26:57 <ddarius> I occasionally use (parentheses to obscure) precedence in English.
22:27:05 <amz> well, I don't know about the state monad, but the problem with records is, afaik, there's no syntatic sugar to construct a copy of it where a single (of many) "fields" changes?
22:27:09 <pumpkin> :)
22:27:18 <amz> or am I failing really hard?
22:27:22 <ddarius> amz: Don't try to do OO in Haskell.  It will only end in tears.
22:27:25 <newsham> like    foo {field=bar} ?
22:27:40 <amz> newsham: well, I want the other fields to remain the same
22:27:53 <newsham> so:  foo' = foo {field=bar} ?
22:27:54 <pumpkin> amz: what else would they do?
22:27:58 <amz> ddarius: I was fearing as much, but games just feel so intrinsically OOP...
22:28:08 <amz> oh
22:28:09 <amz> I see
22:28:17 <amz> now that's interesting :)
22:28:21 <wli> amz: modify (\st -> st { myField = myFunc $ myField st })
22:28:28 <pumpkin> there's no null or anything, so the other fields can't disappear
22:28:30 <newsham> when you have a hammer, everything looks like a nail.
22:28:32 <wli> (in the State monad)
22:29:07 <amz> newsham: well, to be fair, I got out of procedural programming after years in it because oop felt much more natural for games
22:29:19 <amz> but I do hope you have a point
22:29:34 <newsham> I dont write games so I dont know if my point applies or not.
22:29:38 <amz> Haskell looks so beautiful, it would be a shame to learn that it's awkward for the kind of code I write the most
22:29:54 <newsham> anyway, gotta run
22:30:09 <pumpkin> I don't think anything is intrinsically OOP, and the main benefits of OOP can be had through many more haskelly ways than OOP
22:30:49 <amz> is anyone here very familiar with a OOP language? Java, C++, Smalltalk, whatever?
22:30:56 <pumpkin> yeah
22:31:03 <ddarius> amz: Probably everyone here is.
22:31:09 <ddarius> amz: I'm familiar with all of those.
22:31:10 <amz> ok... fine, you guys win
22:31:17 <pumpkin> I at least have done significant work in c++, ruby, and java :)
22:31:19 <amz> I'll try it
22:31:37 <amz> if I can't wrap my mind around it, I'll just come back here crying like a little baby
22:31:41 <scwizard> I don't understand the benchmark game, how does one program have lower "cpu seconds" and lower memory use than another
22:31:47 <pumpkin> amz: you don't even have to leave!
22:31:48 <scwizard> and yet have higher "actual seconds" ?
22:31:52 <Cale> amz: You should ask lots of questions!
22:32:01 <pumpkin> scwizard: ?
22:32:06 <amz> scwizard: lower time at higher cpu usage
22:32:14 <dolio> Which one?
22:32:15 <pumpkin> scwizard: maybe someone else was using the CPU
22:32:19 <amz> if it takes 10 seconds at 50% CPU, then it's 5 cpu-seconds
22:32:28 <amz> (remember, all tests are done on a quad-core)
22:32:41 <scwizard> amz: ahh
22:32:48 <amz> pumpkin: don't plan to... I've actually been lurking here for a while :)
22:32:58 <Cale> (How will all the graduate students here procrastinate if there are no beginner questions to answer? :)
22:33:02 <pumpkin> amz: ah okay :) was just reacting to your "come back here" bit :)
22:33:07 <pumpkin> lol
22:33:16 * pumpkin looks guilty and leaves
22:33:29 <amz> no, I got what you meant :)
22:33:49 <scwizard> couldn't haskell do better on reverse-complement by using multithreading or something
22:33:54 <amz> I guess that I'll just get myself warmed up on Haskell by writing something pretty simple
22:33:58 <amz> like a blackjack game or something
22:34:02 <scwizard> it's completely single threaded as things stand
22:34:42 <dolio> Doesn't look like many of the entries are parallelized.
22:34:44 <amz> scwizard: well, if you manage to make it better, submit the new code
22:34:59 <amz> it's all community-driven, afaik
22:35:45 <scwizard> I guess I'll give a shot
22:35:47 <scwizard> but not to do it
22:35:57 <scwizard> to give me the motivation to learn haskell
22:36:27 <scwizard> because it's easier to learn through experience, and the only way you can get experience is by solving a problem
22:36:43 <amz> I agree
22:36:52 <amz> that's why I've been trying to find a project to learn Haskell
22:37:09 <pumpkin> http://www.reddit.com/r/haskell_proposals/ !
22:37:21 <dolio> Wow, it's got withForeignPtr in it.
22:37:25 <scwizard> well I think I've found mine, although this one is kind of steep
22:37:51 <amz> btw, anyone here familiar with Scala? If so, opinions on it?
22:37:58 <Gracenotes> "<amz> it's all community-driven, afaik" <-- that's what the corporate overlords and microsoft would have you believe! :O
22:38:03 <Gracenotes> 8at
22:38:07 <Gracenotes> *:O
22:38:20 <amz> the company I work for develops games with Java, so while Haskell might be out of question for us there, I could perhaps find some use for Scala
22:38:43 <pumpkin> *:O is an interesting face
22:38:46 <amz> Gracenotes: they don't even use Windows :(
22:38:51 <amz> which sort of butchers C++'s scores
22:39:01 <Cale> amz: Scala is much nicer than Java, at least as a language. I haven't actually used it for anything, so I'm not so sure about the practical details.
22:39:11 <amz> since Intel's and Microsoft's compilers are better, and they use gcc instead of icc for some reason
22:39:44 <dolio> They used to have ICC, I thought.
22:39:49 <amz> yeah, they did
22:39:56 <amz> and it was usually at #1
22:40:04 <pumpkin> dolio: will ghc inline something like comp in that entry automatically?
22:40:06 <dolio> They still have Intel fortran.
22:40:32 <dolio> pumpkin: Something that small it should.
22:40:50 <pumpkin> mmkay
22:41:10 <Gracenotes> ‚ÅùO
22:41:40 <dolio> They seem to have gotten rid of most of the machines, too.
22:41:59 <pumpkin> it's fun to see GHC.Ptr in a module along with Control.Arrow
22:42:21 <dolio> Oh, they still have ICC benchmarks.
22:42:25 <dolio> Just not on the main machine.
22:42:32 <pumpkin> why did they stop doing them?
22:42:34 <pumpkin> I'd be curious
22:42:39 <pumpkin> to see how it  compares to gcc
22:42:51 <dolio> Well, ICC runs on the Gentoo pentium, I guess.
22:43:17 <dolio> Ubuntu may not carry ICC.
22:44:26 <pumpkin> "He used the compiler's self-compilation speed as a measure of the compiler's quality. "
22:44:48 <Baughn> Oh dear
22:44:56 <amz> http://shootout.alioth.debian.org/gp4/benchmark.php?test=all&lang=all&lang2=gpp&box=1 <- this one has Intel, but it's on a Pentium 4...
22:45:22 <amz> where are the other old measurements?
22:46:01 <amz> ah, on the FAQ page
22:46:15 <amz> apparently that's the only one with Intel
22:46:30 <dolio> Do they still run those periodically? Or is that why they're hidden.
22:47:14 <amz> yeah, those old ones are "closed"
22:49:32 <dolio> Kind of a shame. Those have both more benchmarks and more languages.
22:49:37 <dolio> Significantly so.
22:49:55 <amz> I think that the current "game" has started recently
22:50:05 <dolio> Plus, I'm still stuck on a single-core, so I don't care about parallelism. :)
22:50:07 <amz> which is why there are few submissions
22:50:19 <amz> ouch :)
22:51:07 <dons> nah, you gotta go with multicore. single core is boring
22:51:50 <dolio> Well, I think most (all?) of the new benchmarks were in the old game. The only difference is that you get to parallelize them now.
22:52:06 <dolio> So just running all the old ones wouldn't benefit from that.
22:53:07 <cjs> Hey, what does the double-bang thingie on an item in a data structure mean? E.g., "data Foo = Foo { something :: !! Word32 }"?
22:53:19 <dons> two ? hmm. nothing.
22:53:21 <dons> a typo?
22:53:34 <dons> it'd be a cool syntax for rnf
22:53:47 <pumpkin> I think I've seen two before
22:53:56 <pumpkin> it might've been a typo there too though
22:54:07 <dolio> Yeah. Polymorphic rnf. Even better than polymorphic seq.
22:54:19 <cjs> E.g, see the data PktHdr in http://hackage.haskell.org/packages/archive/pcap/0.4.3/doc/html/Network-Pcap.html
22:54:51 <cjs> Oh, interesting. The source says, "hdrSeconds :: {-# UNPACK #-} !Word32".
22:55:11 <dolio> Haddock bug?
22:55:11 <Saizan> @remeber dolio Yeah. Polymorphic rnf. Even better than polymorphic seq.
22:55:11 <lambdabot> Good to know.
22:55:16 <pumpkin> oh yeah, I think it's what haddock does
22:55:22 <dons> dolio: you want it bad.
22:55:36 <cjs> Ok, now I understand.
22:55:39 * pumpkin inches away
22:55:55 <cjs> dons: BTW, there seem to be some typos in RWH....
22:56:17 <dolio> You can't sell a second edition without typos.
22:56:45 <cjs> Hee hee.
22:57:47 <dons> yeah, there's a dozen or two bug reports.
23:09:46 <amz> oh, yes, one more question... there are no real Haskell IDEs, are there?
23:10:14 <dolio> There's leksah. I'm not sure how much that does.
23:10:23 <dolio> Most people use vim or emacs.
23:14:16 <ManateeLazyCat> How to update statusbar string when i type something in sourceView?
23:14:33 * ManateeLazyCat pasted "Manatee.hs" at http://paste2.org/get/157983
23:14:34 <ManateeLazyCat> above is my example code.
23:14:56 <ManateeLazyCat> I don't know how to write callback to make function `updateEchoArea' work.
23:18:21 * wli is struggling with his own things and getting similar pin-dropping action.
23:21:34 <mathijs> a bit offtopic, does anyone know how to set rxvt or xterm to stop truncating non-ncurses output when resizing?
23:22:43 <mathijs> as in: open a xterm/rxvt, type "ls -l", make the window narrower, make it wider again. lines get truncated at the length of when the window was narrow
23:23:02 <wli> It's not that they have to stop truncating it, it's that whatever's drawing to the screen has to respond to SIGWINCH appropriately.
23:23:16 <andun> mathijs: rxvt-unicode (aka urxvt) does a good job on that.
23:23:25 <wli> Not that I haven't been dead wrong before.
23:23:31 <mathijs> andun: I'm using rxvt-unicode
23:24:48 <mathijs> wli: you are right about that, and all ncurses-based apps (like mc, emacs, man) resize appropriately. just plain old bash sessions get truncated. kde's "konsole" doesn't have this problem but I want to move to lighter alternatives.
23:25:06 <andun> mathijs: oh. it actually removes some lines. i have no idea :(
23:25:12 <Zao> mathijs: Have you've tried the XFCE terminal?
23:26:20 <mathijs> Zao: I have in the past around XFCE 4.0. It might be OK, but I would like to use a standalone terminal program, not depending on any desktop-libs (like kde, gnome, xfce).
23:27:32 <mathijs> I'm pretty sure urxvr should be able to handle this, but it's probably some odd-named resource.
23:27:38 <Zao> I suppose you will have to do the only right thing and write Hasterminal.
23:28:27 * wli tried and failed at some point.
23:28:41 <mathijs> Zao: that might be cool :)  especially since I use xmonad, it would feel like a haskell-desktop together ;)
23:51:40 <f4hy> Alright so I am still learning this but haskell being function does not have things like classes and object right?
23:52:13 <f4hy> The closest equivilant is types? which can be part of other typeclasses?
23:54:07 <wli> Haskell has completely different ways of thinking about things.
23:54:43 <f4hy> I have accepted that
23:55:09 <wli> Classes and objects don't really show up. Haskell has record types, but none of the elaborations on them of OO and very much doesn't center the language's modularity mechanisms around them.
23:56:17 <wli> There's basically no direct equivalent. Haskell has other things it does with types entirely besides what semi-statically-typed OO languages do with them.
23:57:17 <f4hy> Ok. That does not change that types seem kinda like objects. (if you squint)
23:57:19 <wli> One thing it does with types is to transform them. Sort of like functions between types.
23:57:39 <wli> For instance, Maybe Int
23:58:19 <wli> The type Int is transformed by the Maybe "function" that operates at the level of types.
23:59:38 <wli> Another thing it does with types is have type parameters, like length :: [t] -> Int
