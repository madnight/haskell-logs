00:00:07 <ksf> <$$> = <$> ; infixr <$$> N
00:00:14 <JoshTriplett> ksf: I'd like to avoid inventing my own magic syntax.  A{ltern,pplic}ative has quite enough magic syntax already without my adding to it.
00:00:21 <JoshTriplett> ksf: Well aware of *how* to do it. :)
00:00:34 <JoshTriplett> ksf: (And I'd probably call that <$>$ , by the way. :)
00:06:03 <JoshTriplett> Silly Parsec question: when using the "between" function, do I need to make sure that the parser in the middle doesn't match the token at the end?
00:06:12 <JoshTriplett> So, for instance: between (string "{{") (string "}}") (some anyChar)
00:06:17 <ksf> use uu, instead.
00:06:36 <ksf> try is the pain.
00:06:40 <JoshTriplett> Do I need to change (some anyChar) to (manyTill anyChar (string_ "}}" <|> eof)) ?
00:06:47 <JoshTriplett> ksf: "uu"?
00:07:01 <JoshTriplett> Oh.
00:07:11 <ksf> http://www.cs.uu.nl/wiki/bin/view/HUT/ParserCombinators
00:07:13 <JoshTriplett> Surprisingly Google-able for two vowels. :)
00:07:20 <JoshTriplett> http://hackage.haskell.org/package/uu-parsinglib-2.5.5.1 ?
00:07:35 <ksf> that's the one.
00:08:19 <ksf> http://hpaste.org/41415/webidl
00:08:30 <ksf> steal from that if you want to get started fast
00:08:51 <ksf> (but don't copy that approach to tokenising if you want a strictly correct parser)
00:09:03 * JoshTriplett has started reading the paper...
00:09:11 <ksf> (I managed to allow things like unsignedintmain(void) {}
00:09:26 <JoshTriplett> funny.
00:09:45 <ksf> I just refused to care as all I wanted to do is get an ADT for the stuff.
00:09:59 <JoshTriplett> ksf: So I take it you can't write "int intValue" then? :)
00:10:05 <ksf> another parser to have a look at is grammatical framework
00:10:15 <ksf> oh no you can.
00:10:32 <ksf> it just doesn't enforce whitespace when things are unambigious without them.
00:11:18 <ksf> when it excepts two identifiers and sees one it won't just split it at a random point, that is.
00:11:29 <ksf> *expects
00:11:35 <ddarius> ksf: Well, for C I can think of several valid parses of that if we can inject whitespace willy-nilly.
00:12:01 <JoshTriplett> Yeah, especially if you permit typedefs. :)
00:12:03 <ksf> because unsignedint is a valid identifier, yes.
00:12:19 <JoshTriplett> Sure, or for that matter unsigned intmain(void) {} :)
00:12:20 <mauke> hard mode (no typedefs): unsigned intmain(void)
00:12:27 * JoshTriplett wins. :)
00:12:32 <ksf> anyway, the point is that it parses a well-written idl spec correctly.
00:12:39 <ksf> otherwise it might just be GIGO.
00:14:53 <JoshTriplett> ksf: The "language" I want to parse has really trivial tokenizing, and doesn't care about whitespace. :)
00:14:56 <ksf> would C accept unsigned/**/int ?
00:15:01 <mauke> yes
00:15:14 <mauke> in fact, that's one way to write whitespace-free C
00:15:26 <JoshTriplett> Depends on your compiler, slightly.
00:15:33 <mauke> no
00:15:36 <JoshTriplett> Some old compilers treated that as token-pasting, IIRC>
00:15:38 <JoshTriplett> .
00:15:42 <ksf> JoshTriplett, if you want to do unparsing too, you can get a bi-di grammar with grammatical framework.
00:15:45 <mauke> those aren't C compilers
00:15:57 <JoshTriplett> mauke: Certainly not ANSI C compilers, anyway. :)
00:16:04 <JoshTriplett> mauke: I've seen a lot of ancient C code. :)
00:16:09 * ksf is still waiting for a proper excuse to use gf in a project
00:16:23 <JoshTriplett> ksf: Wow, that sounds awesome.  I think I'll go look at that, even though I don't actually need it for this project.
00:16:39 <JoshTriplett> ksf: Right now, I just need to write a parser for a mustache-like template language.
00:17:35 <ksf> the only gripe I have with it that its grammar is so ocamlish.
00:17:45 <JoshTriplett> ksf: http://hackage.haskell.org/package/gf ?
00:17:58 <ksf> yep
00:18:47 <JoshTriplett> ksf: Ow.  Having a hard time getting from the natural-language metaphors to computer languages. :)
00:18:49 <ksf> hmm they should definitely split it up into gf and gf-runtime
00:19:07 <ksf> there's a computer-language example in the tutorial, too.
00:19:13 <JoshTriplett> Trying to find that.
00:19:18 <JoshTriplett> Ah.
00:21:52 <JoshTriplett> ksf: OK, that looks really impressive, and massively overkill.
00:21:59 <JoshTriplett> But thanks for the pointer!
00:23:00 <JoshTriplett> ksf: So, for parse-only applications, you'd recommend UU over Parsec?
00:30:55 <JoshTriplett> ksf: Do I want uu-parsinglib or uulib?
00:40:17 <FunctorSalad> JoshTriplett: fmap (const ()) is in Control.Monad in ghc 7 and called 'void'
00:40:23 <FunctorSalad> @ty (() <$)
00:40:34 <FunctorSalad> @bot
00:47:04 <lpsmith> is there an efficient library function to convert integers to decimal bytestrings?   I've just been using  ByteString.pack . show
00:49:39 <ksf> JoshTriplett, parsinglib
00:49:51 <ksf> uulib is the predecessor.
00:52:18 <JoshTriplett> FunctorSalad: That's awesome, thanks.
00:58:42 * JoshTriplett debates uu-parsinglib versus attoparsec...
01:19:42 <lpsmith> Here's a fun fact:  coal production in Pennsylvania peaked during WWI,  and with the exception of a second smaller peak during WWII, has been declining ever since
01:20:14 <lpsmith> There is now less coal mined in PA on an annual basis than there was mined in 1850
01:20:39 <lpsmith> oops, that was meant for -blah
01:23:15 <dibblego> dons, do you still maintain bytestring-csv?
01:25:56 <dibblego> how can I prevent "hGetContents: invalid argument (Invalid or incomplete multibyte or wide character)" ?
01:27:17 <dancor> i usually use BS.readFile then use Codec.Binary.UTF8.String which seems to care less about errors
01:27:48 <dancor> but i'm sure it depends on what you actually want to do about invalid unicode..
01:27:56 <dibblego> good idea, let me give that a shot
01:48:59 <Saizan> dibblego: you could open the Handle in binary mode
02:00:16 <hvr> is there a way to have a lazy mapM which can handle infinite inputs? 
02:01:26 <hvr> > head `liftM` mapM print [1..]
02:01:46 <Nibble> @type mapM_
02:01:59 <Nibble> what's the difference between mapM and mapM_?
02:02:10 <Saizan> mapM_ doesn't collect the results
02:02:13 <hvr> mapM_ discards the return values
02:02:23 <Nibble> ok
02:03:38 <Saizan> hvr: anyhow, yes if you change the result type or just for IO you can use unsafeInterleaveIO 
02:04:01 <hvr> ic
02:04:49 <hvr> I was hoping to be able to work with the result of something like
02:05:00 <hvr> lst <- mapM something [1..]
02:05:07 <hvr> as if lst was a pure result
02:05:07 <dschoepe> hvr: In your example you could just use map instead of mapM: head (map print [1..])
02:05:30 <hvr> e.g. for using it with takeWhile, take, break, and so on
02:05:44 <Saizan> in general io can use data MList m a = Nil | Cons a (m (MList m a)); then you could have mapM :: Monad m => (a -> m b) -> [a] -> m (MList m a)
02:06:03 <Saizan> hvr: well, the question is when the side effects of something should be performed
02:06:31 <hvr> Saizan: of course, I would want 'something' to be performed only if I consume the result by looking at it
02:06:59 <Saizan> then either MList or unsafeInterleaveIO
02:07:42 <hvr> my basic problem is, that I have a large pure computation on infinite structures, which now happens to need some I/O interaction for getting some of the values... :-/
02:08:17 <hvr> and plugging in the IO monad now seems to require to rewrite the complete code
02:08:29 <ddarius> Yep.
02:09:00 <Saizan> unsafeInterleaveIO will let you use lst as a normal list
02:09:03 <hvr> I was hoping I could at least separate into 3 chunks, the pure code before the IO, the pure code after the IO,
02:09:07 <hvr> and the IO part in the middle
02:09:26 <hvr> Saizan: thx, I'm looking into it
02:09:54 <hvr> (should I be worried that I have to resort to one of the unsafe* functions?)
02:09:57 <ddarius> Yes.
02:10:01 <Saizan> yep
02:10:06 <ddarius> And you don't "have to"
02:10:15 <Saizan> it can be the lesser evil
02:11:00 <Saizan> but if you really don't care if and when the side effects are performed it shouldn't be a big problem
02:11:18 <ddarius> For a throw-away script sure, but for long-term viability, you might as well do the right thing now.
02:11:47 <ddarius> Usually you try to predict these things ahead of time (and it's usually pretty easy to do.)
02:13:07 <hvr> it's just so frustrating; My computation is 99% pure, but sometimes in seldom cases needs due to businesslogic to get some of its values via webservice calls...
02:13:30 <hvr> but I don't want to resort to unsafePerformIo and alikes
02:14:26 <hvr> but I guess the clean way really requires me to pull the IO monad deep into computation where it's needed :-/
02:14:45 <Nibble> hvr: indeed
02:15:06 <hvr> btw, how would I best implement a short-term memoization of webservice call results?
02:15:11 <ddarius> The clean way requires you to figure out how to avoid that, or alternatively, figure out an interface where you still provide pure code and the "framework" can handle the IO.
02:15:58 <hvr> short-term = for one single computation
02:16:20 <hvr> which may request the same information a few times
02:17:10 <hvr> since I'm already accessing the IO monad, I guess I could use TVars?
02:17:49 <hvr> (or IORefs)
02:19:44 <Saizan> a single reference to a Map Request Result would be a way
02:20:33 <Saizan> or StateT (Map Request Result), or just pass the map around manually
02:21:05 <hvr> what's the benefit of StateT over Refs?
02:22:34 <Saizan> if it's over IO probably none
02:22:55 <Heffalump> hvr: means you don't have to pass around the IORefs themselves
02:23:06 <Heffalump> or rather you don't have to do it explicitly
02:24:02 <Saizan> ReaderT (IORef s) :)
02:24:46 <Saizan> it depends on how much code has to be "infected" by this
02:26:17 <Saizan> in the best case it might be just a simple loop that calls pure "callbacks", so you don't need anything fancy to hold the Map
02:34:31 <svk_> Hm, assuming I have a matrix of values, and I want to map over the entire structure and take advantage of the fact that this can be done in parallel, what sort of structure / module / technique should I be using?
02:35:14 <ksf> dph
02:35:39 <ksf> ...and get your code running on your gpgpu for free.
02:36:06 <Nibble> ksf: afaik, dph doesn't run on gpu?
02:36:38 <ksf> I don't have a cuda-class one, but I _heard_ there's cuda targets.
02:36:50 <ksf> ...as opposed to sse, which I _do_ have.
02:36:58 <svk_> Aha, excellent, thanks
02:37:17 <Nibble> but is dph done yet?
02:38:27 <ddarius> No.
02:39:06 <svk_> So should I not be using it? I don't need the absolute cutting edge, just trying to get a handle on how parallelism is done in Haskell
02:41:33 <ddarius> DPH sounds like it would be the ideal thing for you.  And you can use it, it's just not all the way "there" yet, so you'd have to be willing to put up with some rough edges.  Besides that, the parallel strategies stuff would also likely work rather well for you.
02:42:21 <ksf> svk_, well, you can use traditional threads with either MVars or TVars, you can use pure concurrency with par, or you can use vector/matrix stuff like dph.
02:43:11 <ksf> even if your dph doesn't run great on cuda or whatever yet, you still have the benefit of not having to do the manual locking thing.
02:43:21 <ddarius> The whole, high-level break down is: concurrency (locks or channels or STM), parallel strategies, or dph.
02:43:23 <ksf> ...or non-automatic scaling as with par.
02:45:33 <svk_> Okay, thanks, I'll try DPH on this and then look up those
03:02:23 <McManiaC> how do you run something on the gpu?
03:02:53 <Eduard_Munteanu> Like CUDA?
03:03:29 <Cale> McManiaC: Perhaps use the accelerate package.
03:03:31 <McManiaC> never heard of cuda :)
03:04:24 <Eduard_Munteanu> It's pretty much different from running stuff on CPUs.
03:04:55 <McManiaC> hm ok
03:05:07 * Eduard_Munteanu , though, got excited about a year ago when he thought Intel Larrabee would bridge that gap.
03:06:02 <McManiaC> so CUDA is nvidia only?
03:06:09 <marens> can i somehow define new data types on the ghci toplevel? i get a "parse error on input `data'"
03:06:19 <ezyang> marens: No. 
03:06:25 <ezyang> Make a small hs file and load that up. 
03:06:43 <marens> yes, that's what i'm doing, just wanted to know if it was possible at all
03:06:53 <marens> thanks ezyang 
03:07:12 <McManiaC> marens: not in ghci itself
03:09:12 <Eduard_Munteanu> McManiaC: look at OpenCL better
03:09:59 <Eduard_Munteanu> Chances are that's more portable, methinks.
03:10:59 <McManiaC> ok
03:11:19 <monadic_kid> OpenCL is more general than CUDA and yes CUDA is only for Nvidia GPUs, OpenCL is low-level where as CUDA provides but low-level and higher-level abstractions
03:11:56 <McManiaC> damn, there is a CUDA course in a couple of weeks in the university near by, but registration is closed already
03:11:59 <McManiaC> :<
03:12:03 <McManiaC> :D
03:12:29 <monadic_kid> OpenCL is heterogeneous parallelism, any compatible compute device. CUDA is only GPU
03:13:18 <monadic_kid> OpenCL can distribute over CPU, GPU, etc, etc.
03:13:44 <McManiaC> ok, cool
03:14:45 <monadic_kid> Intel recently released alpha drivers for OpenCL on intel chips that support SSE 4.x
03:32:10 <monadic_kid> i wished ghci would stop crashing under leksah
03:38:45 <int10h> Hi, bit of a newbie question - how do I concatenate a string with an integer?
03:39:32 <lpsmith> ok,  i have to be missing something obvious,  but how do you convert from a strict to a lazy bytestring, or vice-versa
03:39:34 <lpsmith> ?
03:41:19 <tab> lpsmith: fromChunks, toChunks in the lazy module
03:41:24 <Eduard_Munteanu> int10h: you convert the integer to a string first
03:41:48 <Eduard_Munteanu> > show 1234
03:41:52 <lpsmith> tab: thanks!
03:42:09 <Eduard_Munteanu> @vixen Where are you, girl?
03:42:18 <Eduard_Munteanu> Awww.
03:42:19 <monadic_kid> > "foo" ++ show 10
03:42:52 <stroan_> is there a safe standard alternative to read? something along the lines of String -> Maybe a
03:44:14 <Axman6> reads
03:44:17 <Axman6> :t reads
03:44:23 <Axman6> lambdabot!
03:44:27 <Axman6> Cale!
03:45:27 <Twey> Haha
03:45:39 <Twey> â€˜AHHH!  THE BOT!  SHE IS GONE!  MY WORLD, IT CRUMBLES!â€™
03:45:43 <Twey> â€˜CALE, HELP!â€™
03:45:54 <stroan_> ah cheers
03:46:09 <Eduard_Munteanu> Ok, I can wait for an hour or two, but more and I start shivering :P
03:46:37 <Twey> stroan_: reads :: Read a => String -> [(a, String)]; fmap fst . listToMaybe . reads :: Read a => String -> Maybe a
03:47:13 <int10h> Hi, thanks ever so much for that, successfully "show"ing things in main now.
03:47:16 <Axman6> or, slightly shorted, listTo
03:47:26 <Axman6> listToMaybe . map fst . reads
03:54:40 <Int10h> Hi, sorry, one more thing - having problems putting indented code under a "do" haskell just reports back possible incorrect indentation. Using Debian Text Editor. Any suggestions?
03:55:03 <b_jonas> Int10h: indent the "else"
03:55:31 <Int10h> Hmm, there is no else
03:55:38 <Int10h> It's just do in main
03:55:40 <Eduard_Munteanu> There must be.
03:55:45 <Eduard_Munteanu> Oh.
03:55:52 <b_jonas> Int10h: in that case, show us the code or we can't help?
03:55:59 <Int10h> Okay
03:56:00 <yiannis_t> Int10h: paste your code in hpaste and link here ! : )
03:56:21 <b_jonas> Int10h: also make sure you're not mixing tabs with spaces in a wrong way
03:56:31 <Int10h> main = do
03:56:31 <Int10h> 	putStrLn ("It is the beginning of year " ++ show year)
03:56:31 <Int10h> 	putStrLn ("You have " ++ show startrice ++ " baskets of rice")
03:56:31 <Int10h> 	putStrLn ("There are " ++ show startpeople ++ " villagers")
03:56:32 <Cale> Int10h: Make sure that each statement inside the do-block starts in the same column as the first non-whitespace character after the 'do' keyword, and make sure your editor converts tabs into spaces.
03:57:12 <Eduard_Munteanu> (it should work with 8-spaces tabs though)
03:57:21 <b_jonas> don't paste it here, paste it to a website like http://hpaste.org, and paste the url here
03:57:25 <Cale> (because tabs will always be treated as aligning to the next column which is a multiple of 8 spaces
03:57:26 <Cale> )
03:57:53 <Eduard_Munteanu> Cale: can we have lambdabot pleeease? :)
03:58:04 <Cale> lambdabot: @bot
03:58:04 <Int10h> Hi sorry, but the code is only four lines, as above - will not do it again!
03:58:04 <lambdabot> :)
03:58:17 <Eduard_Munteanu> Oh, I didn't see it got back.
03:58:23 <Eduard_Munteanu> @vixen There you were...
03:58:23 <lambdabot> liverwurst gets me really gassy...
03:58:37 <Cale> Int10h: there's nothing blatantly wrong with that code.
03:59:03 <Cale> Int10h: However, all the indents show up as 1 space. Is that how it is in your file?
03:59:21 <Int10h> Well the indent is a tab character, I think.
03:59:30 <Eduard_Munteanu> I see a highlighted 'I' here
03:59:31 <b_jonas> Cale: they are one tab, but your irc client can't see them. or so I believe. that's why I'm asking him to paste to a pastebin.
03:59:47 <Int10h> Oh I see
03:59:47 <Cale> Okay, make sure to turn on the option in your text editor which converts tabs to spaces.
03:59:57 <Int10h> Will do, brill, thanks
04:00:25 <b_jonas> :%!expand
04:01:18 <Int10h> Hmm, crap text editor doesn't seem to have that option, I'll put them in manually
04:01:25 <Gato> hey
04:01:41 <Eduard_Munteanu> I don't know about that, maybe you should use a better editor.
04:01:56 <Gato> what is "Cabal" and how do i get it 
04:02:15 <b_jonas> or maybe the error is in the code above or below main
04:02:30 <Int10h> Probably should use a better editor! Hard-typing five spaces, still same error.
04:02:33 <Eduard_Munteanu> Gato: it comes with the Platform
04:02:47 <Eduard_Munteanu> Gato: or did you get GHC otherwise?
04:02:53 <Gato> i am on a mac 
04:03:09 <Gato> and i install GHC
04:03:21 <Eduard_Munteanu> Gato: sure, there's Haskell Platform for Mac too, IIRC
04:03:27 <Int10h> Oh tell a lie, found it!
04:03:29 <Eduard_Munteanu> Gato: it's better to get the platform
04:03:35 <Int10h> Sorry, hangover. :-)
04:04:00 <Gato> I have the Platform package 
04:04:05 <Eduard_Munteanu> @where platform
04:04:06 <lambdabot> http://hackage.haskell.org/platform/
04:04:22 <Eduard_Munteanu> Gato: are you looking for 'cabal install' ?
04:04:24 <Gato>  i run it nothing visible happne
04:04:40 <Eduard_Munteanu> Gato: what do you want to do?
04:05:16 <Gato> i am new Haskell and would like to create 
04:05:18 <Int10h> Well, I'm using spaces instead of tabs, editor inserts them when I tab, and still getting the same wretched error.
04:05:26 <Gato> Hello world
04:05:26 <Int10h> I have no idea what is causing this.
04:05:40 <Eduard_Munteanu> Gato: you don't need Cabal for that.
04:06:08 <Gato> should i remove GHCI and GHC
04:06:16 <Eduard_Munteanu> Gato: just write your hello world program, fire up a console and run ghc --make on it. Or run ghci in console and type Haskell code directly
04:06:23 <Eduard_Munteanu> No.
04:06:44 <Int10h> Got it working, seems to have been a trailing space somewhere funny.
04:06:49 <Int10h> Thanks for your help.
04:07:56 <Gato> I have been playing with GHCI for several months now ... so i can rite basic stuff
04:08:27 <Gato> last night i install Leksah
04:09:18 <Gato> but there is no compile happening 
04:09:41 <monadic_kid> Gato: With leksah it uses cabal system to build haskell programs
04:10:28 <Gato> yeah ... thats where i got lost ... 
04:10:59 <Eduard_Munteanu> Hm, the platform should already have Cabal.
04:11:16 <Eduard_Munteanu> Maybe Leksah is misconfigured, what's it saying?
04:11:31 <monadic_kid> Gato: In Leksah, first make a workspace, add a module in the window, leksah does background compilation by default
04:12:14 <Gato> ha.... 
04:12:25 <Gato> thats what i thought
04:12:39 <monadic_kid> Gato: and you need to make a package in the worksapce
04:13:15 <monadic_kid> Gato: before you can add modules
04:13:44 <Gato> ok .. you are destine to loose me again  
04:13:56 <Gato> let me start from top 
04:14:38 <Gato> i have GHCI and GHC working perfectly in terminal
04:15:23 <monadic_kid> Gato: In Leksah, 1. Make a new workspace, 2. Make a new package (cabal file), 3. Fill some of the details in the form (you don't need to do everything). 4. Add a new module to the package. 5. Add code to the module
04:15:43 <Gato> i try to install HAskell Platform  and it fail
04:16:55 <Gato> is it failing because  i already have GHC and i installed
04:17:18 <monadic_kid> Gato: so try uninstalling those first, I don't have a mac so I can't help you much
04:18:15 <monadic_kid> Gato: Haskell Platform comes with ghc/ghci
04:18:40 <monadic_kid> Gato: sorry i mean the other way around ghc/ghci comes with  Haskell Platform
04:20:10 <Gato> ok i success fully remove  GHC and i  f
04:20:49 <Martijn_> Does anyone have experience with HDBC-mysql on the Mac? It installs fine but when linking an executable that builds on top of HDBC-mysql I get linking errors: Undefined symbols: _mysql_stmt_bind_param etc
04:26:44 <Gato> hey One in here Running Haskel Platform on a MAc------------
04:27:48 <Axman6> yes
04:28:30 <Gato> i not having any luck with installing the platform 
04:28:36 <Gato> keeps failing
04:28:41 <Axman6> do you habe Xcode installed?
04:28:48 <Gato> yes 
04:28:51 <earthy> weird.
04:29:00 <earthy> WorksForMe
04:29:12 <Axman6> have you tried uninstalling the ghc you already have installed?
04:29:18 <Gato> i get GHC and I 
04:29:31 <Gato> remove  them 
04:29:52 <Axman6> did you run the uninstall script?
04:30:34 <Axman6> by running `sudo /Library/Frameworks/GHC.framework/Tools/Uninstaller`
04:31:18 <Gato> yep 
04:31:31 <Gato> run it twice
04:31:42 <Axman6> i assume you're trying to install the latest platform?
04:32:03 <Gato> 2010.2.0.0
04:32:20 <Gato> i am on a intel
04:32:49 <Axman6> ghc isn't that well looked after on OS X, my suggestion would be to just install ghc-6.12.3 (not 7.0.1) and install cabal-install using the bootstrap script that comes with it
04:32:53 <Gato> 10.6.5
04:33:56 <Axman6> so, download http://darcs.haskell.org/download/dist/6.12.3/GHC-6.12.3-i386.pkg and install it, then download http://www.haskell.org/cabal/release/cabal-install-0.8.2/cabal-install-0.8.2.tar.gz unpack it, cd into it, and run the bootstrap.sh
04:37:34 <Gato> So  for get about the platform for now 
04:38:45 <romildo> Hi.
04:38:45 <lambdabot> romildo: You have 1 new message. '/msg lambdabot @messages' to read it.
04:40:36 <romildo> Is there a function similar to the following one in the standard libraries?
04:40:39 <romildo> applyToFirst f x y = f x
04:41:20 <Axman6> const . f
04:41:34 <Veinor> @pl \f x y -> f x
04:41:34 <lambdabot> (const .)
04:41:35 <Axman6> :t let app f x y in app
04:41:38 <lambdabot> parse error on input `in'
04:41:46 <Axman6> :t let app f x y = f x in app
04:41:47 <lambdabot> forall t t1 t2. (t -> t1) -> t -> t2 -> t1
04:41:59 <Axman6> :t const . (f :: a -> b)
04:42:00 <lambdabot>     Could not deduce (Show a, SimpleReflect.FromExpr b)
04:42:00 <lambdabot>       from the context ()
04:42:00 <lambdabot>       arising from a use of `f' at <interactive>:1:9
04:42:05 <Twey> applyToFirst = fmap const
04:42:07 <Axman6> bleh
04:42:24 <Twey> :t fmap const
04:42:25 <lambdabot> forall a b (f :: * -> *). (Functor f) => f a -> f (b -> a)
04:42:39 <Twey> :t (.) const
04:42:40 <lambdabot> forall a b (f :: * -> *). (Functor f) => f a -> f (b -> a)
04:42:45 <Twey> Bah
04:42:47 <Twey> :t (P..) const
04:42:48 <lambdabot> Couldn't find qualified module.
04:42:53 <Twey> :t (Prelude..) const
04:42:54 <lambdabot> forall b b1 a. (a -> b) -> a -> b1 -> b
04:43:52 <Cale> It probably makes a fair amount of sense to think of it as fmap const here.
04:44:09 <Cale> (At least, it does to me :)
04:45:19 <romildo> @pl \f (x,y) -> f x
04:45:19 <lambdabot> (`ap` snd) . (. fst) . (const .)
04:46:38 <Twey> Cale: Yeah, but it's not as clear that it's the same as the original.
04:47:49 <Gato> ey Axman6
04:47:49 <Gato> [12:46] Gato: i have reinstalled .. ghc/
04:47:56 <Gato> and 
04:48:01 <romildo> :t \f (x,y) -> f x
04:48:02 <lambdabot> forall t t1 t2. (t -> t2) -> (t, t1) -> t2
04:48:29 <romildo> :t \f -> f . fst
04:48:29 <lambdabot> forall a b b1. (a -> b) -> (a, b1) -> b
04:48:42 <Gato> have cd my myself into cabal folder
04:49:27 <Gato> what should i do with "bootstrap.sh"
04:49:43 <Axman6> does it exist in that directory?
04:49:55 <Axman6> if so, just run `./bootstrap.sh`
04:51:09 <Gato> -sh: /Users/Gato/Documents/Haskell/Apps/cabal-install-0.8.2/bootstrap.sh: Permission denied
04:51:30 <Gato> thats terminal return
04:52:23 <Axman6> try `bash bootstrap.sh`
04:53:22 <yitz> Cale: ping
04:54:53 <Gato> yeah burne shell is running
04:55:47 <Axman6> is it running the script?
04:55:49 <Gato> hey Axman6 what next
04:56:58 <Gato> gato:cabal-install-0.8.2 Gato$ cabal
05:02:05 <Gato> Axman6 
05:02:15 <Gato> how di get cabal updates
05:02:17 <Axman6> does the cabal command work or not?
05:02:27 <Axman6> can you run `cabal --version`?
05:03:10 <Gato> cabal-install version 0.8.2
05:03:10 <Gato> using version 1.8.0.6 of the Cabal library 
05:03:21 <Gato> that looks good
05:03:58 <Gato> how do get  update
05:04:23 <Axman6> ok, now you can install all the packages you want. for example, cabal install pony
05:04:32 <Axman6> first run cabal update though
05:05:44 <Gato> where do go to run cabal updates
05:06:06 * hackagebot hashed-storage 0.5.4 - Hashed file storage support code.  http://hackage.haskell.org/package/hashed-storage-0.5.4 (PetrRockai)
05:07:28 <Gato> is there a next app i need to download
05:09:11 <litb> hmm
05:10:13 <litb> monads is only useful for lists, i/o and parsers?
05:10:55 <McManiaC> no
05:11:56 <McManiaC> there are *tons* of different monads
05:12:17 <McManiaC> Registering gtk-0.12.0...
05:12:18 <McManiaC> setup.exe: gtk-0.12.0: library-dirs: c:/devel/dist/win32/libpng-1.4.3-1/lib
05:12:18 <McManiaC> doesn't exist or isn't a directory (use --force to override)
05:12:22 <b_jonas> like reader? or is that only an applicative?
05:12:26 <b_jonas> :-)
05:12:28 <monadic_kid^> litb: useful for any single parameter type constructor which implements the operations and those operations follow some laws.
05:12:44 <McManiaC> why does he even look there? that directory doesn't exist and libpng is located at C:/MinGW/lib
05:13:05 <McManiaC> b_jonas: reader, state, and many more :)
05:14:39 <McManiaC> (I tried --extra-lib-dirs=...)
05:15:03 <monadic_kid^> litb: there lots of monads but that's kind of the point of monad, it's an abstraction over them all
05:19:44 <Eduard_Munteanu> McManiaC: is that in path?
05:19:54 <Eduard_Munteanu> also I think you should use '\', not '/'
05:23:11 <Cale> > '\'
05:23:13 <lambdabot>   <no location info>:
05:23:13 <lambdabot>      unexpected end-of-file in string/character literal...
05:23:13 <lambdabot> Cale: You have 1 new message. '/msg lambdabot @messages' to read it.
05:23:15 <Cale> > '\\'
05:23:17 <lambdabot>   '\\'
05:23:48 <litb> monadic_kid^: ohh
05:23:48 <Cale> You actually can use '/' on Windows, and some people even recommend it.
05:25:10 <monadic_kid^> String Paths are painful
05:25:27 <McManiaC> Eduard_Munteanu: yes it is
05:25:36 <McManiaC> and \ and / aren't the problem
05:25:57 <monadic_kid^> litb: check this
05:26:05 <monadic_kid^> :t replicateM
05:26:06 <lambdabot> forall (m :: * -> *) a. (Monad m) => Int -> m a -> m [a]
05:26:33 <monadic_kid^> litb: that function is generic, it can take any Monad
05:26:50 <litb> > replicateM 4 (Just 3)
05:26:52 <lambdabot>   Just [3,3,3,3]
05:26:53 <litb> ohh
05:28:17 <litb> would it make sense to have a   Int -> m a -> [m a]  ?
05:28:45 <Botje> it's easy to make
05:28:56 <Botje> it's just replicate
05:29:05 <litb> oh i see now
05:29:17 <Veinor> yeah
05:29:45 <monadic_kid^> litb: there is nothing special, m is a higher kind, you can replace it with any type constructor that takes a parameter
05:29:50 <Veinor> note that you can't go from m [a] to [m a]
05:30:09 <monadic_kid^> litb: m a, m is like a template template argument in C++
05:30:22 <monadic_kid^> except that C++ sucks for that kind of thing
05:30:42 <monadic_kid^> template template arguments are almost usually in c++
05:30:49 <monadic_kid^> *useless
05:30:51 <Veinor> because, like... if you could, then you could take an IO [a] and see how many elements it had
05:32:50 <litb> ah
06:09:31 <McManiaC> Entroacceptor: it's been an wrong path in the pkgconfig files of the GTK runtime libraries offered at gtk.org
06:09:44 <McManiaC> never trust libraries you havent build by your own *note*
06:09:54 <Entroacceptor> erm, what_
06:09:55 <Entroacceptor> ?
06:10:01 <McManiaC> oh Eduard_Munteanu *
06:10:06 <McManiaC> sorry
06:10:07 <McManiaC> :)
06:10:55 <Eduard_Munteanu> Oh, heh.
06:10:59 <McManiaC> yay, so now I have gtk running on windows again \o/
06:11:23 * Eduard_Munteanu happily has gtk2hs working in Wine :P
06:11:58 <McManiaC> in wine?
06:11:59 <McManiaC> wtf
06:12:48 <Eduard_Munteanu> Yep, poor man's crosscompiling.
06:13:02 <McManiaC> ah
06:13:31 <xarch> what does "In HDBC step, unexpected result from sqlite3_step" mean ?
06:50:43 <onteria> Got curious after watching a video on Clojure on haskell and the jvm. Looks like there was a thread on -cafe in 2009 that appeared to stop at the lack of tail call optimization. Wonder how much has changed then.
06:59:53 <dolio> Tail call optimization hasn't occurred, at least in general.
07:23:00 <Cale> So, this picture has been kicking around for a while: http://www.axiomaticdoubt.com/wp-content/uploads/2010/11/tumblr_lbxrvcK4pk1qbylvso1_400.png
07:23:09 <Cale> My reply to it: http://imgur.com/skMne
07:24:36 <Heffalump> :-)
07:24:55 <FunctorSalad> Cale: nice
07:31:13 <Cale> I reddited it: http://www.reddit.com/r/math/comments/e9i1e/archimedes_reply_to_pi_4/
07:32:52 <dolio> I have come up with a sequence that doesn't approximate pi, but have claimed that it does based on a picture. Thus, I have invalidated mathematics.
07:33:03 <Cale> heh
07:33:08 <Cale> Yeah, basically.
07:35:37 <Cale> dolio: It is a nice way to show how arclengths can be a more subtle concept than the average person might think.
07:38:16 <Dari> Nice
07:38:57 <litb> hmm where is the error in trollface's "proof" ?
07:39:15 <Cale> litb: Not all the points in his enclosing polygon lie on the circle
07:39:22 <Cale> (not all the vertices do)
07:39:47 <Cale> Well, that's one problem with it.
07:39:54 <Cale> Without that restriction, you can make it converge to anything you want.
07:40:04 <litb> oh
07:40:18 <Jafet> 2 = sqrt 2
07:42:03 <Jafet> (In minkowski's metric)
07:43:21 <andreo> what is the difference between Int and Integer?
07:43:32 <Cale> andreo: Int is a machine integer
07:43:43 <Cale> Integer is unbounded (up to the size of available memory)
07:44:18 <andreo> thanks
07:44:22 <Cale> > product [1..100] :: Int
07:44:24 <lambdabot>   0
07:44:26 <Cale> > product [1..100] :: Integer
07:44:27 <lambdabot>   933262154439441526816992388562667004907159682643816214685929638952175999932...
07:44:59 <andreo> haha, cool
07:45:47 <andreo> how can resolve the error
07:45:56 <andreo> Couldn't match expected type `Integer' against inferred type `Int'
07:46:48 <Botje> put a fromIntegral in there
07:47:13 <Cale> fromIntegral will convert from any integer-like type to any numeric type at all
07:57:36 <onteria> I've seen infinite lists used as a way to explain haskell's lazy evaluation, but I'm wondering what other uses for it there are. I haven't really seen much explanation outside of that.
07:58:21 <Botje> you can use them as an elegant substitute for control structures
07:58:40 <Botje> eg iterate f x gives you an infinite list [x, f x, f (f x), ...]
07:58:44 <Botje> you take what you need
07:59:04 <Botje> zipping with the infinite list [1..] is popular, too
07:59:05 <Cale> onteria: The basic idea of it is this... since anything which isn't examined won't be computed, you can avoid mixing logic for when to stop computing things into parts of the program which generate things.
07:59:45 <Cale> onteria: For example, if you're writing an AI for a board game, you might define the *entire* game tree.
07:59:54 <Cale> and only examine the parts of it that you really care about
08:00:44 <Cale> Normally if you do something like that in a strict language, you end up mixing all the logic for when to stop examining the game tree into the code which generates it in the first place.
08:00:50 <Cale> (which is bad for code-reuse)
08:01:15 <onteria> Botje, Cale: Ahh I see now. Thanks for the explanation, makes much more sense now
08:01:16 <spetrea> Botje: if f is a permutation, that's called a cycle you got there :)
08:02:35 <faust45> is it any good articles about "Haskell lazy evaluation"?
08:03:12 <Botje> faust45: if you're looking for a good old fashioned brain 'splosion, look up "tying the knot"
08:04:03 <nostrand> faust45: you may want to look inte "circular programming" for som cool techniques with lazy evaluation
08:04:16 <Cale> The classic article is "Why Functional Programming Matters"
08:04:23 <Cale> www.cs.kent.ac.uk/people/staff/dat/miranda/whyfp90.pdf
08:04:39 <yitz> which is the right version of hackage-server to use to get a working private hackage server up and running quick - v.1 or v.2?
08:04:46 <Cale> It's old, and uses Miranda in place of Haskell, but the basic ideas all still apply.
08:04:59 <Cale> (and Miranda is similar enough to Haskell that you'll be able to read it)
08:05:09 <yitz> Cale: thanks! ;)
08:05:27 <FunctorSalad> Cale: isn't this somehow related to the derivative operator being unbounded on most domains?
08:05:45 <FunctorSalad> if we take some generalization of "derivative" that even covers these square approximations ;)
08:05:50 <Cale> FunctorSalad: yeah
08:06:13 <Cale> at least, similar constructions show why it's not continuous
08:06:56 <faust45> thanks guys
08:13:40 <Botje> @seen roconnor
08:13:40 <lambdabot> Unknown command, try @list
08:13:40 <preflex>  roconnor was last seen on #haskell-blah 10 hours, 47 minutes and 37 seconds ago, saying: it will also kill more people than terrorists, but that isn't the point :D
08:14:04 <Botje> @tell roconnor Hi, found something relevant to the C++ RTTI discussion this week: http://replicaisland.blogspot.com/2010/11/building-reflective-object-system-in-c.html
08:14:09 <lambdabot> Consider it noted.
08:20:16 * roconnor looks
08:20:17 <lambdabot> roconnor: You have 1 new message. '/msg lambdabot @messages' to read it.
08:22:19 <ManateeLazyCat> When i do some "cat" mission, i use "ByteString.readFile" got [ByteString] then use "ByteString.concat [ByteString]" write result to destination file. But this operation will cause memory leak of [ByteString], how do you avoid it?
08:23:26 <Cale> ManateeLazyCat: Use lazy bytestrings?
08:23:50 <ManateeLazyCat> Cale: Lazy ByteString can avoid memory leak?
08:24:09 <Cale> ManateeLazyCat: Well, I *think* the readFile for lazy ByteStrings is lazy.
08:24:21 <mauke> how does that leak memory?
08:24:32 <Cale> readFile for strict ones will read the whole file into memory at once.
08:24:41 <roconnor> Botje: heh, it's enough to make Conor lose his lunch
08:24:47 <iago> hi all, does someone know why doc said Data.Time.Clock.UTCTime has Read/Show instances but it hasn't ?
08:24:54 <Botje> :)
08:25:02 <Botje> i wonder how boost et al do it
08:25:19 <roconnor> you can look iup methods by string name using boost?
08:25:22 <Botje> and at least haskell can abuse TH to generate that boilerplate code 
08:25:44 <ManateeLazyCat> mauke: I use ByteString.readFile with many files to got [ByteString], then use "ByteString.concat [ByteString]" write result to destination file, but [ByteString]'s memory still use.
08:25:55 <mauke> ManateeLazyCat: how do you know?
08:26:13 <ManateeLazyCat> mauke: I have process-manager.
08:26:27 <mauke> that doesn't tell you about freed memory within a process
08:26:28 <ManateeLazyCat> mauke: Memory not release.
08:27:51 <ManateeLazyCat> mauke: But i got different "memory usage" between ByteString.readFile and "cat" command.
08:28:14 <ils> hello, I want to organize some kind of event queue. I need to be able to insert events at arbitrary times and to fetch nearest event. I think the heap is the optimal data structure for this. But which one to grab from hackage?
08:28:24 <mauke> ManateeLazyCat: yes, because cat does not read files into memory in the first place
08:28:33 <Cale> ils: It sounds like you want a priority queue
08:28:43 <roconnor> ils: PSQueue seems awesome to me
08:29:00 <Cale> Yeah, I'd probably go with PSQueue.
08:29:08 <mauke> quick and dirty: Data.Map
08:30:22 <ils> Cale, do I? As I understand priority queue is about fetching the element with the highest priority from the top of a bunch of queues. And I have a single queue, time
08:31:04 <mauke> ils: that would be news to me
08:31:16 <mikeg> A priority queue is exactly what you first described, and I think usually implemented as a heap.
08:31:17 <ManateeLazyCat> mauke: "runCommand cat..." command join files in separate process, memory will release will release after "cat" process exit, but i use ByteString.readFile, memory still there, i wonder have a way release ByteString explicitly.
08:31:30 <roconnor> ils: a priority queue fetches the hightest priority from the top of a single queue.
08:31:37 <mauke> ManateeLazyCat: "cat" does not allocate memory
08:31:59 <ManateeLazyCat> mauke: My question is : how to write Haskell code work like "cat" ?
08:32:13 <mauke> step 1: don't use readFile
08:32:21 <mauke> you'd have to read and write in chunks
08:32:40 <aavogt> or make sure the readFile is lazy
08:32:54 <aavogt> but you'll need to be careful about too many open file handles
08:33:03 <mauke> Iteratee?
08:33:39 <ManateeLazyCat> aavogt: Ok, i write some Lazy ByteString code to test.
08:41:50 <sgtarr> Is Haskell being used in the embedded (as in microcontrollers) space?
08:41:51 <ManateeLazyCat> Cale: aavogt You're right, Lazy readFile fix problem.
08:42:45 <iago> sgtarr, I don't think so
08:43:04 <mikeg> I've definitely seen packages on hackage about embedded devices
08:43:39 <iago> well, eDSL may be
08:44:18 <mikeg> @hackage atom
08:44:18 <lambdabot> http://hackage.haskell.org/package/atom
08:44:23 <ManateeLazyCat> Cale: Why strict readFile can't release memory?
08:44:41 <iago> mikeg, atom is not Haskell
08:44:44 <ils> thanks for educating, looks like priority queue is what I need.
08:44:52 <aavogt> ManateeLazyCat: you did a   mapM Data.ByteString.readFile?
08:44:55 <mikeg> Mhmm good point :)
08:45:14 * ManateeLazyCat pasted "my lazy bytestring code." at http://paste2.org/get/1102254
08:45:16 <ManateeLazyCat> aavogt: ^^^^
08:45:38 <aavogt> that's not what the discussion is about
08:46:10 <Cale> ManateeLazyCat: It's designed to read the whole file into memory all at once, so that, e.g. deleting the file after the strict readFile would be safe.
08:46:48 <aavogt> and it's questionable to have IO be driven by the evaluation of pure functions
08:46:54 <Cale> So it'll force your program to allocate at least enough memory to hold one complete file, maybe more.
08:47:32 <aavogt> ManateeLazyCat: if that code you pasted used strict bytestrings, it should load all files into memory, then write them out
08:48:11 <ManateeLazyCat> aavogt: I have test, if use strict bytestrings, memory still there after writeFile
08:48:21 <aavogt> which ghc do you use?
08:48:28 <ManateeLazyCat> aavogt: ghc-6.12.3
08:48:42 <aavogt> 7 is supposed to release memory to the OS
08:48:57 <ManateeLazyCat> aavogt: If use lazy bytestring, no memory leak
08:49:22 <ManateeLazyCat> aavogt: Unfortunately, many package's haven't upgrade to ghc-7, i can't compile my project on ghc-7
08:49:28 <mauke> I don't think it's a leak
08:49:38 <ManateeLazyCat> aavogt: But good to know that. :)
08:50:55 <Int10h> Hi, bit of a question, getting a problem with this code fragment:
08:51:11 <Int10h> subfunction :: (Integral a, RealFloat b) => a -> b -> b
08:51:11 <Int10h> subfunction trafficOffered numberServers = trafficOffered + numberServers
08:51:29 <byorgey> you can only add things of the same type
08:51:45 <Botje> you need to convert your trafficOffered into a number of the RealFloat class
08:51:46 <Cale> Add a fromIntegral to the trafficOffered
08:51:49 <byorgey> you probably want to wrap trafficOffered in a call to fromIntegral
08:51:51 <mikeg> Ghc-6 would reuse its own memory though, right? i.e. if I had a 40MB ByteString, it was garbage collected, then I made another 40MB bytestring, I'd only have 40MB memory usage?
08:52:06 <Cale> mikeg: yeah
08:52:11 <Int10h> Brilliant, thanks!
08:52:26 <luite> garbage collection would be simpler though, if it didn't ;)
08:54:08 <ManateeLazyCat> Hmmm, "cat" command : "22.52MB", "Lazy ByteString" : "22.54MB"
08:55:04 <ManateeLazyCat> mauke: OK, clearer version:  GC not release strict ByteString. :)
08:55:45 <mauke> ManateeLazyCat: why would it?
08:56:03 <ManateeLazyCat> Lazy ByteString still bigger 20 KB, but much better than strict ByteString
08:56:20 <ManateeLazyCat> mauke: I don't know, you need ask GC. :)
08:56:49 <ManateeLazyCat> mauke: I can screenshot some picture if you want know. :)
08:56:55 <mauke> what?
08:57:22 <ManateeLazyCat> mauke: I have process manager monitor memory usage.
08:57:30 <mauke> I know
08:58:43 <ManateeLazyCat> mauke: I don't know why Data.ByteString.readFile not release memory to OS, maybe like aavogt said, ghc-7 fix that.
08:58:57 <mauke> why do you think it should?
08:59:06 <ManateeLazyCat> I will upgrade to ghc-7 to test after new haskell-platform release.
08:59:18 <ManateeLazyCat> mauke: Why not?
08:59:32 <ManateeLazyCat> mauke: Since i don't use that anymore
08:59:36 <mauke> because the next time you do something like this it'll have to request memory again
08:59:54 <ben> What if I only do it once and then sleep for the next ten days
09:00:05 <R3van> hey guys... can i specify the deriving Eq statement just to use some of my elements in a data??
09:00:14 <mauke> ben: then you let yourself get paged out :-)
09:00:20 <ManateeLazyCat> mauke: I read old files and concat in new files, then delete old files.
09:00:29 <ben> Man my swap partition only is so big
09:00:52 <ManateeLazyCat> mauke: [ByteString] should release after i finish "concat ... writeFile" job.
09:00:53 <R3van> eg. data aData = aData{x :: Integer y :: Integer} deriving Eq on x ???
09:00:53 <Saizan> R3van: no
09:01:18 <mauke> ben: not mine :-)
09:02:11 <thought81> I don't see why people would *not* expect ghc to release memory back to the os, but yes it has only beguun to do so recently
09:02:27 <mauke> because normal malloc/free doesn't do that either
09:02:38 <R3van> Saizan: How would you work on it to get this starting??
09:02:56 <ManateeLazyCat> mauke: Really?
09:03:10 <mauke> ManateeLazyCat: yes
09:03:22 <mauke> well, not strictly true
09:03:25 <ManateeLazyCat> mauke: I have some code use malloc/free, memory release looks great.
09:03:40 <mauke> glibc's malloc will use mmap (instead of sbrk) for big allocations, and freeing that unmaps it again
09:04:12 <Saizan> R3van: i'd write the Eq instance manually
09:04:24 <ManateeLazyCat> mauke: I use mallocBytes build buffer cache for receive network data, then write to disk, then free old cache and build new cache.
09:04:50 <Saizan> R3van: data AData = AData{x :: Integer y :: Integer}, instance Eq AData where a == b = x a == x b 
09:04:51 <b_jonas> also, wanting the program to "release memory to the os" is pointless imo since if the process doesn't use the memory then it can be permanently swapped anyway
09:05:09 <b_jonas> apparently all people care about is what number top shows for the memory usage of the process
09:05:25 <ManateeLazyCat> mauke: After many times (1000 +), memory release well.
09:05:33 <mornfall> b_jonas: Swap is not completely free either.
09:05:55 <Saizan> will gc leave those pages alone most of the time? it might end up touching them more than you'd like
09:05:57 <b_jonas> sure, but the process releasing and mapping memory again is also not free
09:06:06 <mornfall> And uselessly big VSS creates pressure on disk cache, too.
09:06:08 <Saizan> i've never tried though
09:06:45 <ben> How good is a GC about not swapping everything back in periodically to check for references
09:07:02 <mornfall> b_jonas: But that's negligible runtime overhead. Even swapping out memory that'll never be loaded is much more expensive than that.
09:07:27 <Lycurgus> ben: you appear to confuse a swapper with gc
09:07:43 <Lycurgus> or vm with gc
09:07:48 <mornfall> Lycurgus: No, he's not.
09:07:53 <Saizan> ben: well, in this case the gc would see it as free memory, so it won't look for references there
09:08:07 <ben> Lycurgus: I assumed the gc had to touch memory to check it for pointers, so the memory would have to be swapped back in
09:08:29 <ben> Saizan: Okay, that makes sense :V
09:08:31 <Lycurgus> i c
09:08:36 <Saizan> ben: what i'm worried about is how much it'll tend to allocate there
09:09:00 <ben> Is memory fragmentation an issue anymore?
09:09:11 <Lycurgus> (i forgot this was haskell and how that could be a concern)
09:10:09 <ManateeLazyCat> Thanks all for help! I'm happy with ByteString.Lazy.readFile/writeFile
09:10:11 <ManateeLazyCat> :)
09:10:41 <AmunRa> releasing memory back to the OS is good. It means the GC is tracking less things. On swapping: The OS isn't good at guessing what's should be swapped and what should be kept in memory, so by holding on to too much memory you could end up slowing your program
09:10:47 <overscore> super stupid question, but what's the difference between string literals and ByteString ?
09:11:27 <ben> String literals usually turn into [Char] values, so they are at some point linked lists of unicode codepoints. ByteStrings are just a series of bytes, even contiguous for strict bytestrings.
09:11:28 <Saizan> that's a weird question
09:12:20 <R3van> Saizan: Sorry but doesnt work... I got an data aDatatype = {i :: Integer, s :: String} and i want deriving Eq just to equal the Strings in aDatatype....
09:12:24 <overscore> ah, so with the "regular" string type you could end up with utf-16 data or something?
09:12:25 <ManateeLazyCat> overscore: http://www.haskell.org/haskellwiki/Dealing_with_binary_data#Bytestrings
09:12:44 <Saizan> R3van: that declaration is malformed
09:12:44 <overscore> thanks mana, looking now
09:12:53 <thoughtpolice> releasing memory back to the OS for one thing becomes insanely important especially once you start interfacing with haskell through e.g. DLLs, now that dynamic linking is in. GHC releasing memory back is The Right Thing to do, even if "malloc does not do it," because the effects become extremely noticable very quickly
09:13:02 <ben> overscore: It is closer to utf-32 I think
09:13:05 <Saizan> R3van: can you put your actual code on a pastebin?
09:13:44 <thoughtpolice> especially yeah, once it induces paging (you have low physical mem,) the game is over. even without using DLLs, the effects of not releasing back memory become extremely noticable if you use something like gitit
09:13:46 <ManateeLazyCat> overscore: String handle Unicode character, ByteString not
09:13:50 <R3van> Saizan: no sorry... i can give you just abstrct examples
09:13:53 <ben> overscore: the point is that String is more abstract than a bytestring, and a String has to be subjected to some manner of encoding before you can print it or whatever
09:13:59 <thoughtpolice> after enough edits it looks pretty bad for gitit to idle and use like half of your RAM, because none of it has been released back
09:14:08 <ManateeLazyCat> overscore: But when want do network or big-binary operation, ByteString is better choose. 
09:14:15 <ManateeLazyCat> overscore: Save space and time. :)
09:14:39 <Saizan> R3van: "data Foo = Foo {i :: Integer, s :: String }; instance Eq Foo where a == b = s a == s b" will work
09:14:47 <overscore> gotcha
09:15:07 <Saizan> R3van: datatype names and constructors need to start with an uppercase letter
09:15:19 <overscore> but I guess you do lose the é and ä ö etc
09:15:41 <Twey> overscore: UTF-8 is advisable on Freenode
09:15:55 <ben> You can use the utf8-string package or the encoding package or probably a lot of other packages to encode unicode text in utf8 while storing it in a bytestring
09:16:08 <ben> if you decode it appropriately, you will get your Ã© and Ã¤ Ã¶ etc back eventually
09:16:08 <overscore> yes, I switched clients and still have to configure this one :/
09:16:14 <Twey> Ar
09:16:26 <Twey> Hey, I remember you from somewhere.  #linguistics or something?
09:16:39 <overscore> Twey: prolly learnanylanguage or unilang\
09:16:40 <ben> It probably pays to be aware of what encoding the other side is expecting. There is no such thing as plain text, etc ;)
09:16:56 <Twey> Ah, #lal it was
09:17:07 <romildo> How to convert a bytestring to string with the utf8 encoding?
09:17:21 <mauke> you'd have to decode it somehow
09:17:30 <ben> romildo: utf8-string's Data.ByteString.UTF8 has a fromString/toString pair of methods that perform the appropriate codec'ing
09:17:39 <ManateeLazyCat> romildo: ut8-string
09:17:43 <R3van> Saizan: didnt saw the ; thanks this seems to work
09:17:48 <ben> The encoding package has a whole slew of encode/decode methods for all kinds of crazy encodings
09:17:55 <overscore> yeah I know... though UTF-8 is commonly used now
09:17:58 <ManateeLazyCat> @package utf8-string
09:17:58 <lambdabot> http://hackage.haskell.org/package/utf8-string
09:18:25 <ManateeLazyCat> overscore: If don't know encoding information, best use ByteString, ByteString can work always. :)
09:18:26 <Saizan> R3van: instead of ";" you can also put the instance declaration on the next line
09:18:57 <thoughtpolice> ben: also re swapping with GCs, I don't think most GCs are designed with paging in mind at all really, so if you do have a large heap with references that do live on pages that're swapped out, the GC will page those back in (I'm pretty sure almost every GC including GHC does this but I could be wrong.) there's been work on interfacing garbage collectors with the VM subsystem though, to allow the GC to have more accurate info about what's paged i
09:18:57 <overscore> So, to recap, String will infer an encoding, but if one wants a specific encoding, using ByteString and other mecanisms is better
09:19:00 <ManateeLazyCat> overscore: I write some GTK+ program, always use ByteString as low-level communications, just convert to String when i need display it. :)
09:19:30 <ben> Garbage collectors are pretty impressive. :)
09:19:33 <thoughtpolice> ben: http://lambda-the-ultimate.org/node/2391
09:19:39 <ben> Thanks1
09:19:40 <ManateeLazyCat> overscore: ByteString won't failed if you don't know the encoding information
09:19:48 <ManateeLazyCat> overscore: But String will
09:19:53 <thoughtpolice> " In the face of memory pressure, it improves throughput by up to a factor of five and reduces pause times by up to a factor of 45 over the next best collector. Compared to a collector that consistently provides high throughput (generational mark-sweep), the bookmarking collector reduces pause times by up to 218x and improves throughput by up to 41x."
09:19:58 <ben> ManateeLazyCat: Gtk itself really wants utf-8 strings anyway, no?
09:20:01 <Saizan> overscore: not really infer, string literals in source are assumed to be utf8, since ghc-6.12 System.IO will use your locate settings to encode/decode, though
09:20:13 <thoughtpolice> so, results seem pretty good
09:20:24 <ManateeLazyCat> ben: Many function need UTF-8 explicitly, but some function don't need.
09:20:26 <mauke> overscore: String is encodingless
09:20:46 <ManateeLazyCat> ben: Example, GTK+ editor widget need content must be UTF-8 encoding.
09:21:06 <ManateeLazyCat> ben: But some low-level library, such as GIO, use byte-array.
09:21:41 <R3van> Saizan: Ok the next thing is:
09:21:42 <R3van> data Single = a | b | c | d
09:21:42 <R3van> data SingleWithInteger = SingleWithInteger {number :: Integer, single :: Single}; instance ......
09:21:42 <R3van> Now i need the eq in Single ... how to write this??
09:21:44 <augur> oh dear
09:21:59 <augur> it seems either Chris Barker or John Pryor has some knowledge of haskellbot
09:22:01 <ben> ManateeLazyCat: Right
09:22:14 <augur> Q: Would there be any way to hide that bit of plumbing behind the drywall?
09:22:15 <augur> A: Yes! You can do so with a monad!
09:22:22 <ben> ManateeLazyCat: But then where does String come in if you want either utf-8 or byte array?
09:22:25 <augur> x.x
09:22:35 <Saizan> R3van: this is essentially the same as before
09:23:07 <R3van> i used
09:23:07 <R3van> Single = a|b|c dering Eq .. will this work??
09:23:29 <aavogt> R3van: you need to capitalize constructors (in Single)
09:23:30 <Saizan> R3van: you need to pay attention to what has to be uppercase
09:23:30 <mauke> R3van: no, that's a syntax error
09:23:35 <ManateeLazyCat> ben: We seen GTK+ documentation. :)
09:24:00 <ManateeLazyCat> ben: If GTK+ document said, must use UTF-8, we will use withUTFString convert String to CSTring
09:24:17 <Saizan> R3van: data Single = A | B | C | D deriving Eq will give you an Eq instance for Single
09:24:30 <overscore> Is this any better re, encoding
09:24:31 <ManateeLazyCat> ben: If document said, use byte string, we will use useAsCString convert ByteString to CString, then pass to C function.
09:24:33 <overscore> äéà
09:24:54 <R3van> Saizan: thank you very much guys... thanks thanks thanks
09:25:47 <overscore> ManateeLazyCat: another thing.... in the windows world, would String map correctly to the usual wchar_t ?
09:26:06 <overscore> since their sizes are essentially the same?
09:26:31 <ManateeLazyCat> overscore: I remember use withTString in Windows.
09:28:05 <ManateeLazyCat> ben: If C function use byte string, we pass ByteString in, about how to handle encode of ByteString, we don't care, user need hansle those self.
09:28:45 <ben> Right
09:30:04 <ManateeLazyCat> ben: When i binding GIO library, i want do some "automatic convert" job for user, but last i give up, it's impossible.
09:30:17 <ben> Yeah, that makes sense.
09:30:22 <ManateeLazyCat> ben: So i just build ByteString API let user handle encode problem.
09:32:25 <ManateeLazyCat> "Multitheads libcurl + Disk cache" works really well.....
09:33:04 <ManateeLazyCat> Just use 2MB cache memory whatever how big of download file...
09:34:00 <mauke> overscore: no, windows wchar_t is too small
09:34:27 <ManateeLazyCat> overscore: You can ask Zao about how to handle String in Windows.
09:36:43 <ManateeLazyCat> manatee-curl in developing, come soon. :) http://www.flickr.com/photos/48809572@N02/5195659632/lightbox/
09:37:10 <ManateeLazyCat> Build some log file next step, then "Download Manager" can continue download file after restart....
09:38:57 <ManateeLazyCat> overscore: If want some encode/decode operation, maybe Text is better choose.
09:38:59 <ManateeLazyCat> @package text
09:39:00 <lambdabot> http://hackage.haskell.org/package/text
09:39:25 <sgtarr> just curious. How many of you guys are using Haskell commercially?
09:39:57 <Martty> im using it to get chicks only
09:40:17 <yitz> sgtarr: those of us using it commercially don't have time to hang out in #haskell very much
09:40:38 <sgtarr> yitz: are you?
09:40:39 <ManateeLazyCat> sgtarr: Haskell can do everything.
09:40:47 <yitz> sgtarr: yes
09:40:57 <sgtarr> ManateeLazyCat: that's true, but it's nice to see members of the community actually using it to make money
09:41:21 <sgtarr> yitz: may I ask for what purpose?
09:41:49 <ion> manateelazycat: Can it do hot code updates as effortlessly as Erlang? (Iâ€™d love that.)
09:42:03 <ManateeLazyCat> @package pdynload
09:42:03 <lambdabot> http://hackage.haskell.org/package/pdynload
09:42:07 <ManateeLazyCat> ion: ^^^^
09:42:08 <yitz> sgtarr: sgml technical documentation  for an enterprise
09:42:13 <ion> manateelazycat: Thanks!
09:42:23 <ManateeLazyCat> ion: pdynload use GHC APIs.
09:42:25 <sgtarr> yitz: ok
09:42:38 <ManateeLazyCat> ion: But not perfect, i'm too busy not so much research it.
09:43:02 <ManateeLazyCat> ion: I will update pdynload new version when i have more tim
09:43:15 <ion> manateelazycat: Aye. Iâ€™ll keep an eye on it.
09:43:24 <ManateeLazyCat> ion: Don Stewart on research "Hot-Swap with Haskell"
09:44:00 <ManateeLazyCat> ion: plugins package also do that, but i'm not sure it can works with new ghc since it's not use ghc-api
09:44:05 <ManateeLazyCat> @package plugins
09:44:05 <lambdabot> http://hackage.haskell.org/package/plugins
09:44:10 <Int10h> Hi, just a quick question, getting a problem where the following code comes back with a "could not match" error:
09:44:13 <Int10h> subfunction :: (Integral a, RealFloat b) => a -> b -> b
09:44:13 <Int10h> subfunction trafficOffered numberServers = (fromIntegral(numberServers))/((fromIntegral(numberServers)) - trafficOffered)
09:44:24 <mauke> holy parens, batman
09:44:46 <Int10h> I appreciate that my code is probably horrible
09:44:52 <Int10h> :-)
09:44:54 <mauke> numberServers isn't integral, so why are you passing it to fromIntegral?
09:44:55 <ManateeLazyCat> ion: AFAIK, big problem of "hot-swap haskell" is memory leak
09:44:57 <Martty> numberServers is realfloat
09:45:17 <Int10h> *headdesk*
09:45:21 <sgtarr> fromIntegral(numberServers) / fromIntegral(numberServers) - trafficOffered
09:45:32 <ManateeLazyCat> ion: We need better policy to release unused object's memory after hot-swap
09:45:39 <mauke> sgtarr: (x) is the same as x
09:45:45 <ion> manateelazycat: ok
09:46:16 <Saizan> in haskell you use parentheses to group expressions, not to group arguments to a function, i.e. like in arithmetic or lisp
09:46:17 <mauke> numberServers / (numberServers - fromIntegral trafficOffered)
09:46:20 <ManateeLazyCat> ion: You can ask dons , he is better people answer those . :)
09:46:25 <sgtarr> mauke: thanks :)
09:47:33 <ManateeLazyCat> ion: pdynload can't update code after use cabal install new version.
09:47:44 <ManateeLazyCat> ion: Except that, it works well.
09:47:54 <ManateeLazyCat> ion: And perfect safety
09:48:04 <Int10h> Had my arguments around the wrong way
09:48:40 <augur> does anyone have a simple-enough example of how the reader monad works? particularly, a relatively simple evaluation trace?
09:48:46 <Pete_> Test
09:49:45 <mauke> augur: uh, it's just function parameters
09:49:55 <Int10h> Hmm, still getting a problem with:
09:49:57 <Int10h> subfunction :: (RealFloat a, Integral b) => a -> b -> b
09:49:58 <Int10h> subfunction trafficOffered numberServers = fromIntegral numberServers / (fromIntegral numberServers - trafficOffered)
09:50:01 <augur> mauke: that doesnt help me :P
09:50:02 <ManateeLazyCat> Bye all, coding... thanks help. :)
09:50:34 <mauke> Int10h: error message?
09:50:45 <mauke> Int10h: oh, I see
09:50:49 <Int10h> subfunction :: (RealFloat a, Integral b) => a -> b -> b
09:50:50 <Int10h> subfunction trafficOffered numberServers = fromIntegral numberServers / (fromIntegral numberServers - trafficOffered)
09:50:52 <mauke> that function returns a, not b
09:50:52 <Int10h> whoops
09:50:58 <Int10h> Ah
09:51:16 <Int10h> oh of course
09:51:19 <Int10h> I'm sorry
09:51:23 <Int10h> thanks for your help
09:53:48 <cpa> hi there
09:53:58 <cpa> I have some trouble with the record syntax
09:54:17 <ben> Yeah, it is pretty icky.
09:55:04 <cpa> I can't have in the same module fields with the same name but from different datatypes
09:55:32 <cpa> what's the best thing to do?
09:56:05 <ben> Put them into different modules and import them qualified, maybe.
09:57:57 <cpa> it's a pity, but I'll do that, I guess
09:59:24 <Int10h> Got another funny one here:
09:59:26 <Int10h> subfunction :: (RealFloat a, Integral b) => a -> b -> a
09:59:26 <Int10h> subfunction trafficOffered numberServers = (fromIntegral (power trafficOffered numberServers))
09:59:54 <Int10h> Power function is:
10:00:08 <aavogt> @type (^)
10:00:09 <lambdabot> forall a b. (Num a, Integral b) => a -> b -> a
10:00:17 <Int10h> power :: (Num a, Num b) => a -> b -> a
10:00:17 <Int10h> power x 0 = 1
10:00:18 <Int10h> power x n = x * power x (n-1)
10:00:24 <aavogt> @src (^)
10:00:24 <lambdabot> x ^ 0            =  1
10:00:24 <lambdabot> x ^ n | n > 0    =  f x (n-1) x
10:00:24 <lambdabot>   where f _ 0 y = y
10:00:24 <lambdabot>         f x n y = g x n
10:00:24 <lambdabot>           where g x n | even n  = g (x*x) (n `quot` 2)
10:00:26 <lambdabot>                       | otherwise = f x (n-1) (x*y)
10:00:28 <lambdabot> _ ^ _            = error "Prelude.^: negative exponent"
10:00:32 <aavogt> Int10h: that one is better
10:00:40 <ben> use a goddamn pastebin, lambdabot >:[
10:00:53 <aavogt> since it does less multiplications:
10:01:03 <aavogt> > x ^ 7 :: Expr
10:01:05 <lambdabot>   x * x * (x * x) * (x * x * x)
10:01:25 <aavogt> hmm, that's expanded too much
10:01:43 <Int10h> So yeah getting a nasty message after using the first code.
10:01:57 <Int10h> power :: (Num a, Num b) => a -> b -> a
10:01:57 <Int10h> power x 0 = 1
10:01:57 <Int10h> power x n = x * power x (n-1)
10:02:05 <Int10h> bugger
10:02:16 <Int10h> Could not deduce (Integral a)
10:02:16 <Int10h>       from the context (RealFloat a, Integral b)
10:02:16 <Int10h>       arising from a use of `fromIntegral' at test2.hs:13:44-92
10:02:33 <Int10h> That message when calling the power function from the code above
10:03:16 <aavogt> if you leave off type signatures, some of your problems will go away
10:03:40 <Int10h> Hmm okay
10:03:55 <Cale> (You can then ask GHCi for the types)
10:04:01 <kmc> then you should use :t and put the sigs back on
10:04:28 <Cale> Though, this isn't always the best way to go, sometimes when you're not sure exactly what the types of things ought to be, it's a useful trick.
10:04:33 * hackagebot hamlet 0.6.0.2 - Haml-like template files that are compile-time checked  http://hackage.haskell.org/package/hamlet-0.6.0.2 (MichaelSnoyman)
10:11:33 <litb> is  power :: (Num a, Num b) => a -> b -> a  the same as   power :: (Num a) => a -> a -> a  ?
10:11:44 <litb> or does the second not allow    power 3.1 3  ?
10:12:02 <mauke> litb: no and no
10:12:30 <mauke> the latter doesn't allow power (3 :: Double) (3 :: Int), though
10:14:21 <litb> oh
10:14:42 <mauke> > [3.1, 3]
10:14:43 <lambdabot>   [3.1,3.0]
10:14:53 <litb> 3 is a Num  and 3.1 is a  Fractional
10:14:58 <litb> ghci says
10:15:02 <mauke> yes
10:15:03 <litb> i thought Num is a class 
10:15:08 <mauke> it is
10:15:13 <litb> why does it not print the type when i say :t 3 
10:15:16 <mauke> it does
10:15:24 <mauke> :t 3
10:15:24 <lambdabot> forall t. (Num t) => t
10:15:27 <litb> hmm
10:15:32 <mauke> t is the type
10:15:36 * hackagebot web-routes-quasi 0.6.1.2 - Define data types and parse/build functions for web-routes via a quasi-quoted DSL  http://hackage.haskell.org/package/web-routes-quasi-0.6.1.2 (MichaelSnoyman)
10:15:58 <litb> mauke: i don't understand. 
10:16:05 <litb> does that mean   3  is polymorphically typed?
10:16:18 <mauke> yes
10:16:20 <mauke> :t []
10:16:21 <lambdabot> forall a. [a]
10:17:06 <mauke> > (3 :: Int, 3 :: Integer, 3 :: Float, 3 :: Double, 3 :: Rational, 3 :: Complex Double)
10:17:07 <lambdabot>   (3,3,3.0,3.0,3 % 1,3.0 :+ 0.0)
10:17:09 <litb> so  3 could be a Double and or an Int . but it doesn't decide at that point to it says it's an  Int  ?
10:17:15 <litb> err. a Num
10:17:23 <litb> ohh!
10:17:50 <mauke> > 3 :: String
10:17:51 <lambdabot>   No instance for (GHC.Num.Num GHC.Base.String)
10:17:51 <lambdabot>    arising from the literal `...
10:17:52 <mauke> aww
10:18:26 <litb> if i say   power 3 3.1  what type will  a   be  ?
10:18:40 <sipa> :t power
10:18:41 <lambdabot> Not in scope: `power'
10:18:43 <mauke> what's the type of power?
10:18:54 <litb> power :: (Num a) => a -> a -> a
10:19:02 <sipa> a will be double in that case
10:19:03 <mauke> it will be defaulted to Double
10:19:21 <litb> ah it does a topological sort for the most fitting type
10:19:28 <mauke> hah
10:19:43 <litb> hm
10:19:46 <mauke> it only considers Integer and Double
10:20:12 <sipa> not Int ?
10:20:22 <litb> 3 is   Num   (poly)  and 3.1  is Fractional
10:20:33 <sipa> :t 2000000000 + 2000000000
10:20:34 <lambdabot> forall t. (Num t) => t
10:20:42 <sipa> right
10:20:49 <litb> but Fractional is Double   . and  Double is a  Num   so it takes  Double   ?
10:21:03 <litb> err sorry that makes no sense :(
10:21:29 <thom_logn> is there a browser that will let you view functions grouped by their type signature?
10:21:36 <mauke> Fractional is a subclass of Num
10:22:09 <mauke> normal typechecking gives you power 3 3.1 :: (Fractional a) => a
10:22:37 <Saizan> thom_logn: on hoogle or hayoo you can search by the type
10:22:38 <mauke> displaying the result requires a concrete type, so it tries Integer first (fails because Integer isn't an instance of Fractional), then Double
10:23:19 <thom_logn> thanks!
10:25:13 <aristid> :t power
10:25:14 <lambdabot> Not in scope: `power'
10:27:05 <sipa> @let { power :: Num a => a -> a -> a; power x 0 = 1; power x n = x * power x (n-1) }
10:27:05 <lambdabot>  <local>:2:0: parse error on input `{'
10:27:13 <sipa> @let power :: Num a => a -> a -> a; power x 0 = 1; power x n = x * power x (n-1)
10:27:14 <lambdabot>  Defined.
10:27:18 <sipa> :t power
10:27:19 <lambdabot> forall a. (Num a) => a -> a -> a
10:27:36 <sipa> > power 2 10
10:27:37 <lambdabot>   1024
10:27:50 <mauke> > power (-2) (-2)
10:27:51 <lambdabot>   *Exception: stack overflow
10:28:09 <mauke> > power pi pi
10:28:10 <lambdabot>   *Exception: stack overflow
10:28:22 <b_jonas> aristid: they're operators, called ^ and ^^ and **
10:28:26 <thom_logn> ug, hoogle's sytle sheets are evil
10:28:59 <aristid> b_jonas: yeah, but mauke used power as a function, which confused me.
10:29:08 <thom_logn> descriptions dont wrap, they jut truncate a single line at the right edge of the screen no matter what the font size
10:29:09 <mauke> what, me?
10:29:32 <thom_logn> so you have to make it a tiny font to read
10:30:14 <mauke> thom_logn: or you could click on the [+]
10:30:26 <onteria> I'm liking these video lectures by Erik Meijer. He'll explain how something like head or tail should function, then I look at the source code in ghc and it's pretty much verbatim.
10:32:28 <thom_logn> Ah! Thank you!
10:33:49 <aristid> mauke: power 3 3.1 :: (Fractional a) => a
10:33:57 <aristid> :t 3  ^ 3.1
10:33:58 <lambdabot>     Ambiguous type variable `t' in the constraints:
10:33:58 <lambdabot>       `Fractional t'
10:33:58 <lambdabot>         arising from the literal `3.1' at <interactive>:1:5-7
10:34:02 <sipa> :t power 3 3.1
10:34:03 <lambdabot> forall t. (Fractional t) => t
10:34:25 <mauke> aristid: yes, because I was explaining something about the types. I didn't invent power
10:57:57 <Martty> fmap rules
10:58:04 <Martty> amen
10:58:20 <opqdonut> :t fmap fmap fmap fmap fmap fmap (+)
10:58:21 <lambdabot> forall a (f :: * -> *) (f1 :: * -> *). (Functor f, Functor f1, Num a) => f a -> f (f1 a -> f1 a)
10:58:51 <aristid> Martty: fmap is our master!
10:59:04 <havranek78> Hello, I am completely new there, so sorry for asking maybe naively... I have just found strange behaviour of the Hsndfile installed package, which I cannot explain to myself - who should I ask for help??
11:06:57 <danharaj> 01head of scanl = foldl?
11:07:11 <opqdonut> last of scanl
11:07:14 <danharaj> er yes
11:07:17 <danharaj> what I meant
11:07:19 <opqdonut> yep
11:07:37 <danharaj> I mean, even has the same properties when bots are floating around?
11:10:28 <Saizan> i'd think so
11:10:39 <Saizan> it should even stack overflow in the same way :)
11:11:09 <onteria> havranek78:  I'd recommend contacting the maintainer if you think it's a bug. More information on the maintainer and other bits about hsndfile can be found here: http://hackage.haskell.org/package/hsndfile
11:11:12 <danharaj> heh
11:13:44 <havranek78> onteria: thank you, I will try it
11:13:51 <__philip> hi
11:16:05 <__philip> Can anyone help me with a very basic   type class / instance  example? I don't quite know how to do that and what I'm doing wrong...  
11:16:27 <__philip> it's about a class Moveable of graphical objects in 2d
11:16:30 <__philip> http://pastebin.com/Wiu9THhM
11:17:41 <__philip> here I just want do define a Point as a Moveable object
11:18:02 <__philip> but it doesn't work that way and I'm not sure how to fix it
11:18:44 <jmcarthur> __philip: your Point type has Double elements, but your type signature says that these transformations should be able to take arbitrary Nums
11:19:15 <mauke> also, the Moveable a => part makes no sense
11:19:32 <jmcarthur> yeah, the a doesn't appear anywhere else
11:20:35 <jmcarthur> __philip: you need to either add a type parameter to Point and make its elements polymorphic, or you need to make the types of the transformation parameters just be Double instead of arbitrary Nums
11:20:51 <jmcarthur> __philip: and remove that Moveable a => thing because it doesn't do anything
11:21:35 <__philip> how do I do the type parameter thing?
11:21:45 <jmcarthur> data Point a = P a a
11:21:55 <__philip> oh :)    
11:22:16 <jmcarthur> __philip: if you do that, you will also need to change the instance to something like:   instance Num a => Moveable (Point a) where ...
11:22:37 <jmcarthur> __philip: and the type class itself will also need to change
11:22:43 <jmcarthur> it gets weird, actually :)
11:22:50 <jmcarthur> maybe don't use a type class
11:23:11 <__philip> ^^
11:23:52 <__philip> so I just change all Nums to Double
11:25:14 <danharaj> Hey, guys. If I gave you a function accum :: Stream a -> Stream [a], is it obvious enough what it does?
11:25:44 <aristid> danharaj: depends on what Stream is
11:26:04 <danharaj> In this case it is essentially a sequence of values at given times.
11:26:09 <aristid> :t scanl (+) 0
11:26:09 <lambdabot> forall a. (Num a) => [a] -> [a]
11:26:32 <aristid> danharaj: hmm, then i don't really know what it does, no
11:26:36 <danharaj> aw.
11:26:56 <aristid> danharaj: Stream a -> Stream a is what i would expect for the name accum
11:27:11 <aristid> > scanl (+) 0 [1,2,3]
11:27:11 <lambdabot>   [0,1,3,6]
11:27:21 <Saizan> each list contains the values up to that point?
11:27:26 <danharaj> yes
11:27:31 <__philip> thank you, mauke , jmcarthur :)
11:27:31 <danharaj> should I name it better?
11:27:49 <aristid> danharaj: oh, i thought accum would sum it together instead of just adding them to a list :)
11:28:03 <Saizan> without a Num a => you can't sum :)
11:28:08 <danharaj> aristid: I have accumWith :: Stream a -> b (b -> a -> b) -> Stream b, for your scanl pleasures.
11:28:15 <aristid> yay.
11:28:21 <danharaj> b -> (b -> ..&
11:28:23 <danharaj> bleh
11:28:26 <danharaj> you know what I meant
11:28:37 <iago> is there some library for typed communication channels? something like Chan :: * -> *, put :: Binary a => Chan a -> a -> IO (), getContents :: Binary a => Chan a -> IO [a] ... ? The most near I have found on Hackage was binary-communicator
11:28:48 <aristid> danharaj: and accum xs = accumWith xs [] (:) ?
11:29:01 <Saizan> iago: Control.Concurrent.Chan ?
11:29:03 <danharaj> aristid: almost.
11:29:10 <danharaj> The values are listed in the reverse of that order.
11:29:21 <Saizan> iago: or do you want something that'd work between processes/network ?
11:29:28 <aristid> danharaj: how is accum defined?
11:29:56 <iago> Saizan, the last, I mean network communication
11:30:24 <Saizan> iago: i'm pretty sure there's something but i wouldn't know the name of the library
11:31:23 <danharaj> aristid: I don't know if there's a better way but accum xs = accumWith xs [] (\x -> (x ++).return)
11:31:33 <iago> Saizan, can you remember some datatype or something ? (to search by hoogle)
11:31:35 <danharaj> I am always embarassed to share my ugly lambdas :[
11:32:25 <aristid> danharaj: it also seems pretty inefficient
11:32:36 <danharaj> Is there an appendToEnd function?
11:32:49 <aristid> appending to the end is inefficient for lists
11:33:02 <danharaj> yeah that is always a downside
11:33:06 <danharaj> a bit annoying too
11:33:12 <aristid> danharaj: why don't you just reverse the order?
11:33:29 <danharaj> because I think I prefer to have the list order be the same as the time order
11:33:30 <gio123> does one has this paper:http://portal.acm.org/citation.cfm?id=35645.35646
11:33:32 <aristid> Seq has efficient snocing, i think
11:33:40 <danharaj> I might use Seq then.
11:33:47 <danharaj> At this point this is just a prototype
11:33:50 <gio123> ?
11:33:58 <gio123> does one has this paper:http://portal.acm.org/citation.cfm?id=35645.35646  
11:34:00 <gio123> ?
11:37:30 <Rotaerk> gio123, learn to english plz
11:37:33 <cole> What text editor/ ide do you guys use?
11:37:35 <sgtarr> haha.
11:37:57 <sgtarr> sometimes I wonder, if people can't spell things properly, how can they code in haskell?
11:38:40 <mauke> cole: vim
11:38:50 <danharaj> notepad++
11:38:58 <hvr> emacs + scion
11:39:00 <cole> Anyone use leksah?
11:39:07 <monadic_kid> i do
11:39:11 <danharaj> honestly the only ide you need is a syntax highlighter and a console window open to ghci
11:39:29 <danharaj> and a browser open to hackage and hoogle :p
11:40:25 <monadic_kid> danharaj: leksah is pretty much all of that, with methodology of using cabal
11:40:43 <cole> Does haskell provide object oriented constructs?
11:40:54 <mauke> not really
11:41:24 <danharaj> monadic_kid: fair enough. It also uses gtk which makes it insufferable on windows.
11:41:49 <iago> danharaj, so IDEs exists why
11:42:23 <danharaj> iago: IDE's for languages like C make sense because at the very least they manage the clusterfuck of compexity required to actually build anything non-trivial.
11:42:23 <monadic_kid> danharaj: I use windows, but main do home dev on fedora linux in virtualbox
11:42:36 <danharaj> In a language with a sane module system, IDE's are less important.
11:42:58 <iago> danharaj, you don't like refactoring features so
11:43:18 <paolino> cole, haskell has closures 
11:43:28 <sm> sgtarr: maybe they spell quite well in languages you don't know ? :)
11:43:57 <danharaj> iago: I don't refactor often enough to justify an IDE. YMMV
11:44:31 <iago> well, if I would have to do my own netbeans, I won't do it, sure
11:44:43 <iago> but if it is done, I use it... and some stuff becomes simpler
11:45:33 <cole> Is haskell a language which is gaining in popularity would you say?
11:45:35 <nostrand> danharaj: and an irc-client with #haskell ;)
11:45:44 <danharaj> nostrand: yes :p
11:45:51 <danharaj> cole: it is.
11:45:52 <gio123> iago: otelo?
11:46:10 <cole> Recently?
11:46:13 <iago> gio123, what?
11:46:53 <gio123> iago: othello?
11:47:25 <gio123> iago: Shakespeare's Othello?
11:47:27 <onteria> I mainly use vim with haskellmode for my dev environment
11:48:12 <iago> gio123, Iago is a very common Galician name, Tiago in portuguese, if you prefer
11:48:20 <fireandice> I plan to turn the Haskell world inside and out, by convincing Apple to adopt it.
11:48:46 <jmcarthur> that would be a feat, indeed
11:48:48 <gio123> are u from portugal?
11:48:50 <onteria> fireandice:  It would be nice to be able to do iPhone development in haskell
11:48:51 <AmunRa> fireandice: do you work for Apple?
11:48:57 <monadic_kid> IDE is just a sophicated editor configuration that does parsing and lots of tools to make you productive and help you debug, things like be able to go to defintions/declarations using short-cuts you can't really do that with a more simple editor
11:49:00 <c_wraith> cole: there are ongoing efforts to improve the language and implementations in ways to make it better for writing high-performance general-purpose software.  So yes, it's gaining in popularity, and continuing to do so
11:49:05 <danharaj> I want Microsoft to adopt Haskell support for its toolchains.
11:49:09 <jmcarthur> gio123: please stay on topic
11:49:18 <gio123> ok
11:49:21 <fireandice> No, but I plan to do, plus I have some contacts there.
11:50:32 <hvr> danharaj: I'm not sure it's a good think when microsofts embraces stuff... they tend to interprete standards their own way
11:50:38 <onteria> Speaking of Microsoft, F#'s objective is kind of confusing for me. It seems like some kind of hybrid that can do either imperative, functional or object oriented programming
11:50:58 <fireandice> On iPhone development, you just need to compile the Haskell into LLVM bytecode.  Plus, you could make a Xcode frontend, which Apple will allow.
11:51:07 <iago> onteria, the common programmer is not ready for Haskell
11:51:08 <monadic_kid> onteria: it is, it's a derivative of ocaml
11:51:19 <danharaj> hvr: Haskell thrives on different interpretations of standards.
11:51:34 <danharaj> well, something like that.
11:51:49 <monadic_kid> hvr: GHC Haskell is supported by microsoft research
11:52:18 <AmunRa> MS tried to write a .NET version but failed.. didn't they?
11:52:41 <monadic_kid> AmunRa: yes and the result of that is F#
11:52:42 <onteria> also iirc Simon Peyton Jones is an MS employee
11:52:51 <danharaj> SPJ works for MSR
11:52:55 <danharaj> so yes, technically.
11:53:12 <danharaj> I think it's more like Microsoft is the Simons' patrons
11:53:25 <danharaj> "Do cool shit, we'll pay you."
11:53:54 <AmunRa> I agree.. didn't quite see the point of F# (and I work in the financial industry -- which is supposed to be one of the main users)
11:54:40 <fireandice> Does anyone here know C, cause then they could lead a team to write a Xcode, and Cocoa frontend to this.  Also, that would solve your iPhone development dillema Onteria
11:55:05 <onteria> fireandice:  here's to hoping :)
11:55:40 <monadic_kid> fireandice: I didn't read everything you've written but you know a port of GHC does exist for iphone?
11:55:42 <fireandice> I would program it myself, except that I don't know C.
11:56:18 <fireandice> Whoops, when I said C, I meant Objective-C.
11:57:36 <Pete_> type a = Int, type b = [a], type c = [b]. How would I list all of c?
11:58:18 <monadic_kid> Pete_: what do you mean
11:58:20 <monadic_kid> Pete_: what do you mean
11:58:26 <monadic_kid> accident
11:58:56 <monadic_kid> Pete_: how to make a list of C?
11:58:59 <Pete_> Say I wanted to +1 to the whole list of b (which is type c) ?
11:59:06 <fireandice> You realize that I am typing this from a Apple Store in Mishawaka, with the iOS SDK at the ready.
11:59:34 <danharaj> No, but I do realize that your name is a product of a brand of condoms :)
11:59:52 <Pete_> Say it was defined: method :: c -> Int
12:00:02 <mauke> Pete_: that makes no sense
12:00:04 <Pete_> Say I wanted to sum up all of type c
12:00:06 <fireandice> On the port, what I'm saying is, make the port compile to LLVM, and then plug the code into Xcode, and the iOS SDK
12:00:09 <Pete_> Sorry yes I realised that
12:00:15 <mauke> Pete_: and type a = Int is a syntax error
12:00:31 <Pete_> it is?
12:00:53 <monadic_kid> Pete_: types start with captial letters
12:01:03 <Pete_> Ah I didnt not realise that
12:01:12 <fireandice> I mean I know C, but not beyond outputting strings.
12:01:33 <Pete_> so: type A = Int, type B = [a], type C = [b]. What is the sum of all of type c?
12:01:36 <aristid> fireandice: then you don't know C.
12:01:38 <Pete_> How would I do that
12:01:52 <mauke> Pete_: still doing it wrong; also, what's the point of all those type synonyms?
12:02:05 <mauke> foo :: [[Int]] -> Int
12:02:14 <mauke> foo = sum . map sum
12:02:19 <Pete_> so: type A = Int, type B = [A], type C = [B]. What is the sum of all of type c? lol
12:02:25 <fireandice> I know a lot more of Python, although Haskell is a good language also.  I would leave implementing Haskell in Python as a suggested coding excercise.
12:02:38 <Pete_> Ah you need to bracket up the definition also
12:02:42 <Pete_> :D
12:02:43 <Pete_> Thanks
12:02:48 <mauke> huh?
12:02:53 <monadic_kid> fireandice: What are you trying to do?
12:03:11 <Pete_> *bracket it up in the definition
12:03:30 <monadic_kid> Pete_: actually he doesn't
12:03:50 <fireandice> I'm trying to get Lisp and Haskell on the iPlatform, and make the runtimes more accsesible to Python programmers like me.  :)
12:04:41 <Pete_> Ok lets try: type Person = String, type Class = [Person], type School = [Class]. How would I list all the people in the school?
12:04:46 <cole> If I'm setting up an environment to do haskell development, what would I typically need? Is there a walk through someone of how to set up haskell?
12:05:00 <danharaj> haskell platform
12:05:15 <monadic_kid> fireandice: runtimes more accessible for Python programmers? you want someone to re-write the runtimes in Python?
12:05:42 <ezyang> cole: What operating system? 
12:05:49 <cole> linux
12:05:52 <fireandice> And either way, I would like to implement Python in Haskell, and Vice-versa.  I tend to think of Haskell as a compiled Python
12:05:55 <ezyang> What distribution? 
12:06:00 <cole> ubuntu
12:06:10 <ezyang> Install GHC, and then go install the haskell platform 
12:06:34 <cole> "haskell platform"?
12:06:35 <monadic_kid> cole: Haskell Platform sets you up for haskell enviorment but not an ide or editor 
12:07:19 <aristid> fireandice: haskell is not a compiled python at all oO
12:07:23 <ezyang> http://hackage.haskell.org/platform/ 
12:07:49 <monadic_kid> aristid: he didn't mean that it is but he sees it like that in some way
12:08:29 <monadic_kid> fireandice: have you heard of berp? https://github.com/bjpop/berp
12:09:24 <monadic_kid> fireandice: berp is Python 3 implementation in Haskell, ghc 7 has offical support for an LLVM backend
12:09:56 <fireandice> oh, then it's all up to implementing the Xcode frontend interface
12:10:49 <fireandice> And on Berp, what I meant was exactly the opposite, by the way, I wonder what Guido's heard of this
12:11:47 <fireandice> Berp might be considered a Python Compiler to some extent.
12:12:20 <fireandice> Which is what the Python commumity has been wanting to some extent for 20 years.
12:13:17 <dolio> Tail call optimization?
12:13:31 <fireandice> Might the app storm begin.
12:15:15 <monadic_kid> "Berp is an implementation of Python 3. At its heart is a translator, which takes Python code as input and generates Haskell code as output. The Haskell code is fed into a Haskell compiler (GHC) for compilation to machine code or interpretation as byte code."
12:15:32 <monadic_kid> "Berp provides both a compiler and an interactive interpreter. For the most part it can be used in the same way as CPython (the main Python implementation). See the page Using Berp for information about its use. Please note that Berp is currently in a very early stage of development. Many aspects of Python 3 are not yet implemented, and there are lots of rough edges to the code.
12:15:47 <fireandice> Either way...
12:16:21 <cole> Do most of you do development on windows or linux?
12:16:39 <monadic_kid> cole: majority do on unix
12:16:45 <aristid> cole: hard to answer for "most of you"
12:16:47 <monadic_kid> cole: i mean *nix
12:17:20 <fireandice> We'll also need a Objective-C bridge, to make sure it can interface with the Cocoa Touch GUI Libraries.
12:19:23 <fireandice> Shall we start a petition, and project.  And, I don't have Internet at home, but I will come December 17th
12:21:26 <fireandice> how to do, how to do.
12:22:13 <fireandice> Sorry for the temporary disconnection, I'm the same FireandIce that was on here previously
12:22:31 <fireandice> And, I happen to be 11 years old, to be honest with you
12:26:50 <aristid> learning haskell at a young age is a good idea
12:28:27 <fireandice> yeah, plus I had to wrangle with C as a first language; never really got it
12:30:29 <fireandice> if you want my email, which will be open to anyone on this IRC room, it's tufflidragon@gmail.com
12:32:04 <fireandice> btw, I was the one who mentioned the iPhone backends of Haskell, and made the Python-Haskell remark, just to prove that I'm the same one
12:34:25 <monadic_kid> fireandice: I recommend that you don't give out your email so easily in a public chat room
12:35:21 <monadic_kid> well it's a bit late for that now
12:35:29 <ezyang> meh. You can find my email on my website :-P 
12:35:32 <fireandice> BTW, Haskell is the best compiled language I've used yet.  I mean, Python may edge it out just a bit in my opinion, but Haskell is the best all around language.
12:36:02 <monadic_kid> ezyang: his 11, so i'm a bit concerned
12:36:20 <fireandice> I can always make a backup, likewise destroy my Gmail, since I'm a expert hacker for my age
12:36:24 <ezyang> Ah. 
12:37:02 <monadic_kid> *he's 11
12:37:21 <fireandice> And I happen to be one of the few people my age in the Continental States to use Linux 24/7
12:37:30 <monadic_kid> heh
12:38:18 <ezyang> fireandice: What kinds of projects do you work on? 
12:38:44 <monadic_kid> fireandice: you've seen this project before? http://projects.haskell.org/ghc-iphone/ there might be a problem with writing programs in other languages for iphone because of the license agreement in the SDK
12:39:20 <fireandice> Just contribute code to some Python projects, and as soon as I've mastered it, Haskell.
12:39:50 <ezyang> No need to wait till mastery to contribute :^) 
12:39:56 <monadic_kid> fireandice: from what I can remember the iphone sdk license only permits programs that  are objective-c and use scripting languages
12:40:15 <shachaf> monadic_kid: Didn't Apple change that?
12:40:30 <monochrom> license is mutable. perhaps tomorrow a new license adds haskell.
12:40:34 <monadic_kid> shachaf: what is it now? they chance it to many times
12:40:44 <monadic_kid> change it to many times
12:41:14 <shachaf> I think you can use whatever language you like nowadays.
12:41:16 <Saizan> *too
12:41:42 <osaunders> I have Â«data Bar a = Bar; instance Functor Bar where fmap f x = xÂ». GHC says this is a type error because expected Â«Bar bÂ» but inferred Â«Bar aÂ». Why is this a problem? More specifically, what is it about the type system that prevents me from writing this and why was it introduced?
12:41:51 <shachaf> Not that it matters -- /me has no interest in using or developing for an iPhone for the exact reason that Apple can do and does this sort of thing.
12:42:04 <fireandice> BTW, look, I've read through the App Store Agreement, and it has stated since September that you may use any programming language as long as it is compiled through Xcode.  Hence, the frontend suggestion.  I think that their primary concern is that it won't comply with their Human Interface Guidelines, so it'll seem weird to iPhone users.
12:42:15 <shachaf> osaunders: The value "x" is of type "Bar a".
12:42:24 <shachaf> osaunders: instance Functor Bar where fmap f x = Bar should work fine.
12:42:33 <Saizan> osaunders: because (x :: Bar a) there, so it's not also Bar b, because a /= b
12:42:43 <fireandice> Yeah, I also slightly lean MeeGo over iPhone.
12:42:49 <nus> @elite script kiddies
12:42:49 <lambdabot> 5criPt xiddiES
12:43:16 <fireandice> I also happen not to be a script kiddie, also some of you seem to think that
12:43:30 <Saizan> osaunders: you'd need extra effort from the type system to recognize the type parameter doesn't matter
12:43:55 <monadic_kid> fireandice: you saw the link? is that what you're looking for as well?
12:44:06 <osaunders> Saizan: If a can be anything why can't it be b?
12:44:37 <shachaf> osaunders: a is a *specific* anything in that case.
12:44:42 <fireandice> maybe, it might be in the early stages, but it looks promising.  Anyway, I don't know Python 3, only Python 2
12:44:49 <ezyang> osaunders: Do you know first-order logic? 
12:44:55 <Saizan> osaunders: when you call fmap you can pick whatever you like for both a and b, this means that the implementation of fmap can't assume anything about them
12:45:11 <monadic_kid> fireandice: not Berp, ghc for iphone
12:45:13 <osaunders> ezyang: Maybe
12:45:29 <shachaf> fireandice: Are the versions really so different that you can say "I know 2 but not 3"?
12:46:06 <osaunders> Saizan: Ah, OK
12:46:10 <fireandice> Oh, well once they integrate it with Xcode, and make it interface with Cocoa Touch, bon voyage.
12:46:11 <ezyang> So consider the statement, "For all real numbers x and y, x = y". Is this true? 
12:46:30 <osaunders> No
12:46:33 <fireandice> Yes, 3 is radically different from 2
12:46:38 <aristid> ezyang: depends
12:46:46 <nus> fireandice, you mean you're not wannabe packet warrior, don't you?-)
12:46:50 <ezyang> aristid: Uh oh. :-) 
12:47:08 <ezyang> aristid: Is this maybe the empty universe constraint? 
12:47:21 <fireandice> no, I'm not, although I don't know what you're saying
12:47:31 <ezyang> osaunders: The way people usually end up reasoning about this sort of thing has a fancy name "skolemization" 
12:47:43 <ezyang> Where we pretend a and b are opaque values that are not equal to each other. 
12:48:39 <ezyang> It's easy to do with normal polymorphic definitions, because we only have universal quantification, and it's always at the beginning of the statement (prenex form), so you just "forget" about the quantifier. 
12:48:50 <j3ssi> hi
12:49:38 <ezyang> Which is the sense shachaf was using. 
12:50:05 <osaunders> Right
12:50:22 <osaunders> So by default all type variables represent all possible things.
12:50:43 <osaunders> And so a and b can't be safely assumed equal.
12:50:47 <j3ssi> can someone tell me how I complete this $$ data (Num a) => BinaryTree a = Empty | Fork (BinaryTree a) a (BinaryTree a) $$ that a is an Integer ?
12:51:02 <ezyang> Yep. 
12:51:08 <ezyang> "Of course, you could add a ~ b :-)" 
12:51:28 <Botje> j3ssi: you simply use "BinaryTree Integer" in your code
12:51:48 <ezyang> Though not in your functor definition, since the instance won't let you introduce that constraint anywhere. 
12:52:38 <j3ssi> with BinaryTree Integer I get a Problem with Empty
12:52:56 <monochrom> I don't get a problem with Empty.
12:53:09 <ezyang> not recently 
12:53:13 <ezyang> mix 
12:53:39 <osaunders> ezyang: I don't understand that last thing you said.
12:53:49 <osaunders> :t fmap
12:53:50 <lambdabot> forall a b (f :: * -> *). (Functor f) => (a -> b) -> f a -> f b
12:53:58 <ezyang> So, you can specify type equality in GHC by adding a ~ b to your type constraints. 
12:54:18 <ezyang> But the type of fmap is fixed, so you can't sneak it in. 
12:55:10 <osaunders> So I can do this? Â«monkey :: a ~ b. a -> bÂ»?
12:55:41 <ezyang> > (\x -> x) :: (a ~ b) => a -> b 
12:55:42 <lambdabot>   Overlapping instances for GHC.Show.Show (a -> a)
12:55:42 <lambdabot>    arising from a use of `...
12:56:01 <ezyang> > ((\x -> x) :: (a ~ b) => a -> b) 2 
12:56:02 <lambdabot>   2
12:56:13 <ezyang> It's kind of pointless in this case though :-) 
12:56:45 <osaunders> OK thanks for the help
12:56:50 <taktoa> I have a question
12:57:28 <taktoa> I have 3 functions: f(a, b) creates [IO c], g([c]) creates d, h(a, b, d) creates e. I need a function like this: i([a], [b]) creates IO [[e]]
12:57:48 <taktoa> how can I do it?
12:57:57 <aristid> :t ((\x -> x) :: (a ~ b) => a -> b)
12:57:58 <lambdabot> forall a. a -> a
12:58:24 <aristid> ezyang: are equality constraints in a language extension?
12:58:45 <aristid> and are there non-equality constraints?
12:58:51 <Botje> taktoa: can you give the proper types?
12:58:58 <taktoa> sure, one minute
13:00:59 <taktoa> I have 3 functions: f(Double, Double) creates [IO Bool], g([Bool]) creates Int, h(Double, Double, Double) creates Int. I need a function that does this: i([Double], [Double]) creates IO [[Int]]
13:01:17 <Botje> i meant haskell type signatures ..
13:01:24 <Botje> are you sure they're all double?
13:01:25 <taktoa> ok
13:01:29 <taktoa> yeah
13:01:32 <taktoa> here:
13:01:44 <taktoa> f :: Double -> Double -> [IO Bool]
13:01:55 <taktoa> g :: [Bool] -> Int
13:02:17 <taktoa> h :: Double -> Double -> Double -> Int
13:02:39 <taktoa> i :: [Double] -> [Double] -> IO [[Int]]
13:03:01 <shachaf> taktoa: What's the context for this? It's a bit strange to give types with no meaning behind them at all.
13:03:09 <mauke> i _ _ = return []
13:03:16 <taktoa> I'm making a mandelbrot set generator
13:03:28 <fireandice> sweet
13:03:43 <shachaf> taktoa: If you're doing that, why are you mixing IO up in all your computations?
13:03:44 <taktoa> that uses multiprocessing and OpenCL
13:03:52 <fireandice> and I meant that for Takatoa and the Mandelbrot set generator
13:04:08 <taktoa> I need to use Python for the OpenCL
13:04:33 <Botje> if you map f over the two lists of Double at the same time you get [[IO Bool]], if you sequence the inner list you get [IO [Bool]]
13:04:45 <Botje> and then you can apply g to each IO [Bool] in turn 
13:05:10 <Botje> but then you only have [IO Int], which you need to sequence to get IO [Int]
13:05:19 <Botje> so how would you get to IO [[Int]] :/
13:05:19 <aristid> :t join . join
13:05:20 <lambdabot> forall (m :: * -> *) a. (Monad m) => m (m (m a)) -> m a
13:05:20 <taktoa> what about h
13:05:31 <aristid> :t join . fmap join
13:05:32 <lambdabot> forall (m :: * -> *) a. (Monad m, Functor m) => m (m (m a)) -> m a
13:05:40 <Botje> h doesn't seem to be needed
13:05:48 <taktoa> you need every permutation of xval !! n and yval !! n
13:05:54 <taktoa> yes it is.
13:05:58 <taktoa> most definitely
13:06:28 * hackagebot yesod-examples 0.6.0.1 - Example programs using the Yesod Web Framework.  http://hackage.haskell.org/package/yesod-examples-0.6.0.1 (MichaelSnoyman)
13:06:32 <shachaf> taktoa: You're going to need to specify more than the types.
13:06:50 <taktoa> ok, lemme upload my code
13:06:56 <taktoa> to hpaste
13:08:34 <cole> Has anyone used any haskell statistis libraries?
13:09:36 <taktoa> http://hpaste.org/41682
13:09:42 <taktoa> ^ read the comments
13:10:49 <taktoa> err... sorry clcheck should be [Complex Double] -> [IO Bool]
13:11:17 <taktoa> man, sometimes the separation between pure and unpure code in haskell is really really frustrating
13:11:39 <taktoa> I only wanted to add one thing: substituting a python script for a function
13:11:44 <aristid> taktoa: eat is only partially defined
13:11:51 <taktoa> yet I have to uproot my entire code
13:12:08 <taktoa> aristid: it works for me
13:12:32 <aristid> taktoa: only for some input lists
13:12:39 <aristid> it will fail horribly for [1,2,3]
13:12:43 <taktoa> why?
13:12:52 <aristid> because that matches no clause
13:13:13 <taktoa> yeah, but the whole point is that it's separating a list into four tuples
13:13:36 <taktoa> and that list will _always_ be divisible by 4
13:13:40 <taktoa> in length
13:13:48 <aristid> well, fine, then add an error clause
13:14:01 <aristid> to document that input lists that are not divisible by four are illegal
13:14:57 <dom96> Using the function that Parsec provides, manyTill, how do i use it to parse anything up until a newline or eof?
13:16:17 <fireandice> I have to go, hope this will get spread, and the iPhone will eventually become a viable Haskell development environment.
13:16:23 <fireandice> Cheers
13:16:49 <taktoa> ok, I put in a comment about the restrictions of eat
13:17:06 <taktoa> back to the task at hand
13:18:04 <aristid> taktoa: the comments do not really indicate which problems you have
13:18:17 <taktoa> how so?
13:18:19 <cole> Why if:  map (^ 3) [1,2,3] 
13:18:23 <aristid> x <- (zipWithM mandelbool xvals) -- x :: [[Bool]] -- area that needs work
13:18:28 <aristid> ok, so it needs work. whatever.
13:18:39 <Botje> map return (read b::[Bool]) -- how can this return IO [Bool] ?
13:18:43 <Botje> that's [IO Bool], surely?
13:18:43 <taktoa> that's the area where the i function code goes
13:19:20 <Botje> change that into "return (read b :: [Bool])", then mandelbool is also IO [Bool]
13:19:25 <cole> Why if:  "map (^ 3) [1,2,3] => [1,8,27] and map (3 ^) [1,2,3] => [3,9,27]" does map (- 3) [1,2,3] => Error? 
13:19:30 <taktoa> Botje, I said that before
13:19:34 <aristid> mandelbool :: Double -> Double -> [IO Bool]
13:19:38 <taktoa> "err... sorry clcheck should be [Complex Double] -> [IO Bool]"
13:19:38 <aristid> this type looks wrong.
13:19:51 <aristid> well ok, or clcheck is wrong
13:19:59 <Botje> taktoa: and you should change it to IO [Bool], that's much easier to work with
13:20:11 <Botje> s/and/i'm saying/
13:20:13 <taktoa> I can do that easily
13:20:29 <Botje> and mandelbool should be applied to any possible combination of xvals and yvals, right?
13:20:32 <taktoa> by switching it to read b :: [Bool]
13:20:36 <taktoa> yes
13:20:39 <taktoa> permutations
13:22:12 <Botje> so that's [ mandelbool x y >>= \z -> return (x,y,z) | x <- xvals, y <- yvals ]
13:22:33 <taktoa> sorry, I haven't learned monads yet
13:22:34 <Botje> stick a sequence in front of that and you get IO [(Double, Double, Bool)]
13:22:59 <Botje> you're using them all over the place :P
13:23:05 <taktoa> well, I'm using IO
13:23:09 <taktoa> but not >>=
13:23:21 <Botje> do blocks are just sugar for >>=
13:23:40 <Botje> do z <- mandelbool x y; return (x,y,z) -- same thing
13:23:55 <taktoa> so you could write "do blah\nblah" as "blah >>= blah"
13:24:02 <Botje> rrroughly.
13:24:12 <taktoa> \n being a newline
13:24:13 <Botje> there's some extra rules.
13:24:25 <Botje> but that's what it boils down to
13:24:32 <taktoa> ok, thanks
13:24:51 <osaunders> I've just realized that my empty functor might have a use.
13:24:59 <Botje> so "sequence [ mandelbool x y >>= \z -> return (x,y,z) | x <- xvals, y <- yvals ]"
13:25:01 <osaunders> You can use it to store a type
13:25:09 <Botje> has type IO [(Double, Double, Bool)]
13:25:18 <Botje> and then you can do with that list what you want
13:25:44 <taktoa> wait, what?
13:25:57 <taktoa> oh.
13:26:09 <Botje> sequence :: [IO a] -> IO [a]
13:26:18 <taktoa> but wait
13:26:34 <taktoa> mandelbool outputs [Bool]
13:26:43 <Botje> IO [Bool].
13:26:43 <taktoa> er
13:26:45 <taktoa> yes
13:26:56 <taktoa> not IO Bool
13:26:59 <Botje> oops, yes.
13:27:14 <Botje> then it has type IO [(Double, Double, [Bool])]
13:30:34 <taktoa> then I map mandelnum over the [Bool]'s to turn it into [(Double, Double, Int)]
13:30:55 <taktoa> and I map mandelbrot over that
13:31:26 <Botje> so it becomes >>= \z -> return (x, y, mandelnum z)
13:33:17 <aristid> Botje: now the lambda looks more justified compared to point-free tuple sections :D
13:33:42 <Botje> aristid: "(x,y,) . mandelnum"
13:33:49 <Botje> with a return
13:33:50 <Botje> hmm :P
13:33:59 <Botje> yes :p
13:34:32 <aristid> Botje: yeah, that is somewhat more complex
13:34:39 <aristid> Botje: but you know what? fmap!
13:34:56 <Botje> hah!
13:34:58 <Botje> fmap to the rescue!
13:35:08 <aristid> fmap saves the day. again.
13:35:29 <Botje> and in caleskell it's ((x,y,) . mandelnum) . mandelbool x y
13:35:29 <SonOfLilit> Hi all!
13:35:42 <SonOfLilit> An algorithms question:
13:36:23 <osaunders> Botje: He doesn't want people calling it that.
13:36:47 <SonOfLilit> I have thousands of chores, each of one of dozens of chore types, to divide between hundreds of people with different preferences, and I'd like to balance fairness (and optimization of division) and runtime
13:36:48 <BMeph> osaunders: Then he'll be the only one who won't... ;)
13:36:56 <davidknippers> hey, a quick question. how can i force data types, such as data LTerm a = Var a | ..., require that `a` have Eq defined? I'd rather not have to specify that in every function declaration...
13:37:29 <aristid> Botje: i think you can do it without the parens
13:37:36 <osaunders> BMeph: No, only those who are disrespectful of his wishes.
13:37:39 <dom96> https://gist.github.com/709174 Does this make sense to anyone?
13:37:50 <taktoa> hmm...
13:38:10 <aristid> Botje: (x,y,) . mandelnum . mandelbool x y
13:38:29 <sipa> SonOfLilit: sounds like something for linear programming or constraint programming
13:38:45 <BMeph> osaunders: Fine. But "Gibskell" doesn't have that je ne sais quoi.
13:39:01 <osaunders> davidknippers: Not all functions rely on a being an instance of Eq.
13:39:06 <SonOfLilit> sipa: could you point me to some links that are one step more relevant than these keywords, if you have any?
13:39:31 <Botje> aristid: that does look nice, if a bit confusing
13:39:36 <dom96> Anyone any ideas?
13:39:38 <mauke> davidknippers: you can't
13:39:39 <davidknippers> osaunders: pretty much all the ones i want to write do, so i'd like to have some sort of restraint on `a` to ensure it is an instance of Eq
13:39:43 <davidknippers> aw
13:39:51 <SonOfLilit> what I'm looking for is first of all a measure of fairness
13:39:55 <davidknippers> i figured, i've been pouring through documentation with no luck
13:40:03 <osaunders> BMeph: None of those things exist anyway. The name for the improved version of Haskell is Haskell' and there are several different improved Preludes. Prelude.Plus is one/
13:40:31 <aristid> Botje: if you don't want caleskell... (x,y,) <$> mandelnum <$> mandelbool x y
13:40:39 <taktoa> Botje: your code give me an error on compile
13:40:45 <davidknippers> thanks
13:41:00 <SonOfLilit> maybe if I would just divide randomly and then perform each time the best switch available until there are no switches that both sides would agree to...
13:41:01 <aristid> Botje: it might even work with (.) from Prelude and (<$>) mixed, if i'm not confused about the precedence
13:41:02 <osaunders> davidknippers: I think you could do it with an existential type but you wouldn't really want to.
13:41:03 <monochrom> Haha Gibskell. Mel Gibskell.
13:41:14 <taktoa>     Couldn't match expected type `[[(Double, Double, IO Bool)]]', against inferred type `IO [(Double, Double, IO Bool)]'
13:41:25 <davidknippers> hm.
13:41:30 <SonOfLilit> switch=trade
13:41:47 <aristid> monochrom: i heard cale does not like caleskell being called caleskell
13:41:52 <sipa> SonOfLilit: http://en.wikipedia.org/wiki/Constraint_programming and http://en.wikipedia.org/wiki/Linear_programming :)
13:41:54 <Botje> taktoa: can you show your changed function?
13:42:00 <taktoa> one minute
13:42:37 <taktoa> http://hpaste.org/41683
13:43:22 <dom96> Anyone familiar with Parsec?
13:44:19 <Botje> taktoa: you haven't made the changes to mandelbool?
13:44:27 <danderson> dom96: yes, but if you ask a metaquestion nobody can help you :)
13:44:38 <taktoa> oops, forgot
13:44:45 <taktoa> lemme see if that fixes it
13:44:53 <dom96> <dom96> Using the function that Parsec provides, manyTill, how do i use it to parse anything up until a newline or eof?
13:44:56 <dom96> danderson: ^
13:45:11 <taktoa> it does, in fact
13:45:25 <mauke> many (noneOf "\n")
13:45:41 <osaunders> A data type of Â«data Empty a = EmptyÂ» stores a type without storing a value. Do you think this is useful for anything?
13:46:08 <dom96> mauke: oh, thanks.
13:47:26 <monochrom> I know a use for Â«data SQLExpr a = SE StringÂ»
13:48:09 <dom96> mauke: What if i want to parse specific characters?
13:48:40 <monochrom> many (oneOf "abce")
13:49:28 <aristid> monochrom: newtype!
13:49:42 <monochrom> yeah, newtype is better
13:49:48 <dom96> Never mind, i see how to do it now.
13:49:51 <dom96> Thanks a lot.
13:50:03 <monochrom> Gundam says newtypes are more efficient!
13:51:24 <aristid> monochrom: no, my name is not Gundam
13:51:42 <Kaidelong> it's an obscure reference and a pun
13:51:43 <monochrom> I agree.
13:52:01 <SonOfLilit> sipa: Thanks, Linear Programming seems to match great
13:52:16 <SonOfLilit> they have a problem called "multicommodity flow" that sounds like what I'm doing
14:17:51 <kwantam> is there a particular reason that the Lit class in Language.Haskell.TH.Syntax is so limited? For example, no constructor for Double literals.
14:20:06 <aavogt> kwantam: because rationlL  can go everywhere you can put a Double
14:20:50 <aavogt> since    $(litE $ rationalL 2.3e3) :: Fractional t => t
14:21:07 <kwantam> ahh, indeed
14:22:24 <kwantam> I knew I must be missing something obvious :)
14:23:12 <aavogt> well it probably seems you can't make NaNs that are evaluated at compile time
14:24:13 <aavogt> since going through rational gives you an exception rather than those funny floating point numbers
14:29:11 <kwantam> hum
14:30:34 <kwantam> you know, I was kind of conflating the Lift class with the Lit type, though both lack Double; it's true that the RationalL constructor works in Lit, but for some reason there's no lift implementation for Rationals. Seems trivial to make an appropriate instance
14:38:35 <cole> How do you preserve data between function calls in haskell? There's no global data, there's no member fields. What do you do?
14:38:58 <Rembane> cole: Send the data to other functions
14:39:22 <sipa> or use a state monad
14:39:34 <kwantam> cole: are you trying to do basically static variables?
14:39:47 <sipa> which is not more than syntactic sugar for passing data between function
14:39:48 <sipa> s
14:40:01 <cole> kwantam: yeah
14:40:31 <aavogt> keep your code in IO
14:40:37 <kwantam> ewwwwwwwwwww
14:41:15 <sipa> use unsafePerformIO on FFI functions, storing the data in some linked C library!
14:41:24 <kwantam> you _could_ use Control.Concurrent.MVar
14:41:24 <sipa> *ducks*
14:41:40 <aavogt> sipa: too complicated. Just unsafeperformio an IORef
14:41:49 <sipa> too easy!
14:43:16 <kwantam> (my suggestion wasn't a joke, I've used an MVar to hold, e.g., a global game state)
14:43:24 * ddarius suggests rethinking the design.
14:44:17 <kwantam> oh wait
14:44:19 <kwantam> another way
14:44:26 <kwantam> use Gtk2Hs
14:44:34 <aavogt> kwantam: regarding the missing Lift instance: it might be worth bringing that up on libraries@haskell.org
14:44:46 <kwantam> in particular, store your state in labels in the UI
14:44:47 <kwantam> :)
14:44:50 <ezyang> cole: The answer will depend on what are you trying to do? 
14:45:30 <kwantam> (though this is basically a particular intsantiation of sipa's suggestion, only without unsafePerformIO)
14:46:01 <kwantam> aavogt: thanks, will do
14:46:55 <kwantam> is TH considered alpha-quality at this point? Lots of people refer to it as "experimental"...
14:47:10 <Entroacceptor> kwantam: a bit like Delphi does it? 
14:47:24 <Entroacceptor> (regarding the state in labels...)
14:47:40 <kwantam> Entroacceptor, heh, haven't used Delphi in forever! I think I used 1.0...
14:47:42 <ezyang> kwantam: TH is fairly widely used. A lot of things in Haskell are called experimental and are widely used :-) 
14:47:59 <kwantam> so, it's as experimental as the rest of the language :) 
14:48:27 <aavogt> kwantam: it's not a high priority extension
14:48:52 <aavogt> which you can see by how it doesn't keep up with the rest of the language
14:49:56 <kwantam> it's unfortunate; macros are part of what makes lisp so fun
14:50:13 <ezyang> Macros are an infinite thesis generator. 
14:50:21 <kwantam> heh
14:50:56 <kwantam> what about macros which generate macros which generates theses
14:51:25 <kwantam> time to get to work on meta-TH
14:51:38 <kontoo_> can someone please help a haskell beginner (me!) with a "simple" problem? I got custom data types as parameters to a function, now I want to split the data types into their components so I can use them inside the function. I got some sample code that is unfortunately not working: http://pastebin.com/aUBbcs9f  what is wrong with that code? I'm trying to figure it out since hours...
14:51:39 <ezyang> They're relatively easy to understand, but in their simple form have a tremendous number of problems that can easily send you off spending several years tocome up with your own complex solution that doesn't quite work but is different from everyone else's macro thesis. 
14:51:41 <aavogt> things like the stage restriction mean that using TH effectively means you've come to terms with what's not allowed
14:52:14 <ezyang> kontoo_: Food is not a constructor. 
14:52:41 <ezyang> So I can match f Aepfel = ... ; f Birnen = ... ; but I can't match f (Food x1). 
14:52:49 <kontoo_> ehm
14:52:50 <ezyang> If I want to match the whole thing I can just do f x1 = ... 
14:53:01 <ezyang> same goes for BuySize 
14:53:34 <kontoo_> ezyang: thanks for the help! main problem is that i need the Float / Integer value from BuySize
14:53:38 * ezyang could go for some bananen 
14:53:43 <kontoo_> but i'm pretty lost right now
14:53:49 <kontoo_> so confused from all the reading
14:54:04 <kontoo_> can you tell me what excactly i need to change?
14:54:06 <aavogt> kontoo_: why don't you use [Item] instead of Purchase?
14:54:20 <aavogt> or at least     data Purchase = Purchase [Item]
14:54:33 <aavogt> this lets you reuse lots of functions from Data.List
14:54:41 <ezyang> newtype! 
14:55:10 <kontoo_> aavogt: that might be a good idea, the functions look pretty handy
14:55:16 <aavogt> sure, the difference doesn't matter here
14:55:44 <kontoo_> ezyang: sorry I can't follow your right now. I'm very new to haskell and I did my best to build my problem from a tutorial into this ode
14:55:54 <kontoo_> code*
14:56:17 <aavogt> kontoo_: Food and BuySize don't belong in patterns
14:56:20 <ezyang> kontoo_: Does your tutorial talk about pattern matching? 
14:56:25 <kontoo_> it's from this tutorial: http://webcache.googleusercontent.com/search?q=cache:XBPdo_Y9I4sJ:learnyouahaskell.com/making-our-own-types-and-typeclasses+haskell+parameters+get+value&cd=19&hl=de&ct=clnk&gl=de
14:56:30 <aavogt> (though you can in some cases put type signatures in patterns...)
14:56:36 <kontoo_> very at the beginning when you search for "Circle"
14:56:46 <kontoo_> it's the same pattern but it does not work
14:57:11 <ezyang> kontoo_: Ah, I see where you're getting confused. 
14:57:23 <ezyang> In the tutorial, he defines data Person = Person String ... 
14:57:30 <ezyang> Notice how Person shows up twice 
14:57:39 <ezyang> On the left, Person is a type; on the right, Person is a data constructor. 
14:57:55 <ezyang> You can only pattern match against data constructors. In this case, it doesn't matter because they're named the same thing. 
14:58:25 <kontoo_> hmmm got that
14:58:33 <kontoo_> data types and data constructors
14:58:43 <ezyang> check further down, the "data Tree a = " example 
14:58:50 <ezyang> will have the distinction you're looking for. 
14:59:35 <kontoo_> isnt that data Tree <a> for generics?
14:59:59 <aavogt> drop the < >, but it's the same idea
15:00:14 <kontoo_> (<> just to highlight it)
15:00:22 <kontoo_> hmm
15:00:22 <ezyang> kontoo_: Yeah, it introduces another notion of parametrizing your type with variables, but you can ignore that for now. 
15:02:21 <kontoo_> sorry for being dumb, but I still don't know how to get the value BuySize :(
15:02:47 <aavogt> which constructor of BuySize are you expecting?
15:03:23 <ezyang> kontoo_: Because there are four constructors for BuySize, you will have to individually pattern match against each one of them. 
15:03:59 <ezyang> The same way Node and EmptyTree are individually pattern matched. 
15:04:32 <ezyang> Your data declaration is a little smelly but I can't put my finger on precisely why 
15:05:46 <aavogt> kontoo_: well add  doesn't have to inspect what you've purchased, right?
15:06:03 <kontoo_> well
15:06:05 <aavogt> you could just have     add x y = Element x y
15:06:58 <aavogt> unless there's supposed to be some other logic involved
15:07:18 <kontoo_> add shall get an item (tupel of Food-Type and amount) and an existing purchase list and add the item to that list
15:07:27 <kontoo_> you saw that already i guess
15:07:40 <kontoo_> well the problem is:
15:07:50 <kontoo_> if the item is already in the list, only the amount shall be increased
15:08:04 <ezyang> kontoo_: I suggest tightening up your types, then. 
15:08:12 <kontoo_> like if you got 4 apples on your order, and add another apple then you shall have 5 apples in the list
15:08:14 <ezyang> What if I have 2 kilos of apples and then I add 4 apples to the shipment? 
15:08:16 <ezyang> Problems! 
15:08:27 <kontoo_> suprise
15:08:56 <kontoo_> the amount types should not be mixed
15:09:32 <aavogt> a pretty solution can be had using  Data.Map
15:09:48 <kontoo_> well i would be glad to get the main problem solved (how to get the order amount, ie. the BuySize second attribute)
15:10:02 <kontoo_> map iterates over a list right?
15:10:06 <aavogt> but I guess that's not really the point (and then your purchases aren't ordered)
15:10:20 <kontoo_> it doesnt matter if they are ordered
15:10:41 <kontoo_> it's just that the list should not contain 2x the same producst
15:10:45 <kontoo_> product*
15:11:20 <aavogt> @src lookup
15:11:20 <lambdabot> lookup _key []          =  Nothing
15:11:20 <lambdabot> lookup  key ((x,y):xys) | key == x  = Just y
15:11:20 <lambdabot>                         | otherwise = lookup key xys
15:11:51 <aavogt> that is sort of what you'd use (if you still use a list)
15:11:57 <kontoo_> maybe i should ask a bit more specific
15:12:13 <kontoo_> if we consider that function: add :: Item -> Purchase -> Purchase
15:12:31 <kontoo_> how can i access the BuySize amount in the first argument?
15:12:44 <kontoo_> (sorry that i can't get it out myself... i'm just total confused right now)
15:14:06 <onteria> is there a ghci command that does something like @src for lambdabot?
15:14:09 <kontoo_> add (a,b) y = Element (Butter, Kilo 2.0) Empty
15:14:16 <aavogt> kontoo_: I suggest having a separate function   addAmounts :: BuySize -> BuySize -> BuySize
15:14:55 <ezyang> kontoo_: Sorry. We're simultaneously trying to clarify a syntactic issue as well as improve your program design. The flaws in the latter are obscuring the former. 
15:15:17 <kontoo_> aavogt:  sounds like a nice workaround
15:15:18 <ezyang> aavogt's suggestion is good. Helper functions are nice because they are simpler and compose to build the big functions you actually want. Go implement that first. 
15:15:26 <aavogt> that way you don't multiply the 5 cases you need fo addAmounts by the 2 cases you need for add
15:15:37 <cole> Why is this code creating this error?: http://pastebin.com/uysteGgG
15:15:55 <ezyang> cole: Your indenting is wonky 
15:16:02 <aavogt> onteria: :info is close
15:16:13 <cole> The indentation is causing the error?
15:16:29 <ezyang> Yes. 
15:16:38 <onteria> aavogt:  ah, that's good enough thanks
15:16:51 <kontoo_> ezyang: yeah but i fear that is too much. i'm still at printf("hello world") knowledge in haskell
15:17:10 <kontoo_> but i need that function done... anyway i will implement the subfunction now
15:17:26 <cole> No matter what I do to the indentation I can't get it to compile.
15:17:45 <ezyang> kontoo_: What you'll notice when you're learning Haskell is sometimes you will want to do X, and it will seem utterly painful and confusing, but if you tweak it a little and do X', it will be nice and easy. 
15:18:16 <ezyang> cole: You might be having a tabs versus spaces problem. Try moving the getChar line to a line of its own. 
15:18:37 <aavogt> explicit layout can work too
15:19:17 * aavogt means     module Main where { main :: IO (); main = do { a; b } }
15:20:15 <aavogt> which is especially annoying with leading semicolons
15:36:35 <kontoo_> aavogt: ... may i ask you for help again?
15:36:42 <kontoo_> what is wrong with that code?
15:36:43 <kontoo_> addAmounts :: BuySize -> BuySize -> BuySize
15:36:44 <kontoo_> addAmounts (unit1, amount1) (unit2, amount2) = (unit1, amount1 + amount2) 
15:37:03 <Pseudonym> kontoo, what's the error?
15:37:15 <Pseudonym> Is it a type error, or does it return the wrong answer?
15:37:37 <ezyang> kontoo_: You've omitted the constructors. 
15:37:51 <ezyang> the type of (x, y) is (a, b), not BuySize 
15:39:05 <kontoo_> Pseudonym: for the error: Couldn't match expected type `BuySize'
15:39:05 <kontoo_>            against inferred type `(a, b)'
15:40:31 <kontoo_> ezyang: i think it makes no sense... i can't understand it :(
15:41:11 <ezyang> kontoo_: Is the definition of BuySize the same as it was before? 
15:41:36 <kontoo_> yup, exactly as before
15:41:56 <ezyang> Ok. Where did you find the (x, y) syntax? 
15:41:57 <kontoo_> data BuySize = Kilo Float | etc
15:42:11 <kontoo_> (Kilo, Float) ?
15:42:17 <kontoo_> the tupel
15:42:33 <ezyang> Ok. So a tuple is a bit different from a data constructor. 
15:42:55 <ezyang> > let (a, b) = (1, 2) in a 
15:42:56 <lambdabot>   1
15:43:25 <ezyang> >let (Just x) = (Just 2) in x 
15:43:34 <ezyang> > let (Just x) = (Just 2) in x 
15:43:34 <lambdabot>   2
15:43:41 <aavogt> in a way it just looks different
15:43:56 <kontoo_> cool bot you got :)
15:44:12 <lambdabot> Thanks!
15:44:14 <ezyang> So to pattern match BuySize, I need something like 
15:44:16 <aavogt> > (\((,) a b) -> a + b) (1,2)
15:44:17 <lambdabot>   3
15:44:20 <kontoo_> haha
15:44:35 <ezyang> let (Kilo x) = (Kilo 2.3) in x 
15:45:00 <ezyang> (I can't actually eval that cuz lambdabot doesn't know about BuySize) 
15:45:02 <aristid> superfluous parens
15:45:04 <kontoo_> "let" is an assignment keyword i guess
15:45:14 <djahandarie> > let x = 5 in x
15:45:15 <lambdabot>   5
15:45:16 <kontoo_> let a="a+a"
15:45:16 <newsham> > let (Just x) = (Just 2.3) in x
15:45:17 <lambdabot>   2.3
15:45:18 <ezyang> kontoo_: I could have equally well said f (Kilo x) = x 
15:45:32 <djahandarie> The syntax of the let expression is    let ... in ...
15:45:38 <newsham> > let f (Just x) = x in f (Just 2.3)
15:45:39 <lambdabot>   2.3
15:45:40 <djahandarie> Not just "let ..." by itself
15:45:43 <aristid> > let Just x = Just 2.3 in x
15:45:43 <lambdabot>   2.3
15:45:52 <aristid> removed superfluous parens.
15:45:53 <ezyang> Another insight (which you might not understand yet) is the pattern match you are trying to do corresponds to the following types: 
15:46:21 <ezyang> type BuySize = (Unit, Amount) 
15:46:31 <ezyang> data Unit = Kilo | Pound | ... 
15:46:31 <kontoo_> > let Foo x = Foo 2.4 x
15:46:32 <lambdabot>   not an expression: `let Foo x = Foo 2.4 x'
15:46:49 <ezyang> type Amount = Float 
15:47:06 <djahandarie> kontoo_, read what I just said. ;)
15:47:11 <ezyang> kontoo_: missed the in 
15:47:25 <kontoo_> aghr guys
15:47:32 <kontoo_> this language.... kills brain
15:47:40 <Pseudonym> This language expands brain
15:47:43 <ezyang> We're asking you to juggle a lot of things at once. 
15:47:49 <ezyang> You might want to try a simpler exercise first. 
15:47:53 <Pseudonym> Yeah.
15:47:55 <kontoo_> Pseudonym: guess that's equally true :)
15:48:16 <kontoo_> problem is we have to program an exercise for tomorrow and we got nearly ZERO information
15:48:34 <kontoo_> it's just hilarious to start with a total new programming paradigma and get no help
15:48:36 <kontoo_> but ok..
15:48:54 <ezyang> It's no help if you try a complex problem and fail to solve it. 
15:49:05 <kontoo_> problem is that i read so much tutorials for data types that i'm now confused
15:49:15 <kontoo_> i would agree
15:49:29 <newsham> kontoo: lots of time to do small exercises between now and tomorow
15:49:45 <kontoo_> (actually it's already tomorrow)
15:49:49 <kontoo_> T-9hour
15:49:52 <kontoo_> pfff
15:49:55 <newsham> no its not.
15:49:57 <newsham> its still today
15:50:03 <kontoo_> in your timezone 
15:50:04 <kontoo_> :o
15:50:22 <kontoo_> it's nearly 1am here in europe
15:50:30 <newsham> 1am today
15:50:35 <kontoo_> ....
15:50:48 <ezyang> DON'T PANIC 
15:50:55 <kontoo_> and thanks for the fish
15:51:00 <kontoo_> oh what...
15:51:03 * djahandarie starts screaming
15:51:04 <ezyang> kontoo_: How much preparation have they given you so far? 
15:51:22 <ezyang> If this is introdutory level, you might be better off not worrying about datatypes. 
15:51:33 <kontoo_> wanna see my university lectures? nothing that would help with THAT problem or general programming
15:52:02 <kontoo_> the task demands: define a recursive data type
15:52:11 <kontoo_> my Purchase type
15:52:27 <kontoo_> what shall be a list if i did it correctly
15:52:30 <newsham> there are some recursive data types in the standard libs you can look at
15:53:12 <kontoo_> newsham: but do they fit for my problem?
15:53:29 <newsham> no idea.  dont know your particular problem.
15:53:31 <kontoo_> ehm but back to topic... i am missing a constructor or what was the problem?
15:53:40 <ezyang> kontoo_: Yes, you are missing a constructor. 
15:53:43 <ezyang> You also need more equations 
15:53:47 <ezyang> and you need to get rid of the comma. 
15:53:55 <kontoo_> like creating a new BuySize Object?
15:54:11 <ezyang> I don't understand. 
15:54:16 <kontoo_> return new BuySize("Kilo", 2.0) => in haskell
15:54:17 <kontoo_> ?
15:54:19 <kontoo_> addAmounts (unit1, amount1) (unit2, amount2) = (unit1, amount1 + amount2) 
15:54:38 <kontoo_> the return value of the function is  (unit1, amount1 + amount2)
15:54:39 <ezyang> kontoo_: Ok, let's try something different. 
15:54:50 <ezyang> You're going to define data BuySize = BuySize Amount Float 
15:55:10 <kontoo_> okay
15:55:25 <ezyang> Then addAmounts (BuySize unit1 amount1) (BuySize unit2 amount2) = ... 
15:55:34 <ezyang> And we're going to ignore the fact that you might have integers and just use floats 
15:55:46 <ezyang> And then everything will magically work. 
15:55:54 <ezyang> but I will wince all the way. 
15:56:14 <ezyang> let data AMount = Kilo | .... 
15:56:20 <kontoo_> eh.... wince all the way?
15:56:25 <kontoo_> is it ugly and .... ?
15:56:30 <newsham> let data?
15:56:34 <ezyang> Whether or not it's ugly is not really important 
15:56:41 <ezyang> sorry, let in the linguistic sense, not syntactic :-) 
15:56:46 <kontoo_> haha
15:56:59 <ezyang> These simplifications to your data type will map it onto your current mental model of what's going on. 
15:57:09 <ezyang> The original data type means something subtly different from what you thought was going on. 
15:58:06 <kontoo_> that sounds sophisticated ;)
15:58:16 <kontoo_> map in into my mental model... :o
15:58:22 <kontoo_> ok done that
15:58:45 <ezyang> I think you're thinking of algebraic data types in terms of objects. 
15:59:01 <ezyang> This works OK for single constructor data types, but less so when you have multiple constructors. 
15:59:14 * ddarius usually prefers mapping the mental model to the language... with crowbars.
16:00:36 * ezyang kind of wants to write a prolog to functional dependencies compiler >:-) 
16:01:12 <ezyang> lack of backtracking might be annoying tho 
16:02:11 <kontoo_> okay... ground zero NOTHING works
16:02:15 <kontoo_> this is so frustrating
16:02:18 <aavogt> ezyang: it'd be kind of slow
16:02:26 <ezyang> aavogt: But it would be awesome! 
16:02:32 <ezyang> kontoo_: Repaste, with your new error. 
16:02:35 <kontoo_> data Amount = Kilo | Pound deriving (Show)
16:02:35 <kontoo_> data BuySize = BuySize Amount Float deriving (Show)
16:02:35 <kontoo_> addAmounts :: BuySize -> BuySize -> BuySize
16:02:36 <kontoo_> addAmounts (BuySize unit1 amount1) (BuySize unit2 amount2) = (unit1, amount1 + amount2)
16:02:36 <ddarius> aavogt: Unlike Prolog ...
16:02:40 <kontoo_> your suggestion
16:02:47 <kontoo_> i defined the Amount datatype
16:03:03 * ddarius hands ezyang a crowbar.
16:03:22 <ezyang> That should work. 
16:03:22 <kontoo_> (don't aim at haskell beginners with that)
16:03:26 <kontoo_> Couldn't match expected type `BuySize'
16:03:26 <kontoo_>            against inferred type `(Amount, Float)'
16:03:30 <ezyang> Except you've named Amount wrong, it should be Unit 
16:03:37 <ezyang> Oh oh. 
16:03:38 <kontoo_> oh jeah
16:03:41 <ddarius> BuySize /= (,)
16:03:42 <ezyang> Your constructor is wrong 
16:03:59 <ezyang> So, your lhs is correct. (hurrah). Fix your rhs as ddarius points out 
16:04:09 <ezyang> (lhs = left hand side) 
16:04:36 <kontoo_> my data constructor or type constructor?
16:04:43 <ezyang> data constructor. 
16:04:51 <kontoo_> rhs
16:04:53 <kontoo_> ofc
16:04:56 <kontoo_> .... brain lag
16:04:59 <ezyang> Because it's on a line with an = in it (value level), not a :: (type level) 
16:05:24 <kontoo_> sounds magically
16:05:57 <ezyang> I wonder if people would be helped by a "let's embed Haskell in Java" tutorial. 
16:06:04 <kontoo_> haha
16:06:10 <kontoo_> i would buy it
16:06:23 <aavogt> or the other way around :)
16:07:00 * ezyang shudders at the thought of implementing a shared-state object system in Haskell 
16:07:08 <ezyang> it would be kind of unpleasant. 
16:07:08 * monochrom takes a brief look at notepad++. scary. the nice kind of scary. looks featureful. :)
16:07:22 <kontoo_> i guess i did something pretty silly but here is what i did: data BuySize = BuySize /= (,) Unit Float deriving (Show)
16:07:39 <ezyang> I used to use notepad++ while I was on Windows. Good editor. Then I switched to vim >:-) 
16:07:45 <ezyang> kontoo_: Why did you edit that line? 
16:07:48 <ezyang> The original line was fine. 
16:07:55 <kontoo_> because of "fix your constructor"
16:08:00 <ezyang> Ah. 
16:08:14 <ezyang> = (unit1, amount1 + amount2) is wrong 
16:08:24 <ezyang> btw, that's equivalent to 
16:08:26 <kontoo_> (kate on linux is also pretty nice for editing haskell)
16:08:31 <ezyang> = (,) unit1 (amount1 + amount2) 
16:08:39 <kontoo_> hm
16:08:43 <ezyang> so ddarius told you to replace the (,) with BuyAmount 
16:08:44 <kontoo_> revert and adjust
16:09:19 <kontoo_> the problem is that at this point i cant understand it
16:09:33 <kontoo_> i can just recognize patterns and change them... like a total programming noob
16:09:37 <kontoo_> .....
16:09:52 <ezyang> You're familiar with OOP language. 
16:09:56 <kontoo_> yes
16:10:03 <kontoo_> i can programm c++ / java / assembler
16:10:11 <ezyang> If I want to make a new BuyAmount in an OOP language, I say new BuyAmount(unit1, amount1 + amount2) 
16:10:30 <ezyang> In Haskell, drop the new, get rid of the parenthesis and comma, and parenthesize (amount1 + amount2) 
16:10:32 * BMeph would recommend it, if monochrom's looking...
16:10:34 <ezyang> it's the same thing. 
16:11:12 <ezyang> The tuples are confusing you, because there's nothing really like it in C++/Java/Assembly 
16:11:15 <monochrom> yeah there is about 5% of the time I edit haskell in windows. I'll use notepad++.
16:12:45 <kontoo_> ezyang:  ehm why do i have to just parenthesize the second argument?
16:12:53 <kontoo_> ah wait
16:12:53 <ezyang> because of precedence 
16:13:04 <ezyang> otherwise haskell will parse it as (BuyAmount unit1 amount1) + amount2 
16:13:05 <monochrom> oooh, evil physical tab pretending to be 4 spaces.
16:13:08 <ezyang> which will type error. 
16:13:09 <kontoo_> because otherwise haskell would think it are 3 arguments
16:13:22 <ezyang> kontoo_: Not quite, because there's an infix operator + in the mix. 
16:13:43 <Entroacceptor> but close enough 
16:13:53 <kontoo_> what does that mean?  (BuyAmount unit1 amount1) + amount2
16:14:11 <ezyang> kontoo_: It doesn't mean anything. it's ill typed. your compiler will reject it. 
16:14:13 <kontoo_> does it have any mreaning?
16:14:21 <kontoo_> ok
16:14:26 <kontoo_> btw. still not working
16:14:29 <kontoo_> my change:
16:14:37 <kontoo_> addAmounts (BuySize unit1 amount1) (BuySize unit2 amount2) = (,) unit1 (amount1 + amount2)
16:15:00 <ezyang> that's equivalent to the old (unit1, amount1 + amount2) 
16:15:09 <ezyang> (,) is the wrong constructor 
16:15:13 <ezyang> There should be something else there. 
16:15:16 <kontoo_> but i added the (,) (Constructor?)
16:15:39 <ezyang> Because (,) is punctuation, it can be used "infix" as a constructor. 
16:15:48 <ezyang> so (unit1, amount1 + amount2), (,) was implicitly the construcotr 
16:16:07 <ezyang> the same way when I cons two elements together in x : xs, (:) is the constructor, and I could have written it (:) x xs 
16:16:28 <ezyang> I could have also written unit1 `BuyAmount` amount1 + amount2 
16:16:42 <ezyang> but, uh, don't do that :-) 
16:16:57 <djahandarie> Only with parentheses around amount1 + amount2
16:17:11 <kontoo_> i think my point about haskell eats brain is valid
16:18:17 <kontoo_> can i get at least a single moment of haskell joy today? how the **** can i get the addAmounds function to work? :P
16:18:27 <ezyang> I mean, I can give you the answer. 
16:18:32 <ezyang> In fact, I have done so multiple times 
16:18:47 <kontoo_> well let's try something different then
16:18:47 <djahandarie> kontoo_, you're only one step away with the    Â«(,) unit1 (amount1 + amount2)Â»   version
16:19:04 <ezyang> But if we give you the answer, there will be no Haskell joy. 
16:19:05 <kontoo_> the (,) thing creates a new "object"?
16:19:11 <ezyang> Yes. 
16:19:11 <djahandarie> Say :t (,)
16:19:14 <djahandarie> In GHCI
16:19:19 <ezyang> :t (,) 
16:19:19 <lambdabot> forall a b. a -> b -> (a, b)
16:19:33 <kontoo_> i'm nearly ready for mental care...
16:19:35 <ezyang> > let comma = (,) in comma 1 2 
16:19:36 <lambdabot>   (1,2)
16:19:36 <kontoo_> so what
16:20:05 <kontoo_> (,) :: a -> b -> (a, b)
16:20:09 <djahandarie> Yep
16:20:17 <djahandarie> Now try :t BuySize
16:20:38 <djahandarie> Err
16:20:46 <djahandarie> Was it BuyAmount?
16:20:51 <djahandarie> Whatever your constructor is lol
16:20:59 <ezyang> BuySize 
16:21:12 <djahandarie> Yeah,   :t BuySize   then
16:21:23 <kontoo_> can't do :t BuySize because my code is not loading
16:21:27 <djahandarie> Ah
16:21:32 <kontoo_> but wait... the power of commenting it out
16:21:43 <djahandarie> Yeah, try it out with only the data line
16:22:00 <kontoo_> BuySize :: Unit -> Float -> BuySize
16:22:26 <kontoo_> that's my constructor?
16:22:29 <djahandarie> Yep
16:22:32 <ezyang> Yes. 
16:22:36 <djahandarie> It takes a Unit and a Float and gives you a BuySize
16:22:39 <kontoo_> i put in Unit and Float and he returns a new BuySize
16:22:47 <kontoo_> okay :)
16:23:06 <djahandarie> Just like (,) takes in an "a" and a "b" and gives you an (a, b)
16:23:10 <kontoo_> and now i need to adjust addAmounds to create a new "object"
16:23:12 <djahandarie> Which is a little more abstract but still the same thing
16:23:19 <kontoo_> hmm
16:23:32 <djahandarie> But in our case we don't want an (a,b) so (,) is useless
16:23:44 <ezyang> "hint: replace (,) with your constructor" 
16:24:07 <djahandarie> Haha I don't know if the hint was required at this point
16:24:35 <kontoo_> dudes
16:25:03 <kontoo_> i thought (,) is the syntax for the "new" keyword in for ex. java
16:25:10 <djahandarie> Hehe nope
16:25:20 <kontoo_> (,) BuySize "Kilo" 2.0
16:25:24 <kontoo_> pffff
16:25:49 <djahandarie> data (,) a b = (,) a b    is all (,) is
16:26:14 <kontoo_> makes no sense to me
16:26:26 <ezyang> don't worry about that for now. 
16:26:29 <djahandarie> Yeah
16:26:31 <ezyang> In haskell, you don't have to say 'new'. 
16:26:38 <ezyang> just call the constructor as if it were a function 
16:28:25 <kontoo_> cool but how
16:28:36 <kontoo_> (,) is the constructor i need?
16:28:40 <kontoo_> or BuySize?
16:28:44 <ezyang> No. BuySize. 
16:28:50 <djahandarie> kontoo_, no, because (,) gives you an (a,b)
16:28:56 <kontoo_> what is (,) then??
16:29:08 <kontoo_> your pedagogic puzzles confuse me :)
16:29:13 <cole> Is there some way to invoke the :load directive from within a script?
16:29:13 <djahandarie> Go ahead and ignore it. It has nothing to do with the problem at hand
16:29:13 <ddarius> > (,) 3 5
16:29:14 <lambdabot>   (3,5)
16:29:22 <ezyang> = BuySize unit1 (float1 + float2) 
16:29:39 <kontoo_> .....
16:29:46 <kontoo_> that looks easy
16:29:56 <kontoo_> why did we mention this (,) stuff?
16:29:59 <kontoo_> aghr
16:30:19 <djahandarie> kontoo_, because you could have also learned how (,) worked in the process ;)
16:30:19 <ezyang> Because that's what you had written before. 
16:30:29 <ezyang> (,) a b = (a, b) 
16:30:33 <cole> Can you access the ghci interpreter at runtime?
16:30:43 <ezyang> Like, do you understand /why/ (a,b) was wrong? 
16:30:46 <kontoo_> (,) is for tupel construction?
16:30:53 <kontoo_> nope
16:30:56 <kontoo_> pattern matching?
16:31:02 <ezyang> nope. 
16:31:06 <djahandarie> kontoo_, the type of (,) should tell you what it is
16:31:09 <ezyang> So this is what we were trying to explicate. 
16:31:18 <djahandarie> kontoo_, just like the type of BuySize should tell you what it does
16:31:43 <ezyang> kontoo_: So, what do you think (a,b) does? 
16:32:17 <kontoo_> in which kontext?
16:32:24 <ezyang> On the right hand side of an equals sign. 
16:32:26 <ezyang> Good question :-) 
16:32:30 <kontoo_> :
16:32:31 <kontoo_> :)
16:32:52 <kontoo_> well.... it's threatened as a value?
16:32:57 <kontoo_> dunno
16:33:03 <ezyang> Ok. 
16:33:15 <kontoo_> Ok = fail?
16:33:16 <ezyang> So what if I told you that anywhere you saw (a,b) in a program, you could replace it with (,) a b? 
16:33:27 <ezyang> Then what would you tell me (a,b) does? 
16:34:00 <parshimers> lol is (,) just the name of the function that makes tuples?..
16:34:05 <kontoo_> cant follow... you say (a,b) is equivalent to (,) ab
16:34:13 <ezyang> parshimers: Yep 
16:34:15 <Pseudonym> parshimers: Not just that, but yes./
16:34:17 <ezyang> kontoo_: Yes. 
16:34:22 <kontoo_> yeah
16:34:25 <ezyang> This is /key/ 
16:34:26 <Pseudonym> It can also be used for pattern matching.
16:34:27 <parshimers> i think it has to do with the whole currying thing doesnt it 
16:34:28 <kontoo_> pretty much what parshimers sayed
16:34:32 <kontoo_> said*
16:34:33 <Pseudonym> :t (,)
16:34:34 <lambdabot> forall a b. a -> b -> (a, b)
16:34:43 <ezyang> Oh, this might be explanatory 
16:34:51 <kontoo_> > (,) a b
16:34:51 <ezyang> :t (\a b -> (a,b)) 
16:34:52 <lambdabot>   (a,b)
16:34:52 <lambdabot> forall t t1. t -> t1 -> (t, t1)
16:34:52 <osaunders> ezyang: Oh, I'm glad you're still here.
16:35:00 <Pseudonym> Similarly, True is the function with no arguments that constructs one of the values of Bool.
16:35:03 <ezyang> oh hai 
16:35:14 <ezyang> replace t with a and t1 with b 
16:35:15 <kontoo_> > (,) a b c
16:35:16 <lambdabot>   Couldn't match expected type `SimpleReflect.Expr -> t'
16:35:16 <lambdabot>         against infe...
16:35:19 <ezyang> do they look kind of familiar? 
16:35:25 <ezyang> kontoo_: In that case, you need (,,) 
16:35:25 <kontoo_> > (,,) a b c
16:35:26 <lambdabot>   (a,b,c)
16:35:33 <ezyang> cuz it's (a,b,c) (two commas) 
16:35:33 <djahandarie> Ugh, lambdabot...
16:35:38 <kontoo_> .... pretty important function
16:35:40 <kontoo_> NOT
16:35:42 <kontoo_> :D
16:35:56 <ezyang> kontoo_: Ok, have you figured it out yet? 
16:35:57 <kontoo_> but how did we come to that?
16:35:59 <osaunders> ezyang: In normal situation, say Â«constÂ», it is permissible that Â«:: aÂ» and Â«:: bÂ» be the same.
16:36:05 <osaunders> :t const
16:36:06 <lambdabot> forall a b. a -> b -> a
16:36:17 <osaunders> > const 's' 'd' 
16:36:18 <lambdabot>   's'
16:36:22 <ezyang> osaunders: Yes. 
16:36:23 <kontoo_> (,...) is a function that creates you a n-tupel
16:36:27 <ezyang> You are specializing the const function. 
16:37:10 <osaunders> > let x = 'd' :: Char in const x x
16:37:11 <kontoo_> ezyang: was the last answer directed towards me?
16:37:11 <lambdabot>   'd'
16:37:12 <ezyang> In languages like PLC, we make the specialization explicit, like 'const with a = Char, b = Char applied with 's' 'd'' 
16:37:16 <ezyang> no, osaunders 
16:37:33 <ezyang> :t (const :: Char -> Char -> Char) 
16:37:33 <lambdabot> Char -> Char -> Char
16:37:42 <ezyang> But once that happens I can't "reuse" the function for something else 
16:37:48 <ezyang> > (const :: Char -> Char -> Char) 2 3 
16:37:49 <lambdabot>   No instance for (GHC.Num.Num GHC.Types.Char)
16:37:49 <lambdabot>    arising from the literal `2...
16:37:52 <ezyang> > const 2 3 
16:37:52 <lambdabot>   2
16:38:33 <kontoo_> and how do i test my addAmounts :: BuySize -> BuySize-> BuySize function now?
16:38:33 <osaunders> I need to ask a question here but I can't think what the right question is.
16:38:34 <kontoo_> addAmounts (BuySize "Kilo" 2.0) (BuySize "Pound" 3.0)
16:38:37 <kontoo_> does not work
16:38:53 <kontoo_> but it looks pretty
16:38:54 <ezyang> kontoo_: Remove the quotes 
16:38:56 <Pseudonym> osaunders: Start babbling.
16:38:59 <ezyang> "Kilo" :: String 
16:39:02 <ezyang> Kilo :: Amount 
16:39:03 <Pseudonym> And we'll pick it up eventually.
16:39:07 <kontoo_> ... ty
16:39:25 <kontoo_> amaziing
16:39:30 <kontoo_> like magic
16:39:38 <osaunders> Pseudonym: OK, well this started when I tried to write: Â«data Empty a = Empty; instance Functor Empty where fmap _ x = xÂ»
16:39:39 <ezyang> I hope this is good Haskell Joy 
16:39:40 <kontoo_> it only took a few hours...
16:39:47 <kontoo_> yes... i can die happy now
16:39:56 <kontoo_> thanks for all the help
16:40:06 <kontoo_> really appreciate it 
16:40:08 <osaunders> That def of fmap is a type error because expected Â«Empty bÂ» but inferred Â«Empty aÂ». 
16:40:14 <monochrom> if you die happy now, you will not learn more haskell.
16:40:22 * djahandarie kills monochrom
16:40:26 <monochrom> you are sentenced to haskell for life!
16:40:29 <ezyang> osaunders: Another way to think about it is that when you specify the definition for Functor Empty, no committment to the type of a or f a has been made yet. 
16:40:29 <aavogt> osaunders: make a new Empty
16:40:39 <kontoo_> in paradise no one has to learn haskell i guess
16:40:41 <ezyang> When you specialize the function, you have made a commitment to a specific type. 
16:40:50 <osaunders> aavogt: Yes.
16:40:57 <aavogt> types can't just change like that
16:40:57 <osaunders> That was the solution.
16:41:00 <djahandarie> kontoo_, does that make us devils for teaching people? :)
16:41:11 <kontoo_> good question
16:41:16 <Pseudonym> osaunders, this is one of the more annoying bits of boilerplate that you occasionally find yourself writing.
16:41:40 <osaunders> aavogt: So my question is why is that illegal but specializing const with same type legal.
16:41:51 <osaunders> When const wants an a then a b.
16:41:57 <monochrom> the two Empty's are of different types. ghc will unify them in generated code, don't worry.
16:42:11 <Pseudonym> monochrom: Unless it can't.
16:42:28 <osaunders> ezyang: So fmap was already specialized?
16:42:35 <monochrom> it can for this case.
16:42:35 <ezyang> osaunders: Nope. 
16:42:39 <ezyang> fmap is /not/ specialized 
16:42:41 <Pseudonym> I'm pretty sure that if you have a recursive ADT with a phantom type, GHC can't always compile away the fmap.
16:42:42 <aavogt> osaunders: think about mixing up   (Maybe a)  values (with a being something concrete)
16:42:44 <ezyang> You're not allowed to specialize it. 
16:42:49 <osaunders> in the instance declaration, i mean.
16:42:52 <Pseudonym> But this is a simple case.
16:42:54 <ezyang> Still not. 
16:43:08 <ezyang> Whatever definition of fmap you write, it has to fulfill the original type signature of the typeclass 
16:43:12 <ezyang> :t fmap 
16:43:13 <lambdabot> forall a b (f :: * -> *). (Functor f) => (a -> b) -> f a -> f b
16:43:18 <ezyang> which has no specialized variables 
16:43:20 <aavogt> just because Nothing contains Nothing, doesn't mean you'd like to exchange    Nothing :: Maybe Int   for Nothing :: Maybe Double
16:43:34 <aavogt> because at other times, they do differ
16:43:44 <monochrom> I just mean Empty (of type Empty X) and Empty (of type Empty Y) will be unified. I said nothing about eliminating the fmap call.
16:43:49 <ezyang> More vividly, I can't write fmap f True = f True, because now I've committed a to be Bool 
16:44:08 <aavogt> too vivid!
16:46:15 <ezyang> The committment you've made in your incorrect definition is more subtle (because there are no concrete type variables made), but is a committment nonetheless 
16:46:20 <ezyang> Here's another example: 
16:46:25 <ezyang> > (\x -> const x x) 
16:46:26 <lambdabot>   Overlapping instances for GHC.Show.Show (a -> a)
16:46:26 <lambdabot>    arising from a use of `...
16:46:32 <ezyang> :t (\x -> const x x) 
16:46:32 <lambdabot> forall a. a -> a
16:47:01 <ezyang> :t (\x -> (const :: a -> a -> a) x x) 
16:47:02 <lambdabot> forall a. a -> a
16:47:19 <ezyang> I've made a committment a = b, even though there are no concrete types to be seen. 
16:47:47 <osaunders> So this is the same problem as trying to write:
16:47:48 <osaunders> flip :: (a -> b -> c) -> b -> a -> c
16:47:48 <osaunders> flip f x y = f x x
16:48:13 <ezyang> Yep. You fail your contracts. 
16:48:30 <ezyang> :t (\f x y -> f x x) 
16:48:31 <lambdabot> forall t t1 t2. (t -> t -> t2) -> t -> t1 -> t2
16:48:37 <ezyang> :t (\f x y -> f y x) 
16:48:38 <lambdabot> forall t t1 t2. (t1 -> t -> t2) -> t -> t1 -> t2
16:48:50 <ezyang> but in this case one isn't a specialization of the other. 
16:49:09 <osaunders> :t (\f x y -> f x x) :: (a -> b -> c) -> b -> a -> c
16:49:10 <lambdabot>     Couldn't match expected type `a' against inferred type `b'
16:49:10 <lambdabot>       `a' is a rigid type variable bound by
16:49:10 <lambdabot>           an expression type signature at <interactive>:1:22
16:49:18 <osaunders> :t (\f x y -> f x x) :: (b -> b -> c) -> b -> b -> c
16:49:19 <lambdabot> forall b c. (b -> b -> c) -> b -> b -> c
16:49:38 <osaunders> :t (\f x y -> f x x) :: (a -> b -> c) -> a -> a -> c
16:49:39 <ezyang> Breaking News: Mass breakout of skolem variables 
16:49:39 <lambdabot>     Couldn't match expected type `b' against inferred type `a'
16:49:39 <lambdabot>       `b' is a rigid type variable bound by
16:49:39 <lambdabot>           an expression type signature at <interactive>:1:27
16:50:04 <osaunders> Ah, OK
16:50:10 <monochrom> is there a vaccine for skolem variables? :)
16:50:15 <osaunders> I can't remember why I was confused now
16:50:22 <ezyang> osaunders: Wonderful :-) 
16:50:28 <ezyang> Come back when you confuse yourself again ;-) 
16:50:35 <osaunders> No, that's bad. It'll probably happen again! :S
16:50:52 <monochrom> use wrong assumptions to obtain more confusion.
16:50:54 <osaunders> I confuse myself all the time. Mainly because I keep forgetting stuff and I have to be reminded.
16:51:07 <ezyang> I got super confused by my Types homework. I still haven't managed to unconfuse myself yet. 
16:51:28 <ezyang> it's funny, because the more advanced stuff was breezy 
16:52:13 <Pseudonym> osaunders: "When I hear, I forget. When I see, I remember. When I do, I understand." -- Confucius
16:52:36 <osaunders> Pseudonym: Indeed
16:55:18 <monochrom> "when I hear, I nod. when I see, I'm convinced. when I do, I'm stumped" -- most students
16:57:53 <kontoo_> haha glorious :D 
16:59:07 <Adamant> Confucius say, I get overtime pay for fulfilling role of Greek AND Roman philosophers for large civilization, along with gweilos
17:02:06 <danharaj> My friend and I play a game.
17:02:33 <danharaj> Whenever one of us claims to understand some mathematics, the other goes "Oh yeah? Let's see about that." pulls a textbook off the shelf and starts drilling the other on exercises.
17:03:24 <astroboy> There must be a parsec function that tries different parsers without caring about the return type (<|> does), but I can't find it
17:04:52 <osaunders> danharaj: Yeah maths is like that.
17:05:09 <osaunders> and Haskell too.
17:05:15 <dfkjjkfd> how does the friend know which answers to accept?
17:05:50 <danharaj> dfkjjkfd: it's much easier to verify a proof than it is to prove it
17:07:04 <danharaj> unfortunately, it's much harder to verify a program than it is to write it.
17:07:48 <ezyang> Written programs are buggy, but those unwritten are buggier. 
17:07:56 <Entroacceptor> danharaj: that's why xp is so great
17:08:00 <ezyang> erm, I think I;ve mashed Keats 
17:08:20 <Entroacceptor> if you just write for test cases, you know when it's done :P
17:12:01 <Funktorsalat> astroboy: you can wrap the parsers (say p) as p >> return ()
17:12:19 <Funktorsalat> to make the return types equal (to ())
17:17:22 <osaunders> When you use a type parameter for a type in a type constructor, what is that called? So in Â«data Simple a = MkSimple aÂ» what is that second Â«aÂ» called?
17:17:55 <thoughtpolice> a type variable?
17:17:58 <ezyang> mmm, I guess a field of type a? 
17:18:15 <aavogt> but both a's are type variables
17:18:17 <osaunders> Field sounds about right.
17:18:28 <thoughtpolice> ah, i read the question wrong :/
17:19:00 <osaunders> So you'd say Â«MkSimpleÂ» has one field, right?
17:19:06 <ezyang> Hmm. I wonder if â€œcreativity: sensitivity and surpriseâ€ was filmed. 
17:19:09 <osaunders> s/has/takes/
17:19:14 <ezyang> Yes. 
17:19:19 <Pseudonym> One comment though, osaunders.  I'd use newtype rather than data there.
17:19:23 <osaunders> OK, cool. :-)
17:19:36 <Pseudonym> Because 99.9% of the time, the sematic difference between the two doesn't matter.
17:19:48 <Pseudonym> So you'd prefer the more efficient one.
17:19:52 <osaunders> ... and newtype is faster.
17:20:41 * ezyang took a long time to understand the semantic difference. 
17:20:48 <Pseudonym> Yeah, me too.
17:20:57 <astroboy> Funktorsalat: that's what I'm doing right now, >> return (). but it's strange they provide no function :P
17:21:06 <Pseudonym> A lot of the details in Haskell is about how bottom behaves.
17:21:15 <Pseudonym> It's the price you pay for laziness.
17:24:23 <hatds> is it okay to mark a non-pure, non-thread safe foreign import as 'safe' if I restrict myself to only calling this import for a unique bound OS thread?
17:24:31 <lars9> anyone used STM a lot? I want to measure the possibility of rollback in my program, any idea?
17:24:43 <ezyang> hatds: Sure. 
17:24:55 <ezyang> More importantly, is its result type IO a or a? 
17:25:00 <hatds> IO a
17:25:06 <ezyang> Then you're fine. 
17:26:18 <hatds> ezyang: ok, thanks.  I was confused because it is often spoken that pure functions are okay to mark as safe, but the point here is that's not the only situation where you can mark things as safe
17:26:49 <ezyang> hatds: I think you're confusing safe and unsafe 
17:27:04 <ezyang> These refer to what GHC does to the runtime before it calls the C function. 
17:27:09 <hatds> ezyang: right
17:27:41 <hatds> so where did I get confused?
17:28:07 <ezyang> From a correctness standpoint, you will never go wrong marking all of your FFI functions safe. 
17:28:23 <ezyang> If you're FFI function is pure and known to be fast, marking it unsafe can boost performance. 
17:29:32 <hatds> I have a non-pure FFI function, but I'm interested in whether it I mark it as safe so it doesn't block other threads
17:29:40 <hatds> is that confusing safe and unsafe?
17:30:07 <hatds> *whether I can mark it
17:30:21 <copumpkin> safe and unsafe are badly named in my opinion
17:30:56 <copumpkin> but whichever one is the unsafe one means that the FFI code can call back into haskell
17:30:59 <copumpkin> which is usually not the case
17:32:14 <ezyang> safe means you can call back into Haskell 
17:32:19 <hatds> I see where I confused 'safe' and 'unsafe' with the pure FFI function comment
17:32:28 <copumpkin> it's silly naming
17:32:56 * ezyang really wants to take Pierce's Software Foundations course now... 
17:33:39 <cjay> is it possible to tell the type system that an associated type synonym has to be in a certain class?
17:33:46 <hatds> are you a student at upenn?
17:33:58 <ezyang> No.... 
17:34:09 <ezyang> cjay: Yes, but I don't remember how off hand 
17:34:10 <Cale> cjay: Add the constraint to the instance head
17:34:12 <hatds> okay.. you just literally mean 'the course' :)
17:34:16 <Cale> er, class head
17:34:26 <Cale> class (Foo a) => Bar a where
17:34:32 <Cale>   type Bar a
17:34:34 <Cale> er
17:34:38 <Cale> tsk
17:34:42 <Cale>   type Foo a
17:34:47 <ezyang> I wonder how bad of an idea it would be to figure out the material, and then teach it caffeinated style over an MIT IAP. 
17:37:17 <cjay> Cale: I want the constraint on the type synonym, not the parameter
17:37:35 <hatds> okay so to correct myself for good: an unsafe call that calls back into Haskell will cause bad things to happen, and that's the criterion for when it's okay to mark as unsafe
17:37:36 <orlandu63> cjay: i think ghc 7 allows that
17:37:59 <hatds> is that right?
17:38:11 <copumpkin> hatds: no
17:38:23 <dankna> imo they should be called something like
17:38:32 <copumpkin> safe means your RTS is being very safe about calling it
17:38:33 <dankna> "normal" and "will-call-back" or something
17:38:42 <dankna> because safe/unsafe could be interpreted either way around
17:38:45 <copumpkin> so if your function is unsafe, you mark it as safe (meaning treat it safely)
17:38:53 <copumpkin> if your function is safe, you mark it as unsafe
17:38:55 <dankna> the standard says one thing and people frequently say the opposite
17:39:07 <dankna> copumpkin has the right of it, I believe
17:39:14 <cjay> orlandu63: ooh, GHC 7 is out. Thanks, I'll check :D
17:39:33 <aavogt> maybe the problem can be better posed in terms of MPTCs and fundeps
17:39:40 <hatds> copumpkin: say I have a function that doesn't call back into Haskell -- there still seems to be a choice either I can mark it as unsafe and get a speed improvement or mark it as safe and get different blocking semantics
17:39:50 <aavogt> in which case the 'associated type' is just another type variable for the class
17:39:53 <dankna> yeah - it's bizarre that those are coupled, too
17:39:57 <Cale> cjay: Oh, sorry, (Num (Foo a)) is valid to put there too
17:41:26 <hatds> I'm still hoping I can get myself straightened out
17:41:38 <hatds> what's the rules?
17:42:37 <danharaj> Hey, let me bounce an idea off of you guys.
17:43:20 <danharaj> I'm writing an FRP library. There are two basic objects: Streams and Signals. Streams are discrete streams of value/time pairs. Signals are continuous time functions.
17:43:23 <cjay> Cale: now ghc wants me to use FlexibleContexts, is that safe to use?
17:43:37 <ezyang> Yeah, that's an innocuous extension. 
17:43:37 <Cale> cjay: yes
17:43:42 <cjay> ok thanks :)
17:43:46 <danharaj> But I was thinking, from the point of view of a programmer, the only thing you can observe about a signal is what you get from sampling it.
17:43:54 <Cale> It's so innocuous, for a long time, it didn't even have a name :)
17:44:02 <cjay> :D
17:44:03 <danharaj> So I was thinking of representing signals instead as fnuctions that take Streams and return Streams of samples.
17:44:13 <danharaj> that make sense?
17:46:12 <Cale> Sounds Yampa-y
17:46:35 <danharaj> I really need to look at yampa :p
17:46:41 <danharaj> I've only been throwing ideas against Reactive
17:47:13 <kwantam> Hey Cale, I ended up cheating on the listApply problem and using Template Haskell
17:47:46 <Cale> kwantam: But why not just take a list as a parameter?
17:47:48 <kwantam> I think this might be one of those cases where "now the programmer has two problems," but I'll take it in stride fornow :)
17:47:51 <hatds> so why is safe/unsafe tied to blocking semantics?
17:48:16 <kwantam> Cale, I don't understand your question I think
17:48:43 <Cale> kwantam: I don't see why you need your function to take arbitrarily many parameters separately, and not just take a list
17:48:52 <kwantam> oh
17:48:59 <kwantam> well yeah, that's how I *actually* solved it
17:49:12 <kwantam> but I also wanted to solve the problem as posed for the sake of erudition :)
17:49:23 <Cale> Ah, okay.
17:49:26 <kwantam> (well, semi-"as posed" since I used TH, which feels like cheating)
17:49:36 <Cale> If you want to see the other approach, maybe take a look at Text.Printf
17:49:36 <copumpkin> hatds: how do you mean?
17:49:55 <danharaj> Yampa's hackage docs are garbage :<
17:49:55 <hatds> copumpkin: unsafe calls in GHC will block all other haskell threads
17:50:09 <ddarius> copumpkin: How was the place?
17:50:22 <copumpkin> ddarius: I applied! we'll see tomorrow if I get it :)
17:50:26 <copumpkin> then move-in would be dec 1
17:50:27 <kwantam> I still want to figure out the correct way of sequencing rolls and unrolls to get the dam isorecursive solution working, but I guess that'll have to wait for a moment of clarity in the shower
17:50:44 <kwantam> Cale, thanks for the reference
17:53:18 <copumpkin> hatds: if you have -threaded I don't think it does block them
17:53:31 <koninkje> hatds: They only block the calling OS thread
17:53:54 <koninkje> thus, if you use -threaded, then you'll have multiple OS threads to serve the various GHC threads
17:54:08 <ezyang> koninkje: But in practice that thread will be holding onto resources that will stop other threads from running. 
17:54:34 <hatds> copumpkin: No, "With the -threaded option, only foreign calls with the unsafe attribute will block all other threads."  http://haskell.org/ghc/docs/6.12.1/html/libraries/base/Control-Concurrent.html
17:55:13 <koninkje> ezyang: if you have multiple resources (e.g., as with -threaded) then the other resources can still run
17:55:29 <koninkje> (and with the appropriate +RTS flag to enable multiple resources)
17:57:30 <ezyang> Capabilities, yes. 
17:58:07 <koninkje> "unsafe" just means that the executing OS thread retains control of its capability when it enters C land, with the attendant consequences about callbacks and the like
17:58:36 <copumpkin> hatds: I guess it's hard for the RTS to retain control of things if someone else may go stomping on its stuff, outside of its jurisdiction?
17:58:38 <copumpkin> I dunno
17:58:58 <ezyang> That's precisely it. 
17:58:59 <copumpkin> it beats a GIL in terms of fine-grainedness
17:59:10 <koninkje> GIL--
17:59:24 <ezyang> For example, GHC uses stop the world garbage collection because doing it in parallel is really quite hard. 
17:59:38 <dolio> Concurrently, you mean.
17:59:42 <koninkje> ezyang: you mean, concurrently
17:59:43 <dolio> GHC does parallel garbage collection.
17:59:45 <ezyang> erm, yes, that's what I mean. 
17:59:49 <ezyang> :o) 
17:59:54 <dankna> what's the distinction?
18:00:03 <copumpkin> oh god
18:00:05 <koninkje> (though concurrently does mean that GC is in parallel with the program...)
18:00:15 <dankna> rather, I know what concurrency is
18:00:21 <dankna> I don't know what "parallel" would be if not a synonym
18:00:27 <Cale> Parallel means that the GC uses multiple processors. Concurrent means it collects garbage while other processors are running the program.
18:00:34 <dankna> oh.
18:00:36 <dankna> right.  okay.
18:00:37 <koninkje> dankna: parallel GC = many threads doing GC; concurrent GC = GC is hapening while the program is running
18:00:43 <copumpkin> they aren't necessarily related
18:00:43 <dankna> thanks.
18:00:53 <copumpkin> SIMD is parallel but not concurrent, for example (supposedly)
18:00:55 <ezyang> I hear Marlow's working on concurrent GC for the young generation of garbage. 
18:01:20 <dankna> that really would be pretty awesome for intensive server situations
18:01:25 <koninkje> that would be interesting...
18:01:29 <dankna> although I haven't measured to see how big a hit it really is
18:01:38 <copumpkin> he likes the young'uns
18:01:45 <jmcarthur> you had to
18:01:47 <copumpkin> <_<
18:01:57 <copumpkin> >_>
18:02:00 <lars9> what does 'M' stand for in MVar?
18:02:06 <copumpkin> magic
18:02:09 <dankna> mutex
18:02:12 <jmcarthur> monkey
18:02:13 <koninkje> "Maybe"
18:02:16 <lars9> mutable?
18:02:17 <koninkje> kinda
18:02:27 <copumpkin> lars9: just kidding, it's monkey
18:02:52 <dankna> no seriously, I always assumed it was mutex
18:03:01 <Cale> dankna: I think so too...
18:03:23 <osaunders> lol copumpkin 
18:03:26 <lars9> copumpkin: lol
18:03:29 <hatds> so I'm back to straightening myself out: the rule is that a call that might callback into Haskell must be marked safe, or bad things will happen.  If it doesn't call back then there is a choice: marking as 'unsafe' is faster, but blocks all threads
18:03:40 <copumpkin> why would M be mutex and not mutin?
18:03:41 <lars9> An MVar (pronounced "em-var") is a synchronising variable, used for communication between concurrent threads. It can be thought of as a a box, which may be empty or full.
18:03:42 <Cale> Oh, apparently it might have stood for mutable.
18:03:43 <koninkje> In STM land, TMVar a is essentially TVar (Maybe a) with the added constraint that the standard read function blocks on Nothing
18:03:50 <lars9> quoted from haskellwiki
18:04:03 <copumpkin> hatds: I don't think that's right
18:04:12 <hatds> copumpkin: what's the rule then?
18:04:15 <koninkje> But there is a function on TMVar a which returns a Maybe a without blocking
18:04:16 <Cale> There were two sorts of synchronous variables in concurrent ML
18:04:31 <copumpkin> hatds: safe will block shit and let it call back into haskell (that's why it's blocking, to avoid messes)
18:04:45 <Cale> MVars and IVars
18:04:45 <copumpkin> unsafe will not block anything but it really shouldn't call back into haskell
18:04:47 <copumpkin> or shit might happen
18:04:56 <Cale> MVars were mutable, IVars were write-once.
18:05:01 <copumpkin> hatds: but even seasoned haskellers need to keep looking it up
18:05:08 <copumpkin> someone should really fix the naming of that thing
18:05:24 <lars9> Cale: i guess mutable makes more sense here
18:05:26 <Cale> (I probably shouldn't be using the past tense... people still use Concurrent ML :)
18:05:28 <ezyang> copumpkin: What do you mean by block? 
18:05:30 <hatds> copumpkin: if it is *marked* as safe in foreign import then according to control.concurrent "With the -threaded option, only foreign calls with the unsafe attribute will block all other threads."
18:05:43 <hatds> copumpkin: I'm reading that from http://www.haskell.org/ghc/docs/6.12.2/html/libraries/base-4.2.0.1/Control-Concurrent.html
18:05:46 <Cale> But mutex isn't a bad answer either.
18:05:57 * copumpkin gives up
18:06:01 <copumpkin> hatds: I have no clue :P
18:06:02 <hatds> is that wrong?
18:06:13 <hatds> you have no clue if that is control.concurrent is correct?
18:06:19 <koninkje> hatds: a bit wrong, yes
18:06:21 <dankna> yeah - I looked at that passage a while back
18:06:33 <dankna> and it seemed to be precisely backwards with what was being said on the mailing list
18:06:36 <dankna> so I went with the latter
18:06:47 <dankna> but I didn't save a link to it :/
18:06:55 <copumpkin> hatds: that doc might be wrong
18:07:10 <copumpkin> but I really don't know
18:07:23 <copumpkin> the naming is so bad everyone gets it backwards, even documentation writers!
18:07:28 <copumpkin> or I just have it all wrong
18:07:31 <copumpkin> which is why I'll stop talking now
18:07:47 <dankna> actually, now that I think of it I looked at the source too.  I really should have written a blog post or something after figuring it out, since clearly I didn't find the result of my research to be memorable :(
18:07:48 <hatds> so I'm going to try to state the rule:  if a function might callback then you must mark it as 'safe' or bad things will happen.  If it won't callback then there is a choice, and marking it as _safe_ will block all threads and be (slower/faster?)
18:08:01 <dankna> hatds: say rather
18:08:20 <dankna> If a function might callback then you must mark it as 'safe' or bad things will happen.  If it won't callback then there is a choice, but none of us are sure which way aroundthe choice is.
18:08:33 <koninkje> hatds: first part is correct, callbacks require "safe". second is wrong
18:08:41 <hatds> does everyone agree with dankna?
18:08:41 <dolio> unsafe is supposed to be faster.
18:08:58 <koninkje> hatds: it's right about having a choice, but wrong about what the choice means
18:09:35 <hatds> koninkje: what do you think the choice means
18:10:50 <koninkje> hatds: choosing "unsafe" saves ~100 cycles, and means the OS thread will retain control of its "capability" while executing the C code. Therefore, if you only have one capability, it blocks all GHC threads. If you have more than one capability, then other GHC threads can still run with those
18:11:53 <koninkje> hatds: Choosing "safe" means the capability is returned to GHC while the OS thread runs the C code. Thus, if you have only one capability but multiple OS threads then other GHC threads can run.
18:12:40 <koninkje> The short version: in non-threaded programs "unsafe" blocks the world, whereas "safe" does not
18:14:07 <koninkje> Whereas in multi-threaded programs the semantics are more complex. But "unsafe" only blocks the current capability, not all GHS threads.
18:14:14 <hatds> say it is marked as safe, there is one capability and I want other unbound threads to run? will that happen?
18:14:54 <koninkje> I don't know much about the implementation of bound/unbound threads, but I believe so
18:15:07 <hatds> okay, thanks
18:15:32 <koninkje> IIRC, bound GHC threads means the GHC thread (and its capability) are pinned to one OS thread?
18:16:00 <hatds> I don't know how it manages capabilities, but bound GHC threads are those created with forkOS
18:16:02 <copumpkin> I think it just guarantees that FFI calls from a bound thread always occur from the same OS thread
18:16:21 <hatds> yes, that's what I think too
18:16:25 <mikeg> ddarius: http://hpaste.org/41686/binary_search_with_mmap ( just fyi :) )
18:16:46 <koninkje> Generally speaking you should only use "unsafe" for very quick calls to pure C code. E.g., when calling mathematical functions like log1p or expm1
18:17:48 <koninkje> And if you only use "unsafe" for those kinds of calls then everything will work as expected (maximizing parallelism without crashing things)
18:28:09 * koninkje thinks removing the need to declare some FFI calls "safe" would remove the confusion
18:30:44 <dolio> Isn't "safe" the default in the FFI spec?
18:30:48 <dolio> If you don't specify.
18:30:49 <hatds> yes
18:38:28 <kwantam> hum, well, I kind of hacked the recursive type solution to the lApply problem, except that you have to lift your function into the recursive type, and that requires a specific lift for functions of a particular number of arguments. so it really isn't a complete solution.
18:39:33 <kwantam> for example, data RecT a = RecR a | RecC (a -> RecT a)
18:39:38 <kwantam> then
18:39:49 <kwantam> lift1RecT :: (a -> a) -> RecT a
18:39:59 <kwantam> lift1RecT fn = RecC $ \a -> RecR $ fn a
18:40:03 <kwantam> et cetera
18:41:15 <kwantam> then you can easily apply lists since now when you unroll one layer of function call, the function still has type RecT a
18:41:30 <kwantam> but honestly this just pushes the bubble to the "liftNRecT" functions
18:42:02 <tomberek> hey, when is it prudent to use a data family as opposed to a type family?
18:42:32 <copumpkin> tomberek: they're quite different
18:42:36 <tomberek> I understand that data families are injective
18:43:12 <copumpkin> if you define a datatype that only ever gets used through a type family application
18:43:23 <copumpkin> and your type family only ever has such datatypes as its codomain
18:43:25 <copumpkin> then make it a data family
18:43:32 <copumpkin> since it'll be strictly better :P
18:43:45 <tomberek> copumpkin: better how?
18:43:51 <copumpkin> it's injective :P
18:44:03 <copumpkin> assuming only one type family domain value maps to those datatypes
18:45:33 <tomberek> copumpkin: so the ability to use them outside of the typeclass/family is the advantage of the type family style?
18:45:53 <copumpkin> I guess, but they're still kind of different
18:46:03 <copumpkin> so I wouldn't say one is strictly better than the other in either direction
18:46:45 <tomberek> copumpkin: well, how about this: when you are deciding which to use, how do you decide?d
18:47:05 <tomberek> is it just injective vs not injective? or is there a deeper reasoning involved?>
18:48:00 <copumpkin> hmm
18:48:08 <lars9> how to limit a in data Point a = (a, a) to be a Num?
18:48:20 <copumpkin> I'm having difficulty coming up with a decent explanation of when to use which
18:48:44 <copumpkin> tomberek: I tend to think of type families as being fully free type functions
18:48:49 <copumpkin> and data families as being a family of related types
18:48:59 <copumpkin> not that that really helps much
18:49:15 <Cale> lars9: That's not valid syntax already, because there's no data constructor...
18:49:31 <Cale> lars9: You can write  data (Num a) => Point a = P a a
18:49:42 <Cale> But this doesn't mean what you probably want it to mean
18:49:44 <tomberek> copumpkin: yeah, i try to use them as functions, so I'm not sure when data families are applicable
18:50:05 <copumpkin> tomberek: I can give you some examples 
18:50:10 <Cale> (It restricts the type of P without relieving functions which pattern match on P from having their own typeclass contexts.)
18:51:02 <Cale> lars9: If you're willing to use extensions...
18:51:07 <Cale> data Point a where
18:51:14 <lars9> Cale: data (Num a) => Point a = P a a looks good to me
18:51:15 <Cale>   P :: (Num a) => a -> a -> Point a
18:51:50 <lars9> Cale: what syntax is this?
18:51:54 <Cale> That's better, in that functions which take Point a values as parameters can assume that Num a, without having to specify it in their types.
18:51:57 <Cale> GADT syntax.
18:52:07 <copumpkin> tomberek: one common application of data families is if you want the underlying representation of a datastructure to vary on its parameters. For example, vector represents vectors of pairs as a pair of vectors, through a data family. Vectors of primitive types are just wrappers for primitive arrays. I recently wrote the skeleton of a graph library where the graphs are parametrized by how you intend to use them. So that would mean that the param
18:52:07 <copumpkin> d to different underlying datastructures, and is also a data family
18:52:46 <lars9> Cale: oh that's the famous GADT, it's really good
18:52:48 <copumpkin> tomberek: another application I had was to have subfamilies of instruction sets for ARM. data instance Instruction Core = MOV | LDR | STR etc.
18:53:09 <copumpkin> data instance Instruction SIMD = MOVLOTS | ADDLOTS | ADDMULLOTS etc.
18:53:23 <copumpkin> of course those aren't ARM instructions, but I didn't want to bore you with specifics :P
18:54:03 <copumpkin> tomberek: so really, any time you want an extensible family of related types
18:54:21 <osaunders> I don't like that there's fmap and <$>.
18:54:23 <tomberek> i see, this is if you want your type to be used ONLY in the context of the family/typeclass
18:54:25 <copumpkin> tomberek: http://hackage.haskell.org/trac/ghc/wiki/ObjectiveC/TypeSafeMessaging is another example I came up with
18:54:34 <tomberek> copumpkin: can I see that graph library btw?
18:54:42 <copumpkin> tomberek: it's "in flux"
18:54:52 <copumpkin> meaning I started refactoring it and broke it
18:55:03 <copumpkin> so there's not much there right now
18:55:06 <copumpkin> but I'll work on it soon
18:55:36 <tomberek> that's ok, i just want to see it,, to see what sorts of things you need/inluded.  I'm still interested in reworking a proper graph library, but it's a chicken-egg problem
18:57:49 <copumpkin> http://hpaste.org/41687/ugly_graphs
18:58:03 <copumpkin> I took out the edge labeling stuff cause I didn't like it
18:58:06 <copumpkin> and haven't put it back in
18:58:31 <copumpkin> it's horribly verbose
18:58:38 <copumpkin> but isn't exactly meant to be user-facing right now
18:59:55 <tomberek> copumpkin: i'll try to see how your code would fit into what I have, and if having a library would have helped you at all
18:59:59 <dankna> "Horribly verbose" is a contradiction in terms :D
19:00:03 <dankna> you can never have too much verbosity :D
19:00:10 <copumpkin> oh yes you can!
19:00:13 <copumpkin> eww
19:00:14 <tomberek> danka: Assembly is "horribly verbose"
19:00:15 <dankna> well, we had that conversation hahaha
19:00:20 <dankna> well, okay, point taken re assembly
19:03:02 <ivanm> Does anyone see any problems if I remove the option of specifying Separators from here and just using the first from the specified LayerSep list of values?
19:03:05 <ivanm> http://hackage.haskell.org/packages/archive/graphviz/2999.10.0.1/doc/html/Data-GraphViz-Attributes.html#t:LayerList
19:03:29 <jaredj> @pl \x y -> compare (fst x) (fst y)
19:03:29 <lambdabot> (. fst) . compare . fst
19:03:47 <Veinor> isn't that just compare `on` fst
19:03:52 <ivanm> yup
19:03:53 <copumpkin> yep
19:03:55 <copumpkin> or comparing fst
19:03:57 <jaredj> what is this `on` of which you speak
19:04:02 <jaredj> i wish to subscribe to your newsletter
19:04:03 <ivanm> @hoogle on
19:04:03 <lambdabot> Data.Function on :: (b -> b -> c) -> (a -> b) -> a -> a -> c
19:04:03 <lambdabot> Text.PrettyPrint.HughesPJ OneLineMode :: Mode
19:04:03 <lambdabot> Text.Parsec.Char oneOf :: Stream s m Char => [Char] -> ParsecT s u m Char
19:04:12 <ivanm> @where mailing-list
19:04:12 <lambdabot> I know nothing about mailing-list.
19:04:14 <ivanm> @where cafe
19:04:14 <lambdabot> I know nothing about cafe.
19:04:16 <ivanm> bah
19:04:20 <ivanm> @google haskell mailing lists
19:04:21 <lambdabot> http://www.haskell.org/haskellwiki/Mailing_Lists
19:04:21 <lambdabot> Title: Mailing lists - HaskellWiki
19:04:26 <ivanm> jaredj: ^^
19:04:32 <osaunders> @where haskell-cafe
19:04:32 <lambdabot> http://www.haskell.org/mailman/listinfo/haskell-cafe
19:04:38 <jaredj> o_o
19:04:40 <jaredj> oh
19:04:41 <jaredj> ^_^
19:04:57 <osaunders> @where am I?
19:04:57 <lambdabot> I know nothing about am.
19:05:19 <osaunders> You and me both, lambdabot
19:05:30 <ivanm> osaunders: well, /whois indicates that you're using a USA ISP...
19:05:38 <ivanm> (if I'm reading it properly)
19:06:27 <osaunders> That's not very specific though.
19:08:09 <ivanm> true
19:08:21 <ivanm> you could always look outside, ask someone where you are, etc. ...
19:08:34 <ivanm> (as in ask someone in person who looks like they know where you are)
19:08:40 <osaunders> Oh, no, I don't go outside.
19:09:08 <osaunders> There's not enough Haskell out there.
19:09:20 <ivanm> heh
19:09:22 <dankna> traceroute is a useful tool then :D
19:09:45 <jaredj> @hoogle Int -> [a] -> ([a], [a])
19:09:45 <lambdabot> Prelude splitAt :: Int -> [a] -> ([a], [a])
19:09:46 <lambdabot> Data.List splitAt :: Int -> [a] -> ([a], [a])
19:09:46 <lambdabot> Data.List genericSplitAt :: Integral i => i -> [b] -> ([b], [b])
19:09:54 <osaunders> If I do ever have to go outside I go clutching a print out of the Prelude. It makes me feel safe.
19:10:56 <djahandarie> unsafePerformRealLife
19:11:32 <ivanm> well, since no-one said it was a bad idea, out go the specified separators in http://hackage.haskell.org/packages/archive/graphviz/2999.10.0.1/doc/html/Data-GraphViz-Attributes.html#t:LayerList
19:11:48 <alex404_> djahandarie: Never use that. It's bad practice.
19:11:56 <alex404_> Stay in your head. Pure. All the time.
19:15:21 <osaunders> alex404_: That's quite similar to Taoist belief.
19:15:55 * Saizan fix unsafePerformDream
19:16:04 <osaunders> Which is to try to have as little effect on the world as possible; satisfying your needs but never your desires.
19:16:12 <osaunders> Eliminating your desires.
19:16:50 <osaunders> But it's all about minimalism so I think a very pure Scheme would be a good programming language for a Taoist.
19:17:53 <jaredj> so i'm writing a genetic algorithm
19:18:12 <jaredj> and i want to make some sort of error condition if the whole population has no variation in fitness
19:18:22 <jaredj> is this a case for Either?
19:19:31 <jaredj> and given that it's happening inside the Random monad, is this a case for melding Random and Either using transformers?
19:20:00 <osaunders> jaredj: Use Either if you want to have some data reporting the nature of the error, otherwise use Maybe.
19:20:10 <jaredj> ok
19:20:49 <jaredj> the function i'm writing does one generation so i think i want to use Either as a monad
19:21:20 <jaredj> this may be the first time i've transformed a monad
19:26:39 <lars9> jaredj: i've done my 1st transformation several days ago, quite good experience
19:27:01 <osaunders> Is this page as scary as it looks? http://en.wikibooks.org/wiki/Haskell/Category_theory
19:27:28 <danharaj> no
19:27:44 <kwantam> scary? look at all those pretty pictures!
19:27:56 <infinite8s> does the author of learnyouahaskell hang out here?
19:28:08 <kwantam> when he does, he's known as bonus
19:28:24 <kwantam> and apparently yes is the answer
19:28:29 <kwantam> (at the moment, I mean)
19:29:29 <Cale> preflex: seen BONUS
19:29:29 <preflex>  BONUS was last seen on #haskell 6 days, 4 hours, 49 minutes and 56 seconds ago, saying: to reflect the slight interface changes
19:30:03 <lars9> preflex: help
19:30:03 <preflex>  try 'help help' or see 'list' for available commands
19:30:11 <lars9> preflex: list
19:30:11 <preflex>  Botsnack: [botsnack]; Cdecl: [cdecl]; 8ball: [8ball]; Factoid: [+, -, ., ?, delete, get, store]; Help: [help, list]; Karma: [++, --, karma, karmabot, karmatop]; Nickometer: [nickometer]; Nickr: [nickr]; Seen: [seen]; Sixst: [6st]; Tell: [ask, clear-messages, messages, tell]; Rot13: [rot13]; Quote: [be, quote, remember]; WCalc: [calc, wcalc]; Version: [version]; XSeen: [xseen]; ZCode: [zdec, zenc]
19:30:36 <lars9> preflex: seen lars9
19:30:36 <preflex>  lars9 was last seen on #haskell 25 seconds ago, saying: preflex: list
19:31:02 <Cale> preflex: seen preflex
19:31:03 <preflex>  what
19:31:26 <monochrom> you can't diagonalize preflex :)
19:31:41 <monochrom> @vixen I want to diagonalize you
19:31:42 <lambdabot> how's the weather over there?
19:31:56 <monochrom> diagonalization completed. she's gone crazy.
19:36:43 <osaunders> @quote drug addict
19:36:44 <lambdabot> No quotes for this person. I feel much better now.
19:36:49 <osaunders> @quote addict
19:36:49 <lambdabot> seydar says: what's the nick of the drug addict who wrote learn you a haskell? and i mean that in the best possible way.
19:41:33 * hackagebot relit 0.1.0 - Literal for regular expression  http://hackage.haskell.org/package/relit-0.1.0 (KazuYamamoto)
19:53:55 <osaunders> I'm going to use -> in prefix syntax in all my type signatures just to confuse everyone.
19:54:09 * osaunders rebels
19:56:50 <Axman6> map :: ((->) ((->) a b) ((->) [a] [b]))?
19:56:55 * shachaf wishes sections worked with (->).
19:59:19 <djahandarie> Why stop there? Use Arrows or Categorys in its place
20:20:17 <ddarius> Axman6: All wrong.  map :: (->) ((->) a b) ((->) ([] a) ([] b))
20:29:03 <ivanm> I'm having some problems (well, actually I got a bug report) about FilePaths not acting correctly cross-platform; namely someone used SourceGraph on Windows and tried putting the result on the web... and it didn't work because of the "graphs" </> "foo.png" links, etc. :s
20:29:10 <ivanm> is there any nice way of dealing with this?
20:30:06 <Zao> ivanm: Are you saying that someone used FilePath to generate URLs?
20:30:25 <Axman6> ddarius: excuse me? it was not at all wrong, just not complete
20:30:55 <jaredj> @hoogle EitherT
20:30:55 <lambdabot> No results found
20:30:57 <ivanm> Zao: well, I use FilePath in conjunction with Pandoc to generate html documents... then ended up trying to put it on the web, and the relative links stopped working :s
20:33:34 <ivanm> dammit, a change that makes my library easier to use makes it harder to write QC tests :@
20:35:56 <Zao> ivanm: Sounds like something written by unix hippies.
20:37:38 <ivanm> Zao: what was? SourceGraph?
20:37:40 <ivanm> I wrote it!
20:37:53 <ivanm> as for Pandoc, it doesn't bother checking links, etc.
20:38:26 <ivanm> the problem was he created the document on Windows (so FilePath used \) and then tried uploading it to a website, so the relative links failed because \ isn't a valid path separator
20:39:57 <Zao> ivanm: That's what I'm saying. Someone is using FilePath outside it's scope, which is representing filepaths.
20:41:02 <Zao> Or rather, artifacts from FilePath in a context where they do not globally make sense.
20:50:15 <ivanm> Zao: *nod*
20:52:11 <jaredj> @hoogle [a] -> [(a,a)]
20:52:11 <lambdabot> Test.QuickCheck two :: Monad m => m a -> m (a, a)
20:52:11 <lambdabot> Prelude zip :: [a] -> [b] -> [(a, b)]
20:52:11 <lambdabot> Data.List zip :: [a] -> [b] -> [(a, b)]
20:55:35 <ivanm> *sigh* should I make this type alias back into a newtype/data, or special case it for generating values with QC? :s
20:59:52 <ivanm> is there any potential problems when using TypeSynonymInstances?
21:02:21 <Cale> ivanm: ?
21:02:39 <Cale> ivanm: TypeSynonymInstances doesn't let you do anything magical
21:02:56 <Cale> It just expands type synonyms in instance heads (which you could do by hand)
21:02:59 <ivanm> well, with OverlappingInstances: i.e. having an instance for [a] and for String
21:03:21 <ivanm> *sigh* looks like it is causing a problem, with an overlapping instance for shrink :s
21:03:52 <Cale> newtypes are usually a better idea than synonyms
21:04:10 <Cale> You can use newtype deriving if you just want the same instance as the old type
21:04:22 <ivanm> well, in this case the type synonym is better/easier for the overall library
21:04:31 <ivanm> it's just making it a PITA for the QC instances :s
21:06:23 <ivanm> *sigh* well, people probably won't be using it much anyway, so newtype-ing it is :s
21:11:43 <Cale> ivanm: You could use just a plain newtype wrapper solely for QC
21:11:58 <Cale> ivanm: In fact, QC already includes lots of those for selecting instances.
21:12:03 <ivanm> that would muck up the code generator stuff I have
21:12:19 <Cale> I mean, to be used only when people write their quickcheck instances.
21:12:24 <Cale> er, properties
21:12:32 <ivanm> well, the properties are already there
21:13:54 <jmcarthur> IMO if something has properties worth testing in isolation from the pieces of its implementation then it's worth wrapping in a newtype
21:14:27 <ivanm> jmcarthur: this is one small data type that's used as a field of a much larger data type
21:14:33 <ivanm> it isn't worth testing on its own
21:14:36 <dmwit> > 4/3 > 7/5
21:14:37 <lambdabot>   False
21:14:46 <jmcarthur> because that being the case implies that it has semantics that are distinct from that which would arise naturally from whatever composition it is made from
21:14:57 <ivanm> the old version of the type is http://hackage.haskell.org/packages/archive/graphviz/2999.10.0.1/doc/html/Data-GraphViz-Attributes.html#t:LayerList
21:15:08 <jmcarthur> that is
21:15:13 <ivanm> I wanted the new version to be just type LayerList = [LayerID]
21:16:11 * jmcarthur shrugs
21:22:35 <jaredj> is there any way to tell the type of a part of an expression that doesn't type check?
21:24:09 <jaredj> i have a like 18-line function that it's hard to take apart
21:24:24 <jaredj> i've checked what i think the types of the pieces are in ghci
21:24:31 <ivanm> the error message from ghc/ghci normally says where the problem is
21:24:37 <ivanm> @hpaste
21:24:37 <lambdabot> Haskell pastebin: http://moonpatio.com/fastcgi/hpaste.fcgi/
21:24:40 <ivanm> gah!
21:24:48 <ivanm> Cale: are you still unable to fix that? ^^ :s
21:24:51 <ivanm> @where hpaste
21:24:51 <lambdabot> http://hpaste.org/
21:24:51 <jaredj> wha, i've never heard of that one
21:25:05 <ivanm> jaredj: ^^ paste the source and the error message for us to have a look at
21:25:40 <jaredj> http://hpaste.org/41689/doesnt_typecheck
21:25:44 <jaredj> oops
21:26:06 <jmcarthur> sometimes when i can't figure out what the compiler thinks the type of a particular expression is i just add an annotation that says it's an Int or something to force GHC to give me an error at that point
21:26:10 <ivanm> hmmm.... what would be a good field name for the (optional) `!' here? file:///usr/share/doc/graphviz-2.26.3-r2/html/info/attrs.html#k:point
21:26:28 <jaredj> ok error added
21:26:58 <jmcarthur> woah that's a dense function
21:27:05 <ivanm> jmcarthur: agreed
21:27:09 <ivanm> jaredj: what's the error message?
21:27:22 <jmcarthur> if you refresh the error message is below
21:29:08 <jaredj> jmcarthur: yeh looking at it i think i may split the do out and put it in the where, so it's just if ... then Right childrens else Left "ack!"
21:29:39 <ivanm> jaredj: can you maybe split that function up into multiple functions?
21:30:08 <jaredj> :d
21:30:09 <kwantam> jaredj, the type of return (mutated ++ notMutated)
21:30:17 <kwantam> is the problem, I should say
21:30:21 <kwantam> what do you expect it to be?
21:30:39 <jaredj> i expect (mutated ++ notMutated) to be [a]
21:31:01 <jmcarthur> i personally wouldn't have allowed the function to grow that large without type checking along the way. you can always stub out incomplete parts of it with undefined (works especially well if you add a type annotation to that part saying what you expect it to be)
21:31:06 <kwantam> instead it's [[a1]] as the error is telling you; 
21:31:22 <jaredj> jmcarthur: ok, cool
21:32:12 <kwantam> so look at the types of the constituents; one assumes that they're [[a1]] instead of [a]; I see how you'd get (m [a]) from that return, but not (m g [a])
21:32:38 <blut> i have a paragraph in my xmonad.hs where apparently always the last file is missing
21:32:41 <blut> i have rearanged them and attached another line and it is always the last one missing
21:33:01 <blut> oh i mean when importing a lib
21:33:24 <jaredj> kwantam: i expect the m to be Rand, which has kind * -> * -> *
21:33:39 <kwantam> blut: are you missing a line termination, or do you have weird line termination characters in your file, i.e., CRLF?
21:33:44 <jaredj> first * being an instance of RandomGen, second * being the type contained
21:34:00 <kwantam> jaredj, OK, I see now, so it should be RandomGen foo [a]
21:34:23 <blut> kwantam: not that i know of
21:34:29 <jaredj> Rand StdGen [a], rather
21:34:38 <kwantam> ah indeed
21:34:39 <blut> kwantam: i am using vim
21:36:53 <blut> you wan't me to poste it?
21:37:16 <kwantam> try :e ++ff=unix
21:37:32 <kwantam> does that reveal any ^Ms at the end of lines?
21:37:54 <kwantam> if not, this is a dead end and you should ignore me :)
21:37:57 <jaredj> poste = post + paste, nice :)
21:38:57 <kwantam> jaredj, can you make a dummy function to check the type of the mapM call to whose result mutated refers?
21:40:02 <jaredj> darnigt
21:40:06 <jaredj> @hoogle on
21:40:06 <lambdabot> Data.Function on :: (b -> b -> c) -> (a -> b) -> a -> a -> c
21:40:06 <lambdabot> Text.PrettyPrint.HughesPJ OneLineMode :: Mode
21:40:06 <lambdabot> Text.Parsec.Char oneOf :: Stream s m Char => [Char] -> ParsecT s u m Char
21:42:37 <jaredj> kwantam: mutated is a [[a]] (??!)
21:42:54 <kwantam> yep, guessed as much from the error message
21:43:03 <kwantam> otherwise ++ wouldn't result in [[a]]
21:43:11 <kwantam> so... why :)
21:43:17 <jaredj> just so
21:44:05 <jaredj> childrens is [[a]]
21:44:41 <jaredj> i can't (++) two zipWithM results
21:46:20 <applicative> blut, making any progress?
21:46:51 <blut> applicative: not really, i have a problem pasting
21:47:13 <jaredj> it type checks! thanks all
21:47:28 <kwantam> congrats jaredj :)
21:47:41 <jaredj> now i can't find out if it works because i have to go to bed :(
21:50:12 * hackagebot yesod 0.6.4 - Creation of type-safe, RESTful web applications.  http://hackage.haskell.org/package/yesod-0.6.4 (MichaelSnoyman)
21:53:12 <blut> http://pastebin.com/ph7MB3ig
21:53:38 <blut> usually the RssReader is commented away
21:56:34 <applicative> wow, stunning xmonad.hs
21:57:39 <blut> as the heading says: pbrisbin's work.
21:57:54 <applicative> what is the difficulty, though, i couldn't follow
21:58:34 <geheimdienst> what's stunning about it?
21:58:58 <blut> i changed something in one of the libs but when i restart xmonad nothing changes. that is because runhaskell runs into errors and doesn't recompile it
21:59:22 <blut> i changed the ScratchPadKeys lib
21:59:42 <blut> http://pastebin.com/ze4Cz0tH
22:00:41 <geheimdienst> blut, could you paste the error message?
22:01:52 <blut> http://pastebin.com/9H2NPXWb
22:02:35 <blut> using -v it looks for SendFile.hs and SendFile.lhs
22:02:49 <geheimdienst> do you have such a file?
22:02:54 <blut> yes
22:03:10 <blut> when i rearange the order of the lines the error changes
22:03:31 <blut> i.e. the lines 18-20 in the xmonad.hs
22:03:36 * geheimdienst scratches his head
22:03:46 <blut> hab ich auch gedacht
22:04:04 <applicative> geheimdienst. I was stunned by its length, but then realized it was no different from mine, mostly stolen from Brent Y
22:05:12 <applicative> so, whatever is on lines 18-20, it claims it cant find?
22:05:13 <geheimdienst> i see :) mine is about the same length. let's have a "mine is longer" contest sometime
22:05:48 <geheimdienst> blut, versuch mal "xmonad --recomile" statt runhaskell
22:06:06 <blut> applicative: no it is always the last line
22:06:24 <blut> when i add another one to the block, like the RssReader, it is that one
22:06:38 <blut> but only my own libs, not the regular ones
22:07:02 <blut> geheimdienst: usually i do that with a restart right?
22:07:15 <blut> and i got no error message for that
22:07:47 <blut> hmm strange
22:07:48 <blut> it worked
22:07:58 <blut> thank you very much
22:07:59 <geheimdienst> recompile does everything except actually restart xmonad. good for testing.
22:08:49 <geheimdienst> i guess when you tell xmonad to recompile, it passes an additional argument to the compiler, saying "don't forget to look inside ~/.xmonad/lib"
22:09:00 <geheimdienst> with runhaskell, you don't have that argument and it can't find the stuff
22:14:56 <applicative> oh i see, I didn't notice the mention of 'runhaskell'; good work geheimdienst
22:15:20 <geheimdienst> run me a haskell for great fail
22:18:03 <ivanm> lol
22:31:11 <ski> copumpkin : apfelmus' operational monad ?
22:31:19 <ski> er
22:31:23 <ski> @tell copumpkin apfelmus' operational monad ?
22:31:23 <lambdabot> Consider it noted.
22:31:46 <ski> or, hm
22:31:50 <ski> pumpkin : ^
22:32:08 <c_wraith> @hackage operational
22:32:09 <lambdabot> http://hackage.haskell.org/package/operational
22:32:25 <c_wraith> woo, I found it! :)
22:32:52 <ski> ah, ty
22:50:38 <cole> I'm having a difficult time installing cabal on my ubuntu linux machine.
22:51:30 <cole> Last time I tried to install cabal it said " Counlt not find module 'Control.Monad': Perhaps you haven't installed the profiling libraries for package 'base'?"
22:51:43 <cole> What does this mean I need to do?
22:52:32 <c_wraith> cole, are you using apt's ghc?
22:52:41 <c_wraith> that's the only way that error message makes any sense at all
22:52:44 <cole> yes.
22:52:56 <c_wraith> yeah, that's going to have lots of stupid problems like that
22:53:07 <cole> Do you have any suggestions?
22:53:09 <c_wraith> you can install the ghc profiling libraries
22:53:21 <c_wraith> there's a package for them
22:53:53 <cole> Will I end up on a wild goose chase installing hundreds of miscellaneous libraries?
22:53:56 <c_wraith> or you can just install the generic ghc linux binaries from haskell.org, instead of using the package manager's
22:55:01 <cole> After I installed those generic libraries, would I then need to download and install cabal from hackage (as I'm doing now)?
22:55:07 <c_wraith> yeah
22:55:15 <c_wraith> but it's not too bad of a process
22:55:28 <c_wraith> just download it and run bootstrap.sh
22:56:20 <kfish> cole, the apt approach is a fairly ordered goose chase, you just install the -prof version of every libghc6-* package you've installed
22:56:37 <kfish> apt-cache search ghc6|grep prof
22:57:02 <kfish> installing your own ghc is more fun tho, for various defns of fun
22:57:06 <kwantam> I actually prefer to get the minimal install via apt and then cabal everything else; compiling individual libraries is relatively quick, whereas compiling all of base is annoying
22:57:43 <kwantam> so get haskell-platform and then add ghc6-prof, then you will have cabal and can cabal update, cabal install cabal-install, and you're off to the races
22:58:32 <kwantam> I think I noticed that the deps in the ghc6_6.12.1-13 package are slightly broken
22:58:53 <c_wraith> kwantam, I really dislike global installs of ghc myself, mostly because I hate having a global package database.  having one just introduces a bunch of extra ways to break things
22:59:03 <kwantam> (on amd64 platform)
22:59:07 <kwantam> c_wraith, totally fair
22:59:23 <kwantam> it's looking like I'll have to break from my preferences in the near future if I want ghc7 any time soon
22:59:46 <kwantam> so I'll probably flush the pipes and go with a completely clean user install of everything
22:59:59 <kwantam> can't wait to build llvm :V
23:00:20 <c_wraith> the llvm stuff does look cool
23:00:48 <kwantam> yes, very excited about that; the portability of ghc will be substantially enhanced
23:01:22 <kwantam> can't wait until I can run ghci on my n900 without hacking the build to hell
23:01:31 <kwantam> (or is that already possible with the debian chroot? I forget...)
23:02:00 <kwantam> anyhow, 'night all.
23:11:49 <djahandarie> Totally off-topic, but maybe someone knows... how would you represent a non-abelian group (e.g., S_3) as a quiver? There would be multiple ways to carve the group algebra into minimal, orthogonal idempotents because of the 2D representation.
23:21:46 <cole> Is qt - haskell interop decent?
23:24:49 <Cale> cole: It's supposed to exist. I've never tried it myself.
23:24:49 <djahandarie> (Maybe Cale? :P)
23:25:14 <djahandarie> Hey, answer my question, not his! :P
23:25:21 <cole> What is the best option for  building gui based apps using haskell?
23:26:15 <Cale> Well, the Gtk2Hs binding is pretty decent and well-supported.
23:26:27 <Cale> What sort of GUI?
23:28:00 <cole> Ehh, well it would be nice to have access to some decent application development frameworks like qt.
23:28:14 <cole> Winforms.
23:28:40 <ivanm> cole: I believe pumpkin is working on a new one; qthaskell is rather dead
23:29:06 <cole> pumpkin?
23:29:20 <ivanm> preflex: seen pumpkin 
23:29:21 <preflex>  pumpkin was last seen on #haskell-blah 8 days, 4 hours, 29 minutes and 28 seconds ago, saying: there, wrote simple folds and fold(l/r)1s too
23:29:29 <djahandarie> preflex, seen copumpkin
23:29:29 <preflex>  copumpkin was last seen on #haskell 4 hours, 25 minutes and 34 seconds ago, saying: or comparing fst
23:29:37 <djahandarie> preflex, seen wisepumpkin
23:29:37 <ivanm> preflex: seen wisepumpkin
23:29:37 <preflex>  wisepumpkin was last seen on #haskell 1 day, 8 hours, 13 minutes and 35 seconds ago, saying: roconnor: your proposal doesn't tell us where we can find the magic Data.Functor.Backwards
23:29:39 <preflex>  wisepumpkin was last seen on #haskell 1 day, 8 hours, 13 minutes and 35 seconds ago, saying: roconnor: your proposal doesn't tell us where we can find the magic Data.Functor.Backwards
23:29:42 <ivanm> preflex: seen contrapumpkin
23:29:43 <preflex>  contrapumpkin was last seen on #haskell 46 days, 11 hours, 3 minutes and 39 seconds ago, saying: djahandarie: how will you lift fix Suc to the type level?
23:30:12 <geheimdienst> preflex: seen *pumpkin
23:30:12 <preflex>  Sorry, I haven't seen *pumpkin
23:30:14 * djahandarie is forever presevered in preflex thanks to that
23:30:28 <ivanm> djahandarie: until the next time someone says something as contrapumpkin... :p
23:30:58 <djahandarie> As to why anyone would use that nick...
23:31:29 <mayahustle> Hi, do you all know of a haskell function to convert windows access times to a regular date? Windows stores access times as " the number of 100-nanosecond intervals that have elapsed since 12:00 A.M. January 1, 1601 Coordinated Universal Time (UTC)"
23:31:59 <mayahustle> I'm trying to store these as a normal looking date in MongoDB
23:32:00 <djahandarie> I think he used it because we were commenting on how cofunctor stood for contravariant functor even though it could stand for covariant functor too
23:35:02 <ivanm> djahandarie: I'm tempted to use it just to remove your preservation... :p
23:35:18 <djahandarie> :(
23:35:27 <djahandarie> preflex, seen mmorrow
23:35:27 <preflex>  mmorrow was last seen on #ghc 308 days, 4 hours, 37 minutes and 40 seconds ago, saying: * mmorrow is rtfm'ing
23:35:31 <djahandarie> No one has done it for him yet!
23:35:43 <djahandarie> Why has no one called him yet?
23:36:16 <ivanm> pumpkin said he was going to
23:36:43 * ivanm wonders if the manual mmorrow was reading was in fact wikipedia, and if he got lost following the chain of links...
23:36:44 <ivanm> :p
23:37:16 <cole> If you were installing ghc on your ubuntu linux machine, where would you place it?
23:37:29 <jamy23> hello
23:37:57 <ski> preflex: seen pumpkin
23:37:58 <preflex>  pumpkin was last seen on #haskell-blah 8 days, 4 hours, 38 minutes and 5 seconds ago, saying: there, wrote simple folds and fold(l/r)1s too
23:38:02 <ski> preflex: seen copumpkin
23:38:03 <preflex>  copumpkin was last seen on #haskell 4 hours, 34 minutes and 8 seconds ago, saying: or comparing fst
23:38:06 <ski> preflex: seen wisepumpkin
23:38:06 <preflex>  wisepumpkin was last seen on #haskell 1 day, 8 hours, 22 minutes and 3 seconds ago, saying: roconnor: your proposal doesn't tell us where we can find the magic Data.Functor.Backwards
23:39:10 * ski notes only now ivanm and djahandarie already did that
23:39:21 <ivanm> cole: I have it in ~/ghc/
23:39:23 <ivanm> ski: lol
23:39:40 <ivanm> cole: but then I don't superuser privileges
23:44:51 <Cale> cole: under /usr/local/
23:45:18 <Cale> (Which I believe is the default)
23:57:56 <havranek78> May someone suggest, which libraries to use for fast and possibly quick implementatio of Short Time Fourier Analysis?
